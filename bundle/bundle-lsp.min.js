"use strict";(()=>{var jo=Object.create;var Wt=Object.defineProperty;var Oo=Object.getOwnPropertyDescriptor;var Tu=Object.getOwnPropertyNames;var yu=Object.getPrototypeOf,ku=Object.prototype.hasOwnProperty;var qo=(o,r)=>(r=Symbol[o])?r:Symbol.for("Symbol."+o),hr=o=>{throw TypeError(o)};var _o=(o,r,e)=>r in o?Wt(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e;var Bo=(o,r)=>Wt(o,"name",{value:r,configurable:!0});var L=(o,r)=>()=>(o&&(r=o(o=0)),r);var Qi=(o,r)=>()=>(r||o((r={exports:{}}).exports,r),r.exports),re=(o,r)=>{for(var e in r)Wt(o,e,{get:r[e],enumerable:!0})},Wo=(o,r,e,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Tu(r))!ku.call(o,n)&&n!==e&&Wt(o,n,{get:()=>r[n],enumerable:!(t=Oo(r,n))||t.enumerable});return o};var vu=(o,r,e)=>(e=o!=null?jo(yu(o)):{},Wo(r||!o||!o.__esModule?Wt(e,"default",{value:o,enumerable:!0}):e,o)),K=o=>Wo(Wt({},"__esModule",{value:!0}),o);var O=o=>{var r;return[,,,jo((r=o==null?void 0:o[qo("metadata")])!=null?r:null)]},Do=["class","method","getter","setter","accessor","field","value","get","set"],ln=o=>o!==void 0&&typeof o!="function"?hr("Function expected"):o,Au=(o,r,e,t,n)=>({kind:Do[o],name:r,metadata:t,addInitializer:i=>e._?hr("Already initialized"):n.push(ln(i||null))}),dn=(o,r)=>_o(r,qo("metadata"),o[3]),B=(o,r,e,t)=>{for(var n=0,i=o[r>>1],s=i&&i.length;n<s;n++)r&1?i[n].call(e):t=i[n].call(e,t);return t},j=(o,r,e,t,n,i)=>{var s,a,l,g,d,u=r&7,p=!!(r&8),m=!!(r&16),c=u>3?o.length+1:u?p?1:2:0,h=Do[u+5],b=u>3&&(o[c-1]=[]),y=o[c]||(o[c]=[]),x=u&&(!m&&!p&&(n=n.prototype),u<5&&(u>3||!m)&&Oo(u<4?n:{get[e](){return f(this,i)},set[e](k){return S(this,i,k)}},e));u?m&&u<4&&Bo(i,(u>2?"set ":u>1?"get ":"")+e):Bo(n,e);for(var T=t.length-1;T>=0;T--)g=Au(u,e,l={},o[3],y),u&&(g.static=p,g.private=m,d=g.access={has:m?k=>Su(n,k):k=>e in k},u^3&&(d.get=m?k=>(u^1?f:C)(k,n,u^4?i:x.get):k=>k[e]),u>2&&(d.set=m?(k,A)=>S(k,n,A,u^4?i:x.set):(k,A)=>k[e]=A)),a=(0,t[T])(u?u<4?m?i:x[h]:u>4?void 0:{get:x.get,set:x.set}:n,g),l._=1,u^4||a===void 0?ln(a)&&(u>4?b.unshift(a):u?m?i=a:x[h]=a:n=a):typeof a!="object"||a===null?hr("Object expected"):(ln(s=a.get)&&(x.get=s),ln(s=a.set)&&(x.set=s),ln(s=a.init)&&b.unshift(s));return u||dn(o,n),x&&Wt(n,e,x),m?u^4?i:x:n},ge=(o,r,e)=>_o(o,typeof r!="symbol"?r+"":r,e),Xi=(o,r,e)=>r.has(o)||hr("Cannot "+e),Su=(o,r)=>Object(r)!==r?hr('Cannot use the "in" operator on this value'):o.has(r),f=(o,r,e)=>(Xi(o,r,"read from private field"),e?e.call(o):r.get(o)),w=(o,r,e)=>r.has(o)?hr("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(o):r.set(o,e),S=(o,r,e,t)=>(Xi(o,r,"write to private field"),t?t.call(o,e):r.set(o,e),e),C=(o,r,e)=>(Xi(o,r,"access private method"),e);var Yn=(o,r,e,t)=>({set _(n){S(o,r,n,e)},get _(){return f(o,r,t)}});var Mo,Dt,Zn=L(()=>{"use strict";Mo=(()=>{let o={redirect:1,onlyinclude:1,noinclude:1,include:1,comment:1,ext:1,arg:2,"magic-word":2,template:2,heading:2,html:3,table:4,hr:5,"double-underscore":5,link:6,category:6,file:6,quote:7,"ext-link":8,"free-ext-link":9,"magic-link":9,list:10,dd:10,converter:11};return Object.setPrototypeOf(o,null),o})(),Dt=(()=>{let o=["arg-in-ext","bold-header","format-leakage","fostered-content","h1","illegal-attr","insecure-style","invalid-gallery","invalid-imagemap","invalid-invoke","invalid-isbn","invalid-json","invalid-url","lonely-apos","lonely-bracket","lonely-http","nested-link","no-arg","no-duplicate","no-ignored","obsolete-attr","obsolete-tag","parsing-order","pipe-like","syntax-like","table-layout","tag-like","unbalanced-header","unclosed-comment","unclosed-quote","unclosed-table","unescaped","unknown-page","unmatched-tag","unterminated-url","url-encoding","var-anchor","void-ext"];return Object.freeze(o),o})()});function $e(o,r,e){return e===1?o.replace(/\0(\d+)g\x7F/gu,(t,n)=>$e(String(r[n]),r,2)):e===2?o.replace(/\0(\d+)n\x7F/gu,(t,n)=>String(r[n])):o.replace(/\0(\d+)\x7F/gu,(t,n)=>r[n])}var We,Uo,tt,rt,nt,un,br,se,Pe,wu,Cu,ei,Mt,Ho,Lu,Eu,Ut,it,ae=L(()=>{"use strict";We=String.raw` \xA0\u1680\u2000-\u200A\u202F\u205F\u3000`,Uo=String.raw`[^[\]<>"\0-\x1F\x7F${We}\uFFFD]`,tt=String.raw`(?:\[[\da-f:.]+\]|${Uo})`,rt=String.raw`(?:${Uo}|\0\d+[cn!~]\x7F)*`,nt=o=>o.trim().toLowerCase();un=(o,r)=>e=>e.replace(o,r),br=un(/[\0\x7F]|\r$/gmu,""),se=un(/\0\d+[cn]\x7F/gu,""),Pe=(o,r="")=>o.map(e=>typeof e=="string"?e:e.text()).join(r),wu={lt:"<",gt:">",lbrack:"[",rbrack:"]",lbrace:"{",rbrace:"}",nbsp:" ",amp:"&",quot:'"'},Cu=un(/&(?:#(\d+|[Xx][\da-fA-F]+)|([lg]t|[LG]T|[lr]brac[ke]|nbsp|amp|AMP|quot|QUOT));/gu,(o,r,e)=>r?String.fromCodePoint(+((/^x/iu.test(r)?"0":"")+r)):wu[e.toLowerCase()]),Mt=o=>(ei!=null||(ei=Cu),ei(o)),Ho=un(/&#(\d+|x[\da-f]+);/giu,(o,r)=>String.fromCodePoint(+((/^x/iu.test(r)?"0":"")+r))),Lu={"&":"amp","<":"lt",">":"gt",'"':"quot","\n":"#10"},Eu=(o=/[&<>"{}[\]|]/gu)=>un(o,r=>`&${Lu[r]};`),Ut=Eu(/[&<>]/gu),it=(o,r={})=>{let{pre:e="",post:t="",sep:n=""}=r;return e+o.map(i=>i.print()).join(n)+t}});var zo=Qi((cp,$u)=>{$u.exports={"argument-in-ext":"template argument inside an extension tag","attributes-of-closing-tag":"attributes of a closing tag","bold-apostrophes":"bold apostrophes","bold-in-header":"bold text in a section header",close:null,"closing-and-self-closing":"tag that is both closing and self-closing",comment:null,"conflicting-image-parameter":"conflicting image $1 parameter","content-outside-table":"content to be moved outside the table",decode:null,delink:null,"duplicate-attribute":"duplicate $1 attribute","duplicate-category":"duplicate category","duplicate-id":"duplicate HTML id","duplicate-image-parameter":"duplicate image $1 parameter","duplicate-parameter":"duplicate template parameter",encode:null,escape:null,expand:null,"ext-in-html":"extension tag in HTML tag attributes",frame:null,"full-width-punctuation":"full-width punctuation","header-in-html":"section header in HTML tag attributes","header-like":"header-like syntax in plain text","horizontal-alignment":null,"html-in-table":"HTML tag in table attributes","illegal-attribute-name":"invalid attribute name","illegal-attribute-value":"invalid attribute value","illegal-module":"invalid Scribunto module name","imagemap-without-image":"<imagemap> without an image","in-url":"$1 in URL","inconsistent-table":"inconsistent table layout","insecure-style":"insecure style","invalid-attribute":"element containing an invalid attribute name","invalid-category":"invalid category name","invalid-content":"invalid content in <$1>","invalid-conversion-flag":"invalid conversion flag","invalid-gallery":"invalid gallery image","invalid-gallery-link":"invalid link in gallery image","invalid-image-parameter":"invalid image parameter","invalid-imagemap-link":"invalid link in <imagemap>","invalid-isbn":"invalid ISBN","invalid-parameter":"invalid parameter of <$1>","invalid-self-closing":"invalid self-closing tag","invalid-thumb":"invalid thumbnail filename","invalid-url":"invalid URL","invisible-triple-braces":"invisible content inside triple braces","italic-apostrophes":"italic apostrophes","left-bracket":"opening bracket","link-in-extlink":"internal link in an external link",lonely:'lonely "$1"',"missing-extension":"missing file extension","missing-function":"missing Scribunto module function name",newline:null,"no-self-closing":"no self-closing","nonzero-tabindex":"nonzero tabindex","nothing-in":"nothing should be in <$1>","obsolete-attribute":"obsolete attribute","obsolete-tag":"obsolete HTML tag",open:null,prefix:null,"pipe-in-link":'additional "|" in the link text',"pipe-in-table":'additional "|" in a table cell',"redirect-like":"redirect-like syntax in a list item","ref-in-link":"<ref> in an internal or external link",remove:null,"template-in-link":"template in an internal link target","unbalanced-in-section-header":"unbalanced $1 in a section header",unclosed:"unclosed $1","unclosed-comment":"unclosed HTML comment","unclosed-quotes":"unclosed quotes","unclosed-table":"unclosed table","unclosed-tag":"unclosed tag","unescaped-query":"unescaped query string in an anonymous parameter","unexpected-argument":"unexpected template argument","unmatched-closing":"unmatched closing tag","unnecessary-encoding":"unnecessary percent-encoding in an internal link",uppercase:null,"useless-attribute":"useless attribute","useless-fragment":"useless fragment","useless-link-text":"useless link text","variable-anchor":"variable anchor in a section header","vertical-alignment":null,whitespace:null}});var Go=Qi((fp,Nu)=>{Nu.exports={ext:[],html:[["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","tr","td","th","q","bdo"],["li","dt","dd"],["br","wbr","hr","meta","link"]],namespaces:{"0":"","6":"File","10":"Template","14":"Category","828":"Module"},nsid:{"":0,file:6,template:10,category:14,module:828},functionHook:["msgnw"],variable:["!","=","pageid","articlepath","server","servername","scriptpath","stylepath"],parserFunction:[{msgnw:"msgnw",pageid:"pageid",articlepath:"articlepath",server:"server",servername:"servername",scriptpath:"scriptpath",stylepath:"stylepath","#language":"language","#special":"special","#speciale":"speciale","#tag":"tag","#formatdate":"formatdate","#dateformat":"formatdate","#invoke":"invoke","#while":"while","#dowhile":"dowhile","#loop":"loop","#forargs":"forargs","#fornumargs":"fornumargs","#if":"if","#ifeq":"ifeq","#switch":"switch","#ifexist":"ifexist","#ifexpr":"ifexpr","#iferror":"iferror","#time":"time","#timel":"timel","#expr":"expr","#rel2abs":"rel2abs","#titleparts":"titleparts","#categorytree":"categorytree","#urldecode":"urldecode","#choose":"choose","#var":"var","#varexists":"varexists","#var_final":"var_final","#vardefine":"vardefine","#vardefineecho":"vardefineecho","#widget":"widget","#related":"related","#regex":"regex","#regex_var":"regex_var","#regexquote":"regexquote","#regexall":"regexall","#len":"len","#pos":"pos","#rpos":"rpos","#sub":"sub","#count":"count","#rmatch":"rmatch","#rreplace":"rreplace","#replace":"replace","#rsplit":"rsplit","#explode":"explode","#tab":"tab","#seo":"seo","#babel":"babel","#translation":"translation","#commaseparatedlist":"commaseparatedlist","#coordinates":"coordinates","#lst":"lst","#lsth":"lsth","#lstx":"lstx","#assessment":"assessment","#mentor":"mentor","#property":"property","#target":"target","#section":"lst","#section-x":"lstx","#section-h":"lsth","#statements":"statements","#useliquidthreads":"useliquidthreads","#lqtpagelimit":"lqtpagelimit","#avatar":"avatar","#img":"img","#chart":"chart"},{"!":"!","=":"=","#FORMAL":"formal","#bcp47":"bcp47","#dir":"dir","#interwikilink":"interwikilink","#interlanguagelink":"interlanguagelink","#contentmodel":"contentmodel","#isbn":"isbn","#timef":"timef","#timefl":"timefl"},["msg","raw"],["subst","safesubst"]],doubleUnderscore:[[],[]],protocol:"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|matrix:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|wikipedia://|worldwind://|xmpp:",interwiki:[],img:{},redirection:["#redirect"],variants:[]}});var Vo,Qo,gn,Ji,ti=L(()=>{"use strict";Vo=zo(),Qo=new Set(["alt","link","lang","page","caption"]),gn=new Set(["tiff","tif","png","gif","jpg","jpeg","webp","xcf","pdf","svg","djvu"]),Ji=Go()});function Be(o){let r=new Map,e=new WeakMap;return t=>{let n=typeof t=="string"?r:e;if(n.has(t)){let s=n.get(t);return s.lastIndex=0,s}let i=o(t);return n.set(t,i),i}}var Ht,Xo,Iu,Jo,ri,Ki,Fu,Ko,He=L(()=>{"use strict";Ht=o=>decodeURIComponent(o.replace(/%(?![\da-f]{2})/giu,"%25")),Xo=o=>Math.round(o*255).toString(16).padStart(2,"0"),Iu=(()=>{let o=String.raw`#(?:[\da-f]{3,4}|(?:[\da-f]{2}){3,4})(?![\p{L}\p{N}_])`,r=String.raw`(?:\d*\.)?\d+%?`,e=String.raw`(?:\d*\.)?\d+(?:deg|grad|rad|turn)?`,t=String.raw`rgba?\(\s*(?:${String.raw`${new Array(3).fill(r).join(String.raw`\s+`)}(?:\s*\/\s*${r})?`}|${String.raw`${new Array(3).fill(r).join(String.raw`\s*,\s*`)}(?:\s*,\s*${r})?`})\s*\)`,n=String.raw`hsla?\(\s*(?:${String.raw`${e}\s+${r}\s+${r}(?:\s*\/\s*${r})?`}|${String.raw`${e}${String.raw`\s*,\s*(?:\d*\.)?\d+%`.repeat(2)}(?:\s*,\s*${r})?`})\s*\)`;return{full:new RegExp(String.raw`(^|[^\p{L}\p{N}_])(${o}|${t}|${n})`,"giu"),rgb:new RegExp(String.raw`(^|[^\p{L}\p{N}_])(${o}|${t})`,"giu")}})(),Jo=(o,r=!0)=>{let e=[],t=Iu[r?"full":"rgb"];t.lastIndex=0;let n=t.exec(o),i=0;for(;n;){let s=n.index+n[1].length;s>i&&e.push([o.slice(i,s),i,s,!1]),{lastIndex:i}=t,e.push([n[2],s,i,o[s-1]!=="&"||!/^#\d+$/u.test(n[2])]),n=t.exec(o)}return o.length>i&&e.push([o.slice(i),i,o.length,!1]),e};ri=o=>{let r=[],e=0;for(let t of o.split(`
`)){let n=e+t.length;r.push([t,e,n]),e=n+1}return r},Ki=o=>o&&Number(o[1]),Fu=(o,r)=>{var n;let e,t=i=>{e!=null||(e=ri(o));let s=e.findIndex(([,,a])=>i<=a)+1;return{line:s,column:i-e[s-1][1]+1}};for(let i of r){let{line:s,column:a,from:l,to:g}=i;l==null?s?(e!=null||(e=ri(o)),(n=i.column)!=null||(i.column=1),i.from=e[s-1][1]+(i.column-1)):(i.from=0,i.line=1,i.column=1):(!s||!a)&&Object.assign(i,t(l)),g!==void 0&&({line:i.endLine,column:i.endColumn}=t(g)),i.position=i.from}return r},Ko=(o,r)=>{if(r||o.trim())try{JSON.parse(o)}catch(e){let{message:t}=e,n=Ki(/\bline (\d+)/u.exec(t)),i=Ki(/\bcolumn (\d+)/u.exec(t)),s=Ki(/\bposition (\d+)/u.exec(t));return Fu(o,[{message:t,line:n,column:i,from:s,severity:"error"}])}return[]}});var pn,xr,cn,fn,Yi,U,pe=L(()=>{"use strict";U=class{constructor(r,e){w(this,fn);w(this,pn);w(this,xr);w(this,cn);S(this,pn,r),S(this,xr,e)}get start(){return f(this,xr)}get top(){return C(this,fn,Yi).call(this).top}get left(){return C(this,fn,Yi).call(this).left}};pn=new WeakMap,xr=new WeakMap,cn=new WeakMap,fn=new WeakSet,Yi=function(){var r;return(r=f(this,cn))!=null||S(this,cn,f(this,pn).getRootNode().posFromIndex(f(this,xr))),f(this,cn)}});var Ru,Pu,Tr,yr,Yo,q,P,ve,kr,_,ni,je,ii,si,oi,vt,st,ai,ze,li,z=L(()=>{"use strict";He();Ae();pe();M();Ru=new Set(["tr","td","th","caption"]),Pu=new Set(["Template:!!","Template:!-"]),Tr=o=>{let r=o.childNodes.find(e=>e.text().trim());if(!r||r.type==="text"&&r.data.trim().startsWith("!")||r.is("magic-word")&&r.name==="!"||r.is("template")&&Pu.has(r.name)||r.is("html")&&Ru.has(r.name))return!1;if(r.is("arg"))return r.length>1&&Tr(r.childNodes[1]);if(r.is("magic-word"))try{let e=r.getPossibleValues().map(Tr);return e.includes(2)?2:e.includes(1)&&1}catch{}return r.is("template")||r.is("magic-word")&&r.name==="invoke"?1:2},yr=(o,r,e,t)=>({line:o+e-1,character:(e===1?r:0)+t}),Yo=o=>(r,e,t,n,i="error")=>{let{start:s}=e,{top:a,left:l}=e instanceof U?e:new U(r,s),{offsetHeight:g,offsetWidth:d}=r,{startIndex:u,startLine:p,startCol:m}=o(r,s,a,l),{line:c,character:h}=yr(p,m,g,d);return{rule:t,message:v.msg(n),severity:i,startIndex:u,endIndex:u+r.toString().length,startLine:p,endLine:c,startCol:m,endCol:h}},q=Yo((o,r,e,t)=>{let n=o.getRelativeIndex(),{top:i,left:s}=o.parentNode.posFromIndex(n);return{startIndex:r+n,startLine:e+i,startCol:i?s:t+s}}),P=Yo((o,r,e,t)=>({startIndex:r,startLine:e,startCol:t})),ve=(o,r,e,t=0)=>({desc:v.msg(r),range:[o.startIndex+t,o.endIndex],text:e}),kr=(o,r,e)=>({desc:v.msg(r),range:[o,o],text:e}),_=(o,r=0,e="")=>typeof o=="number"?{desc:v.msg("remove"),range:[o,o+r],text:e}:ve(o,"remove",e,r),ni=(o,r)=>ve(o,"decode",Ht(r.text().replace(/%(?=21|3[ce]|5[bd]|7[b-d])/giu,"%25"))),je=(o,r,e=0)=>({desc:v.msg("close"),range:[o+e,o],text:r}),ii=o=>({desc:v.msg("open"),range:[o+1,o+2],text:""}),si=(o,r)=>ve(o,"comment",`<!--${r}-->`),oi=(o,r)=>ve(o,"uppercase",r.toUpperCase()),vt=(o,r=0)=>({desc:v.msg("whitespace"),range:[o,o+r],text:" "}),st=(o,r,e=1)=>({desc:v.msg("escape"),range:[o,o+e],text:r.repeat(e)}),ai=(o,r)=>({desc:v.msg("escape"),range:[o,o+r.length],text:r.replace(/\|/gu,"&#124;")}),ze=(o,r,e,t)=>{if(o&&(t||v.viewOnly&&o[0]===J.rev))return o[1];let n=r();return(t||v.viewOnly)&&e([J.rev,n]),n},li=(o,r)=>o==="ol"&&r==="type"?["1","a","A","i","I"]:o==="th"&&r==="scope"?["row","col","rowgroup","colgroup"]:r==="dir"?["ltr","rtl","auto"]:r==="aria-hidden"?["true","false"]:[]});var Bu,di,Zi=L(()=>{"use strict";Bu=o=>{if(o.includes("#")){let r=o.indexOf("#"),e=o.slice(0,r),t=o.slice(r+1);return(n,i)=>(r===0||n===e)&&i===t}return r=>r===o},di=(o,r,e)=>{if(o=o.trim(),!o)return(()=>!0);let t=o.split(",").map(n=>n.trim()).filter(n=>n!=="").map(Bu);return(({type:n,name:i})=>t.some(s=>s(n,i)))}});var ea=Qi((wp,Zo)=>{Zo.exports=function(o,r,e,t,n){var i,s;if(t===void 0)t=0;else if(t=t|0,t<0||t>=o.length)throw new RangeError("invalid lower bound");if(n===void 0)n=o.length-1;else if(n=n|0,n<t||n>=o.length)throw new RangeError("invalid upper bound");for(;t<=n;)if(i=t+(n-t>>>1),s=+e(o[i],r,i,o),s<0)t=i+1;else if(s>0)n=i-1;else return i;return~t}});var ta,ra,na=L(()=>{"use strict";ta=vu(ea()),ra=(o,r,e)=>{let t=(0,ta.default)(o,r,e);return t<0?~t:t}});var vr,ui=L(()=>{"use strict";z();vr=(o=!0)=>r=>{let e=new WeakMap;return function(...t){return ze(e.get(this),()=>r.apply(this,t),n=>{e.set(this,n)},o)}}});var ia,sa=L(()=>{"use strict";ia=o=>{class r extends o{get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes[this.childNodes.length-1]}get offsetHeight(){return this.getDimension().height}get offsetWidth(){return this.getDimension().width}}return r}});var oa,aa,hn,Ar,Sr,bn,wr,Cr,mn,Ge,es=L(()=>{"use strict";He();na();z();Ae();ui();sa();M();aa=[ia],oa=[vr(!1)];Ge=class{constructor(){B(mn,5,this);ge(this,"childNodes",[]);w(this,hn);w(this,Ar);w(this,Sr);w(this,bn);w(this,wr);w(this,Cr,{})}get parentNode(){return f(this,hn)}get nextSibling(){return f(this,Ar)}get previousSibling(){return f(this,Sr)}getChildNodes(){let{childNodes:r}=this;return Object.isFrozen(r)?[...r]:r}getAttribute(r){return r==="padding"?0:this[r]}setAttribute(r,e){switch(r){case"parentNode":S(this,hn,e),e||(S(this,Ar,void 0),S(this,Sr,void 0));break;case"nextSibling":S(this,Ar,e);break;case"previousSibling":S(this,Sr,e);break;case"aIndex":v.viewOnly&&S(this,wr,[J.rev,e]);break;default:this[r]=e}}getRootNode(){return ze(f(this,bn),()=>{var r,e;return(e=(r=this.parentNode)==null?void 0:r.getRootNode())!=null?e:this},r=>{let[,e]=r;e.type==="root"&&S(this,bn,r)})}indexFromPos(r,e){{if(r<0||e<0)return;let t=this.getLines();if(r>=t.length)return;let[,n,i]=t[r],s=n+e;return s>i?void 0:s}}posFromIndex(r){{let{length:e}=String(this);if(r+=r<0?e:0,r>=0&&r<=e){let t=this.getLines(),n=ra(t,r,([,,i],s)=>i-s);return{top:n,left:r-t[n][1]}}return}}getDimension(){{let r=this.getLines(),e=r[r.length-1];return{height:r.length,width:e[2]-e[1]}}}getGaps(r){return 0}getRelativeIndex(r){if(r===void 0){let{parentNode:e}=this;return e?e.getRelativeIndex(e.childNodes.indexOf(this)):0}return ze(f(this,Cr)[r],()=>{let{childNodes:e}=this,t=r+(r<0?e.length:0),n=this.getAttribute("padding");for(let i=0;i<t;i++)v.viewOnly&&(f(this,Cr)[i]=[J.rev,n]),n+=e[i].toString().length+this.getGaps(i);return n},e=>{f(this,Cr)[r]=e})}getAbsoluteIndex(){return ze(f(this,wr),()=>{let{parentNode:r}=this;return r?r.getAbsoluteIndex()+this.getRelativeIndex():0},r=>{S(this,wr,r)})}getBoundingClientRect(){return{...this.getDimension(),...this.getRootNode().posFromIndex(this.getAbsoluteIndex())}}is(r){return this.type===r}getLines(){return ri(String(this))}seal(r,e){{if(v.internal)return;let t=!e&&!!this[r];t||Object.defineProperty(this,r,{enumerable:t,configurable:!0})}}lspError(r){throw new Error(`${r} method is only available in the LSP version!`)}};mn=O(null),hn=new WeakMap,Ar=new WeakMap,Sr=new WeakMap,bn=new WeakMap,wr=new WeakMap,Cr=new WeakMap,j(mn,1,"getLines",oa,Ge),Ge=j(mn,0,"AstNode",aa,Ge),B(mn,1,Ge)});var la,da=L(()=>{"use strict";Zi();la=o=>{var r,ts;{class t extends o{constructor(){super(...arguments);w(this,r)}getElementBy(s){let a=[...this.childNodes].reverse();for(;a.length>0;){let l=a.pop(),{type:g,childNodes:d}=l;if(g!=="text"){if(s(l))return l;for(let u=d.length-1;u>=0;u--)a.push(d[u])}}}querySelector(s){return this.getElementBy(C(this,r,ts).call(this,s))}getElementsBy(s){let a=[...this.childNodes].reverse(),l=[];for(;a.length>0;){let g=a.pop(),{type:d,childNodes:u}=g;if(d!=="text"){s(g)&&l.push(g);for(let p=u.length-1;p>=0;p--)a.push(u[p])}}return l}querySelectorAll(s){return this.getElementsBy(C(this,r,ts).call(this,s))}escape(){for(let s of this.childNodes)s.escape()}}return r=new WeakSet,ts=function(s){return di(s,this)},t}}});var ua,rs,ju,zt,ga=L(()=>{"use strict";ae();Ae();Zi();es();da();ua=[la];zt=class extends(ju=Ge){get length(){return this.childNodes.length}text(r){return Pe(this.childNodes,r)}removeAt(r){return Gt(this,r,1)[0]}insertAt(r,e=this.length){return Gt(this,e,0,[r]),r}closest(r){let e=di(r,this),{parentNode:t}=this;for(;t;){if(e(t))return t;({parentNode:t}=t)}}isInside(r){var e;return((e=this.closest(`${r},ext`))==null?void 0:e.type)===r}append(...r){this.safeAppend(r)}safeAppend(r){for(let e of r)this.insertAt(e)}safeReplaceChildren(r){for(let e=this.length-1;e>=0;e--)this.removeAt(e);this.safeAppend([...r])}setText(r,e=0){e+=e<0?this.length:0;let t=this.childNodes[e],{data:n}=t;return t.replaceData(r),n}toString(r,e=""){return this.childNodes.map(t=>t.toString(r)).join(e)}caretPositionFromIndex(r){{if(r===void 0)return;let{length:e}=this.toString();if(r>e||r<-e)return;r+=r<0?e:0;let t=this,n=0,i=0;for(;t.type!=="text";){let{childNodes:s}=t;n+=t.getAttribute("padding");for(let a=0;n<=r&&a<s.length;a++){let l=s[a],{nextSibling:g}=l,d=l.toString(),u=d.length;if(l.setAttribute("aIndex",n),n+=u,n>r||n===r&&u>0&&(!g||g.type==="text"||l.type!=="text"&&(d.trim()||!g.toString().trim()))){t=l,n-=u,i=n;break}n+=t.getGaps(a)}if(t.childNodes===s)return{offsetNode:t,offset:r-i}}return{offsetNode:t,offset:r-i}}this.lspError("AstElement.caretPositionFromIndex")}elementFromIndex(r){var e;{let t=(e=this.caretPositionFromIndex(r))==null?void 0:e.offsetNode;return(t==null?void 0:t.type)==="text"?t.parentNode:t}this.lspError("AstElement.elementFromIndex")}elementFromPoint(r,e){return this.elementFromIndex(this.indexFromPos(e,r))}lint(r=this.getAbsoluteIndex(),e){{let t=[];for(let n=0,i=r+this.getAttribute("padding");n<this.length;n++){let s=this.childNodes[n];s.setAttribute("aIndex",i);let a=s.lint(i,e);a.length>0&&Array.prototype.push.apply(t,a),i+=s.toString().length+this.getGaps(n)}return t}}print(r={}){{let e=r.class;return this.toString()?(e===""?"":`<span class="wpb-${e!=null?e:this.type}${this.getAttribute("invalid")?" wpb-invalid":""}">`)+it(this.childNodes,r)+(e===""?"":"</span>"):""}}json(r,e=1/0,t=this.getAbsoluteIndex()){{let n={...this,type:this.type,range:[t,t+this.toString().length],childNodes:[]};if(e>=1)for(let i=0,s=t+this.getAttribute("padding");i<this.length;i++){let a=this.childNodes[i],{length:l}=a.toString();a.setAttribute("aIndex",s),n.childNodes.push(a.type==="text"?{data:a.data,range:[s,s+l]}:a.json(void 0,e-1,s)),s+=l+this.getGaps(i)}return n}}};rs=O(ju),zt=j(rs,0,"AstElement",ua,zt),B(rs,1,zt)});var At,xn=L(()=>{"use strict";At=(o=1)=>r=>{class e extends r{getGaps(){return o}}return e}});var Z,we=L(()=>{"use strict";Z=o=>{{class r extends o{escape(){}}return r}}});var Ou,gi,pa=L(()=>{"use strict";ae();z();M();G();Ou=new RegExp(`https?://${tt}${rt}$`,"iu"),gi=class extends ${get type(){return"parameter"}get anon(){return this.firstChild.length===0}get duplicated(){var r;try{return!!((r=this.parentNode)!=null&&r.getDuplicatedArgs().some(([e])=>e===this.name))}catch{return!1}}constructor(r,e,t,n=[]){super(void 0,t,n);let i=new $(typeof r=="number"?void 0:r,t,n,{}),s=new $(e,t,n);i.type="parameter-key",i.setAttribute("stage",2),s.type="parameter-value",s.setAttribute("stage",2),this.append(i,s)}trimName(r,e=!0){let t=(typeof r=="string"?r:r.toString(!0)).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1");return this.setAttribute("name",t),t}afterBuild(){if(!this.anon){let{parentNode:r,firstChild:e}=this,t=this.trimName(e);r&&r.getArgs(t,!1,!1).add(this)}super.afterBuild()}toString(r){return this.anon?this.lastChild.toString(r):super.toString(r,"=")}text(){return this.anon?this.lastChild.text():super.text("=")}getGaps(){return this.anon?0:1}lint(r=this.getAbsoluteIndex(),e){var t;{let n=super.lint(r,e),i="unescaped",{lintConfig:s}=v,a=s.getSeverity(i);if(a){let{firstChild:l}=this,g=(t=Ou.exec(l.text()))==null?void 0:t[0];try{if(g&&new URL(g).search){let d=q(l,{start:r},i,"unescaped-query",a);d.startIndex=d.endIndex,d.startLine=d.endLine,d.startCol=d.endCol,d.endIndex++,d.endCol++,(s.computeEditInfo||s.fix)&&(d.fix=st(d.startIndex,"{{=}}")),n.push(d)}}catch{}}return n}}print(){return super.print({sep:this.anon?"":"="})}json(r,e,t=this.getAbsoluteIndex()){{let n=super.json(void 0,e,t);return Object.assign(n,{anon:this.anon},this.duplicated&&{duplicated:!0}),n}}}});var Lr,ce,St=L(()=>{"use strict";G();ce=class extends ${constructor(e,t,n,i,s){super(e,n,i,s);w(this,Lr);S(this,Lr,t)}get type(){return f(this,Lr)}set type(e){S(this,Lr,e)}getAttribute(e){var t;return e==="invalid"?this.type==="converter-flag"&&!!((t=this.parentNode)!=null&&t.isInvalidFlag(this)):super.getAttribute(e)}};Lr=new WeakMap});var Tn,Te,wt=L(()=>{"use strict";G();Te=class extends ${constructor(e,t,n,i,s){super(e,n,i,s);w(this,Tn);S(this,Tn,t)}get type(){return f(this,Tn)}lint(e=this.getAbsoluteIndex()){return super.lint(e,!1)}};Tn=new WeakMap});var ma={};re(ma,{TranscludeToken:()=>ot});var ca,kn,Ct,Er,Vt,$r,at,yn,fa,ns,qu,ot,is=L(()=>{"use strict";ae();z();Ae();pe();xn();we();M();G();pa();St();wt();ca=[Z,At()];ot=class extends(qu=$){constructor(e,t,n,i=[]){var y,x;let s,a=/^(?:\s|\0\d+[cn]\x7F)*\0(\d+)h\x7F(?:\s|\0\d+[cn]\x7F)*/u.exec(e);a&&(s=Number(a[1]),e=e.replace(`\0${s}h`,i[s].toString().replace(/^\n/u,"")));super(void 0,n,i,{});w(this,at);ge(this,"modifier","");w(this,kn,"template");w(this,Ct,":");w(this,Er,!1);w(this,Vt,new Map);w(this,$r);let{parserFunction:l,variable:g,functionHook:d}=n,u=(y=/^(?:\s|\0\d+[cn]\x7F)*\0\d+s\x7F/u.exec(e))==null?void 0:y[0];if(u)this.setAttribute("modifier",u),e=e.slice(u.length);else if(e.includes(":")){let[T,...k]=e.split(":"),[A]=/^(?:\s|\0\d+[cn]\x7F)*/u.exec((x=k[0])!=null?x:"");this.setModifier(`${T}:${A}`)&&(e=k.join(":").slice(A.length))}let p=e.search(/[:：]/u),m=e[p]==="：",c=p!==-1;if(c||t.length===0&&!f(this,Er)){let T=c?e.slice(0,p):e,k=c&&e.slice(p+1),A=se(T),N=c?A.slice(A.search(/\S/u))+(m?"：":""):A.trim(),[,E,F]=ha(N,l),V=!("functionHook"in n)||d.includes(F),W=g.includes(F);if(c?F&&V:W){this.setAttribute("name",F),S(this,kn,"magic-word"),m&&S(this,Ct,"：");let Y=new Te(T,"magic-word-name",n,i);if(super.insertAt(Y),k!==!1&&t.unshift([k]),this.name==="invoke")for(let D=0;D<2;D++){let I=t.shift();if(!I)break;let R=new ce(I.join("="),`invoke-${D?"function":"module"}`,n,i);super.insertAt(R)}}}if(this.type==="template"){let T=se(e).trim();if(!this.normalizeTitle(T,10,{halfParsed:!0,temporary:!0}).valid)throw i.pop(),new SyntaxError("Invalid template name");let k=new ce(e,"template-name",n,i,{});super.insertAt(k)}typeof s=="number"&&(i[s]=void 0);let h=this.isTemplate(),b=1;for(let T=0;T<t.length;T++){let k=t[T];h||this.name==="switch"&&T>0||this.name==="tag"&&T>1||(k[0]=k.join("="),k.length=1),k.length===1&&(k.unshift(b),b++),this.insertAt(new gi(...k,n,i))}this.seal("modifier")}get type(){return f(this,kn)}get module(){return this.type==="magic-word"&&this.name==="invoke"?C(this,at,yn).call(this).title:void 0}get function(){var e;return this.type==="magic-word"&&this.name==="invoke"?(e=this.childNodes[2])==null?void 0:e.text().trim():void 0}setModifier(e){let[,,t,n]=this.getAttribute("config").parserFunction,i=se(e).trim();if(e&&!i.endsWith(":"))return!1;let s=i.slice(0,-1).toLowerCase(),a=t.includes(s),l=n.includes(s);return(f(this,Er)?a:l||!e)||(J.running||this.length>1)&&(a||l||!e)?(this.setAttribute("modifier",e),S(this,Er,a),!!e):!1}isTemplate(){return this.type==="template"||this.name==="invoke"}afterBuild(){this.modifier.includes("\0")&&this.setAttribute("modifier",this.buildFromStr(this.modifier,0)),super.afterBuild(),this.isTemplate()&&this.type==="template"&&(S(this,$r,C(this,at,yn).call(this)),this.setAttribute("name",f(this,$r).title))}toString(e){let{childNodes:t,length:n,firstChild:i,modifier:s,type:a}=this;return`{{${s}${a==="magic-word"?i.toString(e)+(n===1?"":f(this,Ct))+t.slice(1).map(l=>l.toString(e)).join("|"):super.toString(e,"|")}}}`}text(){let{childNodes:e,length:t,firstChild:n,modifier:i,type:s,name:a}=this;return s==="magic-word"&&a==="vardefine"?"":`{{${i}${s==="magic-word"?n.text()+(t===1?"":f(this,Ct))+Pe(e.slice(1),"|"):super.text("|")}}}`}getAttribute(e){switch(e){case"padding":return this.modifier.length+2;case"title":return f(this,$r);case"colon":return f(this,Ct);case"invalid":return this.type==="magic-word"&&this.name==="invoke"&&(this.length===2||!C(this,at,yn).call(this).valid);default:return super.getAttribute(e)}}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t);if(!this.isTemplate())return n;let{type:i,childNodes:s,length:a}=this,l=new U(this,e),{lintConfig:g}=v,{computeEditInfo:d}=g,u=i==="magic-word",p="no-ignored",m=g.getSeverity(p,"fragment");if(u&&!C(this,at,yn).call(this).valid)p="invalid-invoke",m=g.getSeverity(p,"name"),m&&n.push(q(s[1],l,p,"illegal-module",m));else if(m){let c=s[u?1:0],h=c.childNodes.findIndex(y=>y.type==="text"&&Mt(y.data).includes("#")),b=c.childNodes[h];if(b){let y=q(c,l,p,"useless-fragment",m);d&&(y.suggestions=[_(y,c.getRelativeIndex(h)+b.data.indexOf("#"))]),n.push(y)}}if(p="invalid-invoke",m=g.getSeverity(p,"function"),m&&u&&a===2)return n.push(P(this,l,p,"missing-function",m)),n;if(p="no-duplicate",m=g.getSeverity(p,"parameter"),m){let c=this.getDuplicatedArgs().filter(([,b])=>!b[0].querySelector("ext")),h="duplicate-parameter";for(let[,b]of c)Array.prototype.push.apply(n,b.map(y=>{let x=q(y,l,p,h,m);return d&&(x.suggestions=[_(x,-1)]),x}))}return n}}insertAt(e,t=this.length){return super.insertAt(e,t),e.anon?C(this,at,fa).call(this,e):e.name&&this.getArgs(e.name,!1,!1).add(e),e}getAllArgs(){return this.childNodes.filter(Nr("parameter"))}getAnonArgs(){return this.getAllArgs().filter(({anon:e})=>e)}getArgs(e,t,n=!0){let i=String(e).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),s;return f(this,Vt).has(i)?s=f(this,Vt).get(i):(s=new Set(this.getAllArgs().filter(({name:a})=>i===a)),f(this,Vt).set(i,s)),s}getDuplicatedArgs(){return[...f(this,Vt)].filter(([,{size:e}])=>e>1).map(([e,t])=>[e,[...t]])}getPossibleValues(){let{type:e,name:t,childNodes:n}=this;if(e==="template")throw new Error("TranscludeToken.getPossibleValues method is only for specific magic words!");let i,s;switch(t){case"if":case"ifexist":case"ifexpr":case"iferror":i=2;break;case"ifeq":i=3;break;case"switch":{let a=n.slice(2),l=a[a.length-1];s=[...a.filter(({anon:g})=>!g),...l!=null&&l.anon?[l]:[]].map(({lastChild:g})=>g);break}default:throw new Error("TranscludeToken.getPossibleValues method is only for specific magic words!")}s!=null||(s=n.slice(i,i+2).map(({lastChild:a})=>a));for(let a=0;a<s.length;){let{length:l,0:g}=s[a].childNodes.filter(d=>d.text().trim());if(l===0)s.splice(a,1);else if(l>1||!g.is("magic-word"))a++;else try{let d=g.getPossibleValues();Array.prototype.splice.apply(s,[a,1,...d]),a+=d.length}catch{a++}}return s}print(){{let{childNodes:e,length:t,firstChild:n,modifier:i,type:s}=this;return`<span class="wpb-${s}${this.getAttribute("invalid")?" wpb-invalid":""}">{{${s==="magic-word"?Ut(i)+n.print()+(t===1?"":f(this,Ct))+it(e.slice(1),{sep:"|"}):(i?`<span class="wpb-magic-word">${Ut(i)}</span>`:"")+it(e,{sep:"|"})}}}</span>`}}};ns=O(qu),kn=new WeakMap,Ct=new WeakMap,Er=new WeakMap,Vt=new WeakMap,$r=new WeakMap,at=new WeakSet,yn=function(){let e=this.type==="template";return this.normalizeTitle((e?"":"Module:")+se(this.childNodes[e?0:1].text()),10,{temporary:!0,...!e&&{page:""}})},fa=function(e){let t=this.getAnonArgs(),n=typeof e!="number";for(let i=n?t.indexOf(e):e-1;i<t.length;i++){let s=t[i],{name:a}=s,l=String(i+1);(a!==l||s===e)&&(s.setAttribute("name",l),this.getArgs(l,!1,!1).add(s))}},ot=j(ns,0,"TranscludeToken",ca,ot),B(ns,1,ot)});var ss,xa,_u,Wu,Du,Mu,ba,Uu,An,os,as,vn,Ta=L(()=>{"use strict";ae();z();Ae();M();es();ss=String.raw`[${We}\t]*`,xa=String.raw`<(?:/[^\S\n]*)?([a-z]\w*)|\{+|\}+|\[{2,}|\[(?![^[]*?\])|((?:^|\])[^[]*?)\]+|\n={2,}`,_u=new RegExp(String.raw`${xa}|\bhttps?[:/]/+|\b(?:rfc|pmid)(?=[-:：]?${ss}\d)|\bisbn(?=[-:：]?${ss}(?:\d(?:${ss}|-)){6})`,"giu"),Wu=new RegExp(xa,"giu"),Du=new Set(["attr-value","ext-link-text","link-text"]),Mu={"[":/[[\]]/u,"{":/[{}]/u,"]":/[[\]](?=[^[\]]*$)/u,"}":/[{}](?=[^{}]*$)/u},ba=new Set(["html","head","style","title","body","a","audio","img","video","embed","iframe","object","canvas","script","col","colgroup","tbody","tfoot","thead","button","input","label","option","select","textarea"]),Uu=(()=>{try{return new RegExp(String.raw`[\p{L}\p{N}_]`,"u")}catch{return/\w/u}})(),as=class as extends Ge{constructor(e){super();w(this,An);ge(this,"data","");this.data=e}get type(){return"text"}toString(e){var t;return e&&!((t=this.parentNode)!=null&&t.getAttribute("built"))?se(this.data):this.data}text(){return this.data}lint(e=this.getAbsoluteIndex(),t){var n,i,s;{if(t===!1)return[];let{data:a,parentNode:l,nextSibling:g,previousSibling:d}=this;if(!l)throw new Error("An isolated text node cannot be linted!");let{type:u,parentNode:p}=l;if(u==="attr-value"){let{name:D,tag:I}=p;if(I==="ref"&&(D==="name"||D==="follow")||D==="group"&&(I==="ref"||I==="references")||I==="choose"&&(D==="before"||D==="after"))return[]}if(t!=null||(t=l.isPlain()&&!Du.has(u)?_u:Wu),a.search(t)===-1)return[];t.lastIndex=0;let m=[],c=g==null?void 0:g.type,h=g==null?void 0:g.name,b=d==null?void 0:d.type,y=this.getRootNode(),x=y.toString(),{ext:T,html:k,variants:A}=y.getAttribute("config"),{top:N,left:E}=y.posFromIndex(e),{lintConfig:F}=v,V=F.rules["tag-like"],W=typeof V=="object"&&V[1]?new Set(Object.keys(V[1]).filter(D=>D!=="invalid"&&D!=="disallowed")):new Set,Y=new Set(["onlyinclude","noinclude","includeonly",...T,...k[0],...k[1],...k[2],...W,...F.getSeverity("tag-like","disallowed")?ba:[]]);for(let D=t.exec(a);D;D=t.exec(a)){let{index:I,0:R}=D,[,ee,oe]=D,xe=R==="["&&u==="ext-link-text";if(oe&&oe!=="]"){let{length:ue}=oe;I+=ue,R=R.slice(ue)}else{if(R.startsWith("<")&&!Y.has(ee.toLowerCase())||xe&&(/&(?:rbrack|#93|#x5[Dd];);/u.test(a.slice(I+1))||g!=null&&g.is("ext")&&h==="nowiki"&&((n=g.innerText)!=null&&n.includes("]"))))continue;R.startsWith(`
==`)&&(I++,R=R.slice(1))}R=R.toLowerCase();let[X]=R,de=R==="rfc"||R==="pmid"||R==="isbn",Q=X==="{",yt=X==="}",an=X==="[",Ui=X==="]",{length:kt}=R;Ui&&(I||kt>1)&&t.lastIndex--;let mr=e+I,Ot=mr+kt,ke,Ue,Jn,Kn,qt=x[Ot],Hi=x[mr-1],zi=Q||an,Gi=R==="{"&&Hi==="-"&&A.length>0,Vi=R==="}"&&qt==="-"&&A.length>0,Io=an&&c==="free-ext-link"&&!a.slice(I+1).trim()||Ui&&b==="free-ext-link"&&!a.slice(0,I).includes("]");if(de)ke="lonely-http",R=R.toUpperCase(),Ue=F.getSeverity(ke,R);else if(X==="<"){ke="tag-like";let ue;/^<\/?\s/u.test(R)||!/[\s/>]/u.test(qt!=null?qt:"")?ue="invalid":W.has(ee)?ue=ee:ba.has(ee)&&!T.includes(ee)&&(ue="disallowed"),Ue=F.getSeverity(ke,ue)}else if(X==="=")ke="syntax-like",Ue=F.getSeverity(ke,"heading");else if(Gi||Vi)ke="lonely-bracket",Ue=F.getSeverity(ke,"converter"),Gi&&I>0?(R="-{",I--,mr--,kt=2):Vi&&I<a.length-1&&(R="}-",Ot++,kt=2);else if(Io)ke="lonely-bracket",Ue=F.getSeverity(ke,"extLink");else if(zi||yt||Ui)if(ke="lonely-bracket",kt>1||Q&&qt===X||yt&&Hi===X)Ue=F.getSeverity(ke,"double");else{if(!xe){let ue=Mu[X],Re=zi?a.slice(I+1):a.slice(0,I);if(Q&&((i=ue.exec(Re))==null?void 0:i[0])==="}"||yt&&((s=ue.exec(Re))==null?void 0:s[0])==="{")continue;if(!Re.includes(X)){let et=zi?"nextSibling":"previousSibling",_e=this[et];for(;_e&&(_e.type!=="text"||!ue.test(_e.data));)_e=_e[et];if(_e&&ue.exec(_e.data)[0]!==X)continue}}Ue=F.getSeverity(ke,"single")}else ke="lonely-http",Ue=F.getSeverity(ke);if(!Ue)continue;let Fo=this.posFromIndex(I),{line:Ro,character:Po}=yr(N,E,Fo.top+1,Fo.left);if(X==="="){let ue=a.indexOf(`
`,I),Re=g,et;if(ue===-1){let _e=0;for(;Re&&!(Re.type==="text"&&(_e=Re.data.indexOf(`
`),_e!==-1));)Re=Re.nextSibling;if(!Re)continue;et=Re.data.slice(0,_e)}else et=a.slice(I+kt,ue);if(!/(?:^|[^=])=+\s*(?:\S\s*)?$/u.test(et))continue;ue===-1?(Ot=Re.getAbsoluteIndex()+et.length,{top:Jn,left:Kn}=y.posFromIndex(Ot)):(Ot+=et.length,kt+=et.length)}let _t={rule:ke,message:v.msg(X==="="?"header-like":"lonely",de||X==="h"||Gi||Vi?R:X),severity:Ue,startIndex:mr,endIndex:Ot,startLine:Ro,endLine:Jn!=null?Jn:Ro,startCol:Po,endCol:Kn!=null?Kn:Po+kt};if(F.computeEditInfo)if(X==="<")_t.suggestions=[st(mr,"&lt;")];else if(X==="h"&&u!=="link-text"&&Uu.test(Hi||""))_t.suggestions=[vt(mr)];else if(xe){let ue=l.getAbsoluteIndex()+l.toString().length;_t.suggestions=[st(ue,"&#93;")]}else if(R==="]"&&Io){let ue=e-d.toString().length;_t.suggestions=[kr(ue,"left-bracket","[")]}else de&&(_t.suggestions=[...D[0]===R?[]:[oi(_t,R)],...qt===":"||qt==="："?[vt(Ot,1)]:[]]);m.push(_t)}return m}}replaceData(e){C(this,An,os).call(this,e)}splitText(e){{let{parentNode:t,data:n}=this;if(!t)throw new Error("The text node to be split has no parent node!");let i=new as(n.slice(e));return Gt(t,t.childNodes.indexOf(this)+1,0,[i]),this.setAttribute("data",n.slice(0,e)),i}this.lspError("AstText.splitText")}escape(){{let{parentNode:e}=this;if(!e)throw new Error("The text node to be escaped has no parent node!");let{TranscludeToken:t}=(is(),K(ma)),n=e.getAttribute("config"),i=e.childNodes.indexOf(this)+1,s=g=>Math.max(this.data.lastIndexOf("=",g),this.data.lastIndexOf("|",g)),a=s(),l=()=>new t(this.data[a]==="="?"=":"!",[],n);for(;a>=0;a=s(a-1))a<this.data.length-1&&this.splitText(a+1),e.insertAt(J.run(l),i),C(this,An,os).call(this,this.data.slice(0,a))}}print(){return Ut(this.data)}};An=new WeakSet,os=function(e){this.setAttribute("data",e)};vn=as});var Ne,Lt=L(()=>{"use strict";Ne=(o=!0,r=!0)=>e=>{class t extends e{text(){return""}lint(i){return o?[]:super.lint(i)}}return t}});var he,Ve=L(()=>{"use strict";he=({length:o})=>r=>{class e extends r{getAttribute(n){return n==="padding"?o:super.getAttribute(n)}}return e}});var ya,Qt,De,Qe,pi,ka,ls,Hu,Ce,Ir=L(()=>{"use strict";z();Ae();pe();Ve();we();M();G();St();ya=[Z,he("[[")];Ce=class extends(Hu=$){constructor(e,t,n,i=[],s="|"){super(void 0,n,i,{});w(this,pi);w(this,Qt,!0);w(this,De);w(this,Qe);if(this.insertAt(new ce(e,"link-target",n,i,{})),t!==void 0){let a=new $(t,n,i,{});a.type="link-text",a.setAttribute("stage",10),this.insertAt(a)}S(this,De,s)}get link(){return f(this,Qe)}get fragment(){return f(this,Qe).fragment}afterBuild(){S(this,Qe,this.getTitle()),f(this,De).includes("\0")&&S(this,De,this.buildFromStr(f(this,De),0)),C(this,pi,ka).call(this),super.afterBuild()}setAttribute(e,t){e==="bracket"?S(this,Qt,t):e==="title"?S(this,Qe,t):super.setAttribute(e,t)}toString(e){let t=super.toString(e,f(this,De));return f(this,Qt)?`[[${t}]]`:t}text(){let e=super.text("|");return f(this,Qt)?`[[${e}]]`:e}getAttribute(e){return e==="title"?f(this,Qe):super.getAttribute(e)}getGaps(e){return e===0?f(this,De).length:1}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),{childNodes:[i,s],type:a}=this,{encoded:l,fragment:g}=f(this,Qe),{lintConfig:d}=v,{computeEditInfo:u,fix:p}=d,m=new U(this,e),c="unknown-page",h=d.getSeverity(c);if(h&&i.childNodes.some(({type:b})=>b==="template")&&n.push(q(i,m,c,"template-in-link",h)),c="url-encoding",h=d.getSeverity(c),h&&l){let b=q(i,m,c,"unnecessary-encoding",h);(u||p)&&(b.fix=ni(b,i)),n.push(b)}if(c="pipe-like",h=d.getSeverity(c,"link"),h&&(a==="link"||a==="category")){let b=s==null?void 0:s.childNodes.findIndex(x=>x.type==="text"&&x.data.includes("|")),y=s==null?void 0:s.childNodes[b];if(y){let x=q(s,m,c,"pipe-in-link",h);if(u){let T=x.startIndex+s.getRelativeIndex(b);x.suggestions=[ai(T,y.data)]}n.push(x)}}if(c="no-ignored",h=d.getSeverity(c,"fragment"),h&&g!==void 0&&!va(a)){let b=q(i,m,c,"useless-fragment",h);if(u||p){let y=i.childNodes.findIndex(T=>T.type==="text"&&T.data.includes("#")),x=i.childNodes[y];x&&(b.fix=_(b,i.getRelativeIndex(y)+x.data.indexOf("#")))}n.push(b)}return n}}getTitle(e,t){return this.normalizeTitle(this.firstChild.text(),0,{halfParsed:t,temporary:e,decode:!0,selfLink:!0})}print(){return super.print(f(this,Qt)?{pre:"[[",post:"]]",sep:f(this,De)}:{sep:f(this,De)})}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n),{type:s,fragment:a}=this;return a!==void 0&&(s==="link"||s==="redirect-target")&&(i.fragment=a),i}}};ls=O(Hu),Qt=new WeakMap,De=new WeakMap,Qe=new WeakMap,pi=new WeakSet,ka=function(){this.type!=="ext-inner"&&this.setAttribute("name",f(this,Qe).title)},Ce=j(ls,0,"LinkBaseToken",ya,Ce),B(ls,1,Ce)});var Aa,ds,zu,fe,Et=L(()=>{"use strict";we();G();Aa=[Z];fe=class extends(zu=$){get innerText(){return this.firstChild.data}constructor(r="",e,t){super(r,e,t)}};ds=O(zu),fe=j(ds,0,"NowikiBaseToken",Aa,fe),B(ds,1,fe)});var Sa,us,Gu,me,Xt=L(()=>{"use strict";z();Lt();M();Et();Sa=[Ne(!1)];me=class extends(Gu=fe){get type(){return"noinclude"}toString(r){return r?"":super.toString()}lint(r=this.getAbsoluteIndex()){{let{lintConfig:e}=v,t="no-ignored",n=e.getSeverity(t,"include");if(n){let{innerText:i}=this,s=/^<(includeonly|(?:no|only)include)\s+(?:[^\s>/]|\/(?!>))[^>]*>$/iu.exec(i);if(s){let a=P(this,{start:r},t,"useless-attribute",n),{computeEditInfo:l}=e,g=s[1].length+1,d=i.endsWith("/>")?2:1;return a.startIndex+=g,a.startCol+=g,a.endIndex-=d,a.endCol-=d,l&&(a.suggestions=[_(a)]),[a]}}return[]}}};us=O(Gu),me=j(us,0,"NoincludeToken",Sa,me),B(us,1,me)});var ci,wa=L(()=>{"use strict";z();M();Ir();Xt();ci=class extends Ce{get type(){return"redirect-target"}constructor(r,e,t,n){super(r,void 0,t,n),e!==void 0&&this.insertAt(new me(e,t,n))}getTitle(){return this.normalizeTitle(this.firstChild.toString(),0,{halfParsed:!0,decode:!0,page:""})}lint(r=this.getAbsoluteIndex()){{let e=super.lint(r,!1),t="no-ignored",{lintConfig:n}=v,i=n.getSeverity(t,"redirect");if(i&&this.length===2){let s=q(this.lastChild,{start:r},t,"useless-link-text",i);s.startIndex--,s.startCol--,(n.computeEditInfo||n.fix)&&(s.fix=_(s)),e.push(s)}return e}}}});var Ca,$t,Fr,gs,Vu,Jt,La=L(()=>{"use strict";Lt();we();G();wt();wa();Ca=[Ne(!1,!1),Z];Jt=class extends(Vu=$){constructor(e,t,n,i,s,a,l=[]){super(void 0,a,l);w(this,$t);w(this,Fr);S(this,$t,e),S(this,Fr,s),this.append(new Te(t,"redirect-syntax",a,l),new ci(n,i==null?void 0:i.slice(1),a,l))}get type(){return"redirect"}getAttribute(e){return e==="padding"?f(this,$t).length:super.getAttribute(e)}toString(e){return f(this,$t)+super.toString(e)+f(this,Fr)}lint(e=this.getAbsoluteIndex()){{let t=e+f(this,$t).length+this.firstChild.toString().length;return this.lastChild.setAttribute("aIndex",t),this.lastChild.lint(t)}}print(){return super.print({pre:f(this,$t),post:f(this,Fr)})}};gs=O(Vu),$t=new WeakMap,Fr=new WeakMap,Jt=j(gs,0,"RedirectToken",Ca,Jt),B(gs,1,Jt)});var Ea={};re(Ea,{parseRedirect:()=>Qu});var Qu,$a=L(()=>{"use strict";M();La();Qu=(o,r,e)=>{var n;(n=r.regexRedirect)!=null||(r.regexRedirect=new RegExp(String.raw`^(\s*)((?:${r.redirection.join("|")})\s*(?::\s*)?)\[\[([^\n|\]]+)(\|.*?)?\]\](\s*)`,"iu"));let t=r.regexRedirect.exec(o);return t&&v.normalizeTitle(t[3],0,!1,r,{halfParsed:!0,temporary:!0,decode:!0,page:""}).valid?(o=`\0${e.length}o${o.slice(t[0].length)}`,new Jt(...t.slice(1),r,e),o):!1}});var Na,ps,Xu,Kt,Ia=L(()=>{"use strict";Ve();we();G();Na=[Z,he("<onlyinclude>")];Kt=class extends(Xu=$){get type(){return"onlyinclude"}toString(r){return`<onlyinclude>${super.toString(r)}</onlyinclude>`}isPlain(){return!0}print(){return super.print({pre:'<span class="wpb-ext">&lt;onlyinclude&gt;</span>',post:'<span class="wpb-ext">&lt;/onlyinclude&gt;</span>'})}};ps=O(Xu),Kt=j(ps,0,"OnlyincludeToken",Na,Kt),B(ps,1,Kt)});var Fa,Nt,Xe,cs,Ju,Me,fi=L(()=>{"use strict";xn();we();G();Fa=[At(),Z];Me=class extends(Ju=$){constructor(e,t,n,i,s,a=[]){super(void 0,s);w(this,Nt);w(this,Xe);ge(this,"closed");this.setAttribute("name",e.toLowerCase()),S(this,Nt,[e,i||e]),this.closed=i!=="",S(this,Xe,i===void 0),this.append(t,n);let l=typeof t=="string"?-1:a.indexOf(t);a.splice(l===-1?1/0:l,0,this)}get innerText(){return f(this,Xe)?void 0:this.lastChild.text()}get selfClosing(){return f(this,Xe)}toString(e){let{firstChild:t,lastChild:n}=this,[i,s]=f(this,Nt);return f(this,Xe)?`<${i}${t.toString(e)}/>`:`<${i}${t.toString(e)}>${n.toString(e)}${this.closed?`</${s}>`:""}`}text(){let[e,t]=f(this,Nt);return f(this,Xe)?`<${e}${this.firstChild.text()}/>`:`<${e}${super.text(">")}${this.closed?`</${t}>`:""}`}getAttribute(e){return e==="padding"?f(this,Nt)[0].length+1:super.getAttribute(e)}print(){{let[e,t]=f(this,Nt);return super.print(f(this,Xe)?{pre:`&lt;${e}`,post:"/&gt;"}:{pre:`&lt;${e}`,sep:"&gt;",post:this.closed?`&lt;/${t}&gt;`:""})}}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return i.selfClosing=f(this,Xe),i}}};cs=O(Ju),Nt=new WeakMap,Xe=new WeakMap,Me=j(cs,0,"TagPairToken",Fa,Me),B(cs,1,Me)});var Ra,fs,Ku,Yt,Pa=L(()=>{"use strict";z();pe();Lt();M();fi();Ra=[Ne(!1)];Yt=class extends(Ku=Me){get type(){return"include"}constructor(r,e="",t,n,i,s){super(r,e,t!=null?t:"",t===void 0||n!=null?n:"",i,s)}toString(r){return r?"":super.toString()}lint(r=this.getAbsoluteIndex()){{let e=[],{firstChild:t,closed:n,name:i}=this,s=new U(this,r),a=["no-ignored","unclosed-comment"],{lintConfig:l}=v,{computeEditInfo:g}=l,d=a.map(u=>l.getSeverity(u,"include"));if(d[0]&&t.data.trim()){let u=q(t,s,a[0],"useless-attribute",d[0]);g&&(u.suggestions=[_(u)]),e.push(u)}if(d[1]&&!n){let u=P(this,s,a[1],v.msg("unclosed",`<${i}>`),d[1]);g&&(u.suggestions=[je(u.endIndex,`</${i}>`)]),e.push(u)}return e}}};fs=O(Ku),Yt=j(fs,0,"IncludeToken",Ra,Yt),B(fs,1,Yt)});var Rr,mi=L(()=>{"use strict";Rr=(o=0)=>r=>{var e,ms;{class n extends r{constructor(){super(...arguments);w(this,e)}hasAttr(a){return C(this,e,ms).call(this).hasAttr(a)}getAttr(a){return C(this,e,ms).call(this).getAttr(a)}}return e=new WeakSet,ms=function(){return this.childNodes[o]},n}}});var le,Ba,ja,hi,bs,Oa,bi,Da,Ma,Ua,hs,qa,_a,Wa,Zt,xi,Ti,yi,Ha,ki,vi=L(()=>{"use strict";le=new Set(["align"]),Ba=new Set(["cite"]),ja=new Set(["cite","datetime"]),hi=new Set(["width"]),bs=new Set(["axis","align","bgcolor","height","width","valign"]),Oa=new Set([...bs,"abbr","headers","scope","rowspan","colspan"]),bi=new Set(["type"]),Da=new Set(["summary","align","bgcolor","cellpadding","cellspacing","frame","rules","width"]),Ma=new Set(["clear"]),Ua=new Set(["bgcolor","align","valign"]),hs=new Set(["id","qid","forcemathmode","type","display"]),qa=new Set(["enclose","inline","lang","line","linelinks","style","class","id","dir","copy","highlight","start"]),_a=new Set(["weight"]),Wa=new Set(["width","height","zoom","latitude","longitude","align","mapstyle","lang","alt","text"]),Zt=new Set,xi=new Set(["id","class","style","lang","dir","title","tabindex","aria-describedby","aria-flowto","aria-hidden","aria-label","aria-labelledby","aria-level","aria-owns","role","about","property","resource","datatype","typeof","itemid","itemprop","itemref","itemscope","itemtype"]),Ti={div:le,h1:le,h2:le,h3:le,h4:le,h5:le,h6:le,blockquote:Ba,q:Ba,p:le,br:Ma,pre:hi,ins:ja,del:ja,ul:bi,ol:new Set(["type","start","reversed"]),li:new Set(["type","value"]),table:new Set([...Da,"border"]),caption:le,tr:Ua,td:Oa,th:Oa,font:new Set(["size","color","face"]),hr:hi,data:new Set(["value"]),time:new Set(["datetime"]),meta:new Set(["itemprop","content"]),link:new Set(["itemprop","href","title"]),gallery:bi,poem:le,categorytree:le,combooption:le,img:new Set(["alt","src","width","height","loading","srcset"])},yi={pre:new Set(["format"]),gallery:new Set(["mode","showfilename","caption","perrow","widths","heights","showthumbnails"]),poem:new Set(["compact"]),categorytree:new Set(["hideroot","onlyroot","depth","mode","hideprefix","namespaces","showcount","notranslations"]),combooption:new Set(["name","for","inline"]),nowiki:Zt,indicator:new Set(["name"]),langconvert:new Set(["from","to"]),ref:new Set(["group","name","follow","dir","details"]),references:new Set(["group","responsive"]),charinsert:new Set(["label"]),choose:new Set(["uncached","before","after"]),option:_a,choicetemplate:_a,imagemap:Zt,inputbox:Zt,templatestyles:new Set(["src","wrapper"]),dynamicpagelist:Zt,poll:new Set(["id","show-results-before-voting"]),score:new Set(["line_width_inches","lang","override_midi","raw","note-language","override_audio","override_ogg","sound","vorbis"]),seo:new Set(["title","title_mode","title_separator","keywords","description","robots","google_bot","image","image_width","image_height","image_alt","type","site_name","locale","section","author","published_time","twitter_site"]),tab:new Set(["nested","name","index","class","block","inline","openname","closename","collapsed","dropdown","style","bgcolor","container","id","title"]),tabs:new Set(["plain","class","container","id","title","style"]),combobox:new Set(["placeholder","value","id","class","text","dropdown","style"]),math:new Set([...hs,"chem"]),chem:hs,ce:hs,hiero:Zt,phonos:new Set(["ipa","class","text","lang","wikibase","file"]),section:new Set(["begin","end"]),source:qa,syntaxhighlight:qa,templatedata:Zt,timeline:new Set(["method","font"]),quiz:new Set(["display","shuffleanswers","points","shuffle","case"]),languages:Zt,mapframe:new Set([...Wa,"frameless"]),maplink:new Set([...Wa,"class"]),rss:new Set(["template","templatename","max","highlight","filter","filterout","reverse","date","item-max-length"]),"page-collection":new Set(["lang","name","description","end-date"])},Ha={table:Da,td:new Set([...bs,"scope"]),th:bs,br:Ma,caption:le,div:le,hr:hi,h1:le,h2:le,h3:le,h4:le,h5:le,h6:le,li:bi,p:le,pre:hi,tr:Ua,ul:bi},ki={dynamicpagelist:["category","notcategory","namespace","count","offset","imagewidth","imageheight","imagesperrow","mode","gallerycaption","galleryshowfilesize","galleryshowfilename","order","ordermethod","redirects","stablepages","qualitypages","suppresserrors","addfirstcategorydate","shownamespace","ignoresubpages","googlehack","nofollow"],inputbox:["preloadparams[]","type","width","preload","preloadtitle","page","editintro","useve","usedt","summary","nosummary","minor","break","default","placeholder","bgcolor","buttonlabel","searchbuttonlabel","fulltextbutton","namespaces","labeltext","hidden","id","inline","prefix","dir","searchengine","searchtype","searchfilter","tour","arialabel"]}});var Yu,Zu,eg,tg,Sn,Pr,be,Je,er,za,xs,Br,Ga=L(()=>{"use strict";z();ae();vi();pe();M();G();St();Yu=/expression|(?:accelerator|-o-link(?:-source)?|-o-replace)\s*:|(?:url|src|image(?:-set)?)\s*\(|attr\s*\([^)]+[\s,]url/u,Zu=/(?:^|\s|\*\/)(?:java|vb)script(?:\W|$)/iu,eg=new Set(["ext","arg","magic-word","template"]),tg=new Set(["about","property","resource","datatype","typeof","itemid","itemprop","itemref","itemscope","itemtype"]),Br=class extends ${constructor(e,t,n,i,s,a="",l,g=[]){let d=new ce(n,"attr-key",s,g),u;if(n==="title"||t==="img"&&n==="alt")u=new $(l,s,g,{}),u.type="attr-value",u.setAttribute("stage",10);else if(t==="gallery"&&n==="caption"||t==="ref"&&n==="details"||(t==="mapframe"||t==="maplink")&&n==="text"||t==="choose"&&(n==="before"||n==="after")){let p={...s,excludes:[...s.excludes,"heading","html","table","hr","list"]};u=new $(l,p,g,{}),u.type="attr-value",u.setAttribute("stage",1)}else u=new ce(l,"attr-value",s,g,{});super(void 0,s,g);w(this,er);w(this,Sn);w(this,Pr);w(this,be);w(this,Je);S(this,Sn,e),this.append(d,u),S(this,be,a),S(this,Je,[...i]),S(this,Pr,t),this.setAttribute("name",nt(se(n)))}get type(){return f(this,Sn)}get tag(){return f(this,Pr)}get balanced(){return!f(this,be)||f(this,Je)[0]===f(this,Je)[1]}afterBuild(){f(this,be).includes("\0")&&S(this,be,this.buildFromStr(f(this,be),0)),this.parentNode&&S(this,Pr,this.parentNode.name),C(this,er,za).call(this),super.afterBuild()}toString(e){let[t="",n=""]=f(this,Je);return f(this,be)?super.toString(e,f(this,be)+t)+n:this.firstChild.toString(e)}text(){return f(this,be)?`${super.text(`${f(this,be).trim()}"`)}"`:this.firstChild.text()}getGaps(){var e,t;return f(this,be)?f(this,be).length+((t=(e=f(this,Je)[0])==null?void 0:e.length)!=null?t:0):0}lint(e=this.getAbsoluteIndex(),t){var n;{let i=super.lint(e,t),{balanced:s,firstChild:a,lastChild:l,name:g,tag:d}=this,u=new U(this,e),p=["unclosed-quote","obsolete-attr"],{lintConfig:m}=v,c=p.map(b=>m.getSeverity(b,g));if(c[0]&&!s){let b=q(l,u,p[0],"unclosed-quotes",c[0]);b.startIndex--,b.startCol--,m.computeEditInfo&&(b.suggestions=[je(b.endIndex,f(this,Je)[0])]),i.push(b)}let h=C(this,er,xs).call(this,e,u);return h&&i.push(h),c[1]&&((n=Ha[d])!=null&&n.has(g))&&i.push(q(a,u,p[1],"obsolete-attribute",c[1])),i}}getValue(){return f(this,be)?this.lastChild.text().trim():this.type==="ext-attr"||""}escape(){this.type!=="ext-attr"&&(S(this,be,"{{=}}"),this.lastChild.escape())}getAttribute(e){return e==="invalid"?C(this,er,xs).call(this):super.getAttribute(e)}print(){{let[e="",t=""]=f(this,Je);return f(this,be)?super.print({sep:Ut(f(this,be))+e,post:t}):super.print()}}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return i.tag=this.tag,i}}};Sn=new WeakMap,Pr=new WeakMap,be=new WeakMap,Je=new WeakMap,er=new WeakSet,za=function(){this.setAttribute("name",nt(this.firstChild.text()))},xs=function(e,t){let{firstChild:n,lastChild:i,type:s,name:a,tag:l,parentNode:g}=this,d=!i.childNodes.some(({type:x})=>eg.has(x)),u=this.getValue(),p=yi[l],m=Ti[l],{length:c}=this.toString(),h="illegal-attr",b,y;if({lintConfig:b}=v,{computeEditInfo:y}=b,!(p!=null&&p.has(a))&&!(m!=null&&m.has(a))&&(s==="ext-attr"?p||m:!/\{\{[^{]+\}\}/u.test(a))&&(s==="ext-attr"&&!m||!/^(?:xmlns:[\w:.-]+|data-(?!ooui|mw|parsoid)[^:]*)$/u.test(a)&&(l==="meta"||l==="link"||!xi.has(a)))||(a==="itemtype"||a==="itemid"||a==="itemref")&&!(g!=null&&g.hasAttr("itemscope"))){if(e===void 0)return!0;{let x=b.getSeverity(h,"unknown");if(x){let T=q(n,t,h,"illegal-attribute-name",x);return y&&(T.suggestions=[_(e,c)]),T}}}else if(a==="style"&&typeof u=="string"&&Yu.test(u)){if(e===void 0)return!0;{h="insecure-style";let x=b.getSeverity(h);return x&&q(i,t,h,"insecure-style",x)}}else if(a==="tabindex"&&typeof u=="string"&&u!=="0"){if(e===void 0)return!0;{let x=b.getSeverity(h,"tabindex");if(x){let T=q(i,t,h,"nonzero-tabindex",x);return y&&(T.suggestions=[_(e,c),ve(T,"0 tabindex","0")]),T}}}else if(typeof u=="string"&&((/^xmlns:[\w:.-]+$/u.test(a)||tg.has(a))&&Zu.test(u)||d&&(a==="href"||l==="img"&&a==="src")&&!new RegExp(String.raw`^(?:${this.getAttribute("config").protocol}|//)\S+$`,"iu").test(u))){if(e===void 0)return!0;{let x=b.getSeverity(h,"value");return x&&q(i,t,h,"illegal-attribute-value",x)}}else if(d&&s!=="ext-attr"){let x=li(l,a),T=String(u).toLowerCase();if(x.length>0&&x.every(k=>k!==T)){if(e===void 0)return!0;{let k=b.getSeverity(h,"value");return k&&q(i,t,h,"illegal-attribute-value",k)}}}return!1}});var Va,rg,ng,wn,jr,Ai,It,Si=L(()=>{"use strict";z();ae();pe();M();G();St();Ga();Va=o=>o.slice(0,-1),rg=o=>`${Va(o)}-dirty`,ng=(()=>{try{return new RegExp(String.raw`[\p{L}\p{N}]`,"u")}catch{return/[^\W_]/u}})(),It=class extends ${constructor(e,t,n,i,s=[]){super(void 0,i,s,{});w(this,jr);w(this,wn);if(S(this,wn,t),this.setAttribute("name",n),e){let a=/([^\s/](?:(?!\0\d+~\x7F)[^\s/=])*)(?:((?:\s(?:\s|\0\d+[cn]\x7F)*)?(?:=|\0\d+~\x7F)(?:\s|\0\d+[cn]\x7F)*)(?:(["'])([\s\S]*?)(\3|$)|(\S*)))?/gu,l="",g=a.exec(e),d=0,u=()=>{l&&(super.insertAt(new ce(l,rg(t),i,s,{})),l="")};for(;g;){let{index:p,0:m,1:c,2:h,3:b,4:y,5:x,6:T}=g;if(l+=e.slice(d,p),/^(?:[\w:]|\0\d+t\x7F)(?:[\w:.-]|\0\d+t\x7F)*$/u.test(se(c).trim())){let k=y!=null?y:T,A=[b,x],N=new Br(Va(t),n,c,A,i,h,k,s);u(),super.insertAt(N)}else l+=m;({lastIndex:d}=a),g=a.exec(e)}l+=e.slice(d),u()}}get type(){return f(this,wn)}afterBuild(){let{parentNode:e}=this;e!=null&&e.is("td")&&this.setAttribute("name",e.subtype),super.afterBuild()}getAttrTokens(e){return this.childNodes.filter(t=>t instanceof Br&&(!e||t.name===nt(e)))}hasAttr(e){return this.getAttrTokens(e).length>0}getAttrToken(e){{let t=this.getAttrTokens(e);return t[t.length-1]}}getAttr(e){var t;return(t=this.getAttrToken(e))==null?void 0:t.getValue()}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),{parentNode:i,childNodes:s}=this,a=new Map,l=new Set,g=new U(this,e),d=["no-ignored","no-duplicate"],{lintConfig:u}=v,{computeEditInfo:p,fix:m}=u,c=["closingTag","invalidAttributes","nonWordAttributes"].map(b=>u.getSeverity(d[0],b));if(c[0]&&C(this,jr,Ai).call(this)){let b=P(this,g,d[0],"attributes-of-closing-tag",c[0]);if(p){let y=i.getAbsoluteIndex();b.suggestions=[_(b),ii(y)]}n.push(b)}for(let b of s)if(b instanceof Br){let{name:y}=b;a.has(y)?(l.add(y),a.get(y).push(b)):a.set(y,[b])}else{let y=b.text().trim(),x=c[ng.test(y)?1:2];if(y&&x){let T=q(b,g,d[0],"invalid-attribute",x);p&&(T.suggestions=[_(T,0," ")]),n.push(T)}}let h=u.getSeverity(d[1],"attribute");if(h&&l.size>0)for(let b of l){let y=a.get(b).map(x=>{let T=x.getValue();return[x,T===!0?"":T]});Array.prototype.push.apply(n,y.map(([x,T],k)=>{let A=q(x,g,d[1],v.msg("duplicate-attribute",b),h);if(p||m){let N=_(A);!T||y.slice(0,k).some(([,E])=>E===T)?A.fix=N:p&&(A.suggestions=[N])}return A}))}return n}}escape(){this.type!=="ext-attrs"&&super.escape()}getAttribute(e){return e==="invalid"?C(this,jr,Ai).call(this):super.getAttribute(e)}print(){return this.toString()?`<span class="wpb-${this.type}${C(this,jr,Ai).call(this)?" wpb-invalid":""}">${this.childNodes.map(e=>e.print(e instanceof ce?{class:e.toString().trim()&&"attr-dirty"}:void 0)).join("")}</span>`:""}};wn=new WeakMap,jr=new WeakSet,Ai=function(){let{parentNode:e}=this;return(e==null?void 0:e.type)==="html"&&e.closing&&this.text().trim()!==""}});var Qa={};re(Qa,{PreToken:()=>Ts});var Ts,Xa=L(()=>{"use strict";G();Xt();Ts=class extends ${get type(){return"ext-inner"}constructor(r,e,t=[]){if(r){let n=/<nowiki>/giu,i=/<\/nowiki>/giu,{length:s}=n.source,a=n.exec(r);a&&(i.lastIndex=a.index+s);let l=i.exec(r),g=0,d="";for(;a&&l;)new me(a[0],e,t,!0),new me(l[0],e,t,!0),d+=`${r.slice(g,a.index)}\0${t.length-1}n${r.slice(a.index+s,l.index)}\0${t.length}n`,g=l.index+s+1,n.lastIndex=g,a=n.exec(r),a&&(i.lastIndex=a.index+s),l=i.exec(r);r=d+r.slice(g)}super(r,e,t,{}),this.setAttribute("stage",10)}isPlain(){return!0}lint(r=this.getAbsoluteIndex()){return super.lint(r,/<\s*\/\s*(pre)\b/giu)}}});var Ft,wi=L(()=>{"use strict";G();Ft=class extends ${get type(){return"ext-inner"}toString(r){return super.toString(r,`
`)}text(){return super.text(`
`).replace(/\n\s*\n/gu,`
`)}getGaps(){return 1}print(){return super.print({sep:`
`})}}});var Ci,Ja=L(()=>{"use strict";z();vi();M();G();Ci=class extends ${get type(){return"param-line"}constructor(r,e,t,n,i){super(e,t,n,i),this.setAttribute("name",r)}lint(r=this.getAbsoluteIndex()){{let e="no-ignored",{lintConfig:t}=v,{name:n,childNodes:i}=this,s=t.getSeverity(e,n);if(!s)return[];let a=v.msg("invalid-parameter",n);if(i.some(({type:p})=>p==="ext"))return[P(this,{start:r},e,a,s)];let l=i.filter(({type:p})=>p!=="comment"&&p!=="include"&&p!=="noinclude"),g=n==="inputbox",d=g?l.findIndex(({type:p})=>p!=="text"):-1,u=l.slice(0,d===-1?void 0:d).map(String).join("").trim();if(u){g&&(u=u.toLowerCase());let p=u.indexOf("="),m=u.slice(0,p===-1?void 0:p).trim(),c=ki[n];if(p===-1?d===-1||!c.some(h=>h.startsWith(m)):!c.includes(m)){let h=P(this,{start:r},e,a,s);return t.computeEditInfo&&(h.suggestions=[_(h)]),[h]}}return super.lint(r,!1)}}}});var Ka={};re(Ka,{ParamTagToken:()=>Cn});var Cn,ys=L(()=>{"use strict";Ln();wi();Ja();Cn=class extends Ft{constructor(r,e,t,n,i=[],s){super(void 0,n,i,{}),t&&this.safeAppend(t.split(`
`).map(a=>s?a:tr(a,n,i,e)).map(a=>new Ci(r,a,n,i,{}))),i.splice(i.indexOf(this),1),i.push(this)}}});var Ya,En,Or,Li,ks,ig,lt,vs=L(()=>{"use strict";z();Ae();pe();we();M();G();wt();Ya=[Z];lt=class extends(ig=$){constructor(e,t,n,i=[]){super(void 0,n,i);w(this,Or);w(this,En);S(this,En,e);let s=new $(t[0],n,i);s.type="heading-title",s.setAttribute("stage",2);let a=new Te(t[1],"heading-trail",n,i);this.append(s,a)}get type(){return"heading"}get level(){return f(this,En)}toString(e){let t=C(this,Or,Li).call(this);return t+this.firstChild.toString(e)+t+this.lastChild.toString(e)}text(){let e=C(this,Or,Li).call(this);return e+this.firstChild.text()+e}getAttribute(e){return e==="invalid"?this.inHtmlAttrs()===2:e==="padding"?this.level:super.getAttribute(e)}getGaps(){return this.level}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),{firstChild:i,level:s}=this,a=i.toString(),l=a.startsWith("="),g=l||a.endsWith("="),d=new U(this,e),u=this.inHtmlAttrs(),p=["h1","unbalanced-header","format-leakage"],{lintConfig:m}=v,{computeEditInfo:c,fix:h}=m,b=p.map(y=>m.getSeverity(y,"apostrophe"));if(b[0]&&this.level===1){let y=q(i,d,p[0],"<h1>",b[0]);c&&!g&&(y.suggestions=[ve(y,"h2",`=${a}=`)]),n.push(y)}if(b[1]&&g){let y=v.msg("unbalanced-in-section-header",'"="'),x=q(i,d,p[1],y,b[1]);if(!(!c||a==="="))if(l){let[T]=/^=+/u.exec(a),k=s+T.length;x.suggestions=[{desc:`h${s}`,range:[x.startIndex,x.startIndex+T.length],text:""}],k<7&&x.suggestions.push({desc:`h${k}`,range:[x.endIndex,x.endIndex],text:T})}else{let T=/[^=](=+)$/u.exec(a)[1],k=s+T.length;x.suggestions=[{desc:`h${s}`,range:[x.endIndex-T.length,x.endIndex],text:""}],k<7&&x.suggestions.push({desc:`h${k}`,range:[x.startIndex,x.startIndex],text:T})}n.push(x)}if(u){let y="parsing-order",x=m.getSeverity(y,u===2?"heading":"templateInTable");x&&n.push(P(this,d,y,"header-in-html",x))}if(b[2]){let y=this.getRootNode().toString(),x=i.childNodes.filter(Nr("quote")),T=x.filter(({bold:A})=>A),k=x.filter(({italic:A})=>A);if(T.length%2){let A=q(T[T.length-1],{...d,start:e+s,left:d.left+s},p[2],v.msg("unbalanced-in-section-header","bold-apostrophes"),b[2]);if(c||h){let N=e+s+a.length,E=_(A);y.slice(A.endIndex,N).trim()?c&&(A.suggestions=[E,je(N,"'''")]):T.length===1&&k.length===0?A.fix=E:c&&(A.suggestions=[E])}n.push(A)}if(k.length%2){let A=q(k[k.length-1],{start:e+s},p[2],v.msg("unbalanced-in-section-header","italic-apostrophes"),b[2]);if(c||h){let N=e+s+a.length;y.slice(A.endIndex,N).trim()?c&&(A.suggestions=[je(N,"''")]):k.length===1&&T.length===0?A.fix=_(A):c&&(A.suggestions=[_(A)])}n.push(A)}}return n}}print(){{let e=C(this,Or,Li).call(this);return super.print({pre:e,sep:e})}}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return i.level=this.level,i}}};ks=O(ig),En=new WeakMap,Or=new WeakSet,Li=function(){return"=".repeat(this.level)},lt=j(ks,0,"HeadingToken",Ya,lt),B(ks,1,lt)});var Za,As,sg,rr,el=L(()=>{"use strict";Lt();we();G();Za=[Ne(),Z];rr=class extends(sg=$){get type(){return"hidden"}getAttribute(r){return r==="invalid"||super.getAttribute(r)}};As=O(sg),rr=j(As,0,"HiddenToken",Za,rr),B(As,1,rr)});var tl,Ei,rl,Ss,og,nr,nl=L(()=>{"use strict";ae();z();pe();Ve();xn();we();M();G();St();el();tl=[Z,he("{{{"),At()];nr=class extends(og=$){constructor(e,t,n=[]){super(void 0,t,n,{});w(this,Ei);for(let i=0;i<e.length;i++){let s=e[i];if(i===0){let a=new ce(s,"arg-name",t,n,{});super.insertAt(a)}else if(i>1){let a=new rr(s,t,n);super.insertAt(a)}else{let a=new $(s,t,n);a.type="arg-default",a.setAttribute("stage",2),super.insertAt(a)}}}get type(){return"arg"}get default(){var e,t;return(t=(e=this.childNodes[1])==null?void 0:e.text())!=null?t:!1}toString(e){return`{{{${super.toString(e,"|")}}}}`}text(){return`{{{${Pe(this.childNodes.slice(0,2),"|")}}}}`}afterBuild(){C(this,Ei,rl).call(this),super.afterBuild()}lint(e=this.getAbsoluteIndex(),t){{let[n,i,...s]=this.childNodes;n.setAttribute("aIndex",e+3);let a=n.lint(e+3,t);if(i){let c=e+4+n.toString().length;i.setAttribute("aIndex",c);let h=i.lint(c,t);h.length>0&&Array.prototype.push.apply(a,h)}let l=["no-ignored","no-arg"],{lintConfig:g}=v,{computeEditInfo:d}=g,u=new U(this,e),p=l.map(c=>g.getSeverity(c,"arg"));if(p[0]&&s.length>0&&Array.prototype.push.apply(a,s.map(c=>{let h=q(c,u,l[0],"invisible-triple-braces",p[0]);return h.startIndex--,h.startCol--,d&&(h.suggestions=[_(h),st(h.startIndex,"{{!}}")]),h})),p[1]&&!this.getAttribute("include")){let c=P(this,u,l[1],"unexpected-argument",p[1]);d&&i&&(c.suggestions=[ve(c,"expand",i.text())]),a.push(c)}let m=this.closest("ext");if(m){let c="arg-in-ext",h=g.getSeverity(c,m.name);h&&a.push(P(this,u,c,"argument-in-ext",h))}return a}}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return i.default=this.default,i}}};Ss=O(og),Ei=new WeakSet,rl=function(){this.setAttribute("name",this.firstChild.text().trim())},nr=j(Ss,0,"ArgToken",tl,nr),B(Ss,1,nr)});var ul={};re(ul,{parseBraces:()=>$n});var ag,il,ws,sl,ol,al,dl,ll,$n,$i=L(()=>{"use strict";He();ae();vs();is();nl();ag={"=":String.raw`\n(?!(?:[^\S\n]|\0\d+[cn]\x7F)*\n)`,"{":String.raw`\}{2,}|\|`,"-":String.raw`\}-`,"[":String.raw`\]\]`},il=String.raw`\[(?!\[)`,ws=String.raw`\n(?![=\0])`,sl=String.raw`|\{{2,}`,ol=new Map([["!","!"],["!!","+"],["(!","{"],["!)","}"],["!-","-"],["=","~"],["server","m"]]),al=Be(o=>new RegExp(o,"gmu"));dl=new RegExp(String.raw`\{\{((?:[^\n{}[]|${il}|${ws})*)\}\}(?!\})`+"|"+String.raw`\[\[(?:[^\n[\]{]|${ws})*\]\]`+"|"+String.raw`-\{(?:[^\n{}[]|${il}|${ws})*\}-`,"gu");ll=o=>{let r=nt(se(o));return ol.has(r)?ol.get(r):/^(?:filepath|(?:full|canonical)urle?):./u.test(r)?"m":/^#vardefine:./u.test(r)?"n":"t"},$n=(o,r,e)=>{var c,h,b,y,x;let t=String.raw`${r.excludes.includes("heading")?"":String.raw`^((?:\0\d+[cno]\x7F)*)={1,6}|`}\[\[|-\{(?!\{)`,[,,,n]=r.parserFunction,i=[],s=[],a=(T,k,A,N)=>{k[k.length-1].push($e(T.slice(A,N),s))},l;do l!==void 0&&(o=l),l=o.replace(dl,(T,k,A)=>{if(k!==void 0||typeof A=="string")try{let{length:N}=e,E=(k!=null?k:A).split("|");return new ot($e(E[0],s),E.slice(1).map(F=>{let V=F.indexOf("=");return(V===-1?[F]:[F.slice(0,V),F.slice(V+1)]).map(W=>$e(W,s))}),r,e),`\0${N}${ll(E[0])}`}catch(N){if(!(N instanceof SyntaxError)||N.message!=="Invalid template name")throw N}return s.push($e(T,s)),`\0${s.length-1}`});while(l!==o);o=l;let g=o.lastIndexOf("}}")-o.length,d=g+o.length!==-1,u=al(t+(d?sl:"")),p=u.exec(o),m;for(;p||m!==void 0&&m<=o.length&&((h=(c=i[i.length-1])==null?void 0:c[0])!=null&&h.startsWith("="));){if(p!=null&&p[1]){let[,{length:I}]=p;p[0]=p[0].slice(I),p.index+=I}let{0:T,index:k}=p!=null?p:{0:`
`,index:o.length},A=(b=i.pop())!=null?b:{},{0:N,index:E,parts:F,findEqual:V,pos:W}=A,Y=T==="="&&V;if(T==="]]"||T==="}-")m=k+2;else if(T===`
`){m=k+1;let{pos:I,findEqual:R}=(y=i[i.length-1])!=null?y:{};if(I===void 0||R||se(o.slice(I,E))!==""){let ee=/^(={1,6})(.+)\1((?:\s|\0\d+[cn]\x7F)*)$/u.exec(o.slice(E,k));ee&&(ee[2]=$e(ee[2],s),ee[2].includes(`
`)||(o=`${o.slice(0,E)}\0${e.length}h${o.slice(k)}`,m=E+4+String(e.length).length,new lt(ee[1].length,ee.slice(2),r,e)))}}else if(T==="|"||Y)m=k+1,a(o,F,W,k),T==="|"&&F.push([]),A.pos=m,A.findEqual=T==="|",i.push(A);else if(T.startsWith("}}")){let I=T.slice(0,Math.min(N.length,3)),R=N.length-I.length,{length:ee}=e;m=k+I.length,a(o,F,W,k);let oe=!1,xe="t";if(I.length===3){let X=F.map(Q=>Q.join("=")),de=X.length>1&&se(X[1]).trim();new nr(X,r,e),de&&de.endsWith(":")&&n.includes(de.slice(0,-1).toLowerCase())&&(xe="s")}else try{new ot(F[0][0],F.slice(1),r,e),xe=ll(F[0][0])}catch(X){if(!(X instanceof SyntaxError&&X.message==="Invalid template name"))throw X;oe=!0}oe||(o=`${o.slice(0,E+R)}\0${ee}${xe}${o.slice(m)}`,m=E+R+3+String(ee).length,R>1?i.push({0:N.slice(0,R),index:E,pos:E+R,parts:[[]]}):R===1&&o[E-1]==="-"&&i.push({0:"-{",index:E-1,pos:E+1,parts:[[]]}))}else m=k+T.length,T.startsWith("{")&&(p.pos=m,p.parts=[[]]),i.push(..."0"in A?[A]:[],p);let D=i[i.length-1];if(d&&g+o.length<m)for(d=!1;(x=D==null?void 0:D[0])!=null&&x.startsWith("{");)i.pop(),D=i[i.length-1];u=al(t+(d?sl:"")+(D?`|${ag[D[0][0]]}${D.findEqual?"|=":""}`:"")),u.lastIndex=m,p=u.exec(o)}return $e(o,s)}});var gl={};re(gl,{InputboxToken:()=>Cs});var Cs,pl=L(()=>{"use strict";Ln();$i();ys();Cs=class extends Cn{constructor(r,e,t,n,i=[]){let s=Symbol("InputboxToken"),a=n.excludes.includes("heading")?n:{...n,excludes:[...n.excludes,"heading"]},{length:l}=i;i.push(s),t&&(t=tr(t,a,i,e)),t&&(t=$n(t,a,i)),i.splice(l,1),super(r,e,t,a,i,{})}}});var Ni={};re(Ni,{NestedToken:()=>Ls});var lg,dg,Nn,qr,Ls,Ii=L(()=>{"use strict";z();pe();Ln();$i();M();G();Es();Xt();lg=new Set(["comment","include","arg","template","magic-word"]),dg=[!1,!0].map(o=>{let r=o?"includeonly":"noinclude";return new RegExp(String.raw`^(?:<${r}(?:\s[^>]*)?/?>|</${r}\s*>)$`,"iu")}),Ls=class extends ${constructor(e,t,n,i,s=[]){if(typeof t=="boolean"){let a=Symbol("NestedToken"),{length:l}=s;s.push(a),e&&(e=tr(e,i,s,t)),e&&(e=$n(e,i,s)),s.splice(l,1)}else e&&(e=e.replace(t,(a,l,g,d,u)=>{let p=`\0${s.length+1}e`;return new dt(l,g,d,u,i,!1,s),p}));e&&(e=e.replace(/(^|\0\d+.\x7F)([^\0]+)(?=$|\0\d+.\x7F)/gu,(a,l,g)=>(new me(g,i,s),`${l}\0${s.length}n`)));super(e,i,s);w(this,Nn);w(this,qr);S(this,Nn,[...n]),S(this,qr,t)}get type(){return"ext-inner"}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),i="no-ignored",{lintConfig:s}=v,a=s.getSeverity(i,this.name);if(!a)return n;let l=new U(this,e),g=typeof f(this,qr)=="boolean"?dg[f(this,qr)?1:0]:/^<!--[\s\S]*-->$/u;return[...n,...this.childNodes.filter(d=>{let{type:u,name:p}=d;if(u==="ext")return!f(this,Nn).includes(p);if(lg.has(u))return!1;let m=d.toString().trim();return m&&!g.test(m)}).map(d=>{let u=q(d,l,i,v.msg("invalid-content",this.name),a);return s.computeEditInfo&&(u.suggestions=[_(u),si(u,d.toString())]),u})]}}};Nn=new WeakMap,qr=new WeakMap});function $s(o,r,e,t,n){r=se(r).trim();let i=r.replace(o==="link"?/\0\d+[tq]\x7F/gu:/\0\d+t\x7F/gu,"").trim();switch(o){case"width":return!i&&!!r||/^(?:\d+x?|\d*x\d+)(?:\s*px)?$/u.test(i);case"link":{let s=t==="gallery-image";if(i){if(ug(e.protocol).test(i))return gg(e.protocol).test(i)?r:s;i.startsWith("[[")&&i.endsWith("]]")&&(i=i.slice(2,-2))}else return r;let a=v.normalizeTitle(i,0,!1,e,{halfParsed:n,decode:!0,selfLink:!0,page:""});return a.valid?a:s}case"lang":return(t==="svg"||t==="svgz")&&!/[^a-z\d-]/u.test(i);case"alt":case"class":case"manualthumb":return!0;case"page":return(t==="djvu"||t==="djv"||t==="pdf")&&Number(i)>0;default:return!!i&&!isNaN(i)}}var ug,gg,pg,cg,cl,Ie,Fi,fl,Ns,fg,ir,ml=L(()=>{"use strict";He();ae();z();ti();Ae();we();M();G();ug=Be(o=>new RegExp(String.raw`^(?:${o}|//|\0\d+m\x7F)`,"iu")),gg=Be(o=>new RegExp(String.raw`^(?:(?:${o}|//)${tt}|\0\d+m\x7F)${rt}$`,"iu")),pg=Be(o=>new RegExp(String.raw`^(\s*(?!\s))${o.replace("$1","(.*)")}${o.endsWith("$1")?`(?=$|
)`:""}(\s*)$`,"u")),cg=o=>{if(o)o.startsWith("//")&&(o=`https:${o}`);else return o;return new URL(o).href};cl=[Z];ir=class extends(fg=$){constructor(e,t,n,i,s){var r=(...ih)=>(super(...ih),w(this,Fi),w(this,Ie,""),this);let a,l=Object.entries(i.img).map(([d,u])=>[d,u,pg(d)]),g=l.find(([,d,u])=>(a=u.exec(e),a&&(a.length!==4||$s(d,a[2],i,d==="link"?n:t,!0)!==!1)));if(g&&a){a.length===3?(r(void 0,i,s),S(this,Ie,e)):(r(a[2],i,s,{}),S(this,Ie,a[1]+g[0]+a[3])),this.setAttribute("name",g[1]),g[1]==="alt"&&this.setAttribute("stage",10);return}r(e,i.excludes.includes("list")?i:{...i,excludes:[...i.excludes,"list"]},s),this.setAttribute("name","caption"),this.setAttribute("stage",7)}get type(){return"image-parameter"}get thumb(){return this.name==="manualthumb"?this.normalizeTitle(`File:${super.text().trim()}`,6,{page:""}):void 0}get link(){{if(this.name!=="link")return;let e=super.text().trim();return J.run(()=>{var s;let t=this.getAttribute("config"),n=new $(e,t);if(n.parseOnce(0,this.getAttribute("include")).parseOnce(),/^\0\d+m\x7F/u.test(n.firstChild.toString()))return e;let i=$s("link",e,t,(s=this.parentNode)==null?void 0:s.type);return i===!0?void 0:i},v)}}afterBuild(){var e;(e=this.parentNode)!=null&&e.is("gallery-image")&&!Qo.has(this.name)&&this.setAttribute("name","invalid"),super.afterBuild()}toString(e){return f(this,Ie)?f(this,Ie).replace("$1",super.toString(e)):super.toString(e)}text(){return f(this,Ie)?f(this,Ie).replace("$1",super.text()).trim():super.text().trim()}isPlain(){return this.name==="caption"||this.name==="alt"}getAttribute(e){return e==="invalid"?this.name==="invalid":e==="padding"?Math.max(0,f(this,Ie).indexOf("$1")):super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){var n;{let i=super.lint(e,t),{lintConfig:s}=v,{computeEditInfo:a,fix:l}=s,{link:g,name:d}=this,u=d==="width"&&this.getValue();if(d==="invalid"||u&&u.endsWith("px")){let p="invalid-gallery",m=s.getSeverity(p,"parameter");if(m){let c=P(this,{start:e},p,"invalid-image-parameter",m);(a||l)&&(c.fix=u?_(c,0,u):_(c,-1)),i.push(c)}}else if(d==="link"){if(g===void 0){let p="invalid-gallery",m=s.getSeverity(p,"link");if(m){let c=P(this,{start:e},p,"invalid-gallery-link",m);if(a){let h=super.toString(),b=h.indexOf("|"),y=h.slice(0,b).trim();b!==-1&&!/[<{]/u.test(y)&&typeof $s("link",y,this.getAttribute("config"),(n=this.parentNode)==null?void 0:n.type)=="string"&&(c.suggestions=[vt(e+this.getRelativeIndex(0)+b)])}i.push(c)}}else if(typeof g=="string"){let p="invalid-url",m=s.getSeverity(p);if(m&&!this.querySelector("magic-word"))try{cg(g)}catch{i.push(P(this,{start:e},p,"invalid-url",m))}}else if(g.encoded){let p="url-encoding",m=s.getSeverity(p,"file");if(m){let c=P(this,{start:e},p,"unnecessary-encoding",m);(a||l)&&(c.fix=ni(c,this)),i.push(c)}}}else if(d==="manualthumb"){let p="invalid-gallery",m=s.getSeverity(p,"thumb");if(m&&!this.querySelector("arg,magic-word,template")){let{valid:c,ns:h,extension:b}=this.thumb;(!c||h!==6||!gn.has(b))&&i.push(P(this,{start:e},p,"invalid-thumb",m))}}return i}}getValue(){return this.name==="invalid"?this.text():C(this,Fi,fl).call(this)||super.text()}print(){return f(this,Ie)?`<span class="wpb-image-parameter${this.name==="invalid"?" wpb-invalid":""}">${f(this,Ie).replace("$1",`<span class="wpb-image-caption">${it(this.childNodes)}</span>`)}</span>`:super.print({class:"image-caption"})}};Ns=O(fg),Ie=new WeakMap,Fi=new WeakSet,fl=function(){return f(this,Ie)&&!f(this,Ie).includes("$1")},ir=j(Ns,0,"ImageParameterToken",cl,ir),B(Ns,1,ir)});var hl,mg,hg,bl,xl,bg,Tl,_r,Is=L(()=>{"use strict";z();ti();pe();M();Ir();ml();hl=new Map([["manualthumb","Thumb"],["frameless","Frameless"],["framed","Frame"],["thumbnail","Thumb"]]),mg=new Set(["arg"]),hg=new Set(["template","magic-word"]),bl=new Set(["left","right","center","none"]),xl=new Set(["baseline","sub","super","top","text-top","middle","bottom","text-bottom"]),bg=o=>{if(o===void 0)return[];let r=/-\{|\}-|\|/gu,e=[],t=r.exec(o),n=0,i=0;for(;t;){let{0:s,index:a}=t;s!=="|"?n+=s==="-{"?1:-1:n===0&&(e.push(o.slice(i,a)),{lastIndex:i}=r),t=r.exec(o)}return e.push(o.slice(i)),e},Tl=(o,r)=>o.filter(({childNodes:e})=>!e.some(t=>t.text().trim()&&r.has(t.type))),_r=class extends Ce{get type(){return"file"}get extension(){return this.getAttribute("title").extension}constructor(r,e,t,n=[],i="|",s){super(r,void 0,t,n,i);let{extension:a}=this.getTitle(!0,!0);this.safeAppend(bg(e).map(l=>new ir(l,a,s,t,n)))}lint(r=this.getAbsoluteIndex(),e){var t;{let n=super.lint(r,e),i=Tl(this.getAllArgs(),mg),s=[...new Set(i.map(({name:E})=>E))],a=s.filter(E=>hl.has(E)),l=s.filter(E=>bl.has(E)),g=s.filter(E=>xl.has(E)),[d]=a,u=d==="framed"||d==="manualthumb",p=new U(this,r),{lintConfig:m}=v,{computeEditInfo:c,fix:h}=m,{ns:b,extension:y}=this.getAttribute("title"),{firstChild:x}=this,T="nested-link",k=m.getSeverity(T,"file");if(k&&gn.has(y)&&this.isInside("ext-link-text")&&((t=this.getValue("link"))==null?void 0:t.trim())!==""){let E=P(this,p,T,"link-in-extlink",k);if(c||h){let F=this.getArg("link");if(F){let V=r+F.getRelativeIndex();E.fix={desc:v.msg("delink"),range:[V,V+F.toString().length],text:"link="}}else E.fix=kr(E.endIndex-2,"delink","|link=")}n.push(E)}if(T="invalid-gallery",k=m.getSeverity(T,"extension"),k&&b===6&&!y&&!x.querySelector("arg,magic-word,template")&&n.push(P(this,p,T,"missing-extension",k)),k=m.getSeverity(T,"parameter"),k&&u)for(let E of i.filter(({name:F})=>F==="width")){let F=q(E,p,T,"invalid-image-parameter",k);(c||h)&&(F.fix=_(F,-1)),n.push(F)}if(i.length===s.length&&a.length<2&&l.length<2&&g.length<2)return n;T="no-duplicate";let A=["unknownImageParameter","imageParameter"].map(E=>m.getSeverity(T,E)),N=(E,F,V,W=!0)=>E.map(Y=>{if(k=A[Number(typeof W=="function"?W(Y):W)],!k)return!1;let D=q(Y,p,T,v.msg(`${F}-image-parameter`,V),k);return c&&(D.suggestions=[_(D,-1)]),D}).filter(Y=>Y!==!1);for(let E of s){if(E==="invalid"||E==="width"&&u)continue;let F=E==="caption",V=i.filter(({name:W})=>W===E);if(F&&(V=[...V.slice(0,-1).filter(W=>W.text()),...V.slice(-1)]),V.length>1){let W=!F||!y||gn.has(y);if(F&&W){let Y=Tl(V,hg);W=Y.length>1&&(D=>Y.includes(D))}Array.prototype.push.apply(n,N(V,"duplicate",E,W))}}return a.length>1&&Array.prototype.push.apply(n,N(i.filter(({name:E})=>hl.has(E)),"conflicting","frame")),l.length>1&&Array.prototype.push.apply(n,N(i.filter(({name:E})=>bl.has(E)),"conflicting","horizontal-alignment")),g.length>1&&Array.prototype.push.apply(n,N(i.filter(({name:E})=>xl.has(E)),"conflicting","vertical-alignment")),n}}getAllArgs(){return this.childNodes.slice(1)}getArgs(r){return this.getAllArgs().filter(({name:e})=>r===e)}getArg(r){{let e=this.getArgs(r);return e[r==="manualthumb"?0:e.length-1]}}getValue(r){var e;return(e=this.getArg(r))==null?void 0:e.getValue()}json(r,e,t=this.getAbsoluteIndex()){{let n=super.json(void 0,e,t),{extension:i}=this;return i&&(n.extension=i),n}}}});var yl,In,Rs,Fs,xg,ut,Ps=L(()=>{"use strict";z();Ve();M();G();Is();yl=[he("")];ut=class extends(xg=_r){constructor(e,t,n,i,s=[]){let a;if(n!==void 0){let{length:g}=s;a=new $(n,i,s);for(let d=0;d<10;d++)a.parseOnce();s.splice(g,1)}let l=`${e}-image`;super(t,a==null?void 0:a.firstChild.toString(),i,s,void 0,l);w(this,In);ge(this,"privateType","imagemap-image");this.setAttribute("bracket",!1),this.privateType=l,this.seal("privateType",!0)}get type(){return this.privateType}getTitle(e){let t=this.type==="imagemap-image";return this.normalizeTitle(this.firstChild.toString(),t?0:6,{halfParsed:!0,temporary:e,decode:!t,page:""})}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),i="invalid-gallery",{lintConfig:s}=v,a=s.getSeverity(i,"image");if(a&&C(this,In,Rs).call(this)){let l=P(this,{start:e},i,"invalid-gallery",a);s.computeEditInfo&&(l.suggestions=[kr(e,"prefix","File:")]),n.push(l)}return n}}getAttribute(e){return e==="invalid"?C(this,In,Rs).call(this):super.getAttribute(e)}};Fs=O(xg),In=new WeakSet,Rs=function(){return this.getAttribute("title").ns!==6},ut=j(Fs,0,"GalleryImageToken",yl,ut),B(Fs,1,ut)});var sr,Bs=L(()=>{"use strict";Xt();sr=class extends me{}});var vl={};re(vl,{GalleryToken:()=>js});var or,kl,Os,js,Al=L(()=>{"use strict";z();M();wi();Ps();Bs();js=class extends Ft{constructor(e,t,n=[]){var i;super(void 0,t,n,{});w(this,or);for(let s of(i=e==null?void 0:e.split(`
`))!=null?i:[]){let a=/^([^|]+)(?:\|(.*))?/u.exec(s);if(!a){super.insertAt(s.trim()?new sr(s,t,n):s);continue}let[,l,g]=a;C(this,or,kl).call(this,l)?super.insertAt(new ut("gallery",l,g,t,n)):super.insertAt(new sr(s,t,n))}}get widths(){return C(this,or,Os).call(this,"widths")}get heights(){return C(this,or,Os).call(this,"heights")}lint(e=this.getAbsoluteIndex(),t){{let{top:n,left:i}=this.getRootNode().posFromIndex(e),s=[],a="no-ignored",{lintConfig:l}=v,g=["Image","NoImage","Comment"].map(d=>l.getSeverity(a,`gallery${d}`));for(let d=0;d<this.length;d++){let u=this.childNodes[d],p=u.toString(),{length:m}=p,c=p.trim(),{type:h}=u,b=n+d,y=d?0:i;if(u.setAttribute("aIndex",e),h==="noinclude"&&c&&!/^<!--.*-->$/u.test(c)){let[x]=g;if(c.startsWith("|")?[,x]=g:(c.startsWith("<!--")||c.endsWith("-->"))&&([,,x]=g),x){let T=e+m,k={rule:a,message:v.msg("invalid-content","gallery"),severity:x,startIndex:e,endIndex:T,startLine:b,endLine:b,startCol:y,endCol:y+m};l.computeEditInfo&&(k.suggestions=[_(k),si(k,p)]),s.push(k)}}else if(h!=="noinclude"&&h!=="text"){let x=u.lint(e,t);x.length>0&&Array.prototype.push.apply(s,x)}e+=m+1}return s}}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return Object.assign(i,{widths:this.widths,heights:this.heights}),i}}};or=new WeakSet,kl=function(e){return this.normalizeTitle(e,6,{halfParsed:!0,temporary:!0,decode:!0,page:""}).valid},Os=function(e){var t,n;{let i=(t=this.parentNode)==null?void 0:t.getAttr(e),s=typeof i=="string"&&((n=/^(\d+)\s*(?:px)?$/u.exec(i))==null?void 0:n[1]);return s&&Number(s)||120}}});var Wr,qs=L(()=>{"use strict";He();z();M();Ir();Wr=class extends Ce{get type(){return"link"}get innerText(){return this.length>1?this.lastChild.text():Ht(this.firstChild.text().replace(/^\s*:?/u,""))}lint(r=this.getAbsoluteIndex(),e){{let t=super.lint(r,e),n="nested-link",{lintConfig:i}=v,s=i.getSeverity(n);if(s&&this.isInside("ext-link-text")){let a=P(this,{start:r},n,"link-in-extlink",s);(i.computeEditInfo||i.fix)&&(a.fix=ve(a,"delink",this.innerText)),t.push(a)}return t}}}});var Tg,yg,Fn,Rn,_s,gt,Ri=L(()=>{"use strict";z();ae();pe();M();G();Tg=String.raw`(?:[${We}\t]|&nbsp;|&#0*160;|&#[xX]0*[aA]0;)`,yg=new RegExp(`${Tg}+`,"gu"),gt=class extends ${constructor(e,t="free-ext-link",n=v.getConfig(),i){super(e,n,i,{});w(this,Rn);w(this,Fn);S(this,Fn,t)}get type(){return f(this,Fn)}get innerText(){let e=new Map([["!","|"],["=","="]]),t=Pe(this.childNodes.map(n=>{let{type:i}=n,s=String(n.name);return i==="magic-word"&&e.has(s)?e.get(s):n}));return this.type==="magic-link"&&(t=t.replace(yg," ")),t}get link(){let{innerText:e}=this;return this.type==="magic-link"?e.startsWith("ISBN")?`ISBN ${e.slice(5).replace(/[- ]/gu,"").replace(/x$/u,"X")}`:e:Ho(e).replace(/\n/gu,"%0A")}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),i=new U(this,e),{lintConfig:s}=v,{type:a,childNodes:l}=this;if(a==="magic-link"){let p="invalid-isbn",m=s.getSeverity(p);return m&&C(this,Rn,_s).call(this)&&n.push(P(this,i,p,"invalid-isbn",m)),n}let g="invalid-url",d=s.getSeverity(g);if(d&&!this.querySelector("magic-word"))try{this.getUrl()}catch{n.push(P(this,i,g,"invalid-url",d))}let u=a==="ext-link-url";if(g="unterminated-url",d=s.getSeverity(g,u?"pipe":"punctuation"),d){let p=u?/\|/u:/[，；。：！？（）]+/u,m=l.find(c=>c.type==="text"&&p.test(c.data));if(m){let{data:c}=m,h=q(m,i,g,v.msg("in-url",u?'"|"':"full-width-punctuation"),d);if(s.computeEditInfo){let{index:b,0:y}=p.exec(c),x=h.startIndex+b;h.suggestions=u?[vt(x,1)]:[vt(x),{desc:v.msg("encode"),range:[x,x+y.length],text:encodeURI(y)}]}n.push(h)}}return n}}getUrl(e){{let{type:t}=this,{link:n}=this;if(t==="magic-link"){if(n.startsWith("ISBN"))return this.normalizeTitle(`BookSources/${n.slice(5)}`,-1,{temporary:!0}).getUrl(e);n=n.startsWith("RFC")?`https://datatracker.ietf.org/doc/html/rfc${n.slice(4)}`:`https://pubmed.ncbi.nlm.nih.gov/${n.slice(5)}`}else n.startsWith("//")&&(n=`https:${n}`);return new URL(n)}this.lspError("MagicLinkToken.getUrl")}getAttribute(e){return e==="invalid"?C(this,Rn,_s).call(this):super.getAttribute(e)}};Fn=new WeakMap,Rn=new WeakSet,_s=function(){if(this.type==="magic-link"){let{link:e}=this;if(e.startsWith("ISBN")){let t=[...e.slice(5)].map(n=>n==="X"?10:Number(n));return t.length===10?t.reduce((n,i,s)=>n+i*(10-s),0)%11!==0:t.length===13&&(t[12]===10||t.reduce((n,i,s)=>n+i*(s%2?3:1),0)%10!==0)}}return!1}});var Sl,pt,Ws,kg,ct,Ds=L(()=>{"use strict";z();Ve();M();G();Ri();Sl=[he("[")];ct=class extends(kg=$){constructor(e,t="",n="",i,s=[]){super(void 0,i,s,{});w(this,pt);let a=e&&/^\0\d+f\x7F$/u.test(e)?s[Number(e.slice(1,-2))]:new gt(e,"ext-link-url",i,s);if(this.insertAt(a),S(this,pt,t),n){let l=new $(n,i,s,{});l.type="ext-link-text",l.setAttribute("stage",10),this.insertAt(l)}}get type(){return"ext-link"}toString(e){return this.length===1?`[${super.toString(e)}${f(this,pt)}]`:`[${super.toString(e,f(this,pt))}]`}text(){return`[${super.text(" ")}]`}getGaps(){return f(this,pt).length}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),i="var-anchor",s=v.lintConfig.getSeverity(i,"extLink");return s&&this.length===1&&this.isInside("heading-title")&&n.push(P(this,{start:e},i,"variable-anchor",s)),n}}print(){return super.print(this.length===1?{pre:"[",post:`${f(this,pt)}]`}:{pre:"[",sep:f(this,pt),post:"]"})}};Ws=O(kg),pt=new WeakMap,ct=j(Ws,0,"ExtLinkToken",Sl,ct),B(Ws,1,ct)});var Pn,wl=L(()=>{"use strict";G();Xt();qs();Ds();Pn=class extends ${get type(){return"imagemap-link"}constructor(r,e,t,n,i=[]){super(void 0,n,i),this.append(r,e.length===2?new Wr(...e,n,i):new ct(...e,n,i),new me(t,n,i))}}});var Cl={};re(Cl,{ImagemapToken:()=>Ms});var Ms,Ll=L(()=>{"use strict";z();Ae();pe();M();wi();Bs();Ps();wl();Ms=class extends Ft{get image(){return this.childNodes.find(Nr("imagemap-image"))}constructor(r,e=v.getConfig(),t=[]){if(super(void 0,e,t,{}),!r)return;let n=r.split(`
`),i=new Set(e.protocol.split("|")),s=!0,a=!1;for(let l of n){let g=l.trim();if(!(a||!g||g.startsWith("#"))){if(s){let d=l.indexOf("|"),u=d===-1?l:l.slice(0,d),p=this.normalizeTitle(u,0,{halfParsed:!0,temporary:!0,page:""});if(p.valid&&p.ns===6){let m=new ut("imagemap",u,d===-1?void 0:l.slice(d+1),e,t);super.insertAt(m),s=!1;continue}else a=!0}else if(l.trim().split(/[\t ]/u,1)[0]==="desc"){super.insertAt(l);continue}else if(l.includes("[")){let d=l.indexOf("["),u=l.slice(d),p=/^\[\[([^|]+)(?:\|([^\]]*))?\]\][\w\s]*$/u.exec(u);if(p){if(this.normalizeTitle(p[1],0,{halfParsed:!0,temporary:!0,selfLink:!0,page:""}).valid){super.insertAt(new Pn(l.slice(0,d),p.slice(1),u.slice(u.indexOf("]]")+2),e,t));continue}}else if(u.startsWith("[//")||i.has(u.slice(1,u.indexOf(":")+1))||i.has(u.slice(1,u.indexOf("//")+2))){let m=/^\[([^\]\s]+)(?:(\s+(?!\s))([^\]]*))?\][\w\s]*$/u.exec(u);if(m){super.insertAt(new Pn(l.slice(0,d),m.slice(1),u.slice(u.indexOf("]")+1),e,t));continue}}}}super.insertAt(new sr(l,e,t))}}lint(r=this.getAbsoluteIndex(),e){{let t=super.lint(r,e),n=new U(this,r),{childNodes:i,image:s}=this,a="invalid-imagemap",{lintConfig:l}=v,g=l.getSeverity(a,s?"link":"image");return g&&(s?Array.prototype.push.apply(t,i.filter(d=>{let u=d.toString().trim();return d.is("noinclude")&&u&&!u.startsWith("#")}).map(d=>{let u=q(d,n,a,"invalid-imagemap-link",g);return l.computeEditInfo&&(u.suggestions=[_(u,-1),ve(u,"comment","# ")]),u})):t.push(P(this,n,a,"imagemap-without-image",g))),t}}getAttribute(r){return r==="invalid"?!this.image:super.getAttribute(r)}}});var El,Us,vg,ft,Hs=L(()=>{"use strict";z();Lt();Ve();M();Et();El=[Ne(!1),he("<!--")];ft=class extends(vg=fe){constructor(e,t,n,i){super(e,n,i);ge(this,"closed");this.closed=t}get type(){return"comment"}lint(e=this.getAbsoluteIndex()){{if(this.closed)return[];let t="unclosed-comment",{lintConfig:n}=v,i=n.getSeverity(t);if(!i)return[];let s=P(this,{start:e},t,"unclosed-comment",i);return n.computeEditInfo&&(s.suggestions=[je(s.endIndex,"-->")]),[s]}}toString(e){return e?"":`<!--${this.innerText}${this.closed?"-->":""}`}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}};Us=O(vg),ft=j(Us,0,"CommentToken",El,ft),B(Us,1,ft)});var $l={};re($l,{CommentedToken:()=>zs});var zs,Nl=L(()=>{"use strict";G();Hs();zs=class extends ${get type(){return"ext-inner"}constructor(r,e,t=[]){if(super(void 0,e,t,{AstText:":",CommentToken:":"}),r){let n=r.indexOf("<!--"),i=n!==-1&&r.indexOf("-->",n+4),s=0;for(;i!==!1&&i!==-1;)n>s&&this.insertAt(r.slice(s,n)),this.insertAt(new ft(r.slice(n+4,i),!0,e,t)),s=i+3,n=r.indexOf("<!--",s),i=n!==-1&&r.indexOf("-->",n+4);s<r.length&&this.insertAt(r.slice(s))}}lint(r=this.getAbsoluteIndex()){return super.lint(r,new RegExp(String.raw`<\s*(?:\/\s*)?(${this.name})\b`,"giu"))}}});var Fl={};re(Fl,{CategorytreeToken:()=>Dr});var Il,Gs,Ag,Dr,Rl=L(()=>{"use strict";z();Ve();M();Ir();Il=[he("")];Dr=class extends(Ag=Ce){get type(){return"ext-inner"}constructor(r,e,t,n=[]){super(r,e,t,n),this.setAttribute("bracket",!1)}getTitle(){let r=this.firstChild.toString().trim(),e={halfParsed:!0},t=this.normalizeTitle(r,14,e);return t.valid&&t.ns===14?t:this.normalizeTitle(`Category:${r}`,0,e)}lint(r=this.getAbsoluteIndex()){{let e="no-ignored",t=v.lintConfig.getSeverity(e,"categorytree");if(t){let{link:n}=this;if(!n.valid||n.ns!==14)return[P(this,{start:r},e,"invalid-category",t)]}return super.lint(r,!1)}}};Gs=O(Ag),Dr=j(Gs,0,"CategorytreeToken",Il,Dr),B(Gs,1,Dr)});var Pl={};re(Pl,{NowikiToken:()=>Vs});var Sg,wg,Bn,Qs,Vs,Bl=L(()=>{"use strict";He();z();pe();M();Et();Sg=Be(o=>new RegExp(String.raw`<\s*(?:/\s*)${o==="nowiki"?"":"?"}(${o})\b`,"giu")),wg=new Set(["languages","section","templatestyles"]),Vs=class extends fe{constructor(){super(...arguments);w(this,Bn)}get type(){return"ext-inner"}lint(e=this.getAbsoluteIndex()){{let{name:t,innerText:n}=this,{lintConfig:i}=v,s="void-ext",a=i.getSeverity(s,t);if(a&&C(this,Bn,Qs).call(this)){let l=P(this,{start:e},s,v.msg("nothing-in",t),a);return i.computeEditInfo&&(l.suggestions=[_(l)]),[l]}{s="invalid-json";let l=i.getSeverity(s);if(t==="templatedata"&&l)return Ko(n).map(({message:g,from:d,to:u=d,line:p,endLine:m=p,column:c,endColumn:h=c})=>{a=l;let b=new U(this,e);return{rule:s,message:g,severity:a,startIndex:e+d,endIndex:e+u,startLine:b.top+p-1,endLine:b.top+m-1,startCol:(p>1?0:b.left)+c-1,endCol:(m>1?0:b.left)+h-1}}).filter(g=>g!==!1)}return super.lint(e,Sg(t))}}getAttribute(e){return e==="invalid"?C(this,Bn,Qs).call(this):super.getAttribute(e)}};Bn=new WeakSet,Qs=function(){let{name:e,firstChild:{data:t}}=this;return wg.has(e)&&!!t}});var jl,Xs,Cg,dt,Es=L(()=>{"use strict";z();pe();M();mi();G();fi();Si();jl=[Rr()];dt=class extends(Cg=Me){get type(){return"ext"}constructor(r,e,t,n,i=v.getConfig(),s=!1,a=[]){let l=r.toLowerCase(),g=new It(!e||/^\s/u.test(e)?e:` ${e}`,"ext-attrs",l,i,a),d={...i,ext:i.ext.filter(p=>p!==l),excludes:[...i.excludes],inExt:!0},u;switch(l){case"pre":if(g.getAttr("format")!=="wikitext"){let{PreToken:p}=(Xa(),K(Qa));u=new p(t,d,a);break}case"indicator":case"poem":case"ref":case"option":case"combooption":case"tab":case"tabs":case"poll":case"seo":case"langconvert":case"phonos":l==="poem"?d.excludes.push("heading"):l==="tab"&&(d.ext=d.ext.filter(p=>p!=="tabs")),u=new $(t,d,a);break;case"dynamicpagelist":{let{ParamTagToken:p}=(ys(),K(Ka));u=new p(l,s,t,d,a);break}case"inputbox":{let{InputboxToken:p}=(pl(),K(gl));u=new p(l,s,t,d,a);break}case"references":{let{NestedToken:p}=(Ii(),K(Ni));d.excludes.push("heading"),u=new p(t,s,["ref"],d,a);break}case"choose":{let{NestedToken:p}=(Ii(),K(Ni));u=new p(t,/<(option|choicetemplate)(\s[^>]*?)?(?:\/>|>([\s\S]*?)<\/(\1)>)/gu,["option","choicetemplate"],d,a);break}case"combobox":{let{NestedToken:p}=(Ii(),K(Ni));u=new p(t,/<(combooption)(\s[^>]*?)?(?:\/>|>([\s\S]*?)<\/(combooption\s*)>)/giu,["combooption"],d,a);break}case"gallery":{let{GalleryToken:p}=(Al(),K(vl));u=new p(t,d,a);break}case"imagemap":{let{ImagemapToken:p}=(Ll(),K(Cl));u=new p(t,d,a);break}case"hiero":{let{CommentedToken:p}=(Nl(),K($l));u=new p(t,d,a);break}case"categorytree":{let{CategorytreeToken:p}=(Rl(),K(Fl));u=new p(t,void 0,d,a);break}default:{let{NowikiToken:p}=(Bl(),K(Pl));u=new p(t,d,a)}}u.setAttribute("name",l),u.type==="plain"&&(u.type="ext-inner"),super(r,g,u,n,i,a),this.seal("closed",!0)}lint(r=this.getAbsoluteIndex(),e){{let t=super.lint(r,e),{lintConfig:n}=v,i=new U(this,r);if(this.name!=="nowiki"){let s=this.inHtmlAttrs(),a="parsing-order",l=s&&n.getSeverity(a,s===2?"ext":"templateInTable");l&&t.push(P(this,i,a,"ext-in-html",l))}if(this.name==="ref"){let s="var-anchor",a=n.getSeverity(s,"ref");a&&this.closest("heading-title")&&t.push(P(this,i,s,"variable-anchor",a)),s="nested-link",a=n.getSeverity(s,"ref"),a&&this.closest("link-text,ext-link-text")&&t.push(P(this,i,s,"ref-in-link",a))}return t}}};Xs=O(Cg),dt=j(Xs,0,"ExtToken",jl,dt),B(Xs,1,dt)});var Ke,Rt,mt,Mr,Js=L(()=>{"use strict";z();Ae();G();M();Mr=class extends ${constructor(e,t,n,i,s){super(void 0,i,s);w(this,Ke);w(this,Rt);w(this,mt);this.insertAt(t),S(this,Ke,n),S(this,Rt,e)}get closing(){return f(this,Ke)}toString(e){return`<${f(this,Ke)?"/":""}${f(this,Rt)}${super.toString(e)}${this.selfClosing?"/":""}>`}text(e=""){let{closing:t}=this;return`<${t&&!e?"/":""}${f(this,Rt)}${t?"":super.text()}${e}>`}getAttribute(e){return e==="padding"?f(this,Rt).length+(f(this,Ke)?2:1):super.getAttribute(e)}findMatchingTag(){return ze(f(this,mt),()=>{let{type:e,name:t,parentNode:n,closing:i,selfClosing:s}=this,a=!1,l=!1;if(e==="html"){let[,c,h]=this.getAttribute("config").html;a=h.includes(t),l=c.includes(t)}if(a||l&&s)return this;if(!n)return;let{childNodes:g}=n,d=g.indexOf(this),u=i?g.slice(0,d).reverse():g.slice(d+1),p=[this],{rev:m}=J;for(let c of u)if(!(!c.is(e)||e==="html"&&(c.name!==t||l&&c.selfClosing)))if(f(c,Ke)===i){if(e==="tvar")return;p.push(c)}else{let h=p.pop();if(h===this)return c;v.viewOnly&&(S(h,mt,[m,c]),S(c,mt,[m,h]))}if(v.viewOnly)for(let c of p)S(c,mt,[m,void 0])},e=>{S(this,mt,e),e[1]&&e[1]!==this&&S(e[1],mt,[J.rev,this])})}print(){return super.print({pre:`&lt;${f(this,Ke)?"/":""}${f(this,Rt)}`,post:`${this.selfClosing?"/":""}&gt;`})}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return i.closing=f(this,Ke),i}}};Ke=new WeakMap,Rt=new WeakMap,mt=new WeakMap});var Ol,Ks,Lg,Ye,ql=L(()=>{"use strict";Lt();we();Js();wt();Ol=[Ne(),Z];Ye=class extends(Lg=Mr){get type(){return"tvar"}constructor(r,e,t,n,i){let s=new Te(e,"tvar-name",n,i);super(r,s,t,n,i)}};Ks=O(Lg),Ye=j(Ks,0,"TvarToken",Ol,Ye),B(Ks,1,Ye)});var Wl={};re(Wl,{TranslateToken:()=>Ys});var Pi,_l,Ys,Dl=L(()=>{"use strict";G();fi();wt();ql();Ys=class extends Me{constructor(e,t,n,i=[]){let s=new Te(e,"translate-attr",n,i);t=t==null?void 0:t.replace(/<tvar(\|[^>]+)>([\s\S]*?)<\/>/gu,(l,g,d)=>(new Ye("tvar",g,!1,n,i),new Ye("","",!0,n,i),`\0${i.length-2}n${d}\0${i.length}n`)).replace(/<(tvar)(\s+name\s*=(?:\s*(?:(["'])[\s\S]*?\3|[^"'\s>]+))?\s*)>([\s\S]*?)<\/(tvar)(\s*)>/giu,(l,g,d,u,p,m,c)=>(new Ye(g,d,!1,n,i),new Ye(m,c,!0,n,i),`\0${i.length-2}n${p}\0${i.length}n`));let a=new $(t,n,i);a.type="translate-inner";super("translate",s,a,"translate",n,i);w(this,Pi);this.seal("closed",!0)}get type(){return"translate"}get selfClosing(){return!1}toString(e){return e?this.lastChild.toString(!0):super.toString()}text(){return this.lastChild.text()}print(){return`<span class="wpb-ext">&lt;translate${C(this,Pi,_l).call(this)?'<span class="wpb-ext-attrs"> <span class="wpb-ext-attr"><span class="wpb-attr-key">nowrap</span></span></span>':""}&gt;${this.lastChild.print({class:"ext-inner"})}&lt;/translate&gt;</span>`}};Pi=new WeakSet,_l=function(){return this.firstChild.toString()===" nowrap"}});var Hl={};re(Hl,{parseCommentAndExt:()=>tr});var Ul,Eg,Zs,$g,Ml,tr,Ln=L(()=>{"use strict";He();ae();Ia();Xt();Pa();Es();Hs();Ul="<onlyinclude>",Eg="</onlyinclude>",{length:Zs}=Ul,$g=[!1,!0].map(o=>{let r=o?"includeonly":"(?:no|only)include",e=o?"noinclude":"includeonly";return Be(t=>new RegExp(String.raw`<!--[\s\S]*?(?:-->|$)|<${r}(?:\s[^>]*)?/?>|</${r}\s*>|<(${t})(\s[^>]*?)?(?:/>|>([\s\S]*?)</(${"\\1"}\s*)>)|<(${e})(\s[^>]*?)?(?:/>|>([\s\S]*?)(?:</(${e}\s*)>|$))`,"giu"))}),Ml=o=>{let r=o.indexOf(Ul);return{i:r,j:o.indexOf(Eg,r+Zs)}},tr=(o,r,e,t)=>{if(t){let{i:l,j:g}=Ml(o);if(l!==-1&&g!==-1){let d="",u=p=>{new me(p,r,e),d+=`\0${e.length-1}n`};for(;l!==-1&&g!==-1;){let p=`\0${e.length}g`;new Kt(o.slice(l+Zs,g),r,e),l>0&&u(o.slice(0,l)),d+=p,o=o.slice(g+Zs+1),{i:l,j:g}=Ml(o)}return o&&u(o),d}}let{ext:n}=r,i=n,s=r;if(n.includes("translate")){let{TranslateToken:l}=(Dl(),K(Wl)),g=[];i=n.filter(d=>d!=="translate"&&d!=="tvar"),s={...r,ext:i},o=o.replace(/<nowiki>[\s\S]*?<\/nowiki>/giu,d=>(g.push(d),`\0${g.length-1}`)).replace(/<translate( nowrap)?>([\s\S]*?)<\/translate>/gu,(d,u,p)=>{let m=e.length;return new l(u,p&&$e(p,g),s,e),`\0${m}g`}),o=$e(o,g)}let a=$g[t?1:0](i.join("|"));return a.lastIndex=0,a.test(o)?o.replace(a,(l,g,d,u,p,m,c,h,b)=>{let y=e.length,x="n";if(g)x="e",new dt(g,d,u,p,s,m,e);else if(l.startsWith("<!--")){x="c";let T=l.endsWith("-->");new ft($e(l,e,1).slice(4,T?-3:void 0),T,r,e)}else m?new Yt(m,c&&$e(c,e,1),h&&$e(h,e,1),b,r,e):new me(l,r,e,!0);return`\0${y}${x}`}):o}});var Ng,Ig,Fg,zl,Ur,eo,Rg,ar,Gl=L(()=>{"use strict";z();pe();mi();M();Js();Ng=new Set(["if","ifeq","ifexpr","ifexist","iferror","switch"]),Ig=new Set(["b","big","center","cite","code","del","dfn","em","font","i","ins","kbd","mark","pre","q","s","samp","small","strike","strong","sub","sup","tt","u","var"]),Fg=new Set(["strike","big","center","font","tt"]);zl=[Rr()];ar=class extends(Rg=Mr){constructor(e,t,n,i,s,a){super(e,t,n,s,a);w(this,Ur);this.setAttribute("name",e.toLowerCase()),S(this,Ur,i)}get type(){return"html"}get selfClosing(){return f(this,Ur)}text(){let{closing:e,selfClosing:t,name:n}=this,[,,i]=this.getAttribute("config").html;return i.includes(n)?e&&n!=="br"?"":super.text("/"):super.text(t&&!e?"/":"")}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),{name:i,parentNode:s,closing:a,selfClosing:l}=this,g=new U(this,e),{lintConfig:d}=v,{computeEditInfo:u,fix:p}=d,m=this.inTableAttrs(),c="h1",h=d.getSeverity(c,"html");if(h&&i==="h1"&&!a){let A=P(this,g,c,"<h1>",h);u&&(A.suggestions=[{desc:"h2",range:[e+2,e+3],text:"2"}]),n.push(A)}if(c="parsing-order",h=m&&d.getSeverity(c,m===2?"html":"templateInTable"),h){let A=P(this,g,c,"html-in-table",h);u&&m===2&&(A.suggestions=[_(A)]),n.push(A)}if(c="obsolete-tag",h=d.getSeverity(c,i),h&&Fg.has(i)&&n.push(P(this,g,c,"obsolete-tag",h)),c="bold-header",h=d.getSeverity(c,i),h&&(i==="b"||i==="strong")&&this.isInside("heading-title")){let A=P(this,g,c,"bold-in-header",h);u&&(A.suggestions=[_(A)]),n.push(A)}let[,b,y]=this.getAttribute("config").html,x=y.includes(i),T=b.includes(i),k=!x&&!T;if(c="unmatched-tag",a&&(l||x)||l&&k){if(h=d.getSeverity(c,a?"both":"selfClosing"),h){let A=P(this,g,c,a?"closing-and-self-closing":"invalid-self-closing",h);if(u||p){let N=ii(e),E={desc:v.msg("no-self-closing"),range:[A.endIndex-2,A.endIndex-1],text:""};T?u&&(A.suggestions=[N,E]):a?A.fix=x?N:E:u&&(A.suggestions=[E,je(A.endIndex,`></${i}>`,-2)])}n.push(A)}}else if(!this.findMatchingTag()){let A=P(this,g,c,a?"unmatched-closing":"unclosed-tag"),N=this.closest("magic-word");if(N&&Ng.has(N.name))h=d.getSeverity(c,"conditional");else if(a)h=d.getSeverity(c,"closing"),A.suggestions=[_(A)];else{h=d.getSeverity(c,"opening");let E=s==null?void 0:s.childNodes;Ig.has(i)&&(E!=null&&E.slice(0,E.indexOf(this)).some(F=>F.is("html")&&F.name===i&&!F.findMatchingTag())&&(A.suggestions=[je(e+1,"/")]),this.isInside("heading-title")&&(A.rule="format-leakage",h=d.getSeverity("format-leakage",i)))}h&&(A.severity=h,n.push(A))}return n}}getAttribute(e){return e==="invalid"?this.inTableAttrs()===2:super.getAttribute(e)}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return i.selfClosing=f(this,Ur),i}}};eo=O(Rg),Ur=new WeakMap,ar=j(eo,0,"HtmlToken",zl,ar),B(eo,1,ar)});var Vl={};re(Vl,{parseHtml:()=>Bg});var Pg,Bg,Ql=L(()=>{"use strict";Si();Gl();Pg=/^(\/?)([a-z][^\s/>]*)((?:\s|\/(?!>))[^>]*?)?(\/?>)([^<]*)$/iu,Bg=(o,r,e)=>{var s;let{html:t}=r;(s=r.htmlElements)!=null||(r.htmlElements=new Set([...t[0],...t[1],...t[2]]));let n=o.split("<"),i=n.shift();for(let a of n){let l=Pg.exec(a),g=l==null?void 0:l[2],d=g==null?void 0:g.toLowerCase();if(!l||!r.htmlElements.has(d)){i+=`<${a}`;continue}let[,u,,p="",m,c]=l,{length:h}=e,b=new It(p,"html-attrs",d,r,e),y=b.hasAttr("itemprop");if(d==="meta"&&!(y&&b.hasAttr("content"))||d==="link"&&!(y&&b.hasAttr("href"))){i+=`<${a}`,e.length=h;continue}i+=`\0${e.length}x${c}`,new ar(g,b,u==="/",m==="/>",r,e)}return i}});var jg,Xl,to,Og,ht,ro=L(()=>{"use strict";Ae();mi();M();G();wt();Si();jg=o=>{let r=o.childNodes.map(t=>t.type==="text"?t.data.replace(/\|{1,2}/gu,({length:n})=>`{{${"!".repeat(n)}}}`):t.toString()).join(""),{childNodes:e}=v.parseWithRef(r,o,2);J.run(()=>{o.safeReplaceChildren(e)})};Xl=[Rr(1)];ht=class extends(Og=$){constructor(r,e,t,n,i,s=[],a){super(void 0,i,s,a),this.append(new Te(e,"table-syntax",i,s),new It(n,"table-attrs",t,i,s))}escape(){for(let r of this.childNodes)r instanceof Te?jg(r):r.escape()}};to=O(Og),ht=j(to,0,"TableBaseToken",Xl,ht),B(to,1,ht)});var Jl,Kl,Le,no,Hr,jn,lr,io=L(()=>{"use strict";z();pe();ui();M();G();ro();lr=class extends(Kl=ht,Jl=[vr(!1)],Kl){constructor(e,t,n,i=[]){var g;let s=/\||\0\d+!\x7F/u.exec(t!=null?t:""),a=s?t.slice(0,s.index):"";/\[\[|-\{/u.test(a)&&(s=null,a="");super(/^(?:\n[^\S\n]*(?:[|!]|\|\+|\{\{\s*!\s*\}\}\+?)|(?:\||\{\{\s*!\s*\}\}){2}|!!|\{\{\s*!!\s*\}\})$/u,e,"td",a,n,i);B(no,5,this);w(this,Hr);w(this,Le,"");s&&([Yn(this,Le)._]=s);let l=new $(t==null?void 0:t.slice(((g=s==null?void 0:s.index)!=null?g:NaN)+f(this,Le).length),n,i);l.type="td-inner",l.setAttribute("stage",4),this.insertAt(l)}get type(){return"td"}get rowspan(){return this.getAttr("rowspan")}get colspan(){return this.getAttr("colspan")}get subtype(){return C(this,Hr,jn).call(this).subtype}afterBuild(){f(this,Le).includes("\0")&&S(this,Le,this.buildFromStr(f(this,Le),0)),super.afterBuild()}toString(e){let[t,n,i]=this.childNodes;return t.toString(e)+n.toString(e)+f(this,Le)+i.toString(e)}text(){let[e,t,n]=this.childNodes;return e.text()+t.text()+f(this,Le)+n.text()}getGaps(e){return e===1?f(this,Le).length:0}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),i=new U(this,e+this.getRelativeIndex(this.length-1)),s="pipe-like",{lintConfig:a}=v,{computeEditInfo:l,fix:g}=a,d=["td","double"].map(u=>a.getSeverity(s,u));for(let u of this.lastChild.childNodes)if(u.type==="text"){let{data:p}=u;if(p.includes("|")){let m=p.includes("||"),c=d[m?1:0];if(c){let h=q(u,i,s,"pipe-in-table",c);if(l||g)if(m){let b={caption:"|+",td:"|",th:"!"}[this.subtype];h.fix=ve(h,"newline",p.replace(/\|\|/gu,`
${b}`))}else l&&(h.suggestions=[ai(h.startIndex,p)]);n.push(h)}}}return n}}isIndependent(){return this.firstChild.text().startsWith(`
`)}getAttr(e){{let t=super.getAttr(e);return e==="rowspan"||e==="colspan"?parseInt(t)||1:t}}escape(){super.escape(),this.childNodes[1].toString()&&(f(this,Le)||S(this,Le,"{{!}}")),f(this,Le)==="|"&&S(this,Le,"{{!}}")}print(){{let[e,t,n]=this.childNodes;return`<span class="wpb-td">${e.print()}${t.print()}${f(this,Le)}${n.print()}</span>`}}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n),{rowspan:s,colspan:a}=this;return Object.assign(i,{subtype:this.subtype},s!==1&&{rowspan:s},a!==1&&{colspan:a}),i}}};no=O(Kl),Le=new WeakMap,Hr=new WeakSet,jn=function(){var a;let e=this.firstChild.text(),t=e.slice(-1),n="td";if(t==="!"?n="th":t==="+"&&(n="caption"),this.isIndependent())return{subtype:n};let{previousSibling:i}=this;return{...C(a=i,Hr,jn).call(a)}},jn=j(no,17,"#getSyntax",Jl,Hr,jn),dn(no,lr)});var zr,so=L(()=>{"use strict";z();M();ro();io();zr=class extends ht{lint(r=this.getAbsoluteIndex(),e){{let t=super.lint(r,e),n=this.childNodes.find(({type:l})=>l==="table-inter");if(!n)return t;let i=Tr(n),s="fostered-content",a=i&&v.lintConfig.getSeverity(s,i===2?void 0:"transclusion");if(a){let l=q(n,{start:r},s,"content-outside-table",a);l.startIndex++,l.startLine++,l.startCol=0,t.push(l)}return t}}getRowCount(){return Number(this.childNodes.some(r=>r instanceof lr&&r.isIndependent()&&!r.firstChild.text().endsWith("+")))}}});var ao,Yl,Zl,oo,Gr,ed=L(()=>{"use strict";z();Ae();pe();ui();M();so();wt();ao=class extends Array{},Gr=class extends(Zl=zr,Yl=[vr(!1)],Zl){constructor(e,t,n,i){super(/^(?:\{\||\{\{\{\s*!\s*\}\}|\{\{\s*\(!\s*\}\})$/u,e,"table",t,n,i,{});B(oo,5,this)}get type(){return"table"}get closed(){return this.lastChild.is("table-syntax")}lint(e=this.getAbsoluteIndex(),t){{let n=super.lint(e,t),i=new U(this,e),s=["unclosed-table","table-layout"],a=s.map(l=>v.lintConfig.getSeverity(l));if(a[0]&&!this.closed&&n.push(q(this.firstChild,i,s[0],"unclosed-table",a[0])),a[1]){let l=this.getLayout(),{length:g}=l;if(g>1){let d=1,u=1/0,p=0;for(;p<g;p++){let m=l[p],c=m.length;if(c<d)break;c<u&&(u=c);let h=m.indexOf(m[c-1])+1;if(h>u)break;h>d&&(d=h)}if(p<g){let m=this.getNthRow(p),c=q(m,i,s[1],"inconsistent-table",a[1]);c.startIndex++,c.startLine++,c.startCol=0,n.push(c)}}}return n}}close(e=`
|}`,t){J.run(()=>{let n=new Te(t?e:void 0,"table-syntax",this.getAttribute("config"),this.getAttribute("accum"));super.insertAt(n)})}getLayout(e){{let t=this.getAllRows(),{length:n}=t,i=ao.from(rd(n,()=>[]));for(let s=0;s<i.length;s++){let a=i[s],l=0,g=0,d;for(let u of t[s].childNodes.slice(2))if(u.is("td")){if(u.isIndependent()&&(d=u.subtype!=="caption"),d){let p={row:s,column:l},{rowspan:m,colspan:c}=u;for(l++;a[g];)g++;for(let h=s;h<Math.min(s+m,n);h++)for(let b=g;b<g+c;b++)i[h][b]=p;g+=c}}else if(td(u))break}return i}}getAllRows(){return[...super.getRowCount()?[this]:[],...this.childNodes.slice(1).filter(e=>e.is("tr")&&e.getRowCount()>0)]}getNthRow(e,t,n){{let i=super.getRowCount();if(e===0&&i)return this;i&&e--;for(let s of this.childNodes.slice(2)){let{type:a}=s;if(a==="tr"&&s.getRowCount()&&(e--,e<0))return s}return}}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return i.closed=this.closed,i}}};oo=O(Zl),j(oo,1,"getLayout",Yl,Gr),dn(oo,Gr)});var Bi,nd=L(()=>{"use strict";so();Bi=class extends zr{get type(){return"tr"}constructor(r,e,t,n){super(/^\n[^\S\n]*(?:\|-+|\{\{\s*!\s*\}\}-+|\{\{\s*!-\s*\}\}-*)$/u,r,"tr",e,t,n)}}});var Vr,lo=L(()=>{"use strict";Et();Vr=class extends fe{get indent(){return this.innerText.split(":").length-1}json(r,e,t=this.getAbsoluteIndex()){{let n=super.json(void 0,e,t),{indent:i}=this;return i&&(n.indent=i),n}}}});var Qr,uo=L(()=>{"use strict";lo();Qr=class extends Vr{get type(){return"dd"}}});var sd={};re(sd,{parseTable:()=>_g});var qg,id,_g,od=L(()=>{"use strict";G();ed();nd();io();uo();qg=o=>o.lastChild.constructor!==$,id=(o,r)=>o.is("td")?r.pop():o,_g=({firstChild:{data:o},type:r,name:e},t,n)=>{let i=[],s=o.split(`
`),a=r==="root"||r==="parameter-value"||r==="ext-inner"&&e==="poem"?"":`
${s.shift()}`,l,g=(d,u)=>{if(!u){a+=d;return}let{lastChild:p}=u;if(qg(u)){let m=new $(d,t,n);m.type="table-inter",m.setAttribute("stage",3),u.insertAt(m)}else p.setText(p.toString()+d)};for(let d of s){l=i.pop();let[u]=/^(?:\s|\0\d+[cno]\x7F)*/u.exec(d),p=d.slice(u.length),m=/^(:*)((?:\s|\0\d+[cn]\x7F)*)(\{\||\{(?:\0\d+[cn]\x7F)*\0\d+!\x7F|\0\d+\{\x7F)(.*)$/u.exec(p);if(m){for(;l&&!l.is("td");)l=i.pop();let[,T,k,A,N]=m;T&&new Qr(T,t,n),g(`
${u}${T&&`\0${n.length-1}d`}${k}\0${n.length}b`,l),i.push(...l?[l]:[],new Gr(A,N,t,n));continue}else if(!l){a+=`
${d}`;continue}let c=/^(?:(\|\}|\0\d+!\x7F\}|\0\d+\}\x7F)|(\|-+|\0\d+!\x7F-+|\0\d+-\x7F-*)(?!-)|(!|(?:\||\0\d+!\x7F)\+?))(.*)$/u.exec(p);if(!c){g(`
${d}`,l),i.push(l);continue}let[,h,b,y,x]=c;if(h){for(;!l.is("table");)l=i.pop();l.close(`
${u}${h}`,!0),g(x,i[i.length-1])}else if(b){l=id(l,i),l.is("tr")&&(l=i.pop());let T=new Bi(`
${u}${b}`,x,t,n);i.push(l,T),l.insertAt(T)}else{l=id(l,i);let T=y==="!"?/!!|(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu:/(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu,k=T.exec(x),A=0,N=`
${u}${y}`,E=F=>{let V=new lr(N,x.slice(A,k==null?void 0:k.index),t,n);return F.insertAt(V),V};for(;k;)E(l),{lastIndex:A}=T,[N]=k,k=T.exec(x);i.push(l,E(l))}}return a.slice(1)}});var Pt,go=L(()=>{"use strict";Pt=o=>!/^＿{2}.+＿{2}$/u.test(o)});var ji,ad=L(()=>{"use strict";Et();ji=class extends fe{get type(){return"hr"}}});var ld,Xr,po,Wg,dr,dd=L(()=>{"use strict";Lt();Ve();Et();ld=[Ne(),he("__")];dr=class extends(Wg=fe){constructor(e,t,n,i,s){var d,u;super(e,i,s);w(this,Xr);let a=e.toLowerCase(),[,,l,g]=i.doubleUnderscore;this.setAttribute("name",(u=t?(d=g==null?void 0:g[e])==null?void 0:d.toLowerCase():l==null?void 0:l[a])!=null?u:a),S(this,Xr,n)}get type(){return"double-underscore"}toString(){let e=f(this,Xr)?"＿＿":"__";return e+this.innerText+e}print(){{let e=f(this,Xr)?"＿＿":"__";return super.print({pre:e,post:e})}}};po=O(Wg),Xr=new WeakMap,dr=j(po,0,"DoubleUnderscoreToken",ld,dr),B(po,1,dr)});var ud={};re(ud,{parseHrAndDoubleUnderscore:()=>Dg});var Dg,gd=L(()=>{"use strict";go();ad();dd();vs();Dg=({firstChild:{data:o},type:r,name:e},t,n)=>{var g,d,u;let[i,s,a]=t.doubleUnderscore,l=[...i,...s];return(g=t.insensitiveDoubleUnderscore)!=null||(t.insensitiveDoubleUnderscore=new Set(i.filter(Pt))),(d=t.sensitiveDoubleUnderscore)!=null||(t.sensitiveDoubleUnderscore=new Set(s.filter(Pt))),(u=t.regexHrAndDoubleUnderscore)!=null||(t.regexHrAndDoubleUnderscore=new RegExp(String.raw`^((?:\0\d+[cno]\x7F)*)(-{4,})|__(${l.filter(Pt).join("|")})__|＿{2}(${l.filter(p=>!Pt(p)).map(p=>p.slice(2,-2)).join("|")})＿{2}`,"gimu")),r!=="root"&&(r!=="ext-inner"||e!=="poem")&&(o=`\0${o}`),o=o.replace(t.regexHrAndDoubleUnderscore,(p,m,c,h,b)=>{var A;if(c)return new ji(c,t,n),`${m}\0${n.length-1}r`;let y=h!=null?h:b,x=t.sensitiveDoubleUnderscore.has(y),T=y.toLowerCase(),k=t.insensitiveDoubleUnderscore.has(T);return x||k?(new dr(y,x,!!b,t,n),`\0${n.length-1}${k&&((A=a==null?void 0:a[T])!=null?A:T)==="toc"?"u":"n"}`):p}),t.excludes.includes("heading")||(o=o.replace(/^((?:\0\d+[cn]\x7F)*)(={1,6})(.+)\2((?:\s|\0\d+[cn]\x7F)*)$/gmu,(p,m,c,h,b)=>{let y=`${m}\0${n.length}h`;return new lt(c.length,[h,b],t,n),y})),r==="root"||r==="ext-inner"&&e==="poem"?o:o.slice(1)}});var Jr,Oi,pd=L(()=>{"use strict";z();pe();M();Et();Oi=class extends fe{constructor(e,t,n,i){super(e,n,i);w(this,Jr);S(this,Jr,t)}get type(){return"quote"}get bold(){return this.innerText.length!==2}get italic(){return this.innerText.length!==3}get closing(){return{...this.bold?{bold:f(this,Jr).bold}:void 0,...this.italic?{italic:f(this,Jr).italic}:void 0}}text(){let{parentNode:e,innerText:t}=this;return e!=null&&e.is("image-parameter")&&e.name!=="caption"?"":t}lint(e=this.getAbsoluteIndex()){{let{previousSibling:t,bold:n,closing:i}=this,s=(t==null?void 0:t.type)==="text"?t.data:void 0,a=[],l=new U(this,e),g=["lonely-apos","bold-header"],{lintConfig:d}=v,{computeEditInfo:u}=d,p=[void 0,"word"].map(c=>d.getSeverity(g[0],c)),m=d.getSeverity(g[1]);if(s!=null&&s.endsWith("'")){let c=p[(i.bold||i.italic)&&/[a-z\d]'$/iu.test(s)?1:0];if(c){let h=P(this,l,g[0],v.msg("lonely","'"),c),{startLine:b,startCol:y}=h,[,{length:x}]=/(?:^|[^'])('+)$/u.exec(s),T=e-x,k={...h,startIndex:T,endIndex:e,endLine:b,startCol:y-x,endCol:y};u&&n&&(k.suggestions=[st(T,"&apos;",x),_(k)]),a.push(k)}}if(m&&n&&this.isInside("heading-title")){let c=P(this,l,g[1],"bold-in-header",m);u&&(c.suggestions=[_(c)]),a.push(c)}return a}}json(e,t,n=this.getAbsoluteIndex()){{let i=super.json(void 0,t,n);return Object.assign(i,{bold:this.bold,italic:this.italic}),i}}};Jr=new WeakMap});var cd={};re(cd,{parseQuotes:()=>co});var co,fo=L(()=>{"use strict";pd();co=(o,r,e,t)=>{var m;let n=o.split(/('{2,})/u),{length:i}=n;if(i===1)return o;let s=0,a=0,l,g,d;for(let c=1;c<i;c+=2){let h=n[c].length;switch(h){case 2:a++;break;case 4:n[c-1]+="'",n[c]="'''";case 3:if(s++,l!==void 0)break;n[c-1].endsWith(" ")?g===void 0&&d===void 0&&(d=c):n[c-1].slice(-2,-1)===" "?l=c:g!=null||(g=c);break;default:n[c-1]+="'".repeat(h-5),n[c]="'''''",a++,s++}}if(a%2===1&&s%2===1){let c=(m=l!=null?l:g)!=null?m:d;c!==void 0&&(n[c]="''",n[c-1]+="'")}let u=!1,p=!1;for(let c=1;c<i;c+=2){let h=n[c].length,b=h!==2,y=h!==3,x=new Oi(n[c],{bold:b&&!!u,italic:y&&!!p},r,e);b&&(u=!u&&x),y&&(p=!p&&x),n[c]=`\0${e.length-1}q`}return n.join("")}});var fd={};re(fd,{parseExternalLinks:()=>mo});var mo,ho=L(()=>{"use strict";ae();Ds();Ri();mo=(o,r,e,t)=>{var n;return(n=r.regexExternalLinks)!=null||(r.regexExternalLinks=new RegExp(String.raw`\[((?:\0\d+[cn]\x7F)*(?:\0\d+f\x7F|(?:(?:${r.protocol}|//)${tt}|\0\d+m\x7F)${rt}(?=[[\]<>"\t${We}]|\0\d)))([${We}]*(?![${We}]))([^\]\x01-\x08\x0A-\x1F\uFFFD]*)\]`,"giu")),o.replace(r.regexExternalLinks,(i,s,a,l)=>{let{length:g}=e,d=/&[lg]t;/u.exec(s);return d&&(a="",l=s.slice(d.index)+a+l,s=s.slice(0,d.index)),t?(new gt(s,"ext-link-url",r,e),`[\0${g}f${a}${l}]`):(new ct(s,a,l,r,e),`\0${g}w`)})}});var qi,md=L(()=>{"use strict";Ir();ae();qi=class extends Ce{get type(){return"category"}get sortkey(){{let[,r]=this.childNodes;return r&&Mt(r.text())}}json(r,e,t=this.getAbsoluteIndex()){{let n=super.json(void 0,e,t),{sortkey:i}=this;return i&&(n.sortkey=i),n}}}});var bd={};re(bd,{parseLinks:()=>hd});var Mg,hd,xd=L(()=>{"use strict";ae();M();fo();ho();qs();Is();md();Mg=/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(\||\0\d+!\x7F)([\s\S]*)$/u,hd=(o,r,e,t,n)=>{var l;(l=r.regexLinks)!=null||(r.regexLinks=new RegExp(String.raw`^\s*(?:${r.protocol}|//)`,"iu"));let i=r.inExt?/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)([\s\S]*?[^\]]))?\]\]([\s\S]*)$/u:/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])*)(?:(\||\0\d+!\x7F)([\s\S]*?[^\]])?)?\]\]([\s\S]*)$/u,s=o.split("[["),a=s.shift();for(let g=0;g<s.length;g++){let d=!1,u,p,m,c,h=s[g],b=i.exec(h);if(b)[,u,p,m,c]=b,c.startsWith("]")&&(m!=null&&m.includes("["))&&(m+="]",c=c.slice(1));else{let N=Mg.exec(h);N&&(d=!0,[,u,p,m]=N)}if(u===void 0||r.regexLinks.test(u)||/\0\d+[exhbru]\x7F/u.test(u)){a+=`[[${h}`;continue}let y=se(u).trim(),x=y.startsWith(":");if(x&&d){a+=`[[${h}`;continue}else!y&&m&&!m.includes(`
`)&&(y=se(m).trim());let{ns:T,valid:k}=v.normalizeTitle(y,0,!1,r,{halfParsed:!0,temporary:!0,decode:!0,selfLink:!0,page:t});if(k){if(d){if(T!==6){a+=`[[${h}`;continue}let N=!1;for(g++;g<s.length;g++){let E=s[g],F=E.split("]]");if(F.length>2){N=!0,m+=`[[${F[0]}]]${F[1]}`,c=F.slice(2).join("]]");break}else if(F.length===2)m+=`[[${F[0]}]]${F[1]}`;else{m+=`[[${E}`;break}}if(m=hd(m,r,e,t,n),!N){a+=`[[${u}${p}${m}`;continue}}}else{a+=`[[${h}`;continue}m&&(m=co(m,r,e,n));let A=Wr;x||(T===6?(m&&(m=mo(m,r,e,!0)),A=_r):T===14&&(A=qi)),m===void 0&&p&&(m=""),a+=`\0${e.length}l${c}`,new A(u,m,r,e,p)}return a}});var Ad={};re(Ad,{parseMagicLinks:()=>Ug});var vd,Td,yd,kd,Ug,Sd=L(()=>{"use strict";ae();Ri();vd=String.raw`[${We}\t]|&nbsp;|&#0*160;|&#x0*a0;`,Td=`(?:${vd})+`,yd=`(?:${vd}|-)`,kd=String.raw`(?:RFC|PMID)${Td}\d+\b|ISBN${Td}(?:97[89]${yd}?)?(?:\d${yd}?){9}[\dx]\b`,Ug=(o,r,e)=>{if(!r.regexMagicLinks)try{r.regexMagicLinks=new RegExp(String.raw`(^|[^\p{L}\p{N}_])(?:(?:${r.protocol})(${tt}${rt})|${kd})`,"giu")}catch{r.regexMagicLinks=new RegExp(String.raw`(^|\W)(?:(?:${r.protocol})(${tt}${rt})|${kd})`,"giu")}return o.replace(r.regexMagicLinks,(t,n,i)=>{let s=n?t.slice(n.length):t;if(i){let a="",l=/&(?:[lg]t|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(s);l&&(a=s.slice(l.index),s=s.slice(0,l.index));let g=s.includes("(")?/[^,;\\.:!?][,;\\.:!?]+$/u:/[^,;\\.:!?)][,;\\.:!?)]+$/u,d=g.exec(s);if(d){let u=1;d[0][1]===";"&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/iu.test(s.slice(0,d.index))&&(u=2),a=s.slice(d.index+u)+a,s=s.slice(0,d.index+u)}return a.length>=i.length?t:(new gt(s,void 0,r,e),`${n}\0${e.length-1}w${a}`)}else if(!/^(?:RFC|PMID|ISBN)/u.test(s))return t;return new gt(s,"magic-link",r,e),`${n}\0${e.length-1}i`})}});var wd,Cd=L(()=>{"use strict";wd=(o,r)=>o.startsWith(r)?r.length:[...r].findIndex((e,t)=>e!==o[t])});var Hg,_i,Ld=L(()=>{"use strict";z();M();lo();Hg=new Set(["link","category","file"]),_i=class extends Vr{get type(){return"list"}lint(r=this.getAbsoluteIndex()){var e;{let t="syntax-like",n=v.lintConfig.getSeverity(t,"redirect"),{innerText:i}=this;if(n&&i==="#"){let{nextSibling:s}=this;if((s==null?void 0:s.type)==="text"&&Hg.has((e=s.nextSibling)==null?void 0:e.type)&&new RegExp(String.raw`^(?:${this.getAttribute("config").redirection.join("|")})\s*(?::\s*)?$`,"iu").test(`#${s.data}`)){let l=P(s,{start:r+1},t,"redirect-like",n);return l.startIndex--,l.startCol--,l.endIndex+=2,l.endCol+=2,[l]}}return[]}}}});var Ed={};re(Ed,{parseList:()=>zg});var zg,$d=L(()=>{"use strict";Cd();Ld();uo();zg=(o,r,e,t)=>{let n=/^((?:\0\d+[cno]\x7F)*)([;:*#]+)(\s*)/u.exec(o);if(!n)return r.lastPrefix="",o;let[i,s,a,l]=n,g=a.replace(/;/gu,":"),d=wd(g,r.lastPrefix),u=((d>1?a.slice(d-1):a)+l).split(/(?=;)/u),p=u[0].startsWith(";"),m=u.length-(p?0:1);if(d>1){let W=a.slice(0,d-1);if(p){let Y=W.split(/(?=;)/u);u.unshift(...Y),m+=W.includes(";")?Y.length:0}else u[0]=W+u[0]}r.lastPrefix=g;let c=s+u.map((W,Y)=>`\0${t.length+Y}d`).join("")+o.slice(i.length);for(let W of u)new _i(W,e,t);if(!m)return c;let[h,,b]=e.html,y=/:+|-\{|\0\d+[xq]\x7F/gu,x=y,T=x.exec(c),k=0,A=!1,N=!1,E=0,F=(W,Y)=>(new Qr(W,e,t),`${c.slice(0,Y)}\0${t.length-1}d${c.slice(Y+W.length)}`),V=W=>{W?k&&k--:k++};for(;T&&m;){let{0:W,index:Y}=T;if(W==="-{"){if(!E){let{lastIndex:D}=x;x=/-\{|\}-/gu,x.lastIndex=D}E++}else if(W==="}-"){if(E--,!E){let{lastIndex:D}=x;x=y,x.lastIndex=D}}else if(W.endsWith("x")){let{name:D,closing:I,selfClosing:R}=t[Number(W.slice(1,-2))];(h.includes(D)||!R&&!b.includes(D))&&V(I)}else if(W.endsWith("q")){let{bold:D,italic:I}=t[Number(W.slice(1,-2))];D&&(V(A),A=!A),I&&(V(N),N=!N)}else if(k===0){if(W.length>=m)return F(W.slice(0,m),Y);m-=W.length,x.lastIndex=Y+4+String(t.length).length,c=F(W,Y)}T=x.exec(c)}return c}});var bo,Nd,Ze,xo,Gg,ur,Id=L(()=>{"use strict";z();pe();xn();we();M();G();St();bo=new Set(["A","T","R","D","-","H","N"]);Nd=[At(),Z];ur=class extends(Gg=$){constructor(e,t,n=[]){super(void 0,t,n,{});w(this,Ze);this.safeAppend(e.map(i=>new ce(i,"converter-flag",t,n)))}get type(){return"converter-flags"}afterBuild(){S(this,Ze,this.childNodes.map(e=>e.text().trim())),super.afterBuild()}toString(e){return super.toString(e,";")}text(){return super.text(";")}getUnknownFlags(){return new Set(f(this,Ze).filter(e=>/\{{3}[^{}]+\}{3}/u.test(e)))}getVariantFlags(){let e=new Set(this.getAttribute("config").variants);return new Set(f(this,Ze).filter(t=>e.has(t)))}isInvalidFlag(e,t,n,i){return typeof e=="object"&&(e=e.text().trim(),t=this.getVariantFlags(),n=this.getUnknownFlags(),i=new Set(f(this,Ze).filter(s=>bo.has(s)))),!!e&&!t.has(e)&&!n.has(e)&&(t.size>0||!i.has(e))}lint(e=this.getAbsoluteIndex(),t){{let n=this.getVariantFlags(),i=this.getUnknownFlags(),s=new Set(f(this,Ze).filter(h=>bo.has(h))),a=f(this,Ze).filter(h=>!h).length,l=f(this,Ze).length-i.size-a,{lintConfig:g}=v,{computeEditInfo:d,fix:u}=g,p=super.lint(e,t);if(n.size===l||s.size===l)return p;let m="no-ignored",c=g.getSeverity(m,"conversionFlag");if(c){let h=new U(this,e);for(let b=0;b<this.length;b++){let y=this.childNodes[b],x=y.text().trim();if(this.isInvalidFlag(x,n,i,s)){let T=q(y,h,m,"invalid-conversion-flag",c);(d||u)&&(n.size===0&&bo.has(x.toUpperCase())?T.fix=oi(T,x):d&&(T.suggestions=[_(T,b&&-1)])),p.push(T)}}}return p}}print(){return super.print({sep:";"})}};xo=O(Gg),Ze=new WeakMap,ur=j(xo,0,"ConverterFlagsToken",Nd,ur),B(xo,1,ur)});var To,Fd,yo,Vg,bt,Rd=L(()=>{"use strict";we();M();G();St();To=(o,r,e,t)=>{let n=new $(o,e,t);return n.type=`converter-rule-${r}`,n.setAttribute("stage",11),n};Fd=[Z];bt=class extends(Vg=$){get type(){return"converter-rule"}get variant(){var r,e;return(e=(r=this.childNodes[this.length-2])==null?void 0:r.text().trim().toLowerCase())!=null?e:""}constructor(r,e=!0,t=v.getConfig(),n=[]){super(void 0,t,n,{});let i=r.indexOf(":"),s=r.slice(0,i).indexOf("=>"),a=s===-1?r.slice(0,i):r.slice(s+2,i);e&&t.variants.includes(a.trim().toLowerCase())?(super.insertAt(new ce(a,"converter-rule-variant",t,n)),super.insertAt(To(r.slice(i+1),"to",t,n)),s!==-1&&super.insertAt(To(r.slice(0,s),"from",t,n),0)):super.insertAt(To(r,"to",t,n))}toString(r){let{childNodes:e,firstChild:t,lastChild:n}=this;return e.length===3?`${t.toString(r)}=>${e[1].toString(r)}:${n.toString(r)}`:super.toString(r,":")}text(){let{childNodes:r,firstChild:e,lastChild:t}=this;return r.length===3?`${e.text()}=>${r[1].text()}:${t.text()}`:super.text(":")}getGaps(r){return r===0&&this.length===3?2:1}print(){{let{childNodes:r}=this;if(r.length===3){let[e,t,n]=r;return`<span class="wpb-converter-rule">${e.print()}=>${t.print()}:${n.print()}</span>`}return super.print({sep:":"})}}json(r,e,t=this.getAbsoluteIndex()){{let n=super.json(void 0,e,t);return n.variant=this.variant,n}}};yo=O(Vg),bt=j(yo,0,"ConverterRuleToken",Fd,bt),B(yo,1,bt)});var Pd,ko,Qg,gr,Bd=L(()=>{"use strict";ae();Ve();we();G();Id();Rd();Pd=[Z,he("-{")];gr=class extends(Qg=$){get type(){return"converter"}constructor(r,e,t,n=[]){super(void 0,t,n),this.insertAt(new ur(r,t,n));let[i]=e,s=i.includes(":"),a=new bt(i,s,t,n);(s?a.length===1:e.length===2&&!se(e[1]).trim())?this.insertAt(new bt(e.join(";"),!1,t,n)):this.safeAppend([a,...e.slice(1).map(l=>new bt(l,!0,t,n))])}toString(r){let[e,...t]=this.childNodes;return`-{${e.toString(r)}${e.length>0?"|":""}${t.map(n=>n.toString(r)).join(";")}}-`}text(){let[r,...e]=this.childNodes;return`-{${r.text()}|${Pe(e,";")}}-`}getGaps(r){return r||this.firstChild.length>0?1:0}print(){{let[r,...e]=this.childNodes;return`<span class="wpb-converter">-{${r.print()}${r.length>0?"|":""}${it(e,{sep:";"})}}-</span>`}}};ko=O(Qg),gr=j(ko,0,"ConverterToken",Pd,gr),B(ko,1,gr)});var jd={};re(jd,{parseConverter:()=>Xg});var Xg,Od=L(()=>{"use strict";Bd();Xg=(o,r,e)=>{var l;(l=r.regexConverter)!=null||(r.regexConverter=new RegExp(String.raw`;(?=(?:[^;]*?=>)?\s*(?:${r.variants.join("|")})\s*:|(?:\s|\0\d+[cn]\x7F)*$)`,"iu"));let t=/-\{/gu,n=/-\{|\}-/gu,i=[],s=t,a=s.exec(o);for(;a;){let{0:g,index:d}=a;if(g==="}-"){let u=i.pop(),{length:p}=e,m=o.slice(u.index+2,d),c=m.indexOf("|"),[h,b]=c===-1?[[],m]:[m.slice(0,c).split(";"),m.slice(c+1)],y=b.replace(/(&[#a-z\d]+);/giu,"$1"),x=y.split(r.regexConverter).map(T=>T.replace(/\x01/gu,";"));new gr(h,x,r,e),o=`${o.slice(0,u.index)}\0${p}v${o.slice(d+2)}`,i.length===0&&(s=t),s.lastIndex=u.index+3+String(p).length}else i.push(a),s=n,s.lastIndex=d+2;a=s.exec(o)}return o}});var Wi={};re(Wi,{Token:()=>$});var Jg,On,Fe,ne,ie,Kr,Yr,qn,Zr,te,qd,_d,Wd,Dd,Md,Ud,Hd,zd,Gd,Vd,Qd,Xd,vo,$,G=L(()=>{"use strict";ae();z();Ae();M();ga();Ta();Jg=["category","html-attr#id,ext-attr#id,table-attr#id"],vo=class vo extends zt{constructor(e,t=v.getConfig(),n=[],i){super();w(this,te);w(this,On,"plain");w(this,Fe,0);w(this,ne);w(this,ie);w(this,Kr);w(this,Yr,!1);w(this,qn);w(this,Zr);typeof e=="string"&&this.insertAt(e),S(this,ne,t),S(this,ie,n),n.push(this)}get type(){return f(this,On)}set type(e){S(this,On,e)}get pageName(){return f(this.getRootNode(),Zr)}set pageName(e){if(e){let t=this.normalizeTitle(e,0,{temporary:!0,page:""});S(this,Zr,t.valid?t.title:void 0)}else S(this,Zr,e===""?"":void 0)}parseOnce(e=f(this,Fe),t=!1,n){if(e<f(this,Fe)||this.length!==1||!this.isPlain())return this;if(f(this,Fe)>=11)return this;switch(e){case 0:if(this.type==="root"){f(this,ie).pop();let i=C(this,te,qd).call(this);t&&(t=!i)}S(this,Kr,t),C(this,te,_d).call(this,t);break;case 1:C(this,te,Wd).call(this);break;case 2:C(this,te,Dd).call(this);break;case 3:C(this,te,Md).call(this);break;case 4:C(this,te,Ud).call(this);break;case 5:C(this,te,Hd).call(this,n);break;case 6:C(this,te,zd).call(this,n);break;case 7:C(this,te,Gd).call(this);break;case 8:C(this,te,Vd).call(this);break;case 9:C(this,te,Qd).call(this);break;case 10:C(this,te,Xd).call(this)}if(this.type==="root")for(let i of f(this,ie))i==null||i.parseOnce(e,t,n);return Yn(this,Fe)._++,this}buildFromStr(e,t){let n=e.split(/[\0\x7F]/u).map((i,s)=>{if(s%2===0)return i&&new vn(i);let a=Number(i.slice(0,-1));return f(this,ie)[a]}).filter(i=>i!=="");return t===0?n.map(String).join(""):t===1?Pe(n):n}build(){S(this,Fe,11);let{length:e,firstChild:t}=this,n=t==null?void 0:t.toString();if(e===1&&t.type==="text"&&n.includes("\0")&&(Gt(this,0,1,this.buildFromStr(n)),this.type==="root"))for(let i of f(this,ie))i==null||i.build()}afterBuild(){if(this.type==="root")for(let e of f(this,ie))e==null||e.afterBuild();S(this,Yr,!0)}parse(e=11,t,n){for(e=Math.min(e,11);f(this,Fe)<e;)this.parseOnce(f(this,Fe),t,n);return e&&(this.build(),this.afterBuild()),this}isPlain(){return this.constructor===vo}getAttribute(e){var t;switch(e){case"config":return f(this,ne);case"include":return(t=f(this,Kr))!=null?t:!!f(this.getRootNode(),Kr);case"accum":return f(this,ie);case"built":return f(this,Yr);case"stage":return f(this,Fe);case"invalid":return this.type==="table-inter"&&Tr(this)===2;default:return super.getAttribute(e)}}setAttribute(e,t){e==="stage"?(f(this,Fe)===0&&this.type==="root"&&f(this,ie).shift(),S(this,Fe,t)):super.setAttribute(e,t)}insertAt(e,t=this.length){let n=typeof e=="string"?new vn(e):e,{length:i}=this;t+=t<0?i:0,super.insertAt(n,t);let{type:s}=n;return s==="root"&&(n.type="plain"),n}normalizeTitle(e,t=0,n){return v.normalizeTitle(e,t,this.getAttribute("include"),f(this,ne),{page:this.pageName,...n})}inTableAttrs(){var e;return this.isInside("table-attrs")&&((e=this.closest("table-attrs,arg,parameter"))!=null&&e.is("table-attrs")?2:1)}inHtmlAttrs(){return this.isInside("html-attrs")?2:this.inTableAttrs()}lint(e=this.getAbsoluteIndex(),t){var n;{let{lintConfig:i}=v,{computeEditInfo:s,fix:a,ignoreDisables:l,configurationComment:g}=i,d=super.lint(e,t);if(this.type==="root"){let u=new Map,p="no-duplicate",m=["category","id"].map(b=>i.getSeverity(p,b)),c=this.toString(),h=Jg.filter((b,y)=>m[y]).join();if(h){for(let b of this.querySelectorAll(h)){let y;if(b.is("category"))y=b.name;else{let x=b.getValue();x&&x!==!0&&(y=`#${x}`)}if(y){let x=u.get(y);x?x.add(b):u.set(y,new Set([b]))}}for(let[b,y]of u)if(y.size>1&&!b.startsWith("#mw-customcollapsible-")){let x=!b.startsWith("#"),T=`duplicate-${x?"category":"id"}`,k=m[x?0:1];d.push(...[...y].map(A=>{let N=P(A,{start:A.getAbsoluteIndex()},p,T,k);return s&&x&&(N.suggestions=[_(N)]),N}))}}if(!l){let b=new RegExp(String.raw`<!--\s*${g}-(disable(?:(?:-next)?-line)?|enable)(\s[\sa-z,-]*)?-->`,"gu"),y=[],x=b.exec(c);for(;x;){let{1:T,index:k}=x,A=(n=x[2])==null?void 0:n.trim(),N;(T==="disable-line"||T==="disable-next-line")&&(N=this.posFromIndex(k).top+(T==="disable-line"?0:1)),y.push({line:N,from:T==="disable"?b.lastIndex:void 0,to:T==="enable"?b.lastIndex:void 0,rules:A?new Set(A.split(",").map(E=>E.trim())):void 0}),x=b.exec(c)}d=d.filter(({rule:T,startLine:k,startIndex:A})=>{let N={pos:0};for(let{line:E,from:F,to:V,rules:W}of y){if(E&&E>k+1)break;if(W&&!W.has(T))continue;if(E===k)return!1;F<=A&&F>N.pos?(N.pos=F,N.type="from"):V<=A&&V>N.pos&&(N.pos=V,N.type="to")}return N.type!=="from"})}if(a&&d.some(({fix:b})=>b)){let b=d.map(({fix:T})=>T).filter(T=>T!==void 0).sort(({range:[T,k]},{range:[A,N]})=>k===N?A-T:N-k),y=1/0,x=c;for(let{range:[T,k],text:A}of b)k<=y&&(x=x.slice(0,T)+A+x.slice(k),y=T);Object.assign(d,{output:x})}if(!s)for(let b of d)delete b.fix,delete b.suggestions}return d}}toString(e,t){return e?super.toString(!0,t):ze(f(this,qn),()=>super.toString(!1,t),n=>{let i=this.getRootNode();i.type==="root"&&f(i,Yr)&&S(this,qn,n)})}};On=new WeakMap,Fe=new WeakMap,ne=new WeakMap,ie=new WeakMap,Kr=new WeakMap,Yr=new WeakMap,qn=new WeakMap,Zr=new WeakMap,te=new WeakSet,qd=function(){let{parseRedirect:e}=($a(),K(Ea)),t=this.firstChild.toString(),n=e(t,f(this,ne),f(this,ie));return n!==!1&&this.setText(n),!!n},_d=function(e){let{parseCommentAndExt:t}=(Ln(),K(Hl));this.setText(t(this.firstChild.toString(),f(this,ne),f(this,ie),e))},Wd=function(){let{parseBraces:e}=($i(),K(ul)),t=this.type==="root"?this.firstChild.toString():`\0${this.firstChild.toString()}`,n=e(t,f(this,ne),f(this,ie));this.setText(this.type==="root"?n:n.slice(1))},Dd=function(){if(f(this,ne).excludes.includes("html"))return;let{parseHtml:e}=(Ql(),K(Vl));this.setText(e(this.firstChild.toString(),f(this,ne),f(this,ie)))},Md=function(){if(f(this,ne).excludes.includes("table"))return;let{parseTable:e}=(od(),K(sd));this.setText(e(this,f(this,ne),f(this,ie)))},Ud=function(){if(f(this,ne).excludes.includes("hr"))return;let{parseHrAndDoubleUnderscore:e}=(gd(),K(ud));this.setText(e(this,f(this,ne),f(this,ie)))},Hd=function(e){let{parseLinks:t}=(xd(),K(bd));this.setText(t(this.firstChild.toString(),f(this,ne),f(this,ie),this.pageName,e))},zd=function(e){let{parseQuotes:t}=(fo(),K(cd)),n=this.firstChild.toString().split(`
`);for(let i=0;i<n.length;i++)n[i]=t(n[i],f(this,ne),f(this,ie),e);this.setText(n.join(`
`))},Gd=function(){let{parseExternalLinks:e}=(ho(),K(fd));this.setText(e(this.firstChild.toString(),f(this,ne),f(this,ie)))},Vd=function(){let{parseMagicLinks:e}=(Sd(),K(Ad));this.setText(e(this.firstChild.toString(),f(this,ne),f(this,ie)))},Qd=function(){if(f(this,ne).excludes.includes("list"))return;let{parseList:e}=($d(),K(Ed)),{firstChild:t,type:n,name:i}=this,s=t.toString().split(`
`),a={lastPrefix:""},l=n==="root"||n==="ext-inner"&&i==="poem"?0:1;for(;l<s.length;l++)s[l]=e(s[l],a,f(this,ne),f(this,ie));this.setText(s.join(`
`))},Xd=function(){if(f(this,ne).variants.length>0){let{parseConverter:e}=(Od(),K(jd));this.setText(e(this.firstChild.toString(),f(this,ne),f(this,ie)))}};$=vo});var J,Nr,td,va,Gt,ha,rd,Ae=L(()=>{"use strict";J={running:!1,run(o,r){let{running:e}=this;this.running=!0;let t=r==null?void 0:r.internal;r&&(r.internal=!0);let n=()=>{this.running=e,r&&(r.internal=t)};try{let{Token:i}=(G(),K(Wi)),s=o();return s instanceof i&&!s.getAttribute("built")&&s.afterBuild(),n(),s}catch(i){throw n(),i}},internal(o,r){let{internal:e}=r;r.internal=!0;let t=o();return r.internal=e,t},rev:0},Nr=o=>r=>r.type===o,td=({type:o})=>o==="tr"||o==="table-syntax",va=o=>o==="redirect-target"||o==="link",Gt=(o,r,e,t=[])=>{var s,a;let n=o.getChildNodes(),i;n.length===e?(i=n,n=t):i=Array.prototype.splice.apply(n,[r,e,...t]);for(let l=0;l<t.length;l++){let g=t[l];g.setAttribute("parentNode",o),g.setAttribute("nextSibling",n[r+l+1]),g.setAttribute("previousSibling",n[r+l-1])}return(s=n[r-1])==null||s.setAttribute("nextSibling",n[r]),(a=n[r+t.length])==null||a.setAttribute("previousSibling",n[r+t.length-1]),n===t&&o.setAttribute("childNodes",n),i},ha=(o,r)=>{let e=o.toLowerCase(),[t,n]=r,i=Object.prototype.hasOwnProperty.call(n,o);return[e,i,i?n[o]:Object.prototype.hasOwnProperty.call(t,e)&&t[e]]},rd=(o,r)=>Array.from({length:o},(e,t)=>r(t))});var _n,Kd,Ao,Jd,Kg,Yd,Yg,So,en,Wn,Zd=L(()=>{"use strict";Zn();_n=new Map([[0,!1],[1,"warning"],[2,"error"],[!1,!1],["off",!1],["warning","warning"],["error","error"]]),Kd={"arg-in-ext":1,"bold-header":[1,{}],"format-leakage":[1,{}],"fostered-content":[1,{}],h1:[1,{}],"illegal-attr":[2,{}],"insecure-style":2,"invalid-gallery":[2,{parameter:1}],"invalid-imagemap":[2,{}],"invalid-invoke":[2,{}],"invalid-isbn":2,"invalid-json":[2,{duplicate:1}],"invalid-url":1,"lonely-apos":[1,{}],"lonely-bracket":[1,{extLink:2}],"lonely-http":[1,{}],"nested-link":[2,{}],"no-arg":1,"no-duplicate":[2,{category:1,id:1,unknownImageParameter:1}],"no-ignored":[2,{fragment:1,galleryComment:1,galleryNoImage:1,include:1,nonWordAttributes:1,redirect:1}],"obsolete-attr":1,"obsolete-tag":1,"parsing-order":[2,{templateInTable:1}],"pipe-like":[1,{double:2}],"syntax-like":[2,{}],"table-layout":1,"tag-like":[2,{disallowed:1,invalid:1}],"unbalanced-header":2,"unclosed-comment":[1,{}],"unclosed-quote":1,"unclosed-table":2,unescaped:2,"unknown-page":1,"unmatched-tag":[1,{both:2,selfClosing:2}],"unterminated-url":[1,{}],"url-encoding":[1,{}],"var-anchor":[1,{}],"void-ext":[2,{}]};Object.freeze(Kd);Ao={configurationComment:"lint",ignoreDisables:!1,fix:!0,computeEditInfo:!0};Object.freeze(Ao);Jd=o=>_n.has(o),Kg=o=>Jd(o)||Array.isArray(o)&&Jd(o[0])&&(o.length===1||typeof o[1]=="object"),Yd=(o,r,e)=>{if(!Dt.includes(r))throw new RangeError(`Unknown lint rule: ${r}`);if(e===void 0)return!1;if(Kg(e))return o[r]=e,!0;throw new RangeError(`Invalid lint config for ${r}: ${JSON.stringify(e)}`)},Yg=typeof structuredClone=="function"?structuredClone:o=>JSON.parse(JSON.stringify(o)),So=class{constructor(r){if(Object.assign(this,Yg(Kd)),!!r)for(let[e,t]of Object.entries(r))Yd(this,e,t)}getSeverity(r,e){var n,i;let t=this[r];return typeof t!="object"?_n.get(t):e&&(i=_n.get((n=t[1])==null?void 0:n[e]))!=null?i:_n.get(t[0])}},Wn=class{constructor(r){w(this,en);if(Object.assign(this,Ao),r&&!("rules"in r)&&Object.keys(r).some(e=>Dt.includes(e)))this.rules=r;else{let{rules:e,...t}=r!=null?r:{};this.rules=e;for(let[n,i]of Object.entries(t))i!==void 0&&Object.prototype.hasOwnProperty.call(Ao,n)&&(this[n]=i)}}get rules(){return f(this,en)}set rules(r){S(this,en,new Proxy(new So(r),{set:Yd,deleteProperty(){return!1}}))}getSeverity(r,e){return f(this,en).getSeverity(r,e)}};en=new WeakMap});var eu,Mn,Un,Oe,tn,pr,Di,tu,Dn,ru=L(()=>{"use strict";He();ae();eu=o=>{let[,{length:r},e]=/^((?:\.\.\/)*)([\s\S]*)/u.exec(o);return[r/3,e]},Dn=class{constructor(r,e,t,{temporary:n,decode:i,selfLink:s,page:a}={}){w(this,Di);w(this,Mn);w(this,Un);w(this,Oe);w(this,tn);w(this,pr);ge(this,"page");ge(this,"valid");ge(this,"encoded",!1);this.page=a;let l=r.trim(),g=l.startsWith("../");if(i&&r.includes("%"))try{let m=/%(?!21|3[ce]|5[bd]|7[b-d])[\da-f]{2}/iu.test(r);r=Ht(r),this.encoded=m}catch{}if(r=Mt(r).replace(/[_ ]+/gu," ").trim(),g||a&&l.startsWith("/"))S(this,tn,0);else{let m=e;r.startsWith(":")&&(m=0,r=r.slice(1).trim());let c=r.split(":");if(c.length>1){let h=nt(c[0]),b=Object.prototype.hasOwnProperty.call(t.nsid,h)&&t.nsid[h];b&&(m=b,r=c.slice(1).join(":").trim())}S(this,tn,m)}let d=r.indexOf("#");if(d!==-1){let m=r.slice(d).trim().slice(1);if(m.includes("%"))try{m=Ht(m)}catch{}S(this,pr,m.replace(/ /gu,"_")),r=r.slice(0,d).trim()}let[u,p]=g?eu(r):[0,r];this.valid=!!(r||s&&this.ns===0&&f(this,pr)!==void 0)&&Mt(r)===r&&(u===0||a===void 0||a.split("/",u+1).length>u)&&!/^:|\0\d+[eh!+-]\x7F|[<>[\]{}|\n]|%[\da-f]{2}|(?:^|\/)\.{1,2}(?:$|\/)/iu.test(p),this.main=r,S(this,Un,t.namespaces),S(this,Oe,t.articlePath||"/wiki/$1"),f(this,Oe).includes("$1")||S(this,Oe,f(this,Oe)+`${f(this,Oe).endsWith("/")?"":"/"}$1`),n||Object.defineProperties(this,{encoded:{enumerable:!1,writable:!1}})}get ns(){return f(this,tn)}get fragment(){return f(this,pr)}get main(){return f(this,Mn)}set main(r){r=r.replace(/_/gu," ").trim(),S(this,Mn,r&&r[0].toUpperCase()+r.slice(1))}get prefix(){let r=f(this,Un)[this.ns];return r+(r&&":")}get title(){return this.getRedirection()[1]}get extension(){let{main:r}=this,e=r.lastIndexOf(".");return e===-1?void 0:r.slice(e+1).toLowerCase()}getRedirection(){let{prefix:r}=this,e=r;return C(this,Di,tu).call(this,e)}setFragment(r){S(this,pr,r)}getUrl(r){{typeof r=="string"&&(S(this,Oe,r),f(this,Oe).includes("$1")||S(this,Oe,f(this,Oe)+`${f(this,Oe).endsWith("/")?"":"/"}$1`));let{title:e,fragment:t}=this;return e?f(this,Oe).replace("$1",encodeURIComponent(e)+(t?`#${encodeURIComponent(t)}`:"")):t===void 0?"":`#${encodeURIComponent(t)}`}throw new Error("Title.getUrl method is only available in the LSP version!")}};Mn=new WeakMap,Un=new WeakMap,Oe=new WeakMap,tn=new WeakMap,pr=new WeakMap,Di=new WeakSet,tu=function(r){var t,n;let e=(r+this.main).replace(/ /gu,"_");if(e.startsWith("/"))e=((t=this.page)!=null?t:"")+e.replace(/(.)\/$/u,"$1");else if(e.startsWith("../")&&((n=this.page)!=null&&n.includes("/"))){let[i,s]=eu(e),a=this.page.split("/");a.length>i&&(e=a.slice(0,-i).join("/")+(s&&"/")+s)}return[!1,e]}});var cu={};re(cu,{LanguageService:()=>wo,tasks:()=>lu});var lu,Zg,ep,tp,rp,du,np,ip,sp,op,nu,ap,iu,Vn,uu,cr,ye,su,gu,Hn,zn,rn,Mi,ou,lp,au,Ee,Bt,xt,Tt,jt,Qn,sn,on,fr,H,Gn,qe,Co,Lo,Eo,pu,$o,nn,wo,fu=L(()=>{"use strict";He();go();Zn();vi();z();ae();Ae();M();G();lu=new WeakMap,Zg=new Set(["ref"]),ep=new Set(["ref","references"]),tp=new Set(["name","follow"]),rp=new Set(["group"]),du=new Set(["arg-name","template-name","link-target","parameter-key"]),np=new Set(["ext","html","attr-key","image-parameter","heading-title","heading","magic-word-name",...du]),ip=new Set(["text","comment","noinclude","include"]),sp=["ext","html","table"].map(o=>`${o}-attr#style`).join(),op=Be(o=>new RegExp(`^(?:${o}|//)`,"iu")),nu=({type:o,parentNode:r,length:e,firstChild:t},n)=>o==="attr-value"&&e===1&&t.type==="text"&&(!n||r.name==="style"),ap=o=>o.is("html-attr")||o.is("table-attr"),iu=o=>o.childNodes.every(({type:r})=>ip.has(r)),Vn=(o,r)=>{let{top:e,left:t}=o.posFromIndex(r);return{line:e,character:t}},uu=(o,r,e)=>({start:Vn(o,r),end:Vn(o,e)}),cr=o=>{let{top:r,left:e,height:t,width:n}=o.getBoundingClientRect();return{start:{line:r,character:e},end:yr(r,e,t,n)}},ye=(o,r,e,{line:t,character:n},i,s)=>[...new Set(o)].map(a=>{var g;let l=(g=s==null?void 0:s(a))==null?void 0:g.description;return{label:a,kind:r,textEdit:{range:{start:{line:t,character:n-e.length},end:{line:t,character:n}},newText:a+(i!=null?i:"")},...l&&{documentation:{kind:"markdown",value:l}}}}),su=(o,r,{line:e,character:t})=>{let n=o.indexFromPos(e,t);return o.caretPositionFromIndex(n+Number(/\w/u.test(r.charAt(n))))},gu=(o,r,e)=>{let{type:t,parentNode:n={}}=o,{name:i,tag:s}=n;return t==="attr-value"&&r.has(s)&&e.has(i)?o.toString().trim():NaN},Hn=o=>gu(o,Zg,tp),zn=o=>gu(o,ep,rp),rn=(o,r)=>{let e=o==null?void 0:o.getAttr(r);return e!==!0&&e||!1},Mi=o=>{let{type:r,name:e,parentNode:t}=o;switch(r){case"heading":return o.level;case"heading-title":return t.level;case"parameter-key":return`${t.parentNode.name}|${t.name}`;case"ext":case"html":case"image-parameter":return e;default:return t.name}},ou=(o,r,e=!1)=>({range:uu(o,...r.range),newText:r.text,title:`${e?"Fix":"Suggestion"}: ${r.desc}`,fix:e}),lp=(o,r)=>{let{lintConfig:e}=v,{rules:t,fix:n,computeEditInfo:i}=e;if(e.fix=!0,e.computeEditInfo=!1,r){e.rules=void 0;for(let a of Dt)e.rules[a]=a===r?t[a]:0}let{output:s}=o.lint();return e.fix=n,e.computeEditInfo=i,r&&(e.rules=t),s===void 0?[]:[{range:cr(o),newText:s}]},au=async(o,r,e,t=v.getConfig())=>{let n=typeof setImmediate=="function"?setImmediate:setTimeout,{running:i}=J;J.running=!0;let{internal:s}=v;v.internal=!0;let a=()=>{J.running=i,v.internal=s},l=new $(br(o),t);l.type="root";let g=0;try{await new Promise(d=>{let u=()=>{r()===o?(g++,n(p,0)):d()},p=()=>{g===12?(l.afterBuild(),d()):(l[g===11?"build":"parseOnce"](g,e),u())};n(p,0)})}catch(d){throw a(),d}return a(),l},wo=class{constructor(r){w(this,H);w(this,Ee);w(this,Bt);w(this,xt);w(this,Tt);w(this,jt);w(this,Qn);w(this,sn);w(this,on);w(this,fr);ge(this,"include",!0);ge(this,"config");ge(this,"data");lu.set(r,this),Object.defineProperties(this,{config:{enumerable:!1},data:{enumerable:!1}})}destroy(){Object.setPrototypeOf(this,null)}async provideDocumentColors(r,e,t=!0){let n=await C(this,H,qe).call(this,e);return n.querySelectorAll("attr-value,parameter-value,arg-default").reverse().flatMap(i=>{let{type:s,childNodes:a}=i;return s!=="attr-value"&&!iu(i)?[]:a.filter(l=>l.type==="text").reverse().flatMap(l=>{let{data:g}=l,d=Jo(g,t).filter(([,,,p])=>p);if(d.length===0)return[];let u=l.getAbsoluteIndex();return d.map(([p,m,c])=>{let h=r(p);return h.length===4&&{color:{red:h[0]/255,green:h[1]/255,blue:h[2]/255,alpha:h[3]},range:uu(n,u+m,u+c)}}).filter(p=>p!==!1)})})}provideColorPresentations(r){let{color:{red:e,green:t,blue:n,alpha:i},range:s}=r,a=[e,t,n],l=i<1?`rgba(${a.map(g=>Math.round(g*255)).join()},${i})`:`#${a.map(Xo).join("")}`;return[{label:l,textEdit:{range:s,newText:l}}]}async provideCompletionItems(r,e){var N,E,F,V,W,Y,D;let{re:t,allTags:n,functions:i,switches:s,jaSwitches:a,protocols:l,params:g,tags:d,ext:u}=C(this,H,pu).call(this),{line:p,character:m}=e,c=r.split(/\r?\n/u,p+1)[p],h=t.exec((N=c==null?void 0:c.slice(0,m))!=null?N:""),[,,b={},y={}]=this.config.doubleUnderscore;if((h==null?void 0:h[1])!==void 0){let I=h[1].startsWith("/");return ye(n,"Class",h[1].slice(I?1:0),e,I&&!(c!=null&&c.slice(m).trim().startsWith(">"))?">":"")}else if(h!=null&&h[4]||h!=null&&h[5]&&a.length>0){let I=h[5]!==void 0;return ye(I?a:s,"Constant",h[I?5:4],e,"",R=>{if(this.data)I||(R=R.slice(2,-2));else return;return R in b?R=b[R]:R in y&&(R=y[R]),C(this,H,$o).call(this,R.toLowerCase())})}else if((h==null?void 0:h[6])!==void 0)return ye(l,"Reference",h[6],e);let x=await C(this,H,qe).call(this,r),T;if(h!=null&&h[2]){T=x.elementFromPoint(h.index+h[2].length-1,p);let I=(E=h[3])!=null?E:"";if(h[2]==="{{{")return ye(x.querySelectorAll("arg").filter(Q=>Q.name&&Q!==T).map(({name:Q})=>Q),"Variable",I,e);let[R,ee]=this.config.parserFunction,oe=c.charAt(m),xe=I.startsWith(":"),X=xe?I.slice(1).trimStart():I;if(h[2]==="[[")return ye(x.querySelectorAll("link,file,category,redirect-target").filter(Q=>Q!==T).map(({name:Q})=>Q),"Folder",X,e);let de=i;return oe===":"?de=i.filter(Q=>!Q.endsWith("：")):oe==="："&&(de=i.filter(Q=>Q.endsWith("：")).map(Q=>Q.slice(0,-1))),[...ye(de,"Function",I,e,"",Q=>{if(this.data)Q in R?Q=R[Q]:Q in ee&&(Q=ee[Q]);else return;return C(this,H,nn).call(this,Q.toLowerCase())}),...I.startsWith("#")?[]:ye(x.querySelectorAll("template").filter(Q=>Q!==T).map(Q=>{let{name:yt}=Q;if(xe)return yt;let{ns:an}=Q.getAttribute("title");return an===0?`:${yt}`:an===10?yt.slice(9):yt}),"Folder",X,e)]}let k,A;if((h==null?void 0:h[8])===void 0&&(T=x.elementFromPoint(m,p),{type:k,parentNode:A}=T),(h==null?void 0:h[7])!==void 0||k==="image-parameter"){let I=x.indexFromPos(p,m),R=(V=(F=h==null?void 0:h[7])==null?void 0:F.trimStart())!=null?V:f(this,Ee).slice(T.getAbsoluteIndex(),I).trimStart(),ee=f(this,Ee)[I]==="=";return[...ye(g,"Property",R,e).filter(({label:oe})=>!ee||!/[= ]$/u.test(oe)),...ye(x.querySelectorAll("image-parameter#width").filter(oe=>oe!==T).map(oe=>oe.text()),"Unit",R,e)]}else if((h==null?void 0:h[8])!==void 0||k==="attr-key"){let I=(Y=(W=h==null?void 0:h[8])==null?void 0:W.toLowerCase())!=null?Y:A.tag,R=(D=h==null?void 0:h[10])!=null?D:T.toString().slice(0,m-x.posFromIndex(T.getAbsoluteIndex()).left);if(!d.has(I))return;let ee=Ti[I],oe=yi[I],xe=oe&&ye(oe,"Field",R,e);return u.includes(I)&&!ee?xe:[...xe!=null?xe:[],...I==="meta"||I==="link"?[]:ye(xi,"Property",R,e),...ee?ye(ee,"Property",R,e):[],...ye(["data-"],"Variable",R,e),...ye(["xmlns:"],"Interface",R,e)]}else if(k==="parameter-key"||k==="parameter-value"&&A.anon){let I=A.parentNode,{type:R,name:ee}=I;if(R==="magic-word"&&ee!=="invoke")return;let oe=f(this,Ee).slice(T.getAbsoluteIndex(),x.indexFromPos(p,m)).trimStart(),{module:xe,function:X}=I;return oe?ye(x.querySelectorAll("parameter").filter(de=>de===A||de.anon||de.parentNode.type!==R||de.parentNode.name!==ee?!1:R==="template"?!0:de.parentNode.module===xe&&de.parentNode.function===X).map(({name:de})=>de),"Variable",oe,e,k==="parameter-value"?"=":""):void 0}else if(k==="param-line"){let I=f(this,Ee).slice(T.getAbsoluteIndex(),x.indexFromPos(p,m)).trimStart();return/^[a-z]+$/iu.test(I)?ye(ki[T.name],"Property",I,e):void 0}else if(nu(T)&&ap(A)){let I=li(A.tag,A.name);if(I.length===0)return;let R=f(this,Ee).slice(T.getAbsoluteIndex(),x.indexFromPos(p,m)).trimStart();return ye(I,"Value",R,e)}}async provideDiagnostics(r,e=!0){let t=await C(this,H,qe).call(this,r),{lintConfig:n}=v,i=n.fix;n.fix=!1;let s=t.lint();return n.fix=i,[(e?s:s.filter(({severity:d})=>d==="error")).map(({startLine:d,startCol:u,endLine:p,endCol:m,severity:c,rule:h,message:b,fix:y,suggestions:x})=>({range:{start:{line:d,character:u},end:{line:p,character:m}},severity:c==="error"?1:2,source:"WikiLint",code:h,message:b,data:[...y?[ou(t,y,!0)]:[],...x?x.map(T=>ou(t,T)):[]]})),[],[]].flat(2)}resolveCodeAction(r){if(r.kind!=="source.fixAll")return r;let{rule:e}=r.data;return{...r,edit:{changes:{"":lp(f(this,jt),e)}}}}async provideFoldingRanges(r){let e=await C(this,H,qe).call(this,r),{length:t}=e.getLines(),n=[],i=new Array(6),s=e.querySelectorAll("heading-title,table,template,magic-word");for(let a of[...s].reverse())a.getRelativeIndex();for(let a of s){let{offsetHeight:l}=a;if(a.type==="heading-title"||l>2){let{top:g}=e.posFromIndex(a.getAbsoluteIndex());if(a.type==="heading-title"){let{level:d}=a.parentNode;for(let u=d-1;u<6;u++){let p=i[u];p!==void 0&&p<g-1&&n.push({startLine:p,endLine:g-1,kind:"region"}),i[u]=void 0}i[d-1]=g+l-1}else n.push({startLine:g,endLine:g+l-2,kind:"region"})}}for(let a of i)a!==void 0&&a<t-1&&n.push({startLine:a,endLine:t-1,kind:"region"});return n}async provideLinks(r){var s;(s=this.config)!=null||(this.config=v.getConfig());let{articlePath:e,protocol:t}=this.config,n=e==null?void 0:e.includes("//"),i=op(t);return(await C(this,H,qe).call(this,r)).querySelectorAll(`magic-link,ext-link-url,free-ext-link,attr-value${n?",link-target,template-name,invoke-module,magic-word#filepath,magic-word#widget":""},image-parameter#link,image-parameter#manualthumb`).reverse().map(a=>{let l;a.is("magic-word")?({name:l}=a,a=a.childNodes[1].lastChild):a.is("image-parameter")&&({name:l}=a);let{type:g,parentNode:d,firstChild:u,lastChild:p,childNodes:m,length:c}=a,{tag:h}=d;if(l!=null||(l=d.name),!(g!=="attr-value"||l==="cite"&&["blockquote","del","ins","q"].includes(h)||l==="src"&&["templatestyles","img"].includes(h)||l==="templatename"&&h==="rss"||l==="file"&&h==="phonos")||!iu(a))return!1;let b=m.filter(y=>y.type==="text").map(({data:y})=>y).join("").trim();if(!b)return!1;try{if(a.is("magic-link")||a.is("ext-link-url")||a.is("free-ext-link"))b=a.getUrl(e);else if(g==="link-target"&&(d.is("link")||d.is("redirect-target")||d.is("category"))){if(/^(?:\.\.)?\//u.test(b))return!1;b=d.link.getUrl(e)}else if(g==="link-target"||g==="template-name")b=d.getAttribute("title").getUrl(e);else if(["invoke-module","parameter-value"].includes(g)||g==="attr-value"&&(l==="src"&&h==="templatestyles"||l==="templatename"&&h==="rss"||l==="file"&&h==="phonos")||g==="image-parameter"&&(l==="manualthumb"||!i.test(b))){if(!n||b.startsWith("/"))return!1;g==="image-parameter"&&l==="manualthumb"||g==="parameter-value"&&l==="filepath"||g==="attr-value"&&h==="phonos"?b=`File:${b}`:g==="parameter-value"?b=`Widget:${b}`:g==="invoke-module"&&(b=`Module:${b}`);let y=v.normalizeTitle(b,g==="attr-value"?10:0,!1,this.config,{temporary:!0});if(!y.valid)return!1;b=y.getUrl()}if(typeof b=="string"&&b.startsWith("//")&&(b=`https:${b}`),b=new URL(b).href,g==="image-parameter"){let y=u.getBoundingClientRect(),{top:x,left:T,height:k,width:A}=c===1?y:p.getBoundingClientRect();return{range:{start:{line:y.top,character:y.left},end:yr(x,T,k,A)},target:b}}return{range:cr(a),target:b}}catch{return!1}}).filter(a=>a!==!1)}async provideReferences(r,e){let t=await C(this,H,qe).call(this,r),{offsetNode:n,offset:i}=su(t,f(this,Ee),e),s=n.type==="text"?n.parentNode:n,a=i===0&&(s.is("ext-attr-dirty")||s.is("html-attr-dirty"))?s.parentNode.parentNode:s,{type:l}=a,g=Hn(a),d=zn(a);if(!g&&!d&&!np.has(l))return;let u=Mi(a),p=t.querySelectorAll(l==="heading-title"?"heading":l).filter(m=>l==="attr-value"?Hn(m)===g||zn(m)===d:Mi(m)===u).reverse().map(m=>({range:cr(m.type==="parameter-key"?m.parentNode:m)}));return p.length===0?void 0:p}async provideDefinition(r,e){let t=await C(this,H,qe).call(this,r),n=t.elementFromPoint(e.character,e.line),i=n.is("ext")&&n.name==="ref"?n:n.closest("ext#ref"),s=rn(i,"name");if(!s)return;let a=rn(i,"group"),l=t.querySelectorAll("ext#ref").filter(g=>g.innerText&&rn(g,"name")===s&&rn(g,"group")===a).reverse().map(({lastChild:g})=>({range:cr(g)}));return l.length===0?void 0:l}async resolveRenameLocation(r,e){let t=await C(this,H,qe).call(this,r),n=t.elementFromPoint(e.character,e.line),{type:i}=n,s=Hn(n),a=zn(n);return!s&&!a&&(!du.has(i)||i==="parameter-key"&&/^[1-9]\d*$/u.test(n.parentNode.name)||i==="link-target"&&!["link","redirect-target"].includes(n.parentNode.type))?void 0:cr(n)}async provideRenameEdits(r,e,t){let n=await C(this,H,qe).call(this,r),i=n.elementFromPoint(e.character,e.line),{type:s}=i,a=Hn(i),l=a&&rn(i.parentNode.parentNode,"group"),g=zn(i),d=Mi(i),u=n.querySelectorAll(s).filter(p=>{let{type:m}=p.parentNode;return s==="link-target"&&m!=="link"&&m!=="redirect-target"?!1:s==="attr-value"?zn(p)===g||Hn(p)===a&&rn(p.parentNode.parentNode,"group")===l:Mi(p)===d});return u.length===0?void 0:{changes:{"":u.reverse().map(p=>({range:cr(p),newText:t}))}}}async provideHover(r,e){if(!this.data)return;let t=await C(this,H,qe).call(this,r),{offsetNode:n,offset:i}=su(t,f(this,Ee),e);n.type==="text"&&(i+=n.getRelativeIndex(),n=n.parentNode);let{type:s,parentNode:a,length:l,name:g}=n,d,u,p,m;if(n.is("double-underscore")&&i>0)d=C(this,H,$o).call(this,n.name);else if(s==="magic-word-name")d=C(this,H,nn).call(this,a.name),u=n.text().trim(),p=a.getAttribute("colon");else if(n.is("magic-word")&&!n.modifier&&l===1&&(i>0||t.posFromIndex(n.getAbsoluteIndex()).left===e.character))d=C(this,H,nn).call(this,g),u=n.firstChild.text().trim(),p=n.getAttribute("colon");else if((n.is("magic-word")||n.is("template"))&&n.modifier&&i>=2&&n.getRelativeIndex(0)>i&&(u=n.modifier.trim().slice(0,-1),d=C(this,H,nn).call(this,u.toLowerCase()),p=":",d)){let c=n.getAbsoluteIndex();m={start:Vn(t,c+2),end:Vn(t,c+n.modifier.trimEnd().length+1)}}return d&&{contents:{kind:"markdown",value:(d.signatures?`${d.signatures.map(c=>`- **{{ ${u}${c.length===0?"**":`${p}** `}${c.map(({label:h,const:b})=>b?h:`*${h}*`).join(" **|** ")} **}}**`).join(`
`)}

`:"")+d.description},range:m!=null?m:cr(n)}}async provideSignatureHelp(r,e){if(!this.data)return;let{line:t,character:n}=e,i=r.split(/\r?\n/u,t+1)[t],{lastChild:s}=await C(this,H,Lo).call(this,`${i.slice(0,n+/^[^{}<]*/u.exec(i.slice(n))[0].length)}}}`);if(!s.is("magic-word")||s.length===1)return;let{name:a,childNodes:l,firstChild:g}=s,d=C(this,H,nn).call(this,a);if(!(d!=null&&d.signatures))return;let u=l.length-1,p=d.signatures.filter(b=>{var y;return(b.length>=u||((y=b[b.length-1])==null?void 0:y.rest))&&b.every(({label:x,const:T},k)=>{var N;let A=T&&k<u&&((N=l[k+1])==null?void 0:N.text().trim());return!A||x.toLowerCase().includes(A.toLowerCase())})});if(p.length===0)return;let m=-1;for(let b=s.getAbsoluteIndex()+s.getAttribute("padding");m<u&&(b+=l[m+1].toString().length+1,!(b>n));m++);let c=g.text().trim(),h=s.getAttribute("colon");return{signatures:p.map(b=>({label:`{{${c}${b.length===0?"":h}${b.map(({label:y})=>y).join("|")}}}`,parameters:b.map(({label:y,const:x})=>({label:y,...x?{documentation:"Predefined parameter"}:void 0})),...b.length<u?{activeParameter:Math.min(m,b.length-1)}:void 0})),activeParameter:m}}async provideInlayHints(r){let e=await C(this,H,qe).call(this,r),t=[];for(let n of e.querySelectorAll("template,magic-word#invoke").reverse()){let{type:i,childNodes:s}=n;t=[...t,...s.slice(i==="template"?1:3).filter(({anon:a})=>a).reverse().map(a=>({position:Vn(e,a.getAbsoluteIndex()),label:`${a.name}=`,kind:2}))]}return t}findStyleTokens(){return f(this,jt).querySelectorAll(sp).filter(({lastChild:r})=>nu(r))}async provideRefactoringAction(r,e){let t,n;if(e){let{start:a,end:l}=e;if(a.line===l.line&&a.character===l.character)return[];t=r.split(/\r?\n/u,l.line+1),n=a.line===l.line?t[l.line].slice(a.character,l.character):`${t[a.line].slice(a.character)}
${t.slice(a.line+1,l.line).join(`
`)}${t.length===2?"":`
`}${t[l.line].slice(0,l.character)}`}else if(r)t=r.split(/\r?\n/u),n=t.join(`
`),e={start:{line:0,character:0},end:{line:t.length-1,character:t[t.length-1].length}};else return[];let i=await C(this,H,Lo).call(this,n),{viewOnly:s}=v;return v.viewOnly=!1,J.internal(()=>{i.escape()},v),v.viewOnly=s,[{title:"Escape with magic words",kind:"refactor.rewrite",edit:{changes:{"":[{range:e,newText:i.toString()}]}}}]}findTemplateTokens(){return f(this,jt).querySelectorAll("template")}};Ee=new WeakMap,Bt=new WeakMap,xt=new WeakMap,Tt=new WeakMap,jt=new WeakMap,Qn=new WeakMap,sn=new WeakMap,on=new WeakMap,fr=new WeakMap,H=new WeakSet,Gn=function(){return f(this,sn)===this.config&&f(this,on)===this.include},qe=async function(r){var e;return r=br(r),!f(this,xt)&&C(this,H,Gn).call(this)&&f(this,Ee)===r?f(this,jt):(S(this,Ee,r),(e=f(this,xt))!=null||S(this,xt,C(this,H,Co).call(this)),f(this,xt))},Co=async function(){var t;(t=this.config)!=null||(this.config=v.getConfig()),S(this,sn,this.config),S(this,on,this.include);let r=f(this,Ee),e=await au(r,()=>f(this,Ee),this.include,this.config);return C(this,H,Gn).call(this)&&f(this,Ee)===r?(S(this,jt,e),S(this,xt,void 0),e):(S(this,xt,C(this,H,Co).call(this)),f(this,xt))},Lo=async function(r){var e;return r=br(r),!f(this,Tt)&&C(this,H,Gn).call(this)&&f(this,Bt)===r?f(this,Qn):(S(this,Bt,r),(e=f(this,Tt))!=null||S(this,Tt,C(this,H,Eo).call(this)),f(this,Tt))},Eo=async function(){var t;(t=this.config)!=null||(this.config=v.getConfig()),S(this,sn,this.config),S(this,on,this.include);let r=f(this,Bt),e=await au(r,()=>f(this,Bt),this.include,this.config);return C(this,H,Gn).call(this)&&f(this,Bt)===r?(S(this,Qn,e),S(this,Tt,void 0),e):(S(this,Tt,C(this,H,Eo).call(this)),f(this,Tt))},pu=function(){var r;if(!f(this,fr)||f(this,fr)[1]!==this.config){(r=this.config)!=null||(this.config=v.getConfig());let{nsid:e,ext:t,html:n,parserFunction:[i,s,...a],doubleUnderscore:l,protocol:g,img:d}=this.config,u=new Set([t,n].flat(2)),p=new RegExp("(?:"+String.raw`<(\/?\w*)`+"|"+String.raw`(\{{2,4}|\[\[)\s*([^|{}<>[\]\s][^|{}<>[\]#]*)?`+"|"+String.raw`(_(?:_(?:(?!__|＿{2})[\p{L}\p{N}_])*)?)`+"|"+String.raw`(＿(?:＿(?:(?!__|＿{2})[\p{L}\p{N}＿])*)?)`+"|"+String.raw`(?<!\[)\[([a-z:/]*)`+"|"+String.raw`\[\[\s*(?:${Object.entries(e).filter(([,c])=>c===6).map(([c])=>c).join("|")})\s*:[^[\]{}<>]+\|([^[\]{}<>|=]*)`+"|"+String.raw`<(\w+)(?:\s(?:[^<>{}|=\s]+(?:\s*=\s*(?:[^\s"']\S*|(["']).*?\9))?(?=\s))*)?\s(\w*)`+")$","iu"),m=l.slice(0,2).flat();S(this,fr,[{re:p,ext:t,tags:u,allTags:[...u,"onlyinclude","includeonly","noinclude"],functions:[Object.keys(i),Object.keys(s),a].flat(2),switches:m.filter(Pt).map(c=>`__${c}__`),jaSwitches:m.filter(c=>!Pt(c)),protocols:g.split("|"),params:Object.keys(d).filter(c=>c.endsWith("$1")||!c.includes("$1")).map(c=>c.replace(/\$1$/u,""))},this.config])}return f(this,fr)[0]},$o=function(r){return this.data.behaviorSwitches.find(({aliases:e})=>e.includes(r))},nn=function(r){return this.data.parserFunctions.find(({aliases:e})=>e.some(t=>t.replace(/^#/u,"")===r))}});var No,mu,hu,bu,Xn,xu,dp,v,M=L(()=>{Zn();Ae();ti();ae();Zd();ru();No=!0,mu=new Wn,bu=(o,r,e)=>typeof o=="string"?[!!r,e,o]:[!!o,r,e],Xn={config:Ji,get rules(){return Dt},get i18n(){return{...Vo,...hu}},set i18n(o){hu=o},get lintConfig(){return mu},set lintConfig(o){mu=new Wn(o)},get viewOnly(){return No},set viewOnly(o){No&&!o&&J.rev++,No=o},internal:!1,getConfig(o){let r=o!=null?o:this.config,{doubleUnderscore:e,ext:t,parserFunction:n,variable:i}=r;for(let s=0;s<2;s++)e.length>s+2&&e[s].length===0&&(e[s]=Object.keys(e[s+2]));return t.includes("translate")&&!i.includes("translationlanguage")&&(i.push("translationlanguage"),n[1].TRANSLATIONLANGUAGE="translationlanguage"),{...Ji,...r,excludes:[]}},msg(o,r=""){var e;return o&&((e=this.i18n[o])!=null?e:o).replace("$1",this.msg(r))},normalizeTitle(o,r=0,e,t=Xn.getConfig(),n){let i;if(n!=null&&n.halfParsed)i=new Dn(o,r,t,n);else{let{Token:s}=(G(),K(Wi));i=J.run(()=>{let a=new s(o,t);a.type="root",a.pageName=n==null?void 0:n.page,a.parseOnce(0,e).parseOnce();let l=new Dn(a.firstChild.toString(),r,t,n);a.build();for(let g of["main","fragment"]){let d=l[g];if(d!=null&&d.includes("\0")){let u=a.buildFromStr(d,1);g==="main"?l.main=u:l.setFragment(u)}}return l},this)}return i},parse(o,r,e,t,n){o=br(o);let i,s,a,l;typeof r=="string"?(i=!!e,s=t,a=n,l=r):(i=!!r,s=e,a=t,l=n),s!=null||(s=11),a!=null||(a=this.getConfig());let g;typeof s!="number"&&(g=Array.isArray(s)?s:[s],s=Math.max(...g.map(p=>Mo[p]||11)));let{Token:d}=(G(),K(Wi));return J.run(()=>{let p=new d(o,a);return p.type="root",p.pageName=l,p.parse(s,i)})},parseWithRef(o,r,e,t=r.getAttribute("include")){return this.parse(o,t,e,r.getAttribute("config"),r.pageName)},createLanguageService(o={}){var r;{let{LanguageService:e,tasks:t}=(fu(),K(cu));return(r=t.get(o))!=null?r:new e(o)}},lint(o,r,e,t){{let[n,i,s]=bu(r,e,t);return J.internal(()=>this.parse(o,n,void 0,i,s).lint(),this)}},print(o,r,e,t){{let[n,i,s]=bu(r,e,t);return J.internal(()=>this.parse(o,n,void 0,i,s).print(),this)}}},xu={},dp=new Set(["lintConfig","normalizeTitle","parse","createLanguageService"]);for(let o of Object.keys(Xn))dp.has(o)||(xu[o]={enumerable:!1});Object.defineProperties(Xn,xu);Object.assign(typeof globalThis=="object"?globalThis:self,{Parser:Xn});v=Xn});M();})();
//# sourceMappingURL=bundle-lsp.min.js.map
