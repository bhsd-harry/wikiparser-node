/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n\nconst Parser = {\n  minConfig: __webpack_require__(/*! ./config/minimum */ \"./config/minimum.json\"),\n  MAX_STAGE: 11,\n  /** @implements */\n  getConfig() {\n    return { ...this.minConfig, ...this.config, excludes: [] };\n  },\n  /** @implements */\n  msg(msg, arg = \"\") {\n    var _a, _b;\n    return ((_b = (_a = this.i18n) == null ? void 0 : _a[msg]) != null ? _b : msg).replace(\"$1\", arg);\n  },\n  /** @implements */\n  normalizeTitle(title, defaultNs = 0, include = false, config = Parser.getConfig(), halfParsed = false, decode = false, selfLink = false) {\n    const { Title } = __webpack_require__(/*! ./lib/title */ \"./lib/title.ts\");\n    if (halfParsed) {\n      return new Title(title, defaultNs, config, decode, selfLink);\n    }\n    const { Token } = __webpack_require__(/*! ./src/index */ \"./src/index.ts\");\n    const token = this.run(() => new Token(title, config).parseOnce(0, include).parseOnce()), titleObj = new Title(String(token), defaultNs, config, decode, selfLink);\n    return titleObj;\n  },\n  /** @implements */\n  parse(wikitext, include, maxStage = Parser.MAX_STAGE, config = Parser.getConfig()) {\n    const { Token } = __webpack_require__(/*! ./src/index */ \"./src/index.ts\");\n    let token;\n    this.run(() => {\n      token = new Token(wikitext.replace(/[\\0\\x7F]/gu, \"\"), config);\n      try {\n        token.parse(maxStage, include);\n      } catch (e) {\n      }\n    });\n    return token;\n  },\n  /** @implements */\n  run(callback) {\n    const result = callback();\n    return result;\n  }\n};\nconst def = {}, immutable = /* @__PURE__ */ new Set([\"MAX_STAGE\", \"minConfig\"]), enumerable = /* @__PURE__ */ new Set([\"config\", \"normalizeTitle\", \"parse\"]);\nfor (const key in Parser) {\n  if (immutable.has(key)) {\n    def[key] = { enumerable: false, writable: false };\n  } else if (!enumerable.has(key)) {\n    def[key] = { enumerable: false };\n  }\n}\nObject.defineProperties(Parser, def);\nif (typeof self === \"object\") {\n  Object.assign(self, { Parser });\n} else if (typeof globalThis === \"object\") {\n  Object.assign(globalThis, { Parser });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Parser);\n\n\n//# sourceURL=webpack://wikiparser-node/./index.ts?");

/***/ }),

/***/ "./lib/element.ts":
/*!************************!*\
  !*** ./lib/element.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AstElement: () => (/* binding */ AstElement)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node */ \"./lib/node.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\nconst lintIgnoredExt = /* @__PURE__ */ new Set([\n  \"nowiki\",\n  \"pre\",\n  \"charinsert\",\n  \"score\",\n  \"syntaxhighlight\",\n  \"source\",\n  \"math\",\n  \"chem\",\n  \"ce\",\n  \"graph\",\n  \"mapframe\",\n  \"maplink\",\n  \"quiz\",\n  \"templatedata\",\n  \"timeline\"\n]);\nclass AstElement extends _node__WEBPACK_IMPORTED_MODULE_1__.AstNode {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"name\");\n  }\n  /**\n   * 子节点总数\n   * @browser\n   */\n  get length() {\n    return this.childNodes.length;\n  }\n  /**\n   * 可见部分\n   * @browser\n   * @param separator 子节点间的连接符\n   */\n  text(separator) {\n    return (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.text)(this.childNodes, separator);\n  }\n  /**\n   * 合并相邻的文本子节点\n   * @browser\n   */\n  normalize() {\n    const { childNodes } = this;\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      const cur = childNodes[i], prev = childNodes[i - 1];\n      if (cur.type !== \"text\" || this.getGaps(i - 1)) {\n      } else if (cur.data === \"\") {\n        childNodes.splice(i, 1);\n      } else if ((prev == null ? void 0 : prev.type) === \"text\") {\n        prev.setAttribute(\"data\", prev.data + cur.data);\n        childNodes.splice(i, 1);\n      }\n    }\n  }\n  /**\n   * 移除子节点\n   * @browser\n   * @param i 移除位置\n   */\n  removeAt(i) {\n    const { childNodes } = this, [node] = childNodes.splice(i, 1);\n    return node;\n  }\n  /**\n   * 插入子节点\n   * @browser\n   * @param node 待插入的子节点\n   * @param i 插入位置\n   * @throws `RangeError` 不能插入祖先节点\n   */\n  insertAt(node, i = this.length) {\n    const { childNodes } = this;\n    node.setAttribute(\"parentNode\", this);\n    childNodes.splice(i, 0, node);\n    return node;\n  }\n  /**\n   * 最近的祖先节点\n   * @browser\n   * @param selector 选择器\n   */\n  closest(selector) {\n    let { parentNode } = this, condition;\n    const types = new Set(selector.split(\",\").map((str) => str.trim()));\n    condition = /** @implements */\n    ({ type }) => types.has(type);\n    while (parentNode) {\n      if (condition(parentNode)) {\n        return parentNode;\n      }\n      ({ parentNode } = parentNode);\n    }\n    return void 0;\n  }\n  /**\n   * 在末尾批量插入子节点\n   * @browser\n   * @param elements 插入节点\n   */\n  append(...elements) {\n    for (const element of elements) {\n      this.insertAt(element);\n    }\n  }\n  /**\n   * 批量替换子节点\n   * @browser\n   * @param elements 新的子节点\n   */\n  replaceChildren(...elements) {\n    this.childNodes.length = 0;\n    this.append(...elements);\n  }\n  /**\n   * 修改文本子节点\n   * @browser\n   * @param str 新文本\n   * @param i 子节点位置\n   * @throws `RangeError` 对应位置的子节点不是文本节点\n   */\n  setText(str, i = 0) {\n    const oldText = this.childNodes[i], { data } = oldText;\n    oldText.replaceData(str);\n    return data;\n  }\n  /**\n   * 还原为wikitext\n   * @browser\n   * @param omit 忽略的节点类型\n   * @param separator 子节点间的连接符\n   */\n  toString(omit, separator = \"\") {\n    return this.childNodes.map((child) => child.toString()).join(separator);\n  }\n  /**\n   * Linter\n   * @browser\n   * @param start\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const { SyntaxToken } = __webpack_require__(/*! ../src/syntax */ \"./src/syntax.ts\");\n    if (this instanceof SyntaxToken || this.constructor.hidden || this.type === \"ext-inner\" && lintIgnoredExt.has(this.name)) {\n      return [];\n    }\n    const errors = [];\n    for (let i = 0, cur = start + this.getPadding(); i < this.length; i++) {\n      const child = this.childNodes[i];\n      errors.push(...child.lint(cur));\n      cur += String(child).length + this.getGaps(i);\n    }\n    return errors;\n  }\n  /**\n   * 以HTML格式打印\n   * @browser\n   * @param opt 选项\n   */\n  print(opt = {}) {\n    var _a;\n    return String(this) ? `<span class=\"wpb-${(_a = opt.class) != null ? _a : this.type}\">${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.print)(this.childNodes, opt)}</span>` : \"\";\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./lib/element.ts?");

/***/ }),

/***/ "./lib/node.ts":
/*!*********************!*\
  !*** ./lib/node.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AstNode: () => (/* binding */ AstNode)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _parentNode, _getDimension, getDimension_fn;\nclass AstNode {\n  constructor() {\n    /**\n     * 获取行数和最后一行的列数\n     * @browser\n     */\n    __privateAdd(this, _getDimension);\n    /** @browser */\n    __publicField(this, \"type\");\n    /** @browser */\n    __publicField(this, \"childNodes\", []);\n    /** @browser */\n    __privateAdd(this, _parentNode, void 0);\n  }\n  /**\n   * 首位子节点\n   * @browser\n   */\n  get firstChild() {\n    return this.childNodes[0];\n  }\n  /**\n   * 末位子节点\n   * @browser\n   */\n  get lastChild() {\n    return this.childNodes[this.childNodes.length - 1];\n  }\n  /**\n   * 父节点\n   * @browser\n   */\n  get parentNode() {\n    return __privateGet(this, _parentNode);\n  }\n  /**\n   * 后一个兄弟节点\n   * @browser\n   */\n  get nextSibling() {\n    var _a;\n    const childNodes = (_a = __privateGet(this, _parentNode)) == null ? void 0 : _a.childNodes;\n    return childNodes && childNodes[childNodes.indexOf(this) + 1];\n  }\n  /**\n   * 前一个兄弟节点\n   * @browser\n   */\n  get previousSibling() {\n    var _a;\n    const childNodes = (_a = __privateGet(this, _parentNode)) == null ? void 0 : _a.childNodes;\n    return childNodes && childNodes[childNodes.indexOf(this) - 1];\n  }\n  /**\n   * 行数\n   * @browser\n   */\n  get offsetHeight() {\n    return __privateMethod(this, _getDimension, getDimension_fn).call(this).height;\n  }\n  /**\n   * 最后一行的列数\n   * @browser\n   */\n  get offsetWidth() {\n    return __privateMethod(this, _getDimension, getDimension_fn).call(this).width;\n  }\n  /** @private */\n  hasAttribute(key) {\n    return key in this;\n  }\n  /** @private */\n  getAttribute(key) {\n    return this.hasAttribute(key) ? String(this[key]) : void 0;\n  }\n  /** @private */\n  setAttribute(key, value) {\n    if (key === \"parentNode\") {\n      __privateSet(this, _parentNode, value);\n    } else {\n      this[key] = value;\n    }\n    return this;\n  }\n  /**\n   * 获取根节点\n   * @browser\n   */\n  getRootNode() {\n    let { parentNode } = this;\n    while (parentNode == null ? void 0 : parentNode.parentNode) {\n      ({ parentNode } = parentNode);\n    }\n    return parentNode != null ? parentNode : this;\n  }\n  /**\n   * 将字符位置转换为行列号\n   * @browser\n   * @param index 字符位置\n   */\n  posFromIndex(index) {\n    const str = String(this);\n    if (index >= -str.length && index <= str.length) {\n      const lines = str.slice(0, index).split(\"\\n\");\n      return { top: lines.length - 1, left: lines[lines.length - 1].length };\n    }\n    return void 0;\n  }\n  /** @private */\n  getPadding() {\n    return 0;\n  }\n  /** @private */\n  // eslint-disable-next-line no-unused-vars, @typescript-eslint/no-unused-vars\n  getGaps(i) {\n    return 0;\n  }\n  /**\n   * 获取当前节点的相对字符位置，或其第`j`个子节点的相对字符位置\n   * @browser\n   * @param j 子节点序号\n   */\n  getRelativeIndex(j) {\n    let childNodes;\n    const getIndex = (end, parent) => childNodes.slice(0, end).reduce((acc, cur, i) => acc + String(cur).length + parent.getGaps(i), 0) + parent.getPadding();\n    if (j === void 0) {\n      const { parentNode } = this;\n      if (parentNode) {\n        ({ childNodes } = parentNode);\n        return getIndex(childNodes.indexOf(this), parentNode);\n      }\n      return 0;\n    }\n    ({ childNodes } = this);\n    return getIndex(j, this);\n  }\n  /**\n   * 获取当前节点的绝对位置\n   * @browser\n   */\n  getAbsoluteIndex() {\n    const { parentNode } = this;\n    return parentNode ? parentNode.getAbsoluteIndex() + this.getRelativeIndex() : 0;\n  }\n}\n_parentNode = new WeakMap();\n_getDimension = new WeakSet();\ngetDimension_fn = function() {\n  const lines = String(this).split(\"\\n\");\n  return { height: lines.length, width: lines[lines.length - 1].length };\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./lib/node.ts?");

/***/ }),

/***/ "./lib/text.ts":
/*!*********************!*\
  !*** ./lib/text.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AstText: () => (/* binding */ AstText)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node */ \"./lib/node.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _setData, setData_fn;\n\n\nconst errorSyntax = /https?:\\/\\/|\\{+|\\}+|\\[{2,}|\\[(?![^[]*\\])|((?:^|\\])[^[]*?)\\]+|<\\s*\\/?([a-z]\\w*)/giu, errorSyntaxUrl = /\\{+|\\}+|\\[{2,}|\\[(?![^[]*\\])|((?:^|\\])[^[]*?)\\]+|<\\s*\\/?([a-z]\\w*)/giu, disallowedTags = [\n  \"html\",\n  \"head\",\n  \"style\",\n  \"title\",\n  \"body\",\n  \"a\",\n  \"audio\",\n  \"img\",\n  \"video\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"canvas\",\n  \"script\",\n  \"col\",\n  \"colgroup\",\n  \"tbody\",\n  \"tfoot\",\n  \"thead\",\n  \"button\",\n  \"input\",\n  \"label\",\n  \"option\",\n  \"select\",\n  \"textarea\"\n];\nclass AstText extends _node__WEBPACK_IMPORTED_MODULE_1__.AstNode {\n  /**\n   * @browser\n   * @param text 包含文本\n   */\n  constructor(text) {\n    super();\n    /**\n     * 修改内容\n     * @browser\n     * @param text 新内容\n     */\n    __privateAdd(this, _setData);\n    /** @browser */\n    __publicField(this, \"type\", \"text\");\n    /** @browser */\n    __publicField(this, \"data\");\n    this.data = text;\n  }\n  /**\n   * 输出字符串\n   * @browser\n   */\n  toString() {\n    return this.data;\n  }\n  /**\n   * 可见部分\n   * @browser\n   */\n  text() {\n    return this.data;\n  }\n  /**\n   * Linter\n   * @browser\n   * @param start\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const { data, parentNode, nextSibling, previousSibling } = this, type = parentNode == null ? void 0 : parentNode.type, name = parentNode == null ? void 0 : parentNode.name, nextType = nextSibling == null ? void 0 : nextSibling.type, previousType = previousSibling == null ? void 0 : previousSibling.type, errorRegex = type === \"free-ext-link\" || type === \"ext-link-url\" || type === \"image-parameter\" && name === \"link\" ? errorSyntaxUrl : errorSyntax, errors = [], { ext, html } = this.getRootNode().getAttribute(\"config\");\n    if (data.search(errorRegex) !== -1) {\n      errorRegex.lastIndex = 0;\n      const root = this.getRootNode(), { top, left } = root.posFromIndex(start), tags = new Set([ext, html, disallowedTags].flat(2));\n      for (let mt = errorRegex.exec(data); mt; mt = errorRegex.exec(data)) {\n        const [, prefix, tag] = mt;\n        let { 0: error, index } = mt;\n        if (prefix && prefix !== \"]\") {\n          index += prefix.length;\n          error = error.slice(prefix.length);\n        }\n        const startIndex = start + index, lines = data.slice(0, index).split(\"\\n\"), startLine = lines.length + top - 1, line = lines[lines.length - 1], startCol = lines.length === 1 ? left + line.length : line.length, { 0: char, length } = error, endIndex = startIndex + length, rootStr = String(root), nextChar = rootStr[endIndex], previousChar = rootStr[startIndex - 1], severity = length > 1 && (char !== \"<\" || /[\\s/>]/u.test(nextChar != null ? nextChar : \"\")) || char === \"{\" && (nextChar === char || previousChar === \"-\") || char === \"}\" && (previousChar === char || nextChar === \"-\") || char === \"[\" && (nextChar === char || type === \"ext-link-text\" || !data.slice(index + 1).trim() && nextType === \"free-ext-link\") || char === \"]\" && (previousChar === char || !data.slice(0, index).trim() && previousType === \"free-ext-link\") ? \"error\" : \"warning\";\n        if ((char !== \"h\" || index > 0) && (char !== \"<\" || tags.has(tag.toLowerCase()))) {\n          errors.push({\n            message: _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].msg('lonely \"$1\"', char === \"h\" ? error : char),\n            severity,\n            startIndex,\n            endIndex,\n            startLine,\n            endLine: startLine,\n            startCol,\n            endCol: startCol + length\n          });\n        }\n      }\n      return errors;\n    }\n    return [];\n  }\n  /**\n   * 替换字符串\n   * @browser\n   * @param text 替换的字符串\n   */\n  replaceData(text) {\n    __privateMethod(this, _setData, setData_fn).call(this, text);\n  }\n}\n_setData = new WeakSet();\nsetData_fn = function(text) {\n  this.setAttribute(\"data\", text);\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./lib/text.ts?");

/***/ }),

/***/ "./lib/title.ts":
/*!**********************!*\
  !*** ./lib/title.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Title: () => (/* binding */ Title)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\nclass Title {\n  /**\n   * @browser\n   * @param title 标题（含或不含命名空间前缀）\n   * @param defaultNs 命名空间\n   * @param decode 是否需要解码\n   * @param selfLink 是否允许selfLink\n   */\n  constructor(title, defaultNs = 0, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), decode = false, selfLink = false) {\n    /** @browser */\n    __publicField(this, \"valid\");\n    /** @browser */\n    __publicField(this, \"ns\");\n    /** @browser */\n    __publicField(this, \"fragment\");\n    /** @browser */\n    __publicField(this, \"encoded\", false);\n    const { namespaces, nsid } = config;\n    let namespace = namespaces[defaultNs];\n    title = (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.decodeHtml)(title);\n    if (decode && title.includes(\"%\")) {\n      try {\n        const encoded = /%(?!21|3[ce]|5[bd]|7[b-d])[\\da-f]{2}/iu.test(title);\n        title = decodeURIComponent(title);\n        this.encoded = encoded;\n      } catch (e) {\n      }\n    }\n    title = title.replace(/_/gu, \" \").trim();\n    if (title.startsWith(\":\")) {\n      namespace = \"\";\n      title = title.slice(1).trim();\n    }\n    const m = title.split(\":\");\n    if (m.length > 1) {\n      const ns = nsid[m[0].trim().toLowerCase()], id = ns === void 0 ? void 0 : namespaces[ns];\n      if (id !== void 0) {\n        namespace = id;\n        title = m.slice(1).join(\":\").trim();\n      }\n    }\n    this.ns = nsid[namespace.toLowerCase()];\n    const i = title.indexOf(\"#\");\n    let fragment;\n    if (i !== -1) {\n      fragment = title.slice(i + 1).trim();\n      title = title.slice(0, i).trim();\n    }\n    this.valid = Boolean(title || selfLink && fragment !== void 0) && !/\\0\\d+[eh!+-]\\x7F|[<>[\\]{}|]|%[\\da-f]{2}/iu.test(title);\n    this.fragment = fragment;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./lib/title.ts?");

/***/ }),

/***/ "./mixin/hidden.ts":
/*!*************************!*\
  !*** ./mixin/hidden.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hidden: () => (/* binding */ hidden)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst hidden = (constructor) => {\n  class AnyHiddenToken extends constructor {\n    /** 没有可见部分 */\n    // eslint-disable-next-line class-methods-use-this\n    text() {\n      return \"\";\n    }\n  }\n  __publicField(AnyHiddenToken, \"hidden\", true);\n  return AnyHiddenToken;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./mixin/hidden.ts?");

/***/ }),

/***/ "./parser/braces.ts":
/*!**************************!*\
  !*** ./parser/braces.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseBraces: () => (/* binding */ parseBraces)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_heading__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/heading */ \"./src/heading.ts\");\n/* harmony import */ var _src_transclude__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/transclude */ \"./src/transclude.ts\");\n/* harmony import */ var _src_arg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../src/arg */ \"./src/arg.ts\");\n\n\n\n\n\n\nconst parseBraces = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) => {\n  var _a, _b, _c, _d, _e, _f;\n  const source = `${((_a = config.excludes) == null ? void 0 : _a.includes(\"heading\")) ? \"\" : \"^(\\0\\\\d+c\\x7F)*={1,6}|\"}\\\\[\\\\[|\\\\{{2,}|-\\\\{(?!\\\\{)`, { parserFunction: [, , , subst] } = config, stack = [], closes = { \"=\": \"\\n\", \"{\": \"\\\\}{2,}|\\\\|\", \"-\": \"\\\\}-\", \"[\": \"\\\\]\\\\]\" }, marks = /* @__PURE__ */ new Map([[\"!\", \"!\"], [\"!!\", \"+\"], [\"(!\", \"{\"], [\"!)\", \"}\"], [\"!-\", \"-\"], [\"=\", \"~\"]]);\n  let regex = new RegExp(source, \"gmu\"), mt = regex.exec(wikitext), moreBraces = wikitext.includes(\"}}\"), lastIndex;\n  while (mt || lastIndex !== void 0 && lastIndex <= wikitext.length && ((_c = (_b = stack[stack.length - 1]) == null ? void 0 : _b[0]) == null ? void 0 : _c.startsWith(\"=\"))) {\n    if (mt == null ? void 0 : mt[1]) {\n      const [, { length }] = mt;\n      mt[0] = mt[0].slice(length);\n      mt.index += length;\n    }\n    const { 0: syntax, index: curIndex } = mt != null ? mt : { 0: \"\\n\", index: wikitext.length }, top = (_d = stack.pop()) != null ? _d : {}, { 0: open, index, parts, findEqual: topFindEqual, pos: topPos } = top, innerEqual = syntax === \"=\" && topFindEqual;\n    if (syntax === \"]]\" || syntax === \"}-\") {\n      lastIndex = curIndex + 2;\n    } else if (syntax === \"\\n\") {\n      lastIndex = curIndex + 1;\n      const { pos, findEqual } = (_e = stack[stack.length - 1]) != null ? _e : {};\n      if (pos === void 0 || findEqual || (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.removeComment)(wikitext.slice(pos, index)) !== \"\") {\n        const rmt = /^(={1,6})(.+)\\1((?:\\s|\\0\\d+c\\x7F)*)$/u.exec(wikitext.slice(index, curIndex));\n        if (rmt) {\n          wikitext = `${wikitext.slice(0, index)}\\0${accum.length}h\\x7F${wikitext.slice(curIndex)}`;\n          lastIndex = index + 4 + String(accum.length).length;\n          new _src_heading__WEBPACK_IMPORTED_MODULE_2__.HeadingToken(rmt[1].length, rmt.slice(2), config, accum);\n        }\n      }\n    } else if (syntax === \"|\" || innerEqual) {\n      lastIndex = curIndex + 1;\n      parts[parts.length - 1].push(wikitext.slice(topPos, curIndex));\n      if (syntax === \"|\") {\n        parts.push([]);\n      }\n      top.pos = lastIndex;\n      top.findEqual = syntax === \"|\";\n      stack.push(top);\n    } else if (syntax.startsWith(\"}}\")) {\n      const close = syntax.slice(0, Math.min(open.length, 3)), rest = open.length - close.length, { length } = accum;\n      lastIndex = curIndex + close.length;\n      parts[parts.length - 1].push(wikitext.slice(topPos, curIndex));\n      let skip = false, ch = \"t\";\n      if (close.length === 3) {\n        const argParts = parts.map((part) => part.join(\"=\")), str = argParts.length > 1 && (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.removeComment)(argParts[1]).trim();\n        new _src_arg__WEBPACK_IMPORTED_MODULE_4__.ArgToken(argParts, config, accum);\n        if (str && str.endsWith(\":\") && subst.includes(str.slice(0, -1).toLowerCase())) {\n          ch = \"s\";\n        }\n      } else {\n        try {\n          new _src_transclude__WEBPACK_IMPORTED_MODULE_3__.TranscludeToken(\n            parts[0][0],\n            parts.slice(1),\n            config,\n            accum\n          );\n          const name = (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.removeComment)(parts[0][0]).trim();\n          if (marks.has(name)) {\n            ch = marks.get(name);\n          } else if (/^(?:filepath|(?:full|canonical)urle?):.|^server$/iu.test(name)) {\n            ch = \"m\";\n          } else if (/^#vardefine:./iu.test(name)) {\n            ch = \"c\";\n          }\n        } catch (e) {\n          if (e instanceof SyntaxError && e.message.startsWith(\"\\u975E\\u6CD5\\u7684\\u6A21\\u677F\\u540D\\u79F0\\uFF1A\")) {\n            lastIndex = index + open.length;\n            skip = true;\n          } else {\n            throw e;\n          }\n        }\n      }\n      if (!skip) {\n        wikitext = `${wikitext.slice(0, index + rest)}\\0${length}${ch}\\x7F${wikitext.slice(lastIndex)}`;\n        lastIndex = index + rest + 3 + String(length).length;\n        if (rest > 1) {\n          stack.push({ 0: open.slice(0, rest), index, pos: index + rest, parts: [[]] });\n        } else if (rest === 1 && wikitext[index - 1] === \"-\") {\n          stack.push({ 0: \"-{\", index: index - 1, pos: index + 1, parts: [[]] });\n        }\n      }\n    } else {\n      lastIndex = curIndex + syntax.length;\n      if (syntax.startsWith(\"{\")) {\n        mt.pos = lastIndex;\n        mt.parts = [[]];\n      }\n      stack.push(...\"0\" in top ? [top] : [], mt);\n    }\n    moreBraces && (moreBraces = wikitext.slice(lastIndex).includes(\"}}\"));\n    let curTop = stack[stack.length - 1];\n    if (!moreBraces && ((_f = curTop == null ? void 0 : curTop[0]) == null ? void 0 : _f.startsWith(\"{\"))) {\n      stack.pop();\n      curTop = stack[stack.length - 1];\n    }\n    regex = new RegExp(\n      source + (curTop ? `|${closes[curTop[0][0]]}${curTop.findEqual ? \"|=\" : \"\"}` : \"\"),\n      \"gmu\"\n    );\n    regex.lastIndex = lastIndex;\n    mt = regex.exec(wikitext);\n  }\n  return wikitext;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/braces.ts?");

/***/ }),

/***/ "./parser/commentAndExt.ts":
/*!*********************************!*\
  !*** ./parser/commentAndExt.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseCommentAndExt: () => (/* binding */ parseCommentAndExt)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_onlyinclude__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/onlyinclude */ \"./src/onlyinclude.ts\");\n/* harmony import */ var _src_nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/nowiki/noinclude */ \"./src/nowiki/noinclude.ts\");\n/* harmony import */ var _src_tagPair_include__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/tagPair/include */ \"./src/tagPair/include.ts\");\n/* harmony import */ var _src_tagPair_ext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../src/tagPair/ext */ \"./src/tagPair/ext.ts\");\n/* harmony import */ var _src_nowiki_comment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../src/nowiki/comment */ \"./src/nowiki/comment.ts\");\n\n\n\n\n\n\n\nconst parseCommentAndExt = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = [], includeOnly = false) => {\n  const onlyincludeLeft = \"<onlyinclude>\", onlyincludeRight = \"</onlyinclude>\", { length } = onlyincludeLeft;\n  if (includeOnly) {\n    let i = wikitext.indexOf(onlyincludeLeft), j = wikitext.indexOf(onlyincludeRight, i + length);\n    if (i !== -1 && j !== -1) {\n      let str = \"\";\n      while (i !== -1 && j !== -1) {\n        const token = `\\0${accum.length}e\\x7F`;\n        new _src_onlyinclude__WEBPACK_IMPORTED_MODULE_1__.OnlyincludeToken(wikitext.slice(i + length, j), config, accum);\n        if (i > 0) {\n          new _src_nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__.NoincludeToken(wikitext.slice(0, i), config, accum);\n          str += `\\0${accum.length - 1}c\\x7F${token}`;\n        } else {\n          str += token;\n        }\n        wikitext = wikitext.slice(j + length + 1);\n        i = wikitext.indexOf(onlyincludeLeft);\n        j = wikitext.indexOf(onlyincludeRight, i + length);\n      }\n      return `${str}${wikitext}`;\n    }\n  }\n  const ext = config.ext.join(\"|\"), includeRegex = includeOnly ? \"includeonly\" : \"(?:no|only)include\", noincludeRegex = includeOnly ? \"noinclude\" : \"includeonly\", regex = new RegExp(\n    `<!--.*?(?:-->|$)|<${includeRegex}(?:\\\\s[^>]*?)?>|</${includeRegex}\\\\s*>|<(${ext})(\\\\s[^>]*?)?(?:/>|>(.*?)</(\\\\1\\\\s*)>)|<(${noincludeRegex})(\\\\s[^>]*?)?(?:/>|>(.*?)(?:</(\\\\5\\\\s*)>|$))`,\n    // <noinclude>\n    \"gisu\"\n  );\n  return wikitext.replace(\n    regex,\n    (substr, name, attr, inner, closing, include, includeAttr, includeInner, includeClosing) => {\n      const str = `\\0${accum.length}${name ? \"e\" : \"c\"}\\x7F`;\n      if (name) {\n        new _src_tagPair_ext__WEBPACK_IMPORTED_MODULE_4__.ExtToken(name, attr, inner, closing, config, accum);\n      } else if (substr.startsWith(\"<!--\")) {\n        const closed = substr.endsWith(\"-->\");\n        new _src_nowiki_comment__WEBPACK_IMPORTED_MODULE_5__.CommentToken(substr.slice(4, closed ? -3 : void 0), closed, config, accum);\n      } else if (include) {\n        new _src_tagPair_include__WEBPACK_IMPORTED_MODULE_3__.IncludeToken(include, includeAttr, includeInner, includeClosing, config, accum);\n      } else {\n        new _src_nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__.NoincludeToken(substr, config, accum);\n      }\n      return str;\n    }\n  );\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/commentAndExt.ts?");

/***/ }),

/***/ "./parser/converter.ts":
/*!*****************************!*\
  !*** ./parser/converter.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseConverter: () => (/* binding */ parseConverter)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_converter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/converter */ \"./src/converter.ts\");\n\n\n\nconst parseConverter = (text, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) => {\n  const regex1 = /-\\{/gu, regex2 = /-\\{|\\}-/gu, stack = [];\n  let regex = regex1, mt = regex.exec(text);\n  while (mt) {\n    const { 0: syntax, index } = mt;\n    if (syntax === \"}-\") {\n      const top = stack.pop(), { length } = accum, str = text.slice(top.index + 2, index), i = str.indexOf(\"|\"), [flags, raw] = i === -1 ? [[], str] : [str.slice(0, i).split(\";\"), str.slice(i + 1)], temp = raw.replace(/(&[#a-z\\d]+);/giu, \"$1\u0001\"), variants = `(?:${config.variants.join(\"|\")})`, rules = temp.split(new RegExp(`;(?=\\\\s*(?:${variants}|[^;]*?=>\\\\s*${variants})\\\\s*:)`, \"u\")).map((rule) => rule.replace(/\\x01/gu, \";\"));\n      new _src_converter__WEBPACK_IMPORTED_MODULE_1__.ConverterToken(flags, rules, config, accum);\n      text = `${text.slice(0, top.index)}\\0${length}v\\x7F${text.slice(index + 2)}`;\n      if (stack.length === 0) {\n        regex = regex1;\n      }\n      regex.lastIndex = top.index + 3 + String(length).length;\n    } else {\n      stack.push(mt);\n      regex = regex2;\n      regex.lastIndex = index + 2;\n    }\n    mt = regex.exec(text);\n  }\n  return text;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/converter.ts?");

/***/ }),

/***/ "./parser/externalLinks.ts":
/*!*********************************!*\
  !*** ./parser/externalLinks.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseExternalLinks: () => (/* binding */ parseExternalLinks)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_extLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/extLink */ \"./src/extLink.ts\");\n\n\n\n\nconst parseExternalLinks = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) => {\n  const regex = new RegExp(\n    `\\\\[((?:(?:${config.protocol}|//)${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlCharFirst}|\\0\\\\d+m\\x7F)${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlChar})(\\\\p{Zs}*)([^\\\\]\u0001-\\b\n-\u001f\\uFFFD]*)\\\\]`,\n    \"giu\"\n  );\n  return wikitext.replace(regex, (_, url, space, text) => {\n    const { length } = accum, mt = /&[lg]t;/u.exec(url);\n    if (mt) {\n      url = url.slice(0, mt.index);\n      space = \"\";\n      text = `${url.slice(mt.index)}${space}${text}`;\n    }\n    new _src_extLink__WEBPACK_IMPORTED_MODULE_2__.ExtLinkToken(url, space, text, config, accum);\n    return `\\0${length}w\\x7F`;\n  });\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/externalLinks.ts?");

/***/ }),

/***/ "./parser/hrAndDoubleUnderscore.ts":
/*!*****************************************!*\
  !*** ./parser/hrAndDoubleUnderscore.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseHrAndDoubleUnderscore: () => (/* binding */ parseHrAndDoubleUnderscore)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_nowiki_hr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/nowiki/hr */ \"./src/nowiki/hr.ts\");\n/* harmony import */ var _src_nowiki_doubleUnderscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/nowiki/doubleUnderscore */ \"./src/nowiki/doubleUnderscore.ts\");\n/* harmony import */ var _src_heading__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/heading */ \"./src/heading.ts\");\n\n\n\n\n\nconst parseHrAndDoubleUnderscore = ({ firstChild, type, name }, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) => {\n  const { doubleUnderscore } = config, insensitive = new Set(doubleUnderscore[0]), sensitive = new Set(doubleUnderscore[1]);\n  let { data } = firstChild;\n  if (type !== \"root\" && (type !== \"ext-inner\" || name !== \"poem\")) {\n    data = `\\0${data}`;\n  }\n  data = data.replace(\n    /^((?:\\0\\d+c\\x7F)*)(-{4,})/gmu,\n    (_, lead, m) => {\n      new _src_nowiki_hr__WEBPACK_IMPORTED_MODULE_1__.HrToken(m, config, accum);\n      return `${lead}\\0${accum.length - 1}r\\x7F`;\n    }\n  ).replace(\n    new RegExp(`__(${doubleUnderscore.flat().join(\"|\")})__`, \"giu\"),\n    (m, p1) => {\n      if (insensitive.has(p1.toLowerCase()) || sensitive.has(p1)) {\n        new _src_nowiki_doubleUnderscore__WEBPACK_IMPORTED_MODULE_2__.DoubleUnderscoreToken(p1, config, accum);\n        return `\\0${accum.length - 1}u\\x7F`;\n      }\n      return m;\n    }\n  ).replace(\n    /^((?:\\0\\d+c\\x7F)*)(={1,6})(.+)\\2((?:[^\\S\\n]|\\0\\d+c\\x7F)*)$/gmu,\n    (_, lead, equals, heading, trail) => {\n      const text = `${lead}\\0${accum.length}h\\x7F`;\n      new _src_heading__WEBPACK_IMPORTED_MODULE_3__.HeadingToken(equals.length, [heading, trail], config, accum);\n      return text;\n    }\n  );\n  return type === \"root\" || type === \"ext-inner\" && name === \"poem\" ? data : data.slice(1);\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/hrAndDoubleUnderscore.ts?");

/***/ }),

/***/ "./parser/html.ts":
/*!************************!*\
  !*** ./parser/html.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseHtml: () => (/* binding */ parseHtml)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_attributes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/attributes */ \"./src/attributes.ts\");\n/* harmony import */ var _src_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/html */ \"./src/html.ts\");\n\n\n\n\nconst parseHtml = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) => {\n  const regex = /^(\\/?)([a-z][^\\s/>]*)((?:\\s|\\/(?!>))[^>]*?)?(\\/?>)([^<]*)$/iu, elements = new Set(config.html.flat()), bits = wikitext.split(\"<\");\n  let text = bits.shift();\n  for (const x of bits) {\n    const mt = regex.exec(x), t = mt == null ? void 0 : mt[2], name = t == null ? void 0 : t.toLowerCase();\n    if (!mt || !elements.has(name)) {\n      text += `<${x}`;\n      continue;\n    }\n    const [, slash, , params = \"\", brace, rest] = mt, attr = new _src_attributes__WEBPACK_IMPORTED_MODULE_1__.AttributesToken(params, \"html-attrs\", name, config, accum), itemprop = attr.getAttr(\"itemprop\");\n    if (name === \"meta\" && (itemprop === void 0 || attr.getAttr(\"content\") === void 0) || name === \"link\" && (itemprop === void 0 || attr.getAttr(\"href\") === void 0)) {\n      text += `<${x}`;\n      accum.pop();\n      continue;\n    }\n    text += `\\0${accum.length}x\\x7F${rest}`;\n    new _src_html__WEBPACK_IMPORTED_MODULE_2__.HtmlToken(t, attr, slash === \"/\", brace === \"/>\", config, accum);\n  }\n  return text;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/html.ts?");

/***/ }),

/***/ "./parser/links.ts":
/*!*************************!*\
  !*** ./parser/links.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseLinks: () => (/* binding */ parseLinks)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_link_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/link/index */ \"./src/link/index.ts\");\n/* harmony import */ var _src_link_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/link/file */ \"./src/link/file.ts\");\n/* harmony import */ var _src_link_category__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/link/category */ \"./src/link/category.ts\");\n\n\n\n\n\nconst parseLinks = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) => {\n  const { parseQuotes } = __webpack_require__(/*! ./quotes */ \"./parser/quotes.ts\");\n  const regex = config.inExt ? /^((?:(?!\\0\\d+!\\x7F)[^\\n<>[\\]{}|])+)(?:(\\||\\0\\d+!\\x7F)(.*?[^\\]]))?\\]\\](.*)$/su : /^((?:(?!\\0\\d+!\\x7F)[^\\n<>[\\]{}|])+)(?:(\\||\\0\\d+!\\x7F)(.*?[^\\]])?)?\\]\\](.*)$/su, regexImg = /^((?:(?!\\0\\d+!\\x7F)[^\\n<>[\\]{}|])+)(\\||\\0\\d+!\\x7F)(.*)$/su, regexExt = new RegExp(`^\\\\s*(?:${config.protocol})`, \"iu\"), bits = wikitext.split(\"[[\");\n  let s = bits.shift();\n  for (let i = 0; i < bits.length; i++) {\n    let mightBeImg = false, link, delimiter, text, after;\n    const x = bits[i], m = regex.exec(x);\n    if (m) {\n      [, link, delimiter, text, after] = m;\n      if (after.startsWith(\"]\") && (text == null ? void 0 : text.includes(\"[\"))) {\n        text += \"]\";\n        after = after.slice(1);\n      }\n    } else {\n      const m2 = regexImg.exec(x);\n      if (m2) {\n        mightBeImg = true;\n        [, link, delimiter, text] = m2;\n      }\n    }\n    if (link === void 0 || regexExt.test(link) || /\\0\\d+[exhbru]\\x7F/u.test(link)) {\n      s += `[[${x}`;\n      continue;\n    }\n    const force = link.trim().startsWith(\":\");\n    if (force && mightBeImg) {\n      s += `[[${x}`;\n      continue;\n    }\n    const title = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalizeTitle(link, 0, false, config, true, true, true), { ns, valid } = title;\n    if (!valid) {\n      s += `[[${x}`;\n      continue;\n    } else if (mightBeImg) {\n      if (ns !== 6) {\n        s += `[[${x}`;\n        continue;\n      }\n      let found = false;\n      for (i++; i < bits.length; i++) {\n        const next = bits[i], p = next.split(\"]]\");\n        if (p.length > 2) {\n          found = true;\n          text += `[[${p[0]}]]${p[1]}`;\n          after = p.slice(2).join(\"]]\");\n          break;\n        } else if (p.length === 2) {\n          text += `[[${p[0]}]]${p[1]}`;\n        } else {\n          text += `[[${next}`;\n          break;\n        }\n      }\n      text = parseLinks(text, config, accum);\n      if (!found) {\n        s += `[[${link}${delimiter}${text}`;\n        continue;\n      }\n    }\n    text && (text = parseQuotes(text, config, accum));\n    s += `\\0${accum.length}l\\x7F${after}`;\n    let SomeLinkToken = _src_link_index__WEBPACK_IMPORTED_MODULE_1__.LinkToken;\n    if (!force) {\n      if (ns === 6) {\n        SomeLinkToken = _src_link_file__WEBPACK_IMPORTED_MODULE_2__.FileToken;\n      } else if (ns === 14) {\n        SomeLinkToken = _src_link_category__WEBPACK_IMPORTED_MODULE_3__.CategoryToken;\n      }\n    }\n    if (text === void 0 && delimiter) {\n      text = \"\";\n    }\n    new SomeLinkToken(link, text, config, accum, delimiter);\n  }\n  return s;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/links.ts?");

/***/ }),

/***/ "./parser/list.ts":
/*!************************!*\
  !*** ./parser/list.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseList: () => (/* binding */ parseList)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_nowiki_list__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/nowiki/list */ \"./src/nowiki/list.ts\");\n/* harmony import */ var _src_nowiki_dd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/nowiki/dd */ \"./src/nowiki/dd.ts\");\n\n\n\n\nconst parseList = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) => {\n  const mt = /^((?:\\0\\d+c\\x7F)*)([;:*#]+)/u.exec(wikitext);\n  if (!mt) {\n    return wikitext;\n  }\n  const [total, comment, prefix] = mt;\n  let text = `${comment}\\0${accum.length}d\\x7F${wikitext.slice(total.length)}`, dt = prefix.split(\";\").length - 1;\n  new _src_nowiki_list__WEBPACK_IMPORTED_MODULE_1__.ListToken(prefix, config, accum);\n  if (!dt) {\n    return text;\n  }\n  let regex = /:+|-\\{/gu, ex = regex.exec(text), lc = 0;\n  while (ex && dt) {\n    const { 0: syntax, index } = ex;\n    if (syntax.startsWith(\":\")) {\n      if (syntax.length >= dt) {\n        new _src_nowiki_dd__WEBPACK_IMPORTED_MODULE_2__.DdToken(\":\".repeat(dt), config, accum);\n        return `${text.slice(0, index)}\\0${accum.length - 1}d\\x7F${text.slice(index + dt)}`;\n      }\n      text = `${text.slice(0, index)}\\0${accum.length}d\\x7F${text.slice(regex.lastIndex)}`;\n      dt -= syntax.length;\n      regex.lastIndex = index + 4 + String(accum.length).length;\n      new _src_nowiki_dd__WEBPACK_IMPORTED_MODULE_2__.DdToken(syntax, config, accum);\n    } else if (syntax === \"-{\") {\n      if (!lc) {\n        const { lastIndex } = regex;\n        regex = /-\\{|\\}-/gu;\n        regex.lastIndex = lastIndex;\n      }\n      lc++;\n    } else {\n      lc--;\n      if (!lc) {\n        const { lastIndex } = regex;\n        regex = /:+|-\\{/gu;\n        regex.lastIndex = lastIndex;\n      }\n    }\n    ex = regex.exec(text);\n  }\n  return text;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/list.ts?");

/***/ }),

/***/ "./parser/magicLinks.ts":
/*!******************************!*\
  !*** ./parser/magicLinks.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseMagicLinks: () => (/* binding */ parseMagicLinks)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_magicLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/magicLink */ \"./src/magicLink.ts\");\n\n\n\n\nconst parseMagicLinks = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) => {\n  const regex = new RegExp(`(^|[^\\\\p{L}\\\\d_])(?:${config.protocol})(${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlCharFirst}${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlChar})`, \"giu\");\n  return wikitext.replace(regex, (m, lead, p1) => {\n    let trail = \"\", url = lead ? m.slice(1) : m;\n    const m2 = /&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(url);\n    if (m2) {\n      trail = url.slice(m2.index);\n      url = url.slice(0, m2.index);\n    }\n    const sep = new RegExp(`[,;.:!?${url.includes(\"(\") ? \"\" : \")\"}]+$`, \"u\"), sepChars = sep.exec(url);\n    if (sepChars) {\n      let correction = 0;\n      if (sepChars[0].startsWith(\";\") && /&(?:[a-z]+|#x[\\da-f]+|#\\d+)$/iu.test(url.slice(0, sepChars.index))) {\n        correction = 1;\n      }\n      trail = `${url.slice(sepChars.index + correction)}${trail}`;\n      url = url.slice(0, sepChars.index + correction);\n    }\n    if (trail.length >= p1.length) {\n      return m;\n    }\n    new _src_magicLink__WEBPACK_IMPORTED_MODULE_2__.MagicLinkToken(url, false, config, accum);\n    return `${lead}\\0${accum.length - 1}w\\x7F${trail}`;\n  });\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/magicLinks.ts?");

/***/ }),

/***/ "./parser/quotes.ts":
/*!**************************!*\
  !*** ./parser/quotes.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseQuotes: () => (/* binding */ parseQuotes)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_nowiki_quote__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/nowiki/quote */ \"./src/nowiki/quote.ts\");\n\n\n\nconst parseQuotes = (wikitext, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) => {\n  var _a;\n  const arr = wikitext.split(/('{2,})/u), { length } = arr;\n  if (length === 1) {\n    return wikitext;\n  }\n  let nBold = 0, nItalic = 0, firstSingle, firstMulti, firstSpace;\n  for (let i = 1; i < length; i += 2) {\n    const { length: len } = arr[i];\n    switch (len) {\n      case 2:\n        nItalic++;\n        break;\n      case 4:\n        arr[i - 1] += `'`;\n        arr[i] = `'''`;\n      case 3:\n        nBold++;\n        if (firstSingle !== void 0) {\n          break;\n        } else if (arr[i - 1].endsWith(\" \")) {\n          if (firstMulti === void 0 && firstSpace === void 0) {\n            firstSpace = i;\n          }\n        } else if (arr[i - 1].slice(-2, -1) === \" \") {\n          firstSingle = i;\n        } else {\n          firstMulti != null ? firstMulti : firstMulti = i;\n        }\n        break;\n      default:\n        arr[i - 1] += `'`.repeat(len - 5);\n        arr[i] = `'''''`;\n        nItalic++;\n        nBold++;\n    }\n  }\n  if (nItalic % 2 === 1 && nBold % 2 === 1) {\n    const i = (_a = firstSingle != null ? firstSingle : firstMulti) != null ? _a : firstSpace;\n    if (i !== void 0) {\n      arr[i] = `''`;\n      arr[i - 1] += `'`;\n    }\n  }\n  for (let i = 1; i < length; i += 2) {\n    new _src_nowiki_quote__WEBPACK_IMPORTED_MODULE_1__.QuoteToken(arr[i], config, accum);\n    arr[i] = `\\0${accum.length - 1}q\\x7F`;\n  }\n  return arr.join(\"\");\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/quotes.ts?");

/***/ }),

/***/ "./parser/table.ts":
/*!*************************!*\
  !*** ./parser/table.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseTable: () => (/* binding */ parseTable)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _src_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/index */ \"./src/index.ts\");\n/* harmony import */ var _src_table_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/table/index */ \"./src/table/index.ts\");\n/* harmony import */ var _src_table_tr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/table/tr */ \"./src/table/tr.ts\");\n/* harmony import */ var _src_table_td__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../src/table/td */ \"./src/table/td.ts\");\n/* harmony import */ var _src_nowiki_dd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../src/nowiki/dd */ \"./src/nowiki/dd.ts\");\n\n\n\n\n\n\n\nconst parseTable = ({ firstChild: { data }, type, name }, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) => {\n  const stack = [], lines = data.split(\"\\n\");\n  let out = type === \"root\" || type === \"parameter-value\" || type === \"ext-inner\" && name === \"poem\" ? \"\" : `\n${lines.shift()}`;\n  const push = (str, top) => {\n    if (!top) {\n      out += str;\n      return;\n    }\n    const { lastChild } = top;\n    if (lastChild.constructor === _src_index__WEBPACK_IMPORTED_MODULE_1__.Token) {\n      lastChild.setText(String(lastChild) + str);\n    } else {\n      const token = new _src_index__WEBPACK_IMPORTED_MODULE_1__.Token(str, config, accum);\n      token.type = \"table-inter\";\n      top.insertAt(token.setAttribute(\"stage\", 3));\n    }\n  };\n  for (const outLine of lines) {\n    let top = stack.pop();\n    const [spaces] = /^(?:\\s|\\0\\d+c\\x7F)*/u.exec(outLine), line = outLine.slice(spaces.length), matchesStart = /^(:*)((?:\\s|\\0\\d+c\\x7F)*)(\\{\\||\\{(?:\\0\\d+c\\x7F)*\\0\\d+!\\x7F|\\0\\d+\\{\\x7F)(.*)$/u.exec(line);\n    if (matchesStart) {\n      while (top && top.type !== \"td\") {\n        top = stack.pop();\n      }\n      const [, indent, moreSpaces, tableSyntax, attr2] = matchesStart;\n      if (indent) {\n        new _src_nowiki_dd__WEBPACK_IMPORTED_MODULE_5__.DdToken(indent, config, accum);\n      }\n      push(`\n${spaces}${indent && `\\0${accum.length - 1}d\\x7F`}${moreSpaces}\\0${accum.length}b\\x7F`, top);\n      stack.push(...top ? [top] : [], new _src_table_index__WEBPACK_IMPORTED_MODULE_2__.TableToken(tableSyntax, attr2, config, accum));\n      continue;\n    } else if (!top) {\n      out += `\n${outLine}`;\n      continue;\n    }\n    const matches = /^(?:(\\|\\}|\\0\\d+!\\x7F\\}|\\0\\d+\\}\\x7F)|(\\|-+|\\0\\d+!\\x7F-+|\\0\\d+-\\x7F-*)(?!-)|(!|(?:\\||\\0\\d+!\\x7F)\\+?))(.*)$/u.exec(line);\n    if (!matches) {\n      push(`\n${outLine}`, top);\n      stack.push(top);\n      continue;\n    }\n    const [, closing, row, cell, attr] = matches;\n    if (closing) {\n      while (top.type !== \"table\") {\n        top = stack.pop();\n      }\n      top.close(`\n${spaces}${closing}`, true);\n      push(attr, stack[stack.length - 1]);\n    } else if (row) {\n      if (top.type === \"td\") {\n        top = stack.pop();\n      }\n      if (top.type === \"tr\") {\n        top = stack.pop();\n      }\n      const tr = new _src_table_tr__WEBPACK_IMPORTED_MODULE_3__.TrToken(`\n${spaces}${row}`, attr, config, accum);\n      stack.push(top, tr);\n      top.insertAt(tr);\n    } else {\n      if (top.type === \"td\") {\n        top = stack.pop();\n      }\n      const regex = cell === \"!\" ? /!!|(?:\\||\\0\\d+!\\x7F){2}|\\0\\d+\\+\\x7F/gu : /(?:\\||\\0\\d+!\\x7F){2}|\\0\\d+\\+\\x7F/gu;\n      let mt = regex.exec(attr), lastIndex = 0, lastSyntax = `\n${spaces}${cell}`;\n      while (mt) {\n        top.insertAt(new _src_table_td__WEBPACK_IMPORTED_MODULE_4__.TdToken(lastSyntax, attr.slice(lastIndex, mt.index), config, accum));\n        ({ lastIndex } = regex);\n        [lastSyntax] = mt;\n        mt = regex.exec(attr);\n      }\n      const td = new _src_table_td__WEBPACK_IMPORTED_MODULE_4__.TdToken(lastSyntax, attr.slice(lastIndex), config, accum);\n      stack.push(top, td);\n      top.insertAt(td);\n    }\n  }\n  return out.slice(1);\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./parser/table.ts?");

/***/ }),

/***/ "./src/arg.ts":
/*!********************!*\
  !*** ./src/arg.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArgToken: () => (/* binding */ ArgToken)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./atom */ \"./src/atom.ts\");\n/* harmony import */ var _hidden__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hidden */ \"./src/hidden.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\n\n\nclass ArgToken extends _index__WEBPACK_IMPORTED_MODULE_3__.Token {\n  /**\n   * @browser\n   * @param parts 以'|'分隔的各部分\n   */\n  constructor(parts, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"arg\");\n    for (let i = 0; i < parts.length; i++) {\n      if (i === 0) {\n        const token = new _atom__WEBPACK_IMPORTED_MODULE_4__.AtomToken(parts[i], \"arg-name\", config, accum, {});\n        super.insertAt(token);\n      } else if (i > 1) {\n        const token = new _hidden__WEBPACK_IMPORTED_MODULE_5__.HiddenToken(parts[i], config, accum, {});\n        super.insertAt(token);\n      } else {\n        const token = new _index__WEBPACK_IMPORTED_MODULE_3__.Token(parts[i], config, accum);\n        token.type = \"arg-default\";\n        super.insertAt(token.setAttribute(\"stage\", 2));\n      }\n    }\n  }\n  /**\n   * 预设值\n   * @browser\n   */\n  get default() {\n    var _a, _b;\n    return (_b = (_a = this.childNodes[1]) == null ? void 0 : _a.text()) != null ? _b : false;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return `{{{${super.toString(omit, \"|\")}}}}`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return `{{{${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.text)(this.childNodes.slice(0, 2), \"|\")}}}}`;\n  }\n  /** @private */\n  getPadding() {\n    return 3;\n  }\n  /** @private */\n  getGaps(i) {\n    return i < this.length - 1 ? 1 : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const { childNodes: [argName, argDefault, ...rest] } = this, errors = argName.lint(start + 3);\n    if (argDefault) {\n      errors.push(...argDefault.lint(start + 4 + String(argName).length));\n    }\n    if (rest.length > 0) {\n      const rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push(...rest.map((child) => {\n        const error = (0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForChild)(child, rect, \"invisible content inside triple braces\"), {\n          startIndex,\n          startCol\n        } = error;\n        return {\n          ...error,\n          startIndex: startIndex - 1,\n          startCol: startCol - 1\n        };\n      }));\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ pre: \"{{{\", post: \"}}}\", sep: \"|\" });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/arg.ts?");

/***/ }),

/***/ "./src/atom.ts":
/*!*********************!*\
  !*** ./src/atom.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AtomToken: () => (/* binding */ AtomToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\n\n\nclass AtomToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /** @browser */\n  constructor(wikitext, type, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = [], acceptable) {\n    super(wikitext, config, accum, acceptable);\n    this.type = type;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/atom.ts?");

/***/ }),

/***/ "./src/attribute.ts":
/*!**************************!*\
  !*** ./src/attribute.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AttributeToken: () => (/* binding */ AttributeToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./atom */ \"./src/atom.ts\");\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _equal, _quotes, _tag;\n\n\n\n\n\nconst commonHtmlAttrs = /* @__PURE__ */ new Set([\n  \"id\",\n  \"class\",\n  \"style\",\n  \"lang\",\n  \"dir\",\n  \"title\",\n  \"tabindex\",\n  \"aria-describedby\",\n  \"aria-flowto\",\n  \"aria-hidden\",\n  \"aria-label\",\n  \"aria-labelledby\",\n  \"aria-owns\",\n  \"role\",\n  \"about\",\n  \"property\",\n  \"resource\",\n  \"datatype\",\n  \"typeof\",\n  \"itemid\",\n  \"itemprop\",\n  \"itemref\",\n  \"itemscope\",\n  \"itemtype\"\n]), blockAttrs = /* @__PURE__ */ new Set([\"align\"]), citeAttrs = /* @__PURE__ */ new Set([\"cite\"]), citeAndAttrs = /* @__PURE__ */ new Set([\"cite\", \"datetime\"]), widthAttrs = /* @__PURE__ */ new Set([\"width\"]), tdAttrs = /* @__PURE__ */ new Set(\n  [\"align\", \"valign\", \"abbr\", \"axis\", \"headers\", \"scope\", \"rowspan\", \"colspan\", \"width\", \"height\", \"bgcolor\"]\n), typeAttrs = /* @__PURE__ */ new Set([\"type\"]), htmlAttrs = {\n  div: blockAttrs,\n  h1: blockAttrs,\n  h2: blockAttrs,\n  h3: blockAttrs,\n  h4: blockAttrs,\n  h5: blockAttrs,\n  h6: blockAttrs,\n  blockquote: citeAttrs,\n  q: citeAttrs,\n  p: blockAttrs,\n  br: /* @__PURE__ */ new Set([\"clear\"]),\n  pre: widthAttrs,\n  ins: citeAndAttrs,\n  del: citeAndAttrs,\n  ul: typeAttrs,\n  ol: /* @__PURE__ */ new Set([\"type\", \"start\", \"reversed\"]),\n  li: /* @__PURE__ */ new Set([\"type\", \"value\"]),\n  table: /* @__PURE__ */ new Set(\n    [\"summary\", \"width\", \"border\", \"frame\", \"rules\", \"cellspacing\", \"cellpadding\", \"align\", \"bgcolor\"]\n  ),\n  caption: blockAttrs,\n  tr: /* @__PURE__ */ new Set([\"bgcolor\", \"align\", \"valign\"]),\n  td: tdAttrs,\n  th: tdAttrs,\n  img: /* @__PURE__ */ new Set([\"alt\", \"src\", \"width\", \"height\", \"srcset\"]),\n  font: /* @__PURE__ */ new Set([\"size\", \"color\", \"face\"]),\n  hr: widthAttrs,\n  rt: /* @__PURE__ */ new Set([\"rbspan\"]),\n  data: /* @__PURE__ */ new Set([\"value\"]),\n  time: /* @__PURE__ */ new Set([\"datetime\"]),\n  meta: /* @__PURE__ */ new Set([\"itemprop\", \"content\"]),\n  link: /* @__PURE__ */ new Set([\"itemprop\", \"href\", \"title\"]),\n  gallery: /* @__PURE__ */ new Set([\"mode\", \"showfilename\", \"caption\", \"perrow\", \"widths\", \"heights\", \"showthumbnails\", \"type\"]),\n  poem: /* @__PURE__ */ new Set([\"compact\", \"align\"]),\n  categorytree: /* @__PURE__ */ new Set([\n    \"align\",\n    \"hideroot\",\n    \"onlyroot\",\n    \"depth\",\n    \"mode\",\n    \"hideprefix\",\n    \"namespaces\",\n    \"showcount\",\n    \"notranslations\"\n  ]),\n  combooption: /* @__PURE__ */ new Set([\"name\", \"for\", \"inline\", \"align\"])\n}, empty = /* @__PURE__ */ new Set(), extAttrs = {\n  nowiki: empty,\n  indicator: /* @__PURE__ */ new Set([\"name\"]),\n  langconvert: /* @__PURE__ */ new Set([\"from\", \"to\"]),\n  ref: /* @__PURE__ */ new Set([\"group\", \"name\", \"extends\", \"follow\", \"dir\"]),\n  references: /* @__PURE__ */ new Set([\"group\", \"responsive\"]),\n  charinsert: /* @__PURE__ */ new Set([\"label\"]),\n  choose: /* @__PURE__ */ new Set([\"uncached\", \"before\", \"after\"]),\n  option: /* @__PURE__ */ new Set([\"weight\"]),\n  imagemap: empty,\n  inputbox: empty,\n  templatestyles: /* @__PURE__ */ new Set([\"src\", \"wrapper\"]),\n  dynamicpagelist: empty,\n  poll: /* @__PURE__ */ new Set([\"id\", \"show-results-before-voting\"]),\n  sm2: typeAttrs,\n  flashmp3: typeAttrs,\n  tab: /* @__PURE__ */ new Set([\n    \"nested\",\n    \"name\",\n    \"index\",\n    \"class\",\n    \"block\",\n    \"inline\",\n    \"openname\",\n    \"closename\",\n    \"collapsed\",\n    \"dropdown\",\n    \"style\",\n    \"bgcolor\",\n    \"container\",\n    \"id\",\n    \"title\"\n  ]),\n  tabs: /* @__PURE__ */ new Set([\"plain\", \"class\", \"container\", \"id\", \"title\", \"style\"]),\n  combobox: /* @__PURE__ */ new Set([\"placeholder\", \"value\", \"id\", \"class\", \"text\", \"dropdown\", \"style\"])\n}, insecureStyle = new RegExp(\n  `${\"expression\"}|${\"(?:filter|accelerator|-o-link(?:-source)?|-o-replace)\\\\s*:\"}|${\"(?:url|image(?:-set)?)\\\\s*\\\\(\"}|${\"attr\\\\s*\\\\([^)]+[\\\\s,]url\"}`,\n  \"u\"\n);\nclass AttributeToken extends _index__WEBPACK_IMPORTED_MODULE_3__.Token {\n  /**\n   * @browser\n   * @param type 标签类型\n   * @param tag 标签名\n   * @param key 属性名\n   * @param equal 等号\n   * @param value 属性值\n   * @param quotes 引号\n   */\n  constructor(type, tag, key, equal = \"\", value, quotes = [], config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    const keyToken = new _atom__WEBPACK_IMPORTED_MODULE_4__.AtomToken(key, \"attr-key\", config, accum, {});\n    let valueToken;\n    if (key === \"title\" || tag === \"img\" && key === \"alt\") {\n      valueToken = new _index__WEBPACK_IMPORTED_MODULE_3__.Token(value, config, accum, {});\n      valueToken.type = \"attr-value\";\n      valueToken.setAttribute(\"stage\", _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].MAX_STAGE - 1);\n    } else if (tag === \"gallery\" && key === \"caption\") {\n      const newConfig = {\n        ...config,\n        excludes: [...config.excludes, \"quote\", \"extLink\", \"magicLink\", \"list\"]\n      };\n      valueToken = new _index__WEBPACK_IMPORTED_MODULE_3__.Token(value, newConfig, accum, {});\n      valueToken.type = \"attr-value\";\n      valueToken.setAttribute(\"stage\", 5);\n    } else if (tag === \"choose\" && (key === \"before\" || key === \"after\")) {\n      const newConfig = {\n        ...config,\n        excludes: [...config.excludes, \"heading\", \"html\", \"table\", \"hr\", \"list\"]\n      };\n      valueToken = new _index__WEBPACK_IMPORTED_MODULE_3__.Token(value, newConfig, accum, {});\n      valueToken.type = \"attr-value\";\n      valueToken.setAttribute(\"stage\", 1);\n    } else {\n      valueToken = new _atom__WEBPACK_IMPORTED_MODULE_4__.AtomToken(value, \"attr-value\", config, accum, {});\n    }\n    super(void 0, config, accum);\n    /** @browser */\n    __privateAdd(this, _equal, void 0);\n    /** @browser */\n    __privateAdd(this, _quotes, void 0);\n    /** @browser */\n    __privateAdd(this, _tag, void 0);\n    this.type = type;\n    this.append(keyToken, valueToken);\n    __privateSet(this, _equal, equal);\n    __privateSet(this, _quotes, quotes);\n    __privateSet(this, _tag, tag);\n    this.setAttribute(\"name\", (0,_util_string__WEBPACK_IMPORTED_MODULE_1__.removeComment)(key).trim().toLowerCase());\n  }\n  /**\n   * 引号是否匹配\n   * @browser\n   */\n  get balanced() {\n    return !__privateGet(this, _equal) || __privateGet(this, _quotes)[0] === __privateGet(this, _quotes)[1];\n  }\n  /**\n   * 标签名\n   * @browser\n   */\n  get tag() {\n    return __privateGet(this, _tag);\n  }\n  /**\n   * getValue()的getter\n   * @browser\n   */\n  get value() {\n    return this.getValue();\n  }\n  /** @private */\n  afterBuild() {\n    if (__privateGet(this, _equal).includes(\"\\0\")) {\n      __privateSet(this, _equal, this.buildFromStr(__privateGet(this, _equal), \"string\"));\n    }\n    if (this.parentNode) {\n      __privateSet(this, _tag, this.parentNode.name);\n    }\n    this.setAttribute(\"name\", this.firstChild.text().trim().toLowerCase());\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    const [quoteStart = \"\", quoteEnd = \"\"] = __privateGet(this, _quotes);\n    return __privateGet(this, _equal) ? `${super.toString(omit, `${__privateGet(this, _equal)}${quoteStart}`)}${quoteEnd}` : this.firstChild.toString(omit);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return __privateGet(this, _equal) ? `${super.text(`${__privateGet(this, _equal).trim()}\"`)}\"` : this.firstChild.text();\n  }\n  /** @private */\n  getGaps(i) {\n    var _a, _b;\n    return __privateGet(this, _equal) && i === 0 ? __privateGet(this, _equal).length + ((_b = (_a = __privateGet(this, _quotes)[0]) == null ? void 0 : _a.length) != null ? _b : 0) : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    var _a;\n    const errors = super.lint(start), { balanced, firstChild, lastChild, type, name, value } = this, tag = __privateGet(this, _tag);\n    let rect;\n    if (!balanced) {\n      const root = this.getRootNode();\n      rect = { start, ...root.posFromIndex(start) };\n      const e = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(lastChild, rect, \"unclosed quotes\", \"warning\"), startIndex = e.startIndex - 1;\n      errors.push({\n        ...e,\n        startIndex,\n        startCol: e.startCol - 1\n      });\n    }\n    if (extAttrs[tag] && !extAttrs[tag].has(name) || (type !== \"ext-attr\" && !/\\{\\{[^{]+\\}\\}/u.test(name) || tag in htmlAttrs) && !((_a = htmlAttrs[tag]) == null ? void 0 : _a.has(name)) && !/^(?:xmlns:[\\w:.-]+|data-[^:]*)$/u.test(name) && (tag === \"meta\" || tag === \"link\" || !commonHtmlAttrs.has(name))) {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(firstChild, rect, \"illegal attribute name\"));\n    } else if (name === \"style\" && typeof value === \"string\" && insecureStyle.test(value)) {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(lastChild, rect, \"insecure style\"));\n    } else if (name === \"tabindex\" && typeof value === \"string\" && value.trim() !== \"0\") {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(lastChild, rect, \"nonzero tabindex\"));\n    }\n    return errors;\n  }\n  /**\n   * 获取属性值\n   * @browser\n   */\n  getValue() {\n    if (__privateGet(this, _equal)) {\n      const value = this.lastChild.text();\n      if (__privateGet(this, _quotes)[1]) {\n        return value;\n      }\n      return value.trim();\n    }\n    return this.type === \"ext-attr\" || \"\";\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    const [quoteStart = \"\", quoteEnd = \"\"] = __privateGet(this, _quotes);\n    return __privateGet(this, _equal) ? super.print({ sep: `${__privateGet(this, _equal)}${quoteStart}`, post: quoteEnd }) : super.print();\n  }\n}\n_equal = new WeakMap();\n_quotes = new WeakMap();\n_tag = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/attribute.ts?");

/***/ }),

/***/ "./src/attributes.ts":
/*!***************************!*\
  !*** ./src/attributes.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AttributesToken: () => (/* binding */ AttributesToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./atom */ \"./src/atom.ts\");\n/* harmony import */ var _attribute__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./attribute */ \"./src/attribute.ts\");\n\n\n\n\n\n\n\nclass AttributesToken extends _index__WEBPACK_IMPORTED_MODULE_3__.Token {\n  /**\n   * @browser\n   * @param attr 标签属性\n   * @param type 标签类型\n   * @param name 标签名\n   */\n  constructor(attr, type, name, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum, {});\n    this.type = type;\n    this.setAttribute(\"name\", name);\n    if (attr) {\n      const regex = new RegExp(\n        `([^\\\\s/](?:(?!\\0\\\\d+~\\x7F)[^\\\\s/=])*)(?:((?:\\\\s|\\0\\\\d+c\\x7F)*(?:=|\\0\\\\d+~\\x7F)(?:\\\\s|\\0\\\\d+c\\x7F)*)(?:([\"'])(.*?)(\\\\3|$)|(\\\\S*)))?`,\n        \"gsu\"\n      );\n      let out = \"\", mt = regex.exec(attr), lastIndex = 0;\n      const insertDirty = (\n        /** 插入无效属性 */\n        () => {\n          if (out) {\n            super.insertAt(new _atom__WEBPACK_IMPORTED_MODULE_4__.AtomToken(\n              out,\n              `${type.slice(0, -1)}-dirty`,\n              config,\n              accum\n            ));\n            out = \"\";\n          }\n        }\n      );\n      while (mt) {\n        const { index, 0: full, 1: key, 2: equal, 3: quoteStart, 4: quoted, 5: quoteEnd, 6: unquoted } = mt;\n        out += attr.slice(lastIndex, index);\n        if (/^(?:[\\w:]|\\0\\d+[t!~{}+-]\\x7F)(?:[\\w:.-]|\\0\\d+[t!~{}+-]\\x7F)*$/u.test((0,_util_string__WEBPACK_IMPORTED_MODULE_1__.removeComment)(key).trim())) {\n          const value = quoted != null ? quoted : unquoted, quotes = [quoteStart, quoteEnd], token = new _attribute__WEBPACK_IMPORTED_MODULE_5__.AttributeToken(\n            type.slice(0, -1),\n            name,\n            key,\n            equal,\n            value,\n            quotes,\n            config,\n            accum\n          );\n          insertDirty();\n          super.insertAt(token);\n        } else {\n          out += full;\n        }\n        ({ lastIndex } = regex);\n        mt = regex.exec(attr);\n      }\n      out += attr.slice(lastIndex);\n      insertDirty();\n    }\n  }\n  /** @private */\n  afterBuild() {\n    if (this.type === \"table-attrs\") {\n      const { parentNode } = this;\n      this.setAttribute(\n        \"name\",\n        (parentNode == null ? void 0 : parentNode.type) === \"td\" && parentNode.subtype === \"caption\" ? \"caption\" : parentNode == null ? void 0 : parentNode.type\n      );\n    }\n  }\n  /**\n   * 所有指定属性名的AttributeToken\n   * @browser\n   * @param key 属性名\n   */\n  getAttrTokens(key) {\n    return this.childNodes.filter(\n      (child) => child instanceof _attribute__WEBPACK_IMPORTED_MODULE_5__.AttributeToken && child.name === key.toLowerCase().trim()\n    );\n  }\n  /**\n   * 指定属性名的最后一个AttributeToken\n   * @browser\n   * @param key 属性名\n   */\n  getAttrToken(key) {\n    const tokens = this.getAttrTokens(key);\n    return tokens[tokens.length - 1];\n  }\n  /**\n   * 获取标签属性\n   * @browser\n   * @param key 属性键\n   */\n  getAttr(key) {\n    var _a;\n    return (_a = this.getAttrToken(key)) == null ? void 0 : _a.getValue();\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), { parentNode, length, childNodes } = this, attrs = /* @__PURE__ */ new Map(), duplicated = /* @__PURE__ */ new Set();\n    let rect;\n    if ((parentNode == null ? void 0 : parentNode.type) === \"html\" && parentNode.closing && this.text().trim()) {\n      rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, rect, \"attributes of a closing tag\"));\n    }\n    for (let i = 0; i < length; i++) {\n      const attr = childNodes[i];\n      if (attr instanceof _atom__WEBPACK_IMPORTED_MODULE_4__.AtomToken && attr.text().trim()) {\n        rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n        errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(attr, rect, \"containing invalid attribute\"));\n      } else if (attr instanceof _attribute__WEBPACK_IMPORTED_MODULE_5__.AttributeToken) {\n        const { name } = attr;\n        if (attrs.has(name)) {\n          duplicated.add(name);\n          attrs.get(name).push(attr);\n        } else if (name !== \"class\") {\n          attrs.set(name, [attr]);\n        }\n      }\n    }\n    if (duplicated.size > 0) {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      for (const key of duplicated) {\n        errors.push(...attrs.get(key).map(\n          (attr) => (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(attr, rect, _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].msg(\"duplicated $1 attribute\", key))\n        ));\n      }\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return String(this) ? `<span class=\"wpb-${this.type}\">${this.childNodes.map((child) => child.print(\n      child instanceof _atom__WEBPACK_IMPORTED_MODULE_4__.AtomToken && child.text().trim() ? { class: \"hidden\" } : void 0\n    )).join(\"\")}</span>` : \"\";\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/attributes.ts?");

/***/ }),

/***/ "./src/converter.ts":
/*!**************************!*\
  !*** ./src/converter.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConverterToken: () => (/* binding */ ConverterToken)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _converterFlags__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./converterFlags */ \"./src/converterFlags.ts\");\n/* harmony import */ var _converterRule__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./converterRule */ \"./src/converterRule.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\n\nclass ConverterToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /**\n   * @browser\n   * @param flags 转换类型标记\n   * @param rules 转换规则\n   */\n  constructor(flags, rules, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum);\n    /** @browser */\n    __publicField(this, \"type\", \"converter\");\n    this.append(new _converterFlags__WEBPACK_IMPORTED_MODULE_3__.ConverterFlagsToken(flags, config, accum));\n    const [firstRule] = rules, hasColon = firstRule.includes(\":\"), firstRuleToken = new _converterRule__WEBPACK_IMPORTED_MODULE_4__.ConverterRuleToken(firstRule, hasColon, config, accum);\n    if (hasColon && firstRuleToken.length === 1) {\n      this.insertAt(new _converterRule__WEBPACK_IMPORTED_MODULE_4__.ConverterRuleToken(rules.join(\";\"), false, config, accum));\n    } else {\n      this.append(\n        firstRuleToken,\n        ...rules.slice(1).map((rule) => new _converterRule__WEBPACK_IMPORTED_MODULE_4__.ConverterRuleToken(rule, true, config, accum))\n      );\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    const { childNodes: [flags, ...rules] } = this;\n    return `-{${flags.toString()}${flags.length > 0 ? \"|\" : \"\"}${rules.map((rule) => rule.toString()).join(\";\")}}-`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const { childNodes: [flags, ...rules] } = this;\n    return `-{${flags.text()}|${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.text)(rules, \";\")}}-`;\n  }\n  /** @private */\n  getPadding() {\n    return 2;\n  }\n  /** @private */\n  getGaps(i) {\n    return i || this.firstChild.length > 0 ? 1 : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    const { childNodes: [flags, ...rules] } = this;\n    return `<span class=\"wpb-converter\">-{${flags.print()}${flags.length > 0 ? \"|\" : \"\"}${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.print)(rules, { sep: \";\" })}}-</span>`;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/converter.ts?");

/***/ }),

/***/ "./src/converterFlags.ts":
/*!*******************************!*\
  !*** ./src/converterFlags.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConverterFlagsToken: () => (/* binding */ ConverterFlagsToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./atom */ \"./src/atom.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _flags;\n\n\n\n\nconst definedFlags = /* @__PURE__ */ new Set([\"A\", \"T\", \"R\", \"D\", \"-\", \"H\", \"N\"]);\nclass ConverterFlagsToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /**\n   * @browser\n   * @param flags 转换类型标记\n   */\n  constructor(flags, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"converter-flags\");\n    /** @browser */\n    __privateAdd(this, _flags, void 0);\n    this.append(...flags.map((flag) => new _atom__WEBPACK_IMPORTED_MODULE_3__.AtomToken(flag, \"converter-flag\", config, accum)));\n  }\n  /** @private */\n  afterBuild() {\n    __privateSet(this, _flags, this.childNodes.map((child) => child.text().trim()));\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return super.toString(omit, \";\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return super.text(\";\");\n  }\n  /** @private */\n  getGaps(i) {\n    return i < this.length - 1 ? 1 : 0;\n  }\n  /**\n   * 获取未知的转换类型标记\n   * @browser\n   */\n  getUnknownFlags() {\n    return new Set(__privateGet(this, _flags).filter((flag) => /\\{{3}[^{}]+\\}{3}/u.test(flag)));\n  }\n  /**\n   * 获取指定语言变体的转换标记\n   * @browser\n   */\n  getVariantFlags() {\n    const variants = new Set(this.getAttribute(\"config\").variants);\n    return new Set(__privateGet(this, _flags).filter((flag) => variants.has(flag)));\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const variantFlags = this.getVariantFlags(), unknownFlags = this.getUnknownFlags(), validFlags = new Set(__privateGet(this, _flags).filter((flag) => definedFlags.has(flag))), { length: emptyFlagCount } = __privateGet(this, _flags).filter((flag) => !flag), knownFlagCount = __privateGet(this, _flags).length - unknownFlags.size - emptyFlagCount, errors = super.lint(start);\n    if (variantFlags.size === knownFlagCount || validFlags.size === knownFlagCount) {\n      return errors;\n    }\n    const rect = { start, ...this.getRootNode().posFromIndex(start) }, { childNodes, length } = this;\n    for (let i = 0; i < length; i++) {\n      const child = childNodes[i], flag = child.text().trim();\n      if (flag && !variantFlags.has(flag) && !unknownFlags.has(flag) && (variantFlags.size > 0 || !validFlags.has(flag))) {\n        const error = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(child, rect, \"invalid conversion flag\");\n        errors.push(error);\n      }\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ sep: \";\" });\n  }\n}\n_flags = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/converterFlags.ts?");

/***/ }),

/***/ "./src/converterRule.ts":
/*!******************************!*\
  !*** ./src/converterRule.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConverterRuleToken: () => (/* binding */ ConverterRuleToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./atom */ \"./src/atom.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\nclass ConverterRuleToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /**\n   * @browser\n   * @param rule 转换规则\n   * @param hasColon 是否带有\":\"\n   */\n  constructor(rule, hasColon = true, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum);\n    /** @browser */\n    __publicField(this, \"type\", \"converter-rule\");\n    if (hasColon) {\n      const i = rule.indexOf(\":\"), j = rule.slice(0, i).indexOf(\"=>\"), v = j === -1 ? rule.slice(0, i) : rule.slice(j + 2, i);\n      if (config.variants.includes(v.trim())) {\n        super.insertAt(new _atom__WEBPACK_IMPORTED_MODULE_2__.AtomToken(v, \"converter-rule-variant\", config, accum));\n        super.insertAt(new _atom__WEBPACK_IMPORTED_MODULE_2__.AtomToken(rule.slice(i + 1), \"converter-rule-to\", config, accum));\n        if (j !== -1) {\n          super.insertAt(new _atom__WEBPACK_IMPORTED_MODULE_2__.AtomToken(rule.slice(0, j), \"converter-rule-from\", config, accum), 0);\n        }\n      } else {\n        super.insertAt(new _atom__WEBPACK_IMPORTED_MODULE_2__.AtomToken(rule, \"converter-rule-noconvert\", config, accum));\n      }\n    } else {\n      super.insertAt(new _atom__WEBPACK_IMPORTED_MODULE_2__.AtomToken(rule, \"converter-rule-noconvert\", config, accum));\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    const { childNodes } = this;\n    if (childNodes.length === 3) {\n      const [from, variant, to] = childNodes;\n      return `${from.toString(omit)}=>${variant.toString(omit)}:${to.toString(omit)}`;\n    }\n    return super.toString(omit, \":\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const { childNodes } = this;\n    if (childNodes.length === 3) {\n      const [from, variant, to] = childNodes;\n      return `${from.text()}=>${variant.text()}:${to.text()}`;\n    }\n    return super.text(\":\");\n  }\n  /** @private */\n  getGaps(i) {\n    return i === 0 && this.length === 3 ? 2 : 1;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    const { childNodes } = this;\n    if (childNodes.length === 3) {\n      const [from, variant, to] = childNodes;\n      return `<span class=\"wpb-converter-rule\">${from.print()}=>${variant.print()}:${to.print()}</span>`;\n    }\n    return super.print({ sep: \":\" });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/converterRule.ts?");

/***/ }),

/***/ "./src/extLink.ts":
/*!************************!*\
  !*** ./src/extLink.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExtLinkToken: () => (/* binding */ ExtLinkToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _magicLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./magicLink */ \"./src/magicLink.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _space;\n\n\n\nclass ExtLinkToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /**\n   * @browser\n   * @param url 网址\n   * @param space 空白字符\n   * @param text 链接文字\n   */\n  constructor(url, space = \"\", text = \"\", config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"ext-link\");\n    /** @browser */\n    __privateAdd(this, _space, void 0);\n    this.insertAt(new _magicLink__WEBPACK_IMPORTED_MODULE_2__.MagicLinkToken(url, true, config, accum));\n    __privateSet(this, _space, space);\n    if (text) {\n      const inner = new _index__WEBPACK_IMPORTED_MODULE_1__.Token(text, config, accum, {});\n      inner.type = \"ext-link-text\";\n      this.insertAt(inner.setAttribute(\"stage\", _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MAX_STAGE - 1));\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    if (this.length === 1) {\n      return `[${super.toString(omit)}${__privateGet(this, _space)}]`;\n    }\n    return `[${super.toString(omit, __privateGet(this, _space))}]`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return `[${super.text(\" \")}]`;\n  }\n  /** @private */\n  getPadding() {\n    return 1;\n  }\n  /** @private */\n  getGaps(i) {\n    return i === 0 ? __privateGet(this, _space).length : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print(\n      this.length === 1 ? { pre: \"[\", post: `${__privateGet(this, _space)}]` } : { pre: \"[\", sep: __privateGet(this, _space), post: \"]\" }\n    );\n  }\n}\n_space = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/extLink.ts?");

/***/ }),

/***/ "./src/gallery.ts":
/*!************************!*\
  !*** ./src/gallery.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GalleryToken: () => (/* binding */ GalleryToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _link_galleryImage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./link/galleryImage */ \"./src/link/galleryImage.ts\");\n/* harmony import */ var _hidden__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hidden */ \"./src/hidden.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\nclass GalleryToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /**\n   * @browser\n   * @param inner 标签内部wikitext\n   */\n  constructor(inner, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) {\n    var _a;\n    super(void 0, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"ext-inner\");\n    for (const line of (_a = inner == null ? void 0 : inner.split(\"\\n\")) != null ? _a : []) {\n      const matches = /^([^|]+)(?:\\|(.*))?/u.exec(line);\n      if (!matches) {\n        super.insertAt(line.trim() ? new _hidden__WEBPACK_IMPORTED_MODULE_3__.HiddenToken(line, config, [], {}) : line);\n        continue;\n      }\n      const [, file, alt] = matches;\n      if (this.normalizeTitle(file, 6, true, true).valid) {\n        super.insertAt(new _link_galleryImage__WEBPACK_IMPORTED_MODULE_2__.GalleryImageToken(\"gallery\", file, alt, config, accum));\n      } else {\n        super.insertAt(new _hidden__WEBPACK_IMPORTED_MODULE_3__.HiddenToken(line, config, [], {}));\n      }\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return super.toString(omit, \"\\n\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return super.text(\"\\n\").replace(/\\n\\s*\\n/gu, \"\\n\");\n  }\n  /** @private */\n  getGaps(i) {\n    return i < this.length - 1 ? 1 : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const { top, left } = this.getRootNode().posFromIndex(start), errors = [];\n    for (let i = 0; i < this.length; i++) {\n      const child = this.childNodes[i], str = String(child), { length } = str, trimmed = str.trim(), startLine = top + i, startCol = i ? 0 : left;\n      if (child.type === \"hidden\" && trimmed && !/^<!--.*-->$/u.test(trimmed)) {\n        errors.push({\n          message: _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].msg(\"invalid content in <$1>\", \"gallery\"),\n          severity: \"error\",\n          startIndex: start,\n          endIndex: start + length,\n          startLine,\n          endLine: startLine,\n          startCol,\n          endCol: startCol + length\n        });\n      } else if (child.type !== \"hidden\" && child.type !== \"text\") {\n        errors.push(...child.lint(start));\n      }\n      start += length + 1;\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ sep: \"\\n\" });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/gallery.ts?");

/***/ }),

/***/ "./src/heading.ts":
/*!************************!*\
  !*** ./src/heading.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeadingToken: () => (/* binding */ HeadingToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./syntax */ \"./src/syntax.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar _equals, equals_get;\n\n\n\n\nclass HeadingToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /**\n   * @browser\n   * @param level 标题层级\n   * @param input 标题文字\n   */\n  constructor(level, input, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum);\n    /**\n     * 标题格式的等号\n     * @browser\n     */\n    __privateAdd(this, _equals);\n    /** @browser */\n    __publicField(this, \"type\", \"heading\");\n    this.setAttribute(\"name\", String(level));\n    const token = new _index__WEBPACK_IMPORTED_MODULE_2__.Token(input[0], config, accum);\n    token.type = \"heading-title\";\n    token.setAttribute(\"stage\", 2);\n    const trail = new _syntax__WEBPACK_IMPORTED_MODULE_3__.SyntaxToken(input[1], /^[^\\S\\n]*$/u, \"heading-trail\", config, accum, {});\n    this.append(token, trail);\n  }\n  /**\n   * 标题层级\n   * @browser\n   */\n  get level() {\n    return Number(this.name);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    const equals = __privateGet(this, _equals, equals_get);\n    return `${equals}${this.firstChild.toString()}${equals}${this.lastChild.toString()}`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const equals = __privateGet(this, _equals, equals_get);\n    return `${equals}${this.firstChild.text()}${equals}`;\n  }\n  /** @private */\n  getPadding() {\n    return super.getPadding() + this.level;\n  }\n  /** @private */\n  getGaps(i) {\n    return i === 0 ? this.level : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), innerStr = String(this.firstChild);\n    let refError;\n    if (this.name === \"1\") {\n      refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"<h1>\");\n      errors.push(refError);\n    }\n    if (innerStr.startsWith(\"=\") || innerStr.endsWith(\"=\")) {\n      refError != null ? refError : refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"\");\n      errors.push({ ...refError, message: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg('unbalanced \"=\" in a section header') });\n    }\n    if (this.closest(\"html-attrs, table-attrs\")) {\n      refError != null ? refError : refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"\");\n      errors.push({ ...refError, message: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg(\"section header in a HTML tag\") });\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    const equals = __privateGet(this, _equals, equals_get);\n    return super.print({ pre: equals, sep: equals });\n  }\n}\n_equals = new WeakSet();\nequals_get = function() {\n  return \"=\".repeat(this.level);\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./src/heading.ts?");

/***/ }),

/***/ "./src/hidden.ts":
/*!***********************!*\
  !*** ./src/hidden.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HiddenToken: () => (/* binding */ HiddenToken)\n/* harmony export */ });\n/* harmony import */ var _mixin_hidden__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mixin/hidden */ \"./mixin/hidden.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\nclass HiddenToken extends (0,_mixin_hidden__WEBPACK_IMPORTED_MODULE_0__.hidden)(_index__WEBPACK_IMPORTED_MODULE_1__.Token) {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"hidden\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/hidden.ts?");

/***/ }),

/***/ "./src/html.ts":
/*!*********************!*\
  !*** ./src/html.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HtmlToken: () => (/* binding */ HtmlToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _closing, _selfClosing, _tag;\n\n\n\n\nconst magicWords = /* @__PURE__ */ new Set([\"if\", \"ifeq\", \"ifexpr\", \"ifexist\", \"iferror\", \"switch\"]);\nclass HtmlToken extends _index__WEBPACK_IMPORTED_MODULE_3__.Token {\n  /**\n   * @browser\n   * @param name 标签名\n   * @param attr 标签属性\n   * @param closing 是否闭合\n   * @param selfClosing 是否自封闭\n   */\n  constructor(name, attr, closing, selfClosing, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum);\n    /** @browser */\n    __publicField(this, \"type\", \"html\");\n    /** @browser */\n    __privateAdd(this, _closing, void 0);\n    /** @browser */\n    __privateAdd(this, _selfClosing, void 0);\n    /** @browser */\n    __privateAdd(this, _tag, void 0);\n    this.insertAt(attr);\n    this.setAttribute(\"name\", name.toLowerCase());\n    __privateSet(this, _closing, closing);\n    __privateSet(this, _selfClosing, selfClosing);\n    __privateSet(this, _tag, name);\n  }\n  /**\n   * 是否是闭合标签\n   * @browser\n   */\n  get closing() {\n    return __privateGet(this, _closing);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return `<${__privateGet(this, _closing) ? \"/\" : \"\"}${__privateGet(this, _tag)}${super.toString()}${__privateGet(this, _selfClosing) ? \"/\" : \"\"}>`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return `<${__privateGet(this, _closing) ? \"/\" : \"\"}${__privateGet(this, _tag)}${__privateGet(this, _closing) ? \"\" : super.text()}${__privateGet(this, _selfClosing) ? \"/\" : \"\"}>`;\n  }\n  /** @private */\n  getPadding() {\n    return __privateGet(this, _tag).length + (__privateGet(this, _closing) ? 2 : 1);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start);\n    let refError;\n    if (this.name === \"h1\" && !__privateGet(this, _closing)) {\n      refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"<h1>\");\n      errors.push(refError);\n    }\n    if (this.closest(\"table-attrs\")) {\n      refError != null ? refError : refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"\");\n      errors.push({\n        ...refError,\n        message: _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].msg(\"HTML tag in table attributes\")\n      });\n    }\n    try {\n      this.findMatchingTag();\n    } catch (e) {\n      if (e instanceof SyntaxError) {\n        const { message: errorMsg } = e;\n        refError != null ? refError : refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"\");\n        const [msg] = errorMsg.split(\":\"), error = { ...refError, message: _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].msg(msg) };\n        if (msg === \"unclosed tag\") {\n          error.severity = \"warning\";\n        } else if (msg === \"unmatched closing tag\") {\n          const ancestor = this.closest(\"magic-word\");\n          if (ancestor && magicWords.has(ancestor.name)) {\n            error.severity = \"warning\";\n          }\n        }\n        errors.push(error);\n      }\n    }\n    return errors;\n  }\n  /**\n   * 搜索匹配的标签\n   * @browser\n   * @throws `SyntaxError` 同时闭合和自封闭的标签\n   * @throws `SyntaxError` 无效自封闭标签\n   * @throws `SyntaxError` 未闭合的标签\n   */\n  findMatchingTag() {\n    const { html } = this.getAttribute(\"config\"), { name: tagName, parentNode } = this, string = (0,_util_string__WEBPACK_IMPORTED_MODULE_1__.noWrap)(String(this));\n    if (__privateGet(this, _closing) && (__privateGet(this, _selfClosing) || html[2].includes(tagName))) {\n      throw new SyntaxError(`tag that is both closing and self-closing: ${string}`);\n    } else if (html[2].includes(tagName) || __privateGet(this, _selfClosing) && html[1].includes(tagName)) {\n      return this;\n    } else if (__privateGet(this, _selfClosing) && html[0].includes(tagName)) {\n      throw new SyntaxError(`invalid self-closing tag: ${string}`);\n    } else if (!parentNode) {\n      return void 0;\n    }\n    const { childNodes } = parentNode, i = childNodes.indexOf(this), siblings = __privateGet(this, _closing) ? childNodes.slice(0, i).reverse().filter(({ type, name }) => type === \"html\" && name === tagName) : childNodes.slice(i + 1).filter(({ type, name }) => type === \"html\" && name === tagName);\n    let imbalance = __privateGet(this, _closing) ? -1 : 1;\n    for (const token of siblings) {\n      if (token.closing) {\n        imbalance--;\n      } else {\n        imbalance++;\n      }\n      if (imbalance === 0) {\n        return token;\n      }\n    }\n    throw new SyntaxError(`${__privateGet(this, _closing) ? \"unmatched closing\" : \"unclosed\"} tag: ${string}`);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({\n      pre: `&lt;${__privateGet(this, _closing) ? \"/\" : \"\"}${__privateGet(this, _tag)}`,\n      post: `${__privateGet(this, _selfClosing) ? \"/\" : \"\"}&gt;`\n    });\n  }\n}\n_closing = new WeakMap();\n_selfClosing = new WeakMap();\n_tag = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/html.ts?");

/***/ }),

/***/ "./src/imageParameter.ts":
/*!*******************************!*\
  !*** ./src/imageParameter.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageParameterToken: () => (/* binding */ ImageParameterToken)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _syntax;\n\n\n\n\nconst params = /* @__PURE__ */ new Set([\"alt\", \"link\", \"lang\", \"page\", \"caption\"]);\nfunction validate(key, val, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), halfParsed = false) {\n  val = val.trim();\n  let value = val.replace(/\\0\\d+t\\x7F/gu, \"\").trim();\n  switch (key) {\n    case \"width\":\n      return /^(?:\\d+x?|\\d*x\\d+)$/u.test(value);\n    case \"link\": {\n      if (!value) {\n        return val;\n      }\n      const regex = new RegExp(\n        `^(?:(?:${config.protocol}|//)${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlCharFirst}|\\0\\\\d+m\\x7F)${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlChar}$`,\n        \"iu\"\n      );\n      if (regex.test(value)) {\n        return val;\n      } else if (value.startsWith(\"[[\") && value.endsWith(\"]]\")) {\n        value = value.slice(2, -2);\n      }\n      const title = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].normalizeTitle(value, 0, false, config, halfParsed, true, true);\n      return title.valid && title;\n    }\n    case \"lang\":\n      return config.variants.includes(value);\n    case \"alt\":\n    case \"class\":\n    case \"manualthumb\":\n      return true;\n    default:\n      return !isNaN(value);\n  }\n}\nclass ImageParameterToken extends _index__WEBPACK_IMPORTED_MODULE_3__.Token {\n  /**\n   * @browser\n   * @param str 图片参数\n   */\n  constructor(str, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    var __super = (...args) => {\n      super(...args);\n      /** @browser */\n      __publicField(this, \"type\", \"image-parameter\");\n      /** @browser */\n      __privateAdd(this, _syntax, \"\");\n    };\n    var _a;\n    let mt;\n    const regexes = Object.entries(config.img).map(\n      ([syntax, param2]) => [\n        syntax,\n        param2,\n        new RegExp(`^(\\\\s*)${syntax.replace(\"$1\", \"(.*)\")}(\\\\s*)$`, \"u\")\n      ]\n    ), param = regexes.find(([, key, regex]) => {\n      mt = regex.exec(str);\n      return mt && (mt.length !== 4 || validate(key, mt[2], config, true) !== false);\n    });\n    if (param && mt) {\n      if (mt.length === 3) {\n        __super(void 0, config, accum);\n        __privateSet(this, _syntax, str);\n      } else {\n        __super(mt[2], config, accum, {});\n        __privateSet(this, _syntax, `${mt[1]}${param[0]}${mt[3]}`);\n      }\n      this.setAttribute(\"name\", param[1]);\n      return;\n    }\n    __super(str, { ...config, excludes: [...(_a = config.excludes) != null ? _a : [], \"list\"] }, accum);\n    this.setAttribute(\"name\", \"caption\").setAttribute(\"stage\", 7);\n  }\n  /**\n   * 图片链接\n   * @browser\n   */\n  get link() {\n    return this.name === \"link\" ? validate(\"link\", super.text(), this.getAttribute(\"config\")) : void 0;\n  }\n  /** @private */\n  afterBuild() {\n    if (this.parentNode.type === \"gallery-image\" && !params.has(this.name)) {\n      this.setAttribute(\"name\", \"invalid\");\n    }\n  }\n  /** @private */\n  isPlain() {\n    return this.name === \"caption\";\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return __privateGet(this, _syntax) ? __privateGet(this, _syntax).replace(\"$1\", super.toString(omit)) : super.toString(omit);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return __privateGet(this, _syntax) ? __privateGet(this, _syntax).replace(\"$1\", super.text()).trim() : super.text().trim();\n  }\n  /** @private */\n  getPadding() {\n    return Math.max(0, __privateGet(this, _syntax).indexOf(\"$1\"));\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), { link, name } = this;\n    if (name === \"invalid\") {\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForSelf)(this, { start }, \"invalid gallery image parameter\"));\n    } else if (typeof link === \"object\" && link.encoded) {\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForSelf)(this, { start }, \"unnecessary URL encoding in an internal link\"));\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return __privateGet(this, _syntax) ? `<span class=\"wpb-image-parameter\">${__privateGet(this, _syntax).replace(\"$1\", `<span class=\"wpb-image-caption\">${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.print)(this.childNodes)}</span>`)}</span>` : super.print({ class: \"image-caption\" });\n  }\n}\n_syntax = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/imageParameter.ts?");

/***/ }),

/***/ "./src/imagemap.ts":
/*!*************************!*\
  !*** ./src/imagemap.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImagemapToken: () => (/* binding */ ImagemapToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nowiki/noinclude */ \"./src/nowiki/noinclude.ts\");\n/* harmony import */ var _link_galleryImage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./link/galleryImage */ \"./src/link/galleryImage.ts\");\n/* harmony import */ var _imagemapLink__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./imagemapLink */ \"./src/imagemapLink.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\n\n\nclass ImagemapToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /**\n   * @browser\n   * @param inner 标签内部wikitext\n   * @throws `SyntaxError` 没有合法图片\n   */\n  constructor(inner, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"ext-inner\");\n    if (!inner) {\n      return;\n    }\n    const lines = inner.split(\"\\n\"), protocols = new Set(config.protocol.split(\"|\")), SingleLineNoincludeToken = _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_3__.NoincludeToken;\n    let first = true, error = false;\n    for (const line of lines) {\n      const trimmed = line.trim();\n      if (error || !trimmed || trimmed.startsWith(\"#\")) {\n      } else if (first) {\n        const [file, ...options] = line.split(\"|\"), title = this.normalizeTitle(file, 0, true);\n        if (title.valid && title.ns === 6) {\n          const token = new _link_galleryImage__WEBPACK_IMPORTED_MODULE_4__.GalleryImageToken(\n            \"imagemap\",\n            file,\n            options.length > 0 ? options.join(\"|\") : void 0,\n            config,\n            accum\n          );\n          super.insertAt(token);\n          first = false;\n          continue;\n        } else {\n          error = true;\n        }\n      } else if (line.trim().split(/[\\t ]/u)[0] === \"desc\") {\n        super.insertAt(line);\n        continue;\n      } else if (line.includes(\"[\")) {\n        const i = line.indexOf(\"[\"), substr = line.slice(i), mtIn = /^\\[{2}([^|]+)(?:\\|([^\\]]+))?\\]{2}[\\w\\s]*$/u.exec(substr);\n        if (mtIn) {\n          if (this.normalizeTitle(mtIn[1], 0, true, false, true).valid) {\n            super.insertAt(new _imagemapLink__WEBPACK_IMPORTED_MODULE_5__.ImagemapLinkToken(\n              line.slice(0, i),\n              mtIn.slice(1),\n              substr.slice(substr.indexOf(\"]]\") + 2),\n              config,\n              accum\n            ));\n            continue;\n          }\n        } else if (protocols.has(substr.slice(1, substr.indexOf(\":\") + 1)) || protocols.has(substr.slice(1, substr.indexOf(\"//\") + 2))) {\n          const mtEx = /^\\[([^\\]\\s]+)(?:(\\s+)(\\S[^\\]]*)?)?\\][\\w\\s]*$/u.exec(substr);\n          if (mtEx) {\n            super.insertAt(new _imagemapLink__WEBPACK_IMPORTED_MODULE_5__.ImagemapLinkToken(\n              line.slice(0, i),\n              mtEx.slice(1),\n              substr.slice(substr.indexOf(\"]\") + 1),\n              config,\n              accum\n            ));\n            continue;\n          }\n        }\n      }\n      super.insertAt(new SingleLineNoincludeToken(line, config, accum));\n    }\n  }\n  /**\n   * 图片\n   * @browser\n   */\n  get image() {\n    return this.childNodes.find(({ type }) => type === \"imagemap-image\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return super.toString(omit, \"\\n\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return super.text(\"\\n\").replace(/\\n{2,}/gu, \"\\n\");\n  }\n  /** @private */\n  getGaps(i) {\n    return i < this.length - 1 ? 1 : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), rect = { start, ...this.getRootNode().posFromIndex(start) };\n    if (this.image) {\n      errors.push(\n        ...this.childNodes.filter((child) => {\n          const str = String(child).trim();\n          return child.type === \"noinclude\" && str && !str.startsWith(\"#\");\n        }).map((child) => (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(child, rect, \"invalid link in <imagemap>\"))\n      );\n    } else {\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, rect, \"<imagemap> without an image\"));\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ sep: \"\\n\" });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/imagemap.ts?");

/***/ }),

/***/ "./src/imagemapLink.ts":
/*!*****************************!*\
  !*** ./src/imagemapLink.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImagemapLinkToken: () => (/* binding */ ImagemapLinkToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nowiki/noinclude */ \"./src/nowiki/noinclude.ts\");\n/* harmony import */ var _link_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./link/index */ \"./src/link/index.ts\");\n/* harmony import */ var _extLink__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./extLink */ \"./src/extLink.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\n\nclass ImagemapLinkToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /**\n   * @browser\n   * @param pre 链接前的文本\n   * @param linkStuff 内外链接\n   * @param post 链接后的文本\n   */\n  constructor(pre, linkStuff, post, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum);\n    /** @browser */\n    __publicField(this, \"type\", \"imagemap-link\");\n    this.append(\n      pre,\n      linkStuff.length === 2 ? new _link_index__WEBPACK_IMPORTED_MODULE_3__.LinkToken(...linkStuff, config, accum) : new _extLink__WEBPACK_IMPORTED_MODULE_4__.ExtLinkToken(...linkStuff, config, accum),\n      new _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__.NoincludeToken(post, config, accum)\n    );\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/imagemapLink.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Token: () => (/* binding */ Token)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _lib_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/element */ \"./lib/element.ts\");\n/* harmony import */ var _lib_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/text */ \"./lib/text.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateWrapper = (obj, member, setter, getter) => ({\n  set _(value) {\n    __privateSet(obj, member, value, setter);\n  },\n  get _() {\n    return __privateGet(obj, member, getter);\n  }\n});\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _stage, _config, _accum, _include, _build, build_fn, _parseCommentAndExt, parseCommentAndExt_fn, _parseBraces, parseBraces_fn, _parseHtml, parseHtml_fn, _parseTable, parseTable_fn, _parseHrAndDoubleUnderscore, parseHrAndDoubleUnderscore_fn, _parseLinks, parseLinks_fn, _parseQuotes, parseQuotes_fn, _parseExternalLinks, parseExternalLinks_fn, _parseMagicLinks, parseMagicLinks_fn, _parseList, parseList_fn, _parseConverter, parseConverter_fn;\n\n\nconst { MAX_STAGE } = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n\n\nconst _Token = class _Token extends _lib_element__WEBPACK_IMPORTED_MODULE_2__.AstElement {\n  /** @browser */\n  constructor(wikitext, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = [], acceptable) {\n    super();\n    /**\n     * 将占位符替换为子Token\n     * @browser\n     */\n    __privateAdd(this, _build);\n    /**\n     * 解析HTML注释和扩展标签\n     * @browser\n     * @param includeOnly 是否嵌入\n     */\n    __privateAdd(this, _parseCommentAndExt);\n    /**\n     * 解析花括号\n     * @browser\n     */\n    __privateAdd(this, _parseBraces);\n    /**\n     * 解析HTML标签\n     * @browser\n     */\n    __privateAdd(this, _parseHtml);\n    /**\n     * 解析表格\n     * @browser\n     */\n    __privateAdd(this, _parseTable);\n    /**\n     * 解析`<hr>`和状态开关\n     * @browser\n     */\n    __privateAdd(this, _parseHrAndDoubleUnderscore);\n    /**\n     * 解析内部链接\n     * @browser\n     */\n    __privateAdd(this, _parseLinks);\n    /**\n     * 解析单引号\n     * @browser\n     */\n    __privateAdd(this, _parseQuotes);\n    /**\n     * 解析外部链接\n     * @browser\n     */\n    __privateAdd(this, _parseExternalLinks);\n    /**\n     * 解析自由外链\n     * @browser\n     */\n    __privateAdd(this, _parseMagicLinks);\n    /**\n     * 解析列表\n     * @browser\n     */\n    __privateAdd(this, _parseList);\n    /**\n     * 解析语言变体转换\n     * @browser\n     */\n    __privateAdd(this, _parseConverter);\n    /** @browser */\n    __publicField(this, \"type\", \"root\");\n    /**\n     * 解析阶段，参见顶部注释。只对plain Token有意义。\n     * @browser\n     */\n    __privateAdd(this, _stage, 0);\n    /** @browser */\n    __privateAdd(this, _config, void 0);\n    /**\n     * 这个数组起两个作用：1. 数组中的Token会在build时替换`/\\0\\d+.\\x7F/`标记；2. 数组中的Token会依次执行parseOnce和build方法。\n     * @browser\n     */\n    __privateAdd(this, _accum, void 0);\n    /** @browser */\n    __privateAdd(this, _include, void 0);\n    if (typeof wikitext === \"string\") {\n      this.insertAt(wikitext);\n    }\n    __privateSet(this, _config, config);\n    __privateSet(this, _accum, accum);\n    accum.push(this);\n  }\n  /** @private */\n  parseOnce(n = __privateGet(this, _stage), include = false) {\n    if (n < __privateGet(this, _stage) || !this.isPlain() || this.length === 0) {\n      return this;\n    }\n    switch (n) {\n      case 0:\n        if (this.type === \"root\") {\n          __privateGet(this, _accum).shift();\n        }\n        __privateSet(this, _include, include);\n        __privateMethod(this, _parseCommentAndExt, parseCommentAndExt_fn).call(this, include);\n        break;\n      case 1:\n        __privateMethod(this, _parseBraces, parseBraces_fn).call(this);\n        break;\n      case 2:\n        __privateMethod(this, _parseHtml, parseHtml_fn).call(this);\n        break;\n      case 3:\n        __privateMethod(this, _parseTable, parseTable_fn).call(this);\n        break;\n      case 4:\n        __privateMethod(this, _parseHrAndDoubleUnderscore, parseHrAndDoubleUnderscore_fn).call(this);\n        break;\n      case 5:\n        __privateMethod(this, _parseLinks, parseLinks_fn).call(this);\n        break;\n      case 6:\n        __privateMethod(this, _parseQuotes, parseQuotes_fn).call(this);\n        break;\n      case 7:\n        __privateMethod(this, _parseExternalLinks, parseExternalLinks_fn).call(this);\n        break;\n      case 8:\n        __privateMethod(this, _parseMagicLinks, parseMagicLinks_fn).call(this);\n        break;\n      case 9:\n        __privateMethod(this, _parseList, parseList_fn).call(this);\n        break;\n      case 10:\n        __privateMethod(this, _parseConverter, parseConverter_fn).call(this);\n    }\n    if (this.type === \"root\") {\n      for (const token of __privateGet(this, _accum)) {\n        token.parseOnce(n, include);\n      }\n    }\n    __privateWrapper(this, _stage)._++;\n    return this;\n  }\n  /** @private */\n  buildFromStr(str, type) {\n    const nodes = str.split(/[\\0\\x7F]/u).map((s, i) => {\n      if (i % 2 === 0) {\n        return new _lib_text__WEBPACK_IMPORTED_MODULE_3__.AstText(s);\n      } else if (isNaN(s[s.lengtht - 1])) {\n        return __privateGet(this, _accum)[Number(s.slice(0, -1))];\n      }\n      throw new Error(`\\u89E3\\u6790\\u9519\\u8BEF\\uFF01\\u672A\\u6B63\\u786E\\u6807\\u8BB0\\u7684 Token\\uFF1A${s}`);\n    });\n    if (type === \"string\") {\n      return nodes.map(String).join(\"\");\n    } else if (type === \"text\") {\n      return (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.text)(nodes);\n    }\n    return nodes;\n  }\n  /** @private */\n  afterBuild() {\n    if (this.type === \"root\") {\n      for (const token of __privateGet(this, _accum)) {\n        token.afterBuild();\n      }\n    }\n  }\n  /**\n   * 解析、重构、生成部分Token的`name`属性\n   * @browser\n   * @param n 最大解析层级\n   * @param include 是否嵌入\n   */\n  parse(n = MAX_STAGE, include = false) {\n    while (__privateGet(this, _stage) < n) {\n      this.parseOnce(__privateGet(this, _stage), include);\n    }\n    if (n) {\n      __privateMethod(this, _build, build_fn).call(this);\n      this.afterBuild();\n    }\n    return this;\n  }\n  /** @private */\n  getAttribute(key) {\n    switch (key) {\n      case \"config\":\n        return JSON.parse(JSON.stringify(__privateGet(this, _config)));\n      case \"accum\":\n        return __privateGet(this, _accum);\n      case \"include\": {\n        if (__privateGet(this, _include) !== void 0) {\n          return __privateGet(this, _include);\n        }\n        const root = this.getRootNode();\n        return root.getAttribute(\"include\");\n      }\n      default:\n        return super.getAttribute(key);\n    }\n  }\n  /** @private */\n  setAttribute(key, value) {\n    switch (key) {\n      case \"stage\":\n        if (__privateGet(this, _stage) === 0 && this.type === \"root\") {\n          __privateGet(this, _accum).shift();\n        }\n        __privateSet(this, _stage, value);\n        return this;\n      default:\n        return super.setAttribute(key, value);\n    }\n  }\n  /** @private */\n  isPlain() {\n    return this.constructor === _Token;\n  }\n  /** @ignore */\n  insertAt(child, i = this.length) {\n    const token = typeof child === \"string\" ? new _lib_text__WEBPACK_IMPORTED_MODULE_3__.AstText(child) : child;\n    super.insertAt(token, i);\n    if (token.type === \"root\") {\n      token.type = \"plain\";\n    }\n    return token;\n  }\n  /**\n   * 规范化页面标题\n   * @browser\n   * @param title 标题（含或不含命名空间前缀）\n   * @param defaultNs 命名空间\n   * @param halfParsed 仅供内部使用\n   * @param decode 是否需要解码\n   * @param selfLink 是否允许selfLink\n   */\n  normalizeTitle(title, defaultNs = 0, halfParsed = false, decode = false, selfLink = false) {\n    return _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].normalizeTitle(title, defaultNs, __privateGet(this, _include), __privateGet(this, _config), halfParsed, decode, selfLink);\n  }\n};\n_stage = new WeakMap();\n_config = new WeakMap();\n_accum = new WeakMap();\n_include = new WeakMap();\n_build = new WeakSet();\nbuild_fn = function() {\n  var _a;\n  __privateSet(this, _stage, MAX_STAGE);\n  const { length, firstChild } = this, str = String(firstChild);\n  if (length === 1 && firstChild.type === \"text\" && str.includes(\"\\0\")) {\n    this.replaceChildren(...this.buildFromStr(str));\n    this.normalize();\n    if (this.type === \"root\") {\n      for (const token of __privateGet(this, _accum)) {\n        __privateMethod(_a = token, _build, build_fn).call(_a);\n      }\n    }\n  }\n};\n_parseCommentAndExt = new WeakSet();\nparseCommentAndExt_fn = function(includeOnly) {\n  const { parseCommentAndExt } = __webpack_require__(/*! ../parser/commentAndExt */ \"./parser/commentAndExt.ts\");\n  this.setText(parseCommentAndExt(String(this), __privateGet(this, _config), __privateGet(this, _accum), includeOnly));\n};\n_parseBraces = new WeakSet();\nparseBraces_fn = function() {\n  const { parseBraces } = __webpack_require__(/*! ../parser/braces */ \"./parser/braces.ts\");\n  const str = this.type === \"root\" ? String(this.firstChild) : `\\0${String(this.firstChild)}`, parsed = parseBraces(str, __privateGet(this, _config), __privateGet(this, _accum));\n  this.setText(this.type === \"root\" ? parsed : parsed.slice(1));\n};\n_parseHtml = new WeakSet();\nparseHtml_fn = function() {\n  var _a;\n  if ((_a = __privateGet(this, _config).excludes) == null ? void 0 : _a.includes(\"html\")) {\n    return;\n  }\n  const { parseHtml } = __webpack_require__(/*! ../parser/html */ \"./parser/html.ts\");\n  this.setText(parseHtml(String(this), __privateGet(this, _config), __privateGet(this, _accum)));\n};\n_parseTable = new WeakSet();\nparseTable_fn = function() {\n  var _a;\n  if ((_a = __privateGet(this, _config).excludes) == null ? void 0 : _a.includes(\"table\")) {\n    return;\n  }\n  const { parseTable } = __webpack_require__(/*! ../parser/table */ \"./parser/table.ts\");\n  this.setText(parseTable(this, __privateGet(this, _config), __privateGet(this, _accum)));\n};\n_parseHrAndDoubleUnderscore = new WeakSet();\nparseHrAndDoubleUnderscore_fn = function() {\n  var _a;\n  if ((_a = __privateGet(this, _config).excludes) == null ? void 0 : _a.includes(\"hr\")) {\n    return;\n  }\n  const { parseHrAndDoubleUnderscore } = __webpack_require__(/*! ../parser/hrAndDoubleUnderscore */ \"./parser/hrAndDoubleUnderscore.ts\");\n  this.setText(parseHrAndDoubleUnderscore(this, __privateGet(this, _config), __privateGet(this, _accum)));\n};\n_parseLinks = new WeakSet();\nparseLinks_fn = function() {\n  const { parseLinks } = __webpack_require__(/*! ../parser/links */ \"./parser/links.ts\");\n  this.setText(parseLinks(String(this), __privateGet(this, _config), __privateGet(this, _accum)));\n};\n_parseQuotes = new WeakSet();\nparseQuotes_fn = function() {\n  var _a;\n  if ((_a = __privateGet(this, _config).excludes) == null ? void 0 : _a.includes(\"quote\")) {\n    return;\n  }\n  const { parseQuotes } = __webpack_require__(/*! ../parser/quotes */ \"./parser/quotes.ts\");\n  const lines = String(this).split(\"\\n\");\n  for (let i = 0; i < lines.length; i++) {\n    lines[i] = parseQuotes(lines[i], __privateGet(this, _config), __privateGet(this, _accum));\n  }\n  this.setText(lines.join(\"\\n\"));\n};\n_parseExternalLinks = new WeakSet();\nparseExternalLinks_fn = function() {\n  var _a;\n  if ((_a = __privateGet(this, _config).excludes) == null ? void 0 : _a.includes(\"extLink\")) {\n    return;\n  }\n  const { parseExternalLinks } = __webpack_require__(/*! ../parser/externalLinks */ \"./parser/externalLinks.ts\");\n  this.setText(parseExternalLinks(String(this), __privateGet(this, _config), __privateGet(this, _accum)));\n};\n_parseMagicLinks = new WeakSet();\nparseMagicLinks_fn = function() {\n  var _a;\n  if ((_a = __privateGet(this, _config).excludes) == null ? void 0 : _a.includes(\"magicLink\")) {\n    return;\n  }\n  const { parseMagicLinks } = __webpack_require__(/*! ../parser/magicLinks */ \"./parser/magicLinks.ts\");\n  this.setText(parseMagicLinks(String(this), __privateGet(this, _config), __privateGet(this, _accum)));\n};\n_parseList = new WeakSet();\nparseList_fn = function() {\n  var _a;\n  if ((_a = __privateGet(this, _config).excludes) == null ? void 0 : _a.includes(\"list\")) {\n    return;\n  }\n  const { parseList } = __webpack_require__(/*! ../parser/list */ \"./parser/list.ts\");\n  const lines = String(this).split(\"\\n\");\n  let i = this.type === \"root\" || this.type === \"ext-inner\" && this.name === \"poem\" ? 0 : 1;\n  for (; i < lines.length; i++) {\n    lines[i] = parseList(lines[i], __privateGet(this, _config), __privateGet(this, _accum));\n  }\n  this.setText(lines.join(\"\\n\"));\n};\n_parseConverter = new WeakSet();\nparseConverter_fn = function() {\n  if (__privateGet(this, _config).variants.length > 0) {\n    const { parseConverter } = __webpack_require__(/*! ../parser/converter */ \"./parser/converter.ts\");\n    this.setText(parseConverter(String(this), __privateGet(this, _config), __privateGet(this, _accum)));\n  }\n};\nlet Token = _Token;\n\n\n//# sourceURL=webpack://wikiparser-node/./src/index.ts?");

/***/ }),

/***/ "./src/link/base.ts":
/*!**************************!*\
  !*** ./src/link/base.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LinkBaseToken: () => (/* binding */ LinkBaseToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../atom */ \"./src/atom.ts\");\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _bracket, _delimiter, _fragment, _encoded;\n\n\n\n\nclass LinkBaseToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /**\n   * @browser\n   * @param link 链接标题\n   * @param linkText 链接显示文字\n   * @param delimiter `|`\n   */\n  constructor(link, linkText, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = [], delimiter = \"|\") {\n    super(void 0, config, accum, {});\n    __privateAdd(this, _bracket, true);\n    __privateAdd(this, _delimiter, void 0);\n    __privateAdd(this, _fragment, void 0);\n    __privateAdd(this, _encoded, false);\n    this.insertAt(new _atom__WEBPACK_IMPORTED_MODULE_3__.AtomToken(link, \"link-target\", config, accum, {}));\n    if (linkText !== void 0) {\n      const inner = new _index__WEBPACK_IMPORTED_MODULE_2__.Token(linkText, config, accum, {});\n      inner.type = \"link-text\";\n      this.insertAt(inner.setAttribute(\"stage\", _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].MAX_STAGE - 1));\n    }\n    __privateSet(this, _delimiter, delimiter);\n  }\n  /** @private */\n  afterBuild() {\n    const titleObj = this.normalizeTitle(this.firstChild.text(), 0, false, true, true);\n    __privateSet(this, _fragment, titleObj.fragment);\n    __privateSet(this, _encoded, titleObj.encoded);\n    if (__privateGet(this, _delimiter).includes(\"\\0\")) {\n      __privateSet(this, _delimiter, this.buildFromStr(__privateGet(this, _delimiter), \"string\"));\n    }\n  }\n  /** @private */\n  setAttribute(key, value) {\n    if (key === \"bracket\") {\n      __privateSet(this, _bracket, Boolean(value));\n      return this;\n    }\n    return super.setAttribute(key, value);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    const str = super.toString(omit, __privateGet(this, _delimiter));\n    return __privateGet(this, _bracket) ? `[[${str}]]` : str;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const str = super.text(\"|\");\n    return __privateGet(this, _bracket) ? `[[${str}]]` : str;\n  }\n  /** @private */\n  getPadding() {\n    return 2;\n  }\n  /** @private */\n  getGaps(i) {\n    if (i >= this.length - 1) {\n      return 0;\n    }\n    return i === 0 ? __privateGet(this, _delimiter).length : 1;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    var _a;\n    const errors = super.lint(start), { childNodes: [target, linkText], type: linkType } = this;\n    let rect;\n    if (linkType === \"link\" && target.childNodes.some(({ type }) => type === \"template\")) {\n      rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(target, rect, \"template in an internal link target\", \"warning\"));\n    }\n    if (__privateGet(this, _encoded)) {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(target, rect, \"unnecessary URL encoding in an internal link\"));\n    }\n    if (linkType === \"link\" && ((_a = linkText == null ? void 0 : linkText.childNodes) == null ? void 0 : _a.some(\n      (child) => child.type === \"text\" && child.data.includes(\"|\")\n    ))) {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(linkText, rect, 'additional \"|\" in the link text', \"warning\"));\n    } else if (linkType !== \"link\" && __privateGet(this, _fragment) !== void 0) {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(target, rect, \"useless fragment\"));\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print(__privateGet(this, _bracket) ? { pre: \"[[\", post: \"]]\", sep: __privateGet(this, _delimiter) } : { sep: __privateGet(this, _delimiter) });\n  }\n}\n_bracket = new WeakMap();\n_delimiter = new WeakMap();\n_fragment = new WeakMap();\n_encoded = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/link/base.ts?");

/***/ }),

/***/ "./src/link/category.ts":
/*!******************************!*\
  !*** ./src/link/category.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CategoryToken: () => (/* binding */ CategoryToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./src/link/index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\nclass CategoryToken extends _index__WEBPACK_IMPORTED_MODULE_0__.LinkToken {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"category\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/link/category.ts?");

/***/ }),

/***/ "./src/link/file.ts":
/*!**************************!*\
  !*** ./src/link/file.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FileToken: () => (/* binding */ FileToken)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/string */ \"./util/string.ts\");\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base */ \"./src/link/base.ts\");\n/* harmony import */ var _imageParameter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../imageParameter */ \"./src/imageParameter.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _getTypedArgs, getTypedArgs_fn;\n\n\n\n\n\nconst frame = /* @__PURE__ */ new Set([\"manualthumb\", \"frameless\", \"framed\", \"thumbnail\"]), horizAlign = /* @__PURE__ */ new Set([\"left\", \"right\", \"center\", \"none\"]), vertAlign = /* @__PURE__ */ new Set([\"baseline\", \"sub\", \"super\", \"top\", \"text-top\", \"middle\", \"bottom\", \"text-bottom\"]);\nconst explode = (start, end, separator, str) => {\n  if (str === void 0) {\n    return [];\n  }\n  const regex = new RegExp(`${[start, end, separator].map(_util_string__WEBPACK_IMPORTED_MODULE_0__.escapeRegExp).join(\"|\")}`, \"gu\"), exploded = [];\n  let mt = regex.exec(str), depth = 0, lastIndex = 0;\n  while (mt) {\n    const { 0: match, index } = mt;\n    if (match !== separator) {\n      depth += match === start ? 1 : -1;\n    } else if (depth === 0) {\n      exploded.push(str.slice(lastIndex, index));\n      ({ lastIndex } = regex);\n    }\n    mt = regex.exec(str);\n  }\n  exploded.push(str.slice(lastIndex));\n  return exploded;\n};\nclass FileToken extends _base__WEBPACK_IMPORTED_MODULE_3__.LinkBaseToken {\n  /**\n   * @browser\n   * @param link 文件名\n   * @param text 图片参数\n   * @param delimiter `|`\n   */\n  constructor(link, text, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = [], delimiter = \"|\") {\n    super(link, void 0, config, accum, delimiter);\n    /**\n     * 获取特定类型的图片属性参数节点\n     * @browser\n     * @param keys 接受的参数名\n     * @param type 类型名\n     */\n    // eslint-disable-next-line no-unused-vars, @typescript-eslint/no-unused-vars\n    __privateAdd(this, _getTypedArgs);\n    /** @browser */\n    __publicField(this, \"type\", \"file\");\n    this.append(...explode(\"-{\", \"}-\", \"|\", text).map((part) => new _imageParameter__WEBPACK_IMPORTED_MODULE_4__.ImageParameterToken(part, config, accum)));\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), args = this.getAllArgs().filter(({ childNodes }) => {\n      const visibleNodes = childNodes.filter((node) => node.text().trim());\n      return visibleNodes.length !== 1 || visibleNodes[0].type !== \"arg\";\n    }), keys = [...new Set(args.map(({ name }) => name))].filter((key) => key !== \"invalid\"), frameKeys = keys.filter((key) => frame.has(key)), horizAlignKeys = keys.filter((key) => horizAlign.has(key)), vertAlignKeys = keys.filter((key) => vertAlign.has(key));\n    if (args.length === keys.length && frameKeys.length < 2 && horizAlignKeys.length < 2 && vertAlignKeys.length < 2) {\n      return errors;\n    }\n    const rect = { start, ...this.getRootNode().posFromIndex(start) };\n    const generate = (msg, p1) => (arg) => (0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForChild)(arg, rect, _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].msg(`${msg} image $1 parameter`, p1));\n    for (const key of keys) {\n      let relevantArgs = args.filter(({ name }) => name === key);\n      if (key === \"caption\") {\n        relevantArgs = [...relevantArgs.slice(0, -1).filter((arg) => arg.text()), ...relevantArgs.slice(-1)];\n      }\n      if (relevantArgs.length > 1) {\n        errors.push(...relevantArgs.map(generate(\"duplicated\", key)));\n      }\n    }\n    if (frameKeys.length > 1) {\n      errors.push(...args.filter(({ name }) => frame.has(name)).map(generate(\"conflicting\", \"frame\")));\n    }\n    if (horizAlignKeys.length > 1) {\n      errors.push(\n        ...args.filter(({ name }) => horizAlign.has(name)).map(generate(\"conflicting\", \"horizontal-alignment\"))\n      );\n    }\n    if (vertAlignKeys.length > 1) {\n      errors.push(\n        ...args.filter(({ name }) => vertAlign.has(name)).map(generate(\"conflicting\", \"vertical-alignment\"))\n      );\n    }\n    return errors;\n  }\n  /**\n   * 获取所有图片参数节点\n   * @browser\n   */\n  getAllArgs() {\n    return this.childNodes.slice(1);\n  }\n  /**\n   * 获取指定图片参数\n   * @browser\n   * @param key 参数名\n   */\n  getArgs(key) {\n    return this.getAllArgs().filter(({ name }) => key === name);\n  }\n  /**\n   * 获取图片框架属性参数节点\n   * @browser\n   */\n  getFrameArgs() {\n    return __privateMethod(this, _getTypedArgs, getTypedArgs_fn).call(this, frame, \"\\u6846\\u67B6\");\n  }\n  /**\n   * 获取图片水平对齐参数节点\n   * @browser\n   */\n  getHorizAlignArgs() {\n    return __privateMethod(this, _getTypedArgs, getTypedArgs_fn).call(this, horizAlign, \"\\u6C34\\u5E73\\u5BF9\\u9F50\");\n  }\n  /**\n   * 获取图片垂直对齐参数节点\n   * @browser\n   */\n  getVertAlignArgs() {\n    return __privateMethod(this, _getTypedArgs, getTypedArgs_fn).call(this, vertAlign, \"\\u5782\\u76F4\\u5BF9\\u9F50\");\n  }\n}\n_getTypedArgs = new WeakSet();\ngetTypedArgs_fn = function(keys, type) {\n  const args = this.getAllArgs().filter(({ name }) => keys.has(name));\n  return args;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./src/link/file.ts?");

/***/ }),

/***/ "./src/link/galleryImage.ts":
/*!**********************************!*\
  !*** ./src/link/galleryImage.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GalleryImageToken: () => (/* binding */ GalleryImageToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n/* harmony import */ var _file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./file */ \"./src/link/file.ts\");\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _invalid;\n\n\n\n\nclass GalleryImageToken extends _file__WEBPACK_IMPORTED_MODULE_3__.FileToken {\n  /**\n   * @browser\n   * @param type 图片类型\n   * @param link 图片文件名\n   * @param text 图片参数\n   */\n  constructor(type, link, text, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    let token;\n    if (text !== void 0) {\n      token = new _index__WEBPACK_IMPORTED_MODULE_2__.Token(text, config, accum);\n      token.type = \"plain\";\n      for (let n = 1; n < _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].MAX_STAGE; n++) {\n        token.parseOnce();\n      }\n      accum.splice(accum.indexOf(token), 1);\n    }\n    super(link, token == null ? void 0 : token.toString(), config, accum);\n    /** @browser */\n    __privateAdd(this, _invalid, false);\n    this.setAttribute(\"bracket\", false).type = `${type}-image`;\n  }\n  /** @private */\n  afterBuild() {\n    const initImagemap = this.type === \"imagemap-image\", titleObj = this.normalizeTitle(String(this.firstChild), initImagemap ? 0 : 6, true, !initImagemap);\n    __privateSet(this, _invalid, titleObj.ns !== 6);\n  }\n  /** @private */\n  getPadding() {\n    return 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start);\n    if (__privateGet(this, _invalid)) {\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"invalid gallery image\"));\n    }\n    return errors;\n  }\n}\n_invalid = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/link/galleryImage.ts?");

/***/ }),

/***/ "./src/link/index.ts":
/*!***************************!*\
  !*** ./src/link/index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LinkToken: () => (/* binding */ LinkToken)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./src/link/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\nclass LinkToken extends _base__WEBPACK_IMPORTED_MODULE_0__.LinkBaseToken {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"link\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/link/index.ts?");

/***/ }),

/***/ "./src/magicLink.ts":
/*!**************************!*\
  !*** ./src/magicLink.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MagicLinkToken: () => (/* binding */ MagicLinkToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\n\n\n\nclass MagicLinkToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /**\n   * @browser\n   * @param url 网址\n   * @param doubleSlash 是否接受\"//\"作为协议\n   */\n  constructor(url, doubleSlash = false, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    super(url, config, accum, {});\n    this.type = doubleSlash ? \"ext-link-url\" : \"free-ext-link\";\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), source = `[\\uFF0C\\uFF1B\\u3002\\uFF1A\\uFF01\\uFF1F\\uFF08\\uFF09]+${this.type === \"ext-link-url\" ? \"|\\\\|+\" : \"\"}`, regex = new RegExp(source, \"u\"), regexGlobal = new RegExp(source, \"gu\");\n    let rect;\n    for (const child of this.childNodes) {\n      if (child.type !== \"text\" || !regex.test(child.data)) {\n        continue;\n      }\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      const { data } = child, refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(child, rect, \"\", \"warning\");\n      regexGlobal.lastIndex = 0;\n      for (let mt = regexGlobal.exec(data); mt; mt = regexGlobal.exec(data)) {\n        const { index, 0: s } = mt, lines = data.slice(0, index).split(\"\\n\"), { length: top } = lines, { length: left } = lines[lines.length - 1], startIndex = start + index, startLine = refError.startLine + top - 1, startCol = top === 1 ? refError.startCol + left : left;\n        errors.push({\n          ...refError,\n          message: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg(\"$1 in URL\", s.startsWith(\"|\") ? '\"|\"' : _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg(\"full-width punctuation\")),\n          startIndex,\n          endIndex: startIndex + s.length,\n          startLine,\n          endLine: startLine,\n          startCol,\n          endCol: startCol + s.length\n        });\n      }\n    }\n    return errors;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/magicLink.ts?");

/***/ }),

/***/ "./src/nested.ts":
/*!***********************!*\
  !*** ./src/nested.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NestedToken: () => (/* binding */ NestedToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _tagPair_ext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tagPair/ext */ \"./src/tagPair/ext.ts\");\n/* harmony import */ var _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./nowiki/noinclude */ \"./src/nowiki/noinclude.ts\");\n/* harmony import */ var _nowiki_comment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./nowiki/comment */ \"./src/nowiki/comment.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\n\n\nclass NestedToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /**\n   * @browser\n   * @param regex 内层正则\n   * @param tags 内层标签名\n   */\n  constructor(wikitext, regex, tags, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    var _a;\n    const text = (_a = wikitext == null ? void 0 : wikitext.replace(\n      regex,\n      (comment, name, attr, inner, closing) => {\n        const str = `\\0${accum.length + 1}${name ? \"e\" : \"c\"}\\x7F`;\n        if (name) {\n          new _tagPair_ext__WEBPACK_IMPORTED_MODULE_3__.ExtToken(name, attr, inner, closing, config, accum);\n        } else {\n          const closed = comment.endsWith(\"-->\");\n          new _nowiki_comment__WEBPACK_IMPORTED_MODULE_5__.CommentToken(comment.slice(4, closed ? -3 : void 0), closed, config, accum);\n        }\n        return str;\n      }\n    )) == null ? void 0 : _a.replace(\n      /(^|\\0\\d+[ce]\\x7F)([^\\0]+)(?=$|\\0\\d+[ce]\\x7F)/gu,\n      (_, lead, substr) => {\n        new _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_4__.NoincludeToken(substr, config, accum);\n        return `${lead}\\0${accum.length}c\\x7F`;\n      }\n    );\n    super(text, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"ext-inner\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    let rect;\n    return [\n      ...super.lint(start),\n      ...this.childNodes.filter((child) => {\n        if (child.type === \"ext\" || child.type === \"comment\") {\n          return false;\n        }\n        const str = String(child).trim();\n        return str && !/^<!--.*-->$/su.test(str);\n      }).map((child) => {\n        rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n        return (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(child, rect, _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg(\"invalid content in <$1>\", this.name));\n      })\n    ];\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nested.ts?");

/***/ }),

/***/ "./src/nowiki/base.ts":
/*!****************************!*\
  !*** ./src/nowiki/base.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NowikiBaseToken: () => (/* binding */ NowikiBaseToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n\n\nclass NowikiBaseToken extends _index__WEBPACK_IMPORTED_MODULE_0__.Token {\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/base.ts?");

/***/ }),

/***/ "./src/nowiki/comment.ts":
/*!*******************************!*\
  !*** ./src/nowiki/comment.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommentToken: () => (/* binding */ CommentToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _mixin_hidden__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../mixin/hidden */ \"./mixin/hidden.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base */ \"./src/nowiki/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\nclass CommentToken extends (0,_mixin_hidden__WEBPACK_IMPORTED_MODULE_1__.hidden)(_base__WEBPACK_IMPORTED_MODULE_3__.NowikiBaseToken) {\n  /**\n   * @browser\n   * @param closed 是否闭合\n   */\n  constructor(wikitext, closed = true, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    super(wikitext, config, accum);\n    /** @browser */\n    __publicField(this, \"type\", \"comment\");\n    __publicField(this, \"closed\");\n    this.closed = closed;\n  }\n  /** @private */\n  getPadding() {\n    return 4;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ pre: \"&lt;!--\", post: this.closed ? \"--&gt;\" : \"\" });\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    return this.closed ? [] : [(0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, \"unclosed HTML comment\")];\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return `<!--${this.firstChild.data}${this.closed ? \"-->\" : \"\"}`;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/comment.ts?");

/***/ }),

/***/ "./src/nowiki/dd.ts":
/*!**************************!*\
  !*** ./src/nowiki/dd.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DdToken: () => (/* binding */ DdToken)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./src/nowiki/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\nclass DdToken extends _base__WEBPACK_IMPORTED_MODULE_0__.NowikiBaseToken {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"dd\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/dd.ts?");

/***/ }),

/***/ "./src/nowiki/doubleUnderscore.ts":
/*!****************************************!*\
  !*** ./src/nowiki/doubleUnderscore.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DoubleUnderscoreToken: () => (/* binding */ DoubleUnderscoreToken)\n/* harmony export */ });\n/* harmony import */ var _mixin_hidden__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../mixin/hidden */ \"./mixin/hidden.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base */ \"./src/nowiki/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\nclass DoubleUnderscoreToken extends (0,_mixin_hidden__WEBPACK_IMPORTED_MODULE_0__.hidden)(_base__WEBPACK_IMPORTED_MODULE_1__.NowikiBaseToken) {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"double-underscore\");\n  }\n  /** @private */\n  getPadding() {\n    return 2;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return `__${this.firstChild.data}__`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ pre: \"__\", post: \"__\" });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/doubleUnderscore.ts?");

/***/ }),

/***/ "./src/nowiki/hr.ts":
/*!**************************!*\
  !*** ./src/nowiki/hr.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HrToken: () => (/* binding */ HrToken)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./src/nowiki/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\nclass HrToken extends _base__WEBPACK_IMPORTED_MODULE_0__.NowikiBaseToken {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"hr\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/hr.ts?");

/***/ }),

/***/ "./src/nowiki/index.ts":
/*!*****************************!*\
  !*** ./src/nowiki/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NowikiToken: () => (/* binding */ NowikiToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base */ \"./src/nowiki/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\nclass NowikiToken extends _base__WEBPACK_IMPORTED_MODULE_2__.NowikiBaseToken {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"ext-inner\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const { name, firstChild } = this;\n    return (name === \"templatestyles\" || name === \"section\") && firstChild.data ? [(0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg(\"nothing should be in <$1>\", name))] : super.lint(start);\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/index.ts?");

/***/ }),

/***/ "./src/nowiki/list.ts":
/*!****************************!*\
  !*** ./src/nowiki/list.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ListToken: () => (/* binding */ ListToken)\n/* harmony export */ });\n/* harmony import */ var _dd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dd */ \"./src/nowiki/dd.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\nclass ListToken extends _dd__WEBPACK_IMPORTED_MODULE_0__.DdToken {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"list\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/list.ts?");

/***/ }),

/***/ "./src/nowiki/noinclude.ts":
/*!*********************************!*\
  !*** ./src/nowiki/noinclude.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoincludeToken: () => (/* binding */ NoincludeToken)\n/* harmony export */ });\n/* harmony import */ var _mixin_hidden__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../mixin/hidden */ \"./mixin/hidden.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base */ \"./src/nowiki/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\nclass NoincludeToken extends (0,_mixin_hidden__WEBPACK_IMPORTED_MODULE_0__.hidden)(_base__WEBPACK_IMPORTED_MODULE_1__.NowikiBaseToken) {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"noinclude\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/noinclude.ts?");

/***/ }),

/***/ "./src/nowiki/quote.ts":
/*!*****************************!*\
  !*** ./src/nowiki/quote.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuoteToken: () => (/* binding */ QuoteToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base */ \"./src/nowiki/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\nclass QuoteToken extends _base__WEBPACK_IMPORTED_MODULE_2__.NowikiBaseToken {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"quote\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const { previousSibling, nextSibling } = this, message = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg('lonely \"$1\"', `'`), errors = [];\n    let refError;\n    if ((previousSibling == null ? void 0 : previousSibling.type) === \"text\" && previousSibling.data.endsWith(`'`)) {\n      refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, message);\n      const { startIndex: endIndex, startLine: endLine, startCol: endCol } = refError, [, { length }] = previousSibling.data.match(/(?:^|[^'])('+)$/u), startIndex = start - length;\n      errors.push({\n        ...refError,\n        startIndex,\n        endIndex,\n        startCol: endCol - length,\n        endLine,\n        endCol\n      });\n    }\n    if ((nextSibling == null ? void 0 : nextSibling.type) === \"text\" && nextSibling.data.startsWith(`'`)) {\n      refError != null ? refError : refError = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, { start }, message);\n      const { endIndex: startIndex, endLine: startLine, endCol: startCol } = refError, [{ length }] = nextSibling.data.match(/^'+/u), endIndex = startIndex + length;\n      errors.push({\n        ...refError,\n        startIndex,\n        endIndex,\n        startLine,\n        startCol,\n        endCol: startCol + length\n      });\n    }\n    return errors;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/nowiki/quote.ts?");

/***/ }),

/***/ "./src/onlyinclude.ts":
/*!****************************!*\
  !*** ./src/onlyinclude.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OnlyincludeToken: () => (/* binding */ OnlyincludeToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\nclass OnlyincludeToken extends _index__WEBPACK_IMPORTED_MODULE_0__.Token {\n  constructor() {\n    super(...arguments);\n    /** @browser */\n    __publicField(this, \"type\", \"onlyinclude\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return `<onlyinclude>${super.toString()}</onlyinclude>`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  getPadding() {\n    return 13;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  isPlain() {\n    return true;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({\n      pre: '<span class=\"wpb-ext\">&lt;onlyinclude&gt;</span>',\n      post: '<span class=\"wpb-ext\">&lt;/onlyinclude&gt;</span>'\n    });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/onlyinclude.ts?");

/***/ }),

/***/ "./src/paramTag/index.ts":
/*!*******************************!*\
  !*** ./src/paramTag/index.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ParamTagToken: () => (/* binding */ ParamTagToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../atom */ \"./src/atom.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\nclass ParamTagToken extends _index__WEBPACK_IMPORTED_MODULE_2__.Token {\n  /** @browser */\n  constructor(wikitext, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = [], acceptable = {}) {\n    super(void 0, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"ext-inner\");\n    if (wikitext) {\n      const SingleLineAtomToken = _atom__WEBPACK_IMPORTED_MODULE_3__.AtomToken;\n      this.append(\n        ...wikitext.split(\"\\n\").map((line) => new SingleLineAtomToken(line, \"param-line\", config, accum, {}))\n      );\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return super.toString(omit, \"\\n\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return super.text(\"\\n\");\n  }\n  /** @private */\n  getGaps(i) {\n    return i < this.length - 1 ? 1 : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ sep: \"\\n\" });\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    let rect;\n    return this.childNodes.filter((child) => {\n      const { childNodes } = child, i = childNodes.findIndex(({ type }) => type !== \"text\"), str = (i >= 0 ? childNodes.slice(0, i).map(String).join(\"\") : String(child)).trim();\n      return str && !(i >= 0 ? /^[a-z]+(?:\\[\\])?\\s*(?:=|$)/iu : /^[a-z]+(?:\\[\\])?\\s*=/iu).test(str);\n    }).map((child) => {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      return (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(child, rect, _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].msg(\"invalid parameter of $1\", this.name));\n    });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/paramTag/index.ts?");

/***/ }),

/***/ "./src/paramTag/inputbox.ts":
/*!**********************************!*\
  !*** ./src/paramTag/inputbox.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InputboxToken: () => (/* binding */ InputboxToken)\n/* harmony export */ });\n/* harmony import */ var _parser_braces__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../parser/braces */ \"./parser/braces.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/paramTag/index.ts\");\n\n\n\n\nclass InputboxToken extends _index__WEBPACK_IMPORTED_MODULE_2__.ParamTagToken {\n  /** @browser */\n  constructor(wikitext, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    const placeholder = Symbol(\"InputboxToken\");\n    accum.push(placeholder);\n    wikitext && (wikitext = (0,_parser_braces__WEBPACK_IMPORTED_MODULE_0__.parseBraces)(wikitext, config, accum));\n    accum.splice(accum.indexOf(placeholder), 1);\n    super(wikitext, config, accum, {});\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/paramTag/inputbox.ts?");

/***/ }),

/***/ "./src/parameter.ts":
/*!**************************!*\
  !*** ./src/parameter.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ParameterToken: () => (/* binding */ ParameterToken)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\nclass ParameterToken extends _index__WEBPACK_IMPORTED_MODULE_3__.Token {\n  /**\n   * @browser\n   * @param key 参数名\n   * @param value 参数值\n   */\n  constructor(key, value, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config, accum);\n    /** @browser */\n    __publicField(this, \"type\", \"parameter\");\n    const keyToken = new _index__WEBPACK_IMPORTED_MODULE_3__.Token(typeof key === \"number\" ? void 0 : key, config, accum, {}), token = new _index__WEBPACK_IMPORTED_MODULE_3__.Token(value, config, accum);\n    keyToken.type = \"parameter-key\";\n    token.type = \"parameter-value\";\n    this.append(keyToken, token.setAttribute(\"stage\", 2));\n  }\n  /**\n   * 是否是匿名参数\n   * @browser\n   */\n  get anon() {\n    return this.firstChild.length === 0;\n  }\n  /** @private */\n  afterBuild() {\n    const omit = /* @__PURE__ */ new Set([\"comment\", \"noinclude\", \"include\"]);\n    if (!this.anon) {\n      const name = this.firstChild.toString(omit).replace(/^[ \\t\\n\\0\\v]+|([^ \\t\\n\\0\\v])[ \\t\\n\\0\\v]+$/gu, \"$1\"), { parentNode } = this;\n      this.setAttribute(\"name\", name);\n      if (parentNode) {\n        parentNode.getArgs(name, false, false).add(this);\n      }\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return this.anon ? this.lastChild.toString(omit) : super.toString(omit, \"=\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    return this.anon ? this.lastChild.text() : super.text(\"=\");\n  }\n  /** @private */\n  getGaps(i) {\n    return this.anon || i === 1 ? 0 : 1;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    var _a;\n    const errors = super.lint(start), { firstChild } = this, link = (_a = new RegExp(`https?://${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlCharFirst}${_util_string__WEBPACK_IMPORTED_MODULE_0__.extUrlChar}$`, \"iu\").exec(firstChild.toString(/* @__PURE__ */ new Set([\"comment\", \"noinclude\", \"include\"])))) == null ? void 0 : _a[0];\n    if (link && new URL(link).search) {\n      const e = (0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForChild)(firstChild, { start }, \"unescaped query string in an anonymous parameter\");\n      errors.push({\n        ...e,\n        startIndex: e.endIndex,\n        endIndex: e.endIndex + 1,\n        startLine: e.endLine,\n        startCol: e.endCol,\n        endCol: e.endCol + 1\n      });\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    return super.print({ sep: this.anon ? \"\" : \"=\" });\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/parameter.ts?");

/***/ }),

/***/ "./src/pre.ts":
/*!********************!*\
  !*** ./src/pre.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreToken: () => (/* binding */ PreToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nowiki/noinclude */ \"./src/nowiki/noinclude.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\nclass PreToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /** @browser */\n  constructor(wikitext, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) {\n    if (wikitext) {\n      const opening = \"<nowiki>\", closing = \"</nowiki>\", { length } = opening;\n      let i = wikitext.indexOf(opening), j = wikitext.indexOf(closing, i + length), str = \"\";\n      while (i !== -1 && j !== -1) {\n        new _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__.NoincludeToken(opening, config, accum);\n        new _nowiki_noinclude__WEBPACK_IMPORTED_MODULE_2__.NoincludeToken(closing, config, accum);\n        str += `${wikitext.slice(0, i)}\\0${accum.length - 1}c\\x7F${wikitext.slice(i + length, j)}\\0${accum.length}c\\x7F`;\n        wikitext = wikitext.slice(j + length + 1);\n        i = wikitext.indexOf(opening);\n        j = wikitext.indexOf(closing, i + length);\n      }\n      wikitext = `${str}${wikitext}`;\n    }\n    super(wikitext, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"ext-inner\");\n    this.setAttribute(\"stage\", _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MAX_STAGE - 1);\n  }\n  /** @private */\n  isPlain() {\n    return true;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/pre.ts?");

/***/ }),

/***/ "./src/syntax.ts":
/*!***********************!*\
  !*** ./src/syntax.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SyntaxToken: () => (/* binding */ SyntaxToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n\n\n\nclass SyntaxToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /**\n   * @browser\n   * @param pattern 语法正则\n   * @throws `RangeError` 含有g修饰符的语法正则\n   */\n  constructor(wikitext, pattern, type = \"plain\", config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = [], acceptable) {\n    super(wikitext, config, accum, acceptable);\n    this.type = type;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/syntax.ts?");

/***/ }),

/***/ "./src/table/base.ts":
/*!***************************!*\
  !*** ./src/table/base.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TableBaseToken: () => (/* binding */ TableBaseToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../syntax */ \"./src/syntax.ts\");\n/* harmony import */ var _attributes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../attributes */ \"./src/attributes.ts\");\n\n\n\n\n\nclass TableBaseToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /**\n   * @browser\n   * @param pattern 表格语法正则\n   * @param syntax 表格语法\n   * @param attr 表格属性\n   */\n  constructor(pattern, syntax, attr, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = [], acceptable = {}) {\n    super(void 0, config, accum, acceptable);\n    this.append(\n      new _syntax__WEBPACK_IMPORTED_MODULE_2__.SyntaxToken(syntax, pattern, \"table-syntax\", config, accum, {}),\n      new _attributes__WEBPACK_IMPORTED_MODULE_3__.AttributesToken(attr, \"table-attrs\", this.type, config, accum)\n    );\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/table/base.ts?");

/***/ }),

/***/ "./src/table/index.ts":
/*!****************************!*\
  !*** ./src/table/index.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TableToken: () => (/* binding */ TableToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _trBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./trBase */ \"./src/table/trBase.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../syntax */ \"./src/syntax.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\nconst closingPattern = /^\\n[^\\S\\n]*(?:\\|\\}|\\{\\{\\s*!\\s*\\}\\}\\}|\\{\\{\\s*!\\)\\s*\\}\\})$/u;\nclass TableToken extends _trBase__WEBPACK_IMPORTED_MODULE_2__.TrBaseToken {\n  /**\n   * @browser\n   * @param syntax 表格语法\n   * @param attr 表格属性\n   */\n  constructor(syntax, attr, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    super(/^(?:\\{\\||\\{\\{\\{\\s*!\\s*\\}\\}|\\{\\{\\s*\\(!\\s*\\}\\})$/u, syntax, attr, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"table\");\n  }\n  /**\n   * 表格是否闭合\n   * @browser\n   */\n  get closed() {\n    return this.lastChild.type === \"table-syntax\";\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start);\n    if (!this.closed) {\n      const { firstChild } = this, error = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(firstChild, { start }, \"unclosed table\");\n      errors.push(error);\n    }\n    return errors;\n  }\n  /**\n   * 闭合表格语法\n   * @browser\n   * @param syntax 表格结尾语法\n   * @param halfParsed\n   * @throws `SyntaxError` 表格的闭合部分不符合语法\n   */\n  close(syntax = \"\\n|}\", halfParsed = false) {\n    const config = this.getAttribute(\"config\"), accum = this.getAttribute(\"accum\");\n    super.insertAt(_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].run(() => {\n      const token = new _syntax__WEBPACK_IMPORTED_MODULE_3__.SyntaxToken(syntax, closingPattern, \"table-syntax\", config, accum, {});\n      return token;\n    }));\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/table/index.ts?");

/***/ }),

/***/ "./src/table/td.ts":
/*!*************************!*\
  !*** ./src/table/td.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TdToken: () => (/* binding */ TdToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base */ \"./src/table/base.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateWrapper = (obj, member, setter, getter) => ({\n  set _(value) {\n    __privateSet(obj, member, value, setter);\n  },\n  get _() {\n    return __privateGet(obj, member, getter);\n  }\n});\nvar _innerSyntax;\n\n\n\n\nclass TdToken extends _base__WEBPACK_IMPORTED_MODULE_3__.TableBaseToken {\n  /**\n   * @browser\n   * @param syntax 单元格语法\n   * @param inner 内部wikitext\n   */\n  constructor(syntax, inner, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    var _a;\n    let innerSyntax = inner == null ? void 0 : inner.match(/\\||\\0\\d+!\\x7F/u), attr = innerSyntax ? inner.slice(0, innerSyntax.index) : \"\";\n    if (/\\[\\[|-\\{/u.test(attr)) {\n      innerSyntax = void 0;\n      attr = \"\";\n    }\n    super(\n      /^(?:\\n[^\\S\\n]*(?:[|!]|\\|\\+|\\{\\{\\s*!\\s*\\}\\}\\+?)|(?:\\||\\{\\{\\s*!\\s*\\}\\}){2}|!!|\\{\\{\\s*!!\\s*\\}\\})$/u,\n      syntax,\n      attr,\n      config,\n      accum\n    );\n    /** @browser */\n    __publicField(this, \"type\", \"td\");\n    /** @browser */\n    __privateAdd(this, _innerSyntax, \"\");\n    if (innerSyntax) {\n      [__privateWrapper(this, _innerSyntax)._] = innerSyntax;\n    }\n    const innerToken = new _index__WEBPACK_IMPORTED_MODULE_2__.Token(\n      inner == null ? void 0 : inner.slice(((_a = innerSyntax == null ? void 0 : innerSyntax.index) != null ? _a : NaN) + __privateGet(this, _innerSyntax).length),\n      config,\n      accum\n    );\n    innerToken.type = \"td-inner\";\n    this.insertAt(innerToken.setAttribute(\"stage\", 4));\n  }\n  /**\n   * 单元格类型\n   * @browser\n   */\n  get subtype() {\n    return this.getSyntax().subtype;\n  }\n  /** @private */\n  getSyntax() {\n    const syntax = this.firstChild.text(), char = syntax[syntax.length - 1];\n    let subtype = \"td\";\n    if (char === \"!\") {\n      subtype = \"th\";\n    } else if (char === \"+\") {\n      subtype = \"caption\";\n    }\n    return { subtype };\n  }\n  /** @private */\n  afterBuild() {\n    if (__privateGet(this, _innerSyntax).includes(\"\\0\")) {\n      __privateSet(this, _innerSyntax, this.buildFromStr(__privateGet(this, _innerSyntax), \"string\"));\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    const { childNodes: [syntax, attr, inner] } = this;\n    return `${syntax.toString()}${attr.toString()}${__privateGet(this, _innerSyntax)}${inner.toString()}`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const { childNodes: [syntax, attr, inner] } = this;\n    return `${syntax.text()}${attr.text()}${__privateGet(this, _innerSyntax)}${inner.text()}`;\n  }\n  /** @private */\n  getGaps(i) {\n    if (i === 1) {\n      return __privateGet(this, _innerSyntax).length;\n    }\n    return 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start);\n    start += this.getRelativeIndex(this.length - 1);\n    for (const child of this.lastChild.childNodes) {\n      if (child.type === \"text\" && child.data.includes(\"|\")) {\n        errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(child, { start }, 'additional \"|\" in a table cell', \"warning\"));\n      }\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    const { childNodes: [syntax, attr, inner] } = this;\n    return `<span class=\"wpb-td\">${syntax.print()}${attr.print()}${__privateGet(this, _innerSyntax)}${inner.print()}</span>`;\n  }\n}\n_innerSyntax = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/table/td.ts?");

/***/ }),

/***/ "./src/table/tr.ts":
/*!*************************!*\
  !*** ./src/table/tr.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TrToken: () => (/* binding */ TrToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _trBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./trBase */ \"./src/table/trBase.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\nclass TrToken extends _trBase__WEBPACK_IMPORTED_MODULE_1__.TrBaseToken {\n  /**\n   * @browser\n   * @param syntax 表格语法\n   * @param attr 表格属性\n   */\n  constructor(syntax, attr, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) {\n    super(/^\\n[^\\S\\n]*(?:\\|-+|\\{\\{\\s*!\\s*\\}\\}-+|\\{\\{\\s*!-\\s*\\}\\}-*)$/u, syntax, attr, config, accum, {});\n    /** @browser */\n    __publicField(this, \"type\", \"tr\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/table/tr.ts?");

/***/ }),

/***/ "./src/table/trBase.ts":
/*!*****************************!*\
  !*** ./src/table/trBase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TrBaseToken: () => (/* binding */ TrBaseToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base */ \"./src/table/base.ts\");\n\n\n\nclass TrBaseToken extends _base__WEBPACK_IMPORTED_MODULE_1__.TableBaseToken {\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), inter = this.childNodes.find(({ type }) => type === \"table-inter\");\n    if (!inter) {\n      return errors;\n    }\n    const first = inter.childNodes.find((child) => child.text().trim()), tdPattern = /^\\s*(?:!|\\{\\{\\s*![!-]?\\s*\\}\\})/u;\n    if (!first || tdPattern.test(String(first)) || first.type === \"arg\" && tdPattern.test(first.default || \"\")) {\n      return errors;\n    } else if (first.type === \"magic-word\") {\n      try {\n        if (first.getPossibleValues().every((token) => tdPattern.test(token.text()))) {\n          return errors;\n        }\n      } catch (e) {\n      }\n    }\n    const error = (0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForChild)(inter, { start }, \"content to be moved out from the table\");\n    errors.push({\n      ...error,\n      startIndex: error.startIndex + 1,\n      startLine: error.startLine + 1,\n      startCol: 0\n    });\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const str = super.text();\n    return this.type === \"tr\" && !str.trim().includes(\"\\n\") ? \"\" : str;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/table/trBase.ts?");

/***/ }),

/***/ "./src/tagPair/ext.ts":
/*!****************************!*\
  !*** ./src/tagPair/ext.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExtToken: () => (/* binding */ ExtToken)\n/* harmony export */ });\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/tagPair/index.ts\");\n/* harmony import */ var _attributes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../attributes */ \"./src/attributes.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\n\n\nconst del = (arr, ele) => {\n  const set = new Set(arr);\n  set.delete(ele);\n  return [...set];\n};\nclass ExtToken extends _index__WEBPACK_IMPORTED_MODULE_3__.TagPairToken {\n  /**\n   * @browser\n   * @param name 标签名\n   * @param attr 标签属性\n   * @param inner 内部wikitext\n   * @param closed 是否封闭\n   */\n  constructor(name, attr, inner, closed, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    var _a;\n    const lcName = name.toLowerCase(), attrToken = new _attributes__WEBPACK_IMPORTED_MODULE_4__.AttributesToken(\n      !attr || /^\\s/u.test(attr) ? attr : ` ${attr}`,\n      \"ext-attrs\",\n      lcName,\n      config,\n      accum\n    ), newConfig = { ...config, ext: del(config.ext, lcName), excludes: [...(_a = config.excludes) != null ? _a : []] };\n    let innerToken;\n    newConfig.inExt = true;\n    switch (lcName) {\n      case \"tab\":\n        newConfig.ext = del(newConfig.ext, \"tabs\");\n      case \"indicator\":\n      case \"poem\":\n      case \"ref\":\n      case \"option\":\n      case \"combooption\":\n      case \"tabs\":\n      case \"poll\":\n      case \"seo\":\n        if (lcName === \"poem\") {\n          newConfig.excludes.push(\"heading\");\n        }\n        innerToken = new _index__WEBPACK_IMPORTED_MODULE_2__.Token(inner, newConfig, accum);\n        break;\n      case \"pre\": {\n        const { PreToken } = __webpack_require__(/*! ../pre */ \"./src/pre.ts\");\n        innerToken = new PreToken(inner, newConfig, accum);\n        break;\n      }\n      case \"dynamicpagelist\": {\n        const { ParamTagToken } = __webpack_require__(/*! ../paramTag/index */ \"./src/paramTag/index.ts\");\n        innerToken = new ParamTagToken(inner, newConfig, accum);\n        break;\n      }\n      case \"inputbox\": {\n        newConfig.excludes.push(\"heading\");\n        const { InputboxToken } = __webpack_require__(/*! ../paramTag/inputbox */ \"./src/paramTag/inputbox.ts\");\n        innerToken = new InputboxToken(inner, newConfig, accum);\n        break;\n      }\n      case \"references\": {\n        const { NestedToken } = __webpack_require__(/*! ../nested */ \"./src/nested.ts\");\n        innerToken = new NestedToken(\n          inner,\n          /<!--.*?(?:-->|$)|<(ref)(\\s[^>]*)?>(.*?)<\\/(ref\\s*)>/gisu,\n          [\"ref\"],\n          newConfig,\n          accum\n        );\n        break;\n      }\n      case \"choose\": {\n        const { NestedToken } = __webpack_require__(/*! ../nested */ \"./src/nested.ts\");\n        innerToken = new NestedToken(\n          inner,\n          /<(option|choicetemplate)(\\s[^>]*)?>(.*?)<\\/(\\1)>/gsu,\n          [\"option\", \"choicetemplate\"],\n          newConfig,\n          accum\n        );\n        break;\n      }\n      case \"combobox\": {\n        const { NestedToken } = __webpack_require__(/*! ../nested */ \"./src/nested.ts\");\n        innerToken = new NestedToken(\n          inner,\n          /<(combooption)(\\s[^>]*)?>(.*?)<\\/(combooption\\s*)>/gisu,\n          [\"combooption\"],\n          newConfig,\n          accum\n        );\n        break;\n      }\n      case \"gallery\": {\n        const { GalleryToken } = __webpack_require__(/*! ../gallery */ \"./src/gallery.ts\");\n        innerToken = new GalleryToken(inner, newConfig, accum);\n        break;\n      }\n      case \"imagemap\": {\n        const { ImagemapToken } = __webpack_require__(/*! ../imagemap */ \"./src/imagemap.ts\");\n        innerToken = new ImagemapToken(inner, newConfig, accum);\n        break;\n      }\n      default: {\n        const { NowikiToken } = __webpack_require__(/*! ../nowiki/index */ \"./src/nowiki/index.ts\");\n        innerToken = new NowikiToken(inner, newConfig);\n      }\n    }\n    innerToken.setAttribute(\"name\", lcName).type = \"ext-inner\";\n    super(name, attrToken, innerToken, closed, config, accum);\n    __publicField(this, \"type\", \"ext\");\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start);\n    if (this.name !== \"nowiki\" && this.closest(\"html-attrs, table-attrs\")) {\n      const root = this.getRootNode(), rect = { start, ...root.posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_0__.generateForSelf)(this, rect, \"extension tag in HTML tag attributes\"));\n    }\n    return errors;\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/tagPair/ext.ts?");

/***/ }),

/***/ "./src/tagPair/include.ts":
/*!********************************!*\
  !*** ./src/tagPair/include.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncludeToken: () => (/* binding */ IncludeToken)\n/* harmony export */ });\n/* harmony import */ var _mixin_hidden__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../mixin/hidden */ \"./mixin/hidden.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/tagPair/index.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n\n\nclass IncludeToken extends (0,_mixin_hidden__WEBPACK_IMPORTED_MODULE_0__.hidden)(_index__WEBPACK_IMPORTED_MODULE_2__.TagPairToken) {\n  /**\n   * @browser\n   * @param name 标签名\n   * @param attr 标签属性\n   * @param inner 内部wikitext\n   * @param closed 是否封闭\n   */\n  constructor(name, attr = \"\", inner, closed, config = _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConfig(), accum = []) {\n    super(name, attr, inner != null ? inner : \"\", inner === void 0 ? closed : closed != null ? closed : \"\", config, accum);\n    /** @browser */\n    __publicField(this, \"type\", \"include\");\n  }\n}\n\n\n//# sourceURL=webpack://wikiparser-node/./src/tagPair/include.ts?");

/***/ }),

/***/ "./src/tagPair/index.ts":
/*!******************************!*\
  !*** ./src/tagPair/index.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TagPairToken: () => (/* binding */ TagPairToken)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ \"./src/index.ts\");\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _selfClosing, _closed, _tags;\n\n\nclass TagPairToken extends _index__WEBPACK_IMPORTED_MODULE_1__.Token {\n  /**\n   * @browser\n   * @param name 标签名\n   * @param attr 标签属性\n   * @param inner 内部wikitext\n   * @param closed 是否封闭；约定`undefined`表示自封闭，`''`表示未闭合\n   */\n  constructor(name, attr, inner, closed, config = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getConfig(), accum = []) {\n    super(void 0, config);\n    /** @browser */\n    __privateAdd(this, _selfClosing, void 0);\n    /** @browser */\n    __privateAdd(this, _closed, void 0);\n    /** @browser */\n    __privateAdd(this, _tags, void 0);\n    this.setAttribute(\"name\", name.toLowerCase());\n    __privateSet(this, _tags, [name, closed || name]);\n    __privateSet(this, _selfClosing, closed === void 0);\n    __privateSet(this, _closed, closed !== \"\");\n    this.append(attr, inner);\n    const index = typeof attr === \"string\" ? -1 : accum.indexOf(attr);\n    accum.splice(index === -1 ? Infinity : index, 0, this);\n  }\n  /**\n   * 是否闭合\n   * @browser\n   */\n  get closed() {\n    return __privateGet(this, _closed);\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    const { firstChild, lastChild } = this, [opening, closing] = __privateGet(this, _tags);\n    return __privateGet(this, _selfClosing) ? `<${opening}${firstChild.toString(omit)}/>` : `<${opening}${firstChild.toString(omit)}>${lastChild.toString(omit)}${this.closed ? `</${closing}>` : \"\"}`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const [opening, closing] = __privateGet(this, _tags);\n    return __privateGet(this, _selfClosing) ? `<${opening}${this.firstChild.text()}/>` : `<${opening}${super.text(\">\")}${this.closed ? `</${closing}>` : \"\"}`;\n  }\n  /** @private */\n  getPadding() {\n    return __privateGet(this, _tags)[0].length + 1;\n  }\n  /** @private */\n  getGaps(i) {\n    return i === 0 ? 1 : 1;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    const [opening, closing] = __privateGet(this, _tags);\n    return super.print(__privateGet(this, _selfClosing) ? { pre: `&lt;${opening}`, post: \"/&gt;\" } : { pre: `&lt;${opening}`, sep: \"&gt;\", post: this.closed ? `&lt;/${closing}&gt;` : \"\" });\n  }\n}\n_selfClosing = new WeakMap();\n_closed = new WeakMap();\n_tags = new WeakMap();\n\n\n//# sourceURL=webpack://wikiparser-node/./src/tagPair/index.ts?");

/***/ }),

/***/ "./src/transclude.ts":
/*!***************************!*\
  !*** ./src/transclude.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TranscludeToken: () => (/* binding */ TranscludeToken)\n/* harmony export */ });\n/* harmony import */ var _util_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/string */ \"./util/string.ts\");\n/* harmony import */ var _util_lint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/lint */ \"./util/lint.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/index.ts\");\n/* harmony import */ var _parameter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./parameter */ \"./src/parameter.ts\");\n/* harmony import */ var _atom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./atom */ \"./src/atom.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./syntax */ \"./src/syntax.ts\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _fragment, _valid, _raw, _args, _handleAnonArgChange, handleAnonArgChange_fn;\n\n\n\n\n\n\n\nclass TranscludeToken extends _index__WEBPACK_IMPORTED_MODULE_3__.Token {\n  /**\n   * @browser\n   * @param title 模板标题或魔术字\n   * @param parts 参数各部分\n   * @throws `SyntaxError` 非法的模板名称\n   */\n  constructor(title, parts, config = _index__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfig(), accum = []) {\n    var _a, _b;\n    super(void 0, config, accum, {});\n    /**\n     * 处理匿名参数更改\n     * @browser\n     * @param addedToken 新增的参数\n     */\n    __privateAdd(this, _handleAnonArgChange);\n    /** @browser */\n    __publicField(this, \"type\", \"template\");\n    /** @browser */\n    __publicField(this, \"modifier\", \"\");\n    /** @browser */\n    __privateAdd(this, _fragment, void 0);\n    /** @browser */\n    __privateAdd(this, _valid, true);\n    /** @browser */\n    __privateAdd(this, _raw, false);\n    __privateAdd(this, _args, /* @__PURE__ */ new Map());\n    const { parserFunction: [insensitive, sensitive] } = config, argSubst = (_a = /^(?:\\s|\\0\\d+c\\x7F)*\\0\\d+s\\x7F/u.exec(title)) == null ? void 0 : _a[0];\n    if (argSubst) {\n      this.setAttribute(\"modifier\", argSubst);\n      title = title.slice(argSubst.length);\n    } else if (title.includes(\":\")) {\n      const [modifier, ...arg] = title.split(\":\"), [mt] = /^(?:\\s|\\0\\d+c\\x7F)*/u.exec((_b = arg[0]) != null ? _b : \"\");\n      if (this.setModifier(`${modifier}:${mt}`)) {\n        title = arg.join(\":\").slice(mt.length);\n      }\n    }\n    if (title.includes(\":\") || parts.length === 0 && !__privateGet(this, _raw)) {\n      const [magicWord, ...arg] = title.split(\":\"), cleaned = (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.removeComment)(magicWord), name = cleaned.trim(), isSensitive = sensitive.includes(name), canonicalCame = insensitive[name.toLowerCase()];\n      if (!(arg.length > 0 && /\\s$/u.test(cleaned)) && (isSensitive || canonicalCame)) {\n        this.setAttribute(\"name\", canonicalCame != null ? canonicalCame : name.toLowerCase()).type = \"magic-word\";\n        const pattern = new RegExp(`^\\\\s*${name}\\\\s*$`, isSensitive ? \"u\" : \"iu\"), token = new _syntax__WEBPACK_IMPORTED_MODULE_6__.SyntaxToken(magicWord, pattern, \"magic-word-name\", config, accum, {});\n        super.insertAt(token);\n        if (arg.length > 0) {\n          parts.unshift([arg.join(\":\")]);\n        }\n        if (this.name === \"invoke\") {\n          for (let i2 = 0; i2 < 2; i2++) {\n            const part = parts.shift();\n            if (!part) {\n              break;\n            }\n            const invoke = new _atom__WEBPACK_IMPORTED_MODULE_5__.AtomToken(\n              part.join(\"=\"),\n              `invoke-${i2 ? \"function\" : \"module\"}`,\n              config,\n              accum\n            );\n            super.insertAt(invoke);\n          }\n        }\n      }\n    }\n    if (this.type === \"template\") {\n      const name = (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.removeComment)((0,_util_string__WEBPACK_IMPORTED_MODULE_0__.decodeHtml)(title)).split(\"#\")[0].trim();\n      if (!name || /\\0\\d+[eh!+-]\\x7F|[<>[\\]{}\\n]|%[\\da-f]{2}/u.test(name)) {\n        accum.pop();\n        throw new SyntaxError(`\\u975E\\u6CD5\\u7684\\u6A21\\u677F\\u540D\\u79F0\\uFF1A${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.noWrap)(name)}`);\n      }\n      const token = new _atom__WEBPACK_IMPORTED_MODULE_5__.AtomToken(title, \"template-name\", config, accum, {});\n      super.insertAt(token);\n    }\n    const templateLike = this.isTemplate();\n    let i = 1;\n    for (let j = 0; j < parts.length; j++) {\n      const part = parts[j];\n      if (!templateLike && !(this.name === \"switch\" && j > 0)) {\n        part[0] = part.join(\"=\");\n        part.length = 1;\n      }\n      if (part.length === 1) {\n        part.unshift(i);\n        i++;\n      }\n      this.insertAt(new _parameter__WEBPACK_IMPORTED_MODULE_4__.ParameterToken(...part, config, accum));\n    }\n  }\n  /**\n   * 设置引用修饰符\n   * @browser\n   * @param modifier 引用修饰符\n   */\n  setModifier(modifier) {\n    const { parserFunction: [, , raw, subst] } = this.getAttribute(\"config\"), lcModifier = (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.removeComment)(modifier).trim();\n    if (modifier && !lcModifier.endsWith(\":\")) {\n      return false;\n    }\n    const magicWord = lcModifier.slice(0, -1).toLowerCase(), isRaw = raw.includes(magicWord), isSubst = subst.includes(magicWord);\n    if (__privateGet(this, _raw) && isRaw || !__privateGet(this, _raw) && (isSubst || modifier === \"\") || this.length > 1 && (isRaw || isSubst || modifier === \"\")) {\n      this.setAttribute(\"modifier\", modifier);\n      __privateSet(this, _raw, isRaw);\n      return Boolean(modifier);\n    }\n    return false;\n  }\n  /**\n   * 是否是模板\n   * @browser\n   */\n  isTemplate() {\n    return this.type === \"template\" || this.name === \"invoke\";\n  }\n  /** @private */\n  afterBuild() {\n    if (this.modifier.includes(\"\\0\")) {\n      this.setAttribute(\"modifier\", this.buildFromStr(this.modifier, \"string\"));\n    }\n    if (this.isTemplate()) {\n      const isTemplate = this.type === \"template\", titleObj = this.normalizeTitle(this.childNodes[isTemplate ? 0 : 1].text(), isTemplate ? 10 : 828);\n      __privateSet(this, _fragment, titleObj.fragment);\n      __privateSet(this, _valid, titleObj.valid);\n    }\n  }\n  /**\n   * @override\n   * @browser\n   */\n  toString(omit) {\n    return `{{${this.modifier}${this.type === \"magic-word\" ? `${this.firstChild.toString(omit)}${this.length === 1 ? \"\" : \":\"}${this.childNodes.slice(1).map((child) => child.toString(omit)).join(\"|\")}` : super.toString(omit, \"|\")}}}`;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  text() {\n    const { childNodes, length, firstChild, modifier, type, name } = this;\n    return type === \"magic-word\" && name === \"vardefine\" ? \"\" : `{{${modifier}${type === \"magic-word\" ? `${firstChild.text()}${length === 1 ? \"\" : \":\"}${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.text)(childNodes.slice(1), \"|\")}` : super.text(\"|\")}}}`;\n  }\n  /** @private */\n  getPadding() {\n    return this.modifier.length + 2;\n  }\n  /** @private */\n  getGaps(i) {\n    return i < this.length - 1 ? 1 : 0;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  lint(start = this.getAbsoluteIndex()) {\n    const errors = super.lint(start), { type, childNodes } = this;\n    let rect;\n    if (!this.isTemplate()) {\n      return errors;\n    } else if (__privateGet(this, _fragment) !== void 0) {\n      rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForChild)(childNodes[type === \"template\" ? 0 : 1], rect, \"useless fragment\"));\n    }\n    if (!__privateGet(this, _valid)) {\n      rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push((0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForChild)(childNodes[1], rect, \"illegal module name\"));\n    }\n    const duplicatedArgs = this.getDuplicatedArgs();\n    if (duplicatedArgs.length > 0) {\n      rect != null ? rect : rect = { start, ...this.getRootNode().posFromIndex(start) };\n      errors.push(...duplicatedArgs.flatMap(([, args]) => args).map(\n        (arg) => (0,_util_lint__WEBPACK_IMPORTED_MODULE_1__.generateForChild)(arg, rect, \"duplicated parameter\")\n      ));\n    }\n    return errors;\n  }\n  /**\n   * @override\n   * @browser\n   * @param token 待插入的子节点\n   * @param i 插入位置\n   */\n  insertAt(token, i = this.length) {\n    super.insertAt(token, i);\n    if (token.anon) {\n      __privateMethod(this, _handleAnonArgChange, handleAnonArgChange_fn).call(this, token);\n    } else if (token.name) {\n      this.getArgs(token.name, false, false).add(token);\n    }\n    return token;\n  }\n  /**\n   * 获取所有参数\n   * @browser\n   */\n  getAllArgs() {\n    return this.childNodes.filter((child) => child.type === \"parameter\");\n  }\n  /**\n   * 获取匿名参数\n   * @browser\n   */\n  getAnonArgs() {\n    return this.getAllArgs().filter(({ anon }) => anon);\n  }\n  /**\n   * 获取指定参数\n   * @browser\n   * @param key 参数名\n   * @param exact 是否匹配匿名性\n   * @param copy 是否返回一个备份\n   */\n  // eslint-disable-next-line no-unused-vars, @typescript-eslint/no-unused-vars\n  getArgs(key, exact = false, copy = true) {\n    const keyStr = String(key).replace(/^[ \\t\\n\\0\\v]+|([^ \\t\\n\\0\\v])[ \\t\\n\\0\\v]+$/gu, \"$1\");\n    let args;\n    if (__privateGet(this, _args).has(keyStr)) {\n      args = __privateGet(this, _args).get(keyStr);\n    } else {\n      args = new Set(this.getAllArgs().filter(({ name }) => keyStr === name));\n      __privateGet(this, _args).set(keyStr, args);\n    }\n    return args;\n  }\n  /**\n   * 获取重名参数\n   * @browser\n   * @throws `Error` 仅用于模板\n   */\n  getDuplicatedArgs() {\n    if (this.isTemplate()) {\n      return [...__privateGet(this, _args)].filter(([, { size }]) => size > 1).map(([key, args]) => [key, [...args]]);\n    }\n    return [];\n  }\n  /**\n   * 对特定魔术字获取可能的取值\n   * @browser\n   * @throws `Error` 不是可接受的魔术字\n   */\n  getPossibleValues() {\n    const { type, name, childNodes, constructor: { name: cName } } = this;\n    if (type === \"template\") {\n      throw new Error(`${cName}.getPossibleValues \\u65B9\\u6CD5\\u4EC5\\u4F9B\\u7279\\u5B9A\\u9B54\\u672F\\u5B57\\u4F7F\\u7528\\uFF01`);\n    }\n    let start;\n    switch (name) {\n      case \"if\":\n      case \"ifexist\":\n      case \"ifexpr\":\n      case \"iferror\":\n        start = 2;\n        break;\n      case \"ifeq\":\n        start = 3;\n        break;\n      default:\n        throw new Error(`${cName}.getPossibleValues \\u65B9\\u6CD5\\u4EC5\\u4F9B\\u7279\\u5B9A\\u9B54\\u672F\\u5B57\\u4F7F\\u7528\\uFF01`);\n    }\n    const queue = childNodes.slice(start, start + 2).map(({ childNodes: [, value] }) => value);\n    for (let i = 0; i < queue.length; ) {\n      const { length, 0: first } = queue[i].childNodes.filter((child) => child.text().trim());\n      if (length === 0) {\n        queue.splice(i, 1);\n      } else if (length > 1 || first.type !== \"magic-word\") {\n        i++;\n      } else {\n        try {\n          const possibleValues = first.getPossibleValues();\n          queue.splice(i, 1, ...possibleValues);\n          i += possibleValues.length;\n        } catch (e) {\n          i++;\n        }\n      }\n    }\n    return queue;\n  }\n  /**\n   * @override\n   * @browser\n   */\n  print() {\n    const { childNodes, length, firstChild, modifier, type } = this;\n    return `<span class=\"wpb-${type}\">{{${modifier}${type === \"magic-word\" ? `${firstChild.print()}${length === 1 ? \"\" : \":\"}${(0,_util_string__WEBPACK_IMPORTED_MODULE_0__.print)(childNodes.slice(1), { sep: \"|\" })}` : (0,_util_string__WEBPACK_IMPORTED_MODULE_0__.print)(childNodes, { sep: \"|\" })}}}</span>`;\n  }\n}\n_fragment = new WeakMap();\n_valid = new WeakMap();\n_raw = new WeakMap();\n_args = new WeakMap();\n_handleAnonArgChange = new WeakSet();\nhandleAnonArgChange_fn = function(addedToken) {\n  const args = this.getAnonArgs(), added = typeof addedToken !== \"number\";\n  for (let i = added ? args.indexOf(addedToken) : addedToken - 1; i < args.length; i++) {\n    const token = args[i], { name } = token, newName = String(i + 1);\n    if (name !== newName) {\n      this.getArgs(newName, false, false).add(token.setAttribute(\"name\", newName));\n    }\n  }\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./src/transclude.ts?");

/***/ }),

/***/ "./util/lint.ts":
/*!**********************!*\
  !*** ./util/lint.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateForChild: () => (/* binding */ generateForChild),\n/* harmony export */   generateForSelf: () => (/* binding */ generateForSelf)\n/* harmony export */ });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ \"./index.ts\");\n\n\nconst generateForChild = (child, boundingRect, msg, severity = \"error\") => {\n  const index = child.getRelativeIndex(), { offsetHeight, offsetWidth, parentNode } = child, { top: offsetTop, left: offsetLeft } = parentNode.posFromIndex(index), { start } = boundingRect, { top, left } = \"top\" in boundingRect ? boundingRect : child.getRootNode().posFromIndex(start), str = String(child), startIndex = start + index, startLine = top + offsetTop, startCol = offsetTop ? offsetLeft : left + offsetLeft;\n  return {\n    message: _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].msg(msg),\n    severity,\n    startIndex,\n    endIndex: startIndex + str.length,\n    startLine,\n    endLine: startLine + offsetHeight - 1,\n    startCol,\n    endCol: offsetHeight === 1 ? startCol + offsetWidth : offsetWidth\n  };\n};\nconst generateForSelf = (token, boundingRect, msg, severity = \"error\") => {\n  const { start } = boundingRect, { offsetHeight, offsetWidth } = token, str = String(token), { top, left } = \"top\" in boundingRect ? boundingRect : token.getRootNode().posFromIndex(start);\n  return {\n    message: _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].msg(msg),\n    severity,\n    startIndex: start,\n    endIndex: start + str.length,\n    startLine: top,\n    endLine: top + offsetHeight - 1,\n    startCol: left,\n    endCol: offsetHeight === 1 ? left + offsetWidth : offsetWidth\n  };\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./util/lint.ts?");

/***/ }),

/***/ "./util/string.ts":
/*!************************!*\
  !*** ./util/string.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeHtml: () => (/* binding */ decodeHtml),\n/* harmony export */   escapeRegExp: () => (/* binding */ escapeRegExp),\n/* harmony export */   extUrlChar: () => (/* binding */ extUrlChar),\n/* harmony export */   extUrlCharFirst: () => (/* binding */ extUrlCharFirst),\n/* harmony export */   noWrap: () => (/* binding */ noWrap),\n/* harmony export */   print: () => (/* binding */ print),\n/* harmony export */   removeComment: () => (/* binding */ removeComment),\n/* harmony export */   text: () => (/* binding */ text)\n/* harmony export */ });\n\nconst extUrlCharFirst = '(?:\\\\[[\\\\da-f:.]+\\\\]|[^[\\\\]<>\"\\\\0-\\\\x1F\\\\x7F\\\\p{Zs}\\\\uFFFD])';\nconst extUrlChar = '(?:[^[\\\\]<>\"\\\\0-\\\\x1F\\\\x7F\\\\p{Zs}\\\\uFFFD]|\\\\0\\\\d+c\\\\x7F)*';\nconst removeComment = (str) => str.replace(/\\0\\d+c\\x7F/gu, \"\");\nconst escapeRegExp = (str) => str.replace(/[\\\\{}()|.?*+^$[\\]]/gu, \"\\\\$&\");\nconst text = (childNodes, separator = \"\") => childNodes.map((child) => typeof child === \"string\" ? child : child.text()).join(separator);\nconst decodeHtml = (str) => str.replace(\n  /&#(\\d+|x[\\da-f]+);/giu,\n  (_, code) => String.fromCodePoint(Number(`${code[0].toLowerCase() === \"x\" ? \"0\" : \"\"}${code}`))\n);\nconst noWrap = (str) => str.replace(/\\n/gu, \"\\\\n\");\nconst print = (childNodes, opt = {}) => {\n  const { pre = \"\", post = \"\", sep = \"\" } = opt, entities = { \"&\": \"amp\", \"<\": \"lt\", \">\": \"gt\" };\n  return `${pre}${childNodes.map(\n    (child) => child.type === \"text\" ? child.data.replace(/[&<>]/gu, (p) => `&${entities[p]};`) : child.print()\n  ).join(sep)}${post}`;\n};\n\n\n//# sourceURL=webpack://wikiparser-node/./util/string.ts?");

/***/ }),

/***/ "./config/minimum.json":
/*!*****************************!*\
  !*** ./config/minimum.json ***!
  \*****************************/
/***/ ((module) => {

eval("module.exports = JSON.parse('{\"ext\":[],\"html\":[[\"b\",\"bdi\",\"del\",\"i\",\"ins\",\"u\",\"font\",\"big\",\"small\",\"sub\",\"sup\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"cite\",\"code\",\"em\",\"s\",\"strike\",\"strong\",\"tt\",\"var\",\"div\",\"center\",\"blockquote\",\"ol\",\"ul\",\"dl\",\"table\",\"caption\",\"pre\",\"ruby\",\"rb\",\"rp\",\"rt\",\"rtc\",\"p\",\"span\",\"abbr\",\"dfn\",\"kbd\",\"samp\",\"data\",\"time\",\"mark\",\"tr\",\"td\",\"th\",\"q\",\"bdo\"],[\"li\",\"dt\",\"dd\"],[\"br\",\"wbr\",\"hr\",\"meta\",\"link\",\"img\"]],\"namespaces\":{\"6\":\"File\",\"10\":\"Template\"},\"nsid\":{},\"parserFunction\":[{\"#language\":\"language\",\"#special\":\"special\",\"#speciale\":\"speciale\",\"#tag\":\"tag\",\"#formatdate\":\"formatdate\",\"#invoke\":\"invoke\",\"#while\":\"while\",\"#dowhile\":\"dowhile\",\"#loop\":\"loop\",\"#forargs\":\"forargs\",\"#fornumargs\":\"fornumargs\",\"#if\":\"if\",\"#ifeq\":\"ifeq\",\"#switch\":\"switch\",\"#ifexist\":\"ifexist\",\"#ifexpr\":\"ifexpr\",\"#iferror\":\"iferror\",\"#time\":\"time\",\"#timel\":\"timel\",\"#expr\":\"expr\",\"#rel2abs\":\"rel2abs\",\"#titleparts\":\"titleparts\",\"#categorytree\":\"categorytree\",\"#urldecode\":\"urldecode\",\"#choose\":\"choose\",\"#var\":\"var\",\"#varexists\":\"varexists\",\"#var_final\":\"var_final\",\"#vardefine\":\"vardefine\",\"#vardefineecho\":\"vardefineecho\",\"#widget\":\"widget\",\"#regex\":\"regex\",\"#related\":\"related\",\"#cscore\":\"cscore\"},[],[\"msg\",\"原始\",\"raw\"],[\"替代\",\"subst\",\"安全替代\",\"safesubst\"]],\"doubleUnderscore\":[[],[]],\"protocol\":\"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|worldwind://|xmpp:\",\"interwiki\":[],\"img\":{},\"variants\":[]}');\n\n//# sourceURL=webpack://wikiparser-node/./config/minimum.json?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./index.ts");
/******/ 	
/******/ })()
;