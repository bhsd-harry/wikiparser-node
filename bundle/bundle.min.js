"use strict";(()=>{var Us=Object.create;var st=Object.defineProperty;var jn=Object.getOwnPropertyDescriptor;var Ds=Object.getOwnPropertyNames;var Hs=Object.prototype.hasOwnProperty;var qn=(a,n)=>(n=Symbol[a])?n:Symbol.for("Symbol."+a),ot=a=>{throw TypeError(a)};var Vs=(a,n,e)=>n in a?st(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e;var Bn=(a,n)=>st(a,"name",{value:n,configurable:!0});var b=(a,n)=>()=>(a&&(n=a(a=0)),n);var Xs=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),H=(a,n)=>{for(var e in n)st(a,e,{get:n[e],enumerable:!0})},Qs=(a,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of Ds(n))!Hs.call(a,r)&&r!==e&&st(a,r,{get:()=>n[r],enumerable:!(t=jn(n,r))||t.enumerable});return a};var O=a=>Qs(st({},"__esModule",{value:!0}),a);var se=a=>{var n;return[,,,Us((n=a==null?void 0:a[qn("metadata")])!=null?n:null)]},_n=["class","method","getter","setter","accessor","field","value","get","set"],Rt=a=>a!==void 0&&typeof a!="function"?ot("Function expected"):a,Zs=(a,n,e,t,r)=>({kind:_n[a],name:n,metadata:t,addInitializer:i=>e._?ot("Already initialized"):r.push(Rt(i||null))}),oe=(a,n,e,t)=>{for(var r=0,i=a[n>>1],s=i&&i.length;r<s;r++)n&1?i[r].call(e):t=i[r].call(e,t);return t},ae=(a,n,e,t,r,i)=>{var s,o,l,g,p,d=n&7,u=!!(n&8),h=!!(n&16),m=d>3?a.length+1:d?u?1:2:0,x=_n[d+5],k=d>3&&(a[m-1]=[]),E=a[m]||(a[m]=[]),w=d&&(!h&&!u&&(r=r.prototype),d<5&&(d>3||!h)&&jn(d<4?r:{get[e](){return c(this,i)},set[e](S){return A(this,i,S)}},e));d?h&&d<4&&Bn(i,(d>2?"set ":d>1?"get ":"")+e):Bn(r,e);for(var v=t.length-1;v>=0;v--)g=Zs(d,e,l={},a[3],E),d&&(g.static=u,g.private=h,p=g.access={has:h?S=>Ks(r,S):S=>e in S},d^3&&(p.get=h?S=>(d^1?c:$)(S,r,d^4?i:w.get):S=>S[e]),d>2&&(p.set=h?(S,L)=>A(S,r,L,d^4?i:w.set):(S,L)=>S[e]=L)),o=(0,t[v])(d?d<4?h?i:w[x]:d>4?void 0:{get:w.get,set:w.set}:r,g),l._=1,d^4||o===void 0?Rt(o)&&(d>4?k.unshift(o):d?h?i=o:w[x]=o:r=o):typeof o!="object"||o===null?ot("Object expected"):(Rt(s=o.get)&&(w.get=s),Rt(s=o.set)&&(w.set=s),Rt(s=o.init)&&k.unshift(s));return d||(r[qn("metadata")]=a[3]),w&&st(r,e,w),h?d^4?i:w:r},U=(a,n,e)=>Vs(a,typeof n!="symbol"?n+"":n,e),_r=(a,n,e)=>n.has(a)||ot("Cannot "+e),Ks=(a,n)=>Object(n)!==n?ot('Cannot use the "in" operator on this value'):a.has(n),c=(a,n,e)=>(_r(a,n,"read from private field"),e?e.call(a):n.get(a)),y=(a,n,e)=>n.has(a)?ot("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(a):n.set(a,e),A=(a,n,e,t)=>(_r(a,n,"write to private field"),t?t.call(a,e):n.set(a,e),e),$=(a,n,e)=>(_r(a,n,"access private method"),e);var tr=(a,n,e,t)=>({set _(r){A(a,n,r,e)},get _(){return c(a,n,t)}});var Gn,On=b(()=>{"use strict";Gn=["bold-header","format-leakage","fostered-content","h1","illegal-attr","insecure-style","invalid-gallery","invalid-imagemap","invalid-invoke","invalid-isbn","lonely-apos","lonely-bracket","lonely-http","nested-link","no-arg","no-duplicate","no-ignored","obsolete-attr","obsolete-tag","parsing-order","pipe-like","table-layout","tag-like","unbalanced-header","unclosed-comment","unclosed-quote","unclosed-table","unescaped","unknown-page","unmatched-tag","unterminated-url","url-encoding","var-anchor","void-ext"]});var zn,we,Se,at,Mn,le,rr,de,Js,Wn,Un,Ys,lt,Ne,X=b(()=>{"use strict";zn=String.raw`[^[\]<>"\0-\x1F\x7F\p{Zs}\uFFFD]`,we=String.raw`(?:\[[\da-f:.]+\]|${zn})`,Se=String.raw`(?:${zn}|\0\d+[c!~]\x7F)*`,at=(a,n)=>e=>e.replace(a,n),Mn=at(/[\0\x7F]|\r$/gmu,""),le=at(/\0\d+c\x7F/gu,""),rr=at(/[\\{}()|.?*+^$[\]]/gu,String.raw`\$&`),de=(a,n="")=>a.map(e=>typeof e=="string"?e:e.text()).join(n),Js={lt:"<",gt:">",lbrack:"[",rbrack:"]",lbrace:"{",rbrace:"}"},Wn=at(/&(?:#(\d+|x[\da-fA-F]+)|([lLgG][tT]|[lr]brac[ke]));/gu,(a,n,e)=>n?String.fromCodePoint(+((/^x/iu.test(n)?"0":"")+n)):Js[e.toLowerCase()]),Un=at(/\n/gu,String.raw`\n`),Ys={"&":"amp","<":"lt",">":"gt"},lt=at(/[&<>]/gu,a=>`&${Ys[a]};`),Ne=(a,n={})=>{let{pre:e="",post:t="",sep:r=""}=n;return e+a.map(i=>i.print()).join(r)+t}});var Dn=Xs((Qo,eo)=>{eo.exports={ext:[],html:[["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","tr","td","th","q","bdo"],["li","dt","dd"],["br","wbr","hr","meta","link"]],namespaces:{},nsid:{file:6,category:14},parserFunction:[{"#language":"language","#special":"special","#speciale":"speciale","#tag":"tag","#formatdate":"formatdate","#dateformat":"formatdate","#invoke":"invoke","#while":"while","#dowhile":"dowhile","#loop":"loop","#forargs":"forargs","#fornumargs":"fornumargs","#if":"if","#ifeq":"ifeq","#switch":"switch","#ifexist":"ifexist","#ifexpr":"ifexpr","#iferror":"iferror","#time":"time","#timel":"timel","#expr":"expr","#rel2abs":"rel2abs","#titleparts":"titleparts","#categorytree":"categorytree","#urldecode":"urldecode","#choose":"choose","#var":"var","#varexists":"varexists","#var_final":"var_final","#vardefine":"vardefine","#vardefineecho":"vardefineecho","#widget":"widget","#regex":"regex","#related":"related","#cscore":"cscore"},["!","="],["msg","raw"],["subst","safesubst"]],doubleUnderscore:[[],[]],protocol:"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|matrix:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|worldwind://|xmpp:",interwiki:[],img:{},redirection:["#redirect"],variants:[]}});var Hn,Ce=b(()=>{"use strict";Hn=Dn()});var Ue,F,Q=b(()=>{"use strict";F=class{constructor(n,e){y(this,Ue);U(this,"token");U(this,"start");this.token=n,this.start=e}get top(){var n;return(n=c(this,Ue))!=null||A(this,Ue,this.getPosition()),c(this,Ue).top}get left(){var n;return(n=c(this,Ue))!=null||A(this,Ue,this.getPosition()),c(this,Ue).left}getPosition(){return this.token.getRootNode().posFromIndex(this.start)}};Ue=new WeakMap});var Vn,C,N,j=b(()=>{"use strict";Q();R();Vn=a=>(n,e,t,r,i="error")=>{let{start:s}=e,{top:o,left:l}="top"in e?e:new F(n,s),{offsetHeight:g,offsetWidth:p}=n,{startIndex:d,startLine:u,startCol:h}=a(n,s,o,l);return{rule:t,message:f.msg(r),severity:i,startIndex:d,endIndex:d+n.toString().length,startLine:u,endLine:u+g-1,startCol:h,endCol:g===1?h+p:p}},C=Vn((a,n,e,t)=>{let r=a.getRelativeIndex(),{top:i,left:s}=a.parentNode.posFromIndex(r);return{startIndex:n+r,startLine:e+i,startCol:i?s:t+s}}),N=Vn((a,n,e,t)=>({startIndex:n,startLine:e,startCol:t}))});var Xn,Qn,Pt,Bt,Gr,dt,Or=b(()=>{"use strict";Xn=a=>{let n=a.split(`
`),e=n.length;return{height:e,width:n[e-1].length}},Qn=(a,n)=>n.childNodes.slice(0,a).reduce((e,t,r)=>e+t.toString().length+n.getGaps(r),0)+n.getAttribute("padding"),dt=class{constructor(){y(this,Bt);U(this,"childNodes",[]);y(this,Pt)}get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes[this.childNodes.length-1]}get parentNode(){return c(this,Pt)}get nextSibling(){var e;let n=(e=this.parentNode)==null?void 0:e.childNodes;return n&&n[n.indexOf(this)+1]}get previousSibling(){var e;let n=(e=this.parentNode)==null?void 0:e.childNodes;return n&&n[n.indexOf(this)-1]}get offsetHeight(){return $(this,Bt,Gr).call(this).height}get offsetWidth(){return $(this,Bt,Gr).call(this).width}getAttribute(n){return n==="padding"?0:this[n]}setAttribute(n,e){n==="parentNode"?A(this,Pt,e):this[n]=e}getRootNode(){let{parentNode:n}=this;for(;n!=null&&n.parentNode;)({parentNode:n}=n);return n!=null?n:this}posFromIndex(n){let e=String(this);if(n>=-e.length&&n<=e.length){let{height:t,width:r}=Xn(e.slice(0,n));return{top:t-1,left:r}}}getGaps(n){return 0}getRelativeIndex(n){if(n===void 0){let{parentNode:e}=this;return e?Qn(e.childNodes.indexOf(this),e):0}return Qn(n,this)}getAbsoluteIndex(){let{parentNode:n}=this;return n?n.getAbsoluteIndex()+this.getRelativeIndex():0}seal(n,e){Object.defineProperty(this,n,{enumerable:!e&&!!this[n],configurable:!0})}};Pt=new WeakMap,Bt=new WeakSet,Gr=function(){return Xn(String(this))}});var ge,nr,zr,Mr,ir,Zn=b(()=>{"use strict";X();be();Or();ir=class extends dt{constructor(){super(...arguments);y(this,ge)}get length(){return this.childNodes.length}text(e){return de(this.childNodes,e)}normalize(){let e=[...this.childNodes],t=r=>{e.splice(r,1)};for(let r=e.length-1;r>=0;r--){let{type:i,data:s}=e[r];i!=="text"||this.getGaps(r-1)||s===""&&t(r)}this.setAttribute("childNodes",e)}removeAt(e){return Wr(this,e,1)[0]}insertAt(e,t=this.length){return Wr(this,t,0,[e]),e}closest(e){let t=$(this,ge,nr).call(this,e),{parentNode:r}=this;for(;r;){if(t(r))return r;({parentNode:r}=r)}}querySelector(e){let t=$(this,ge,nr).call(this,e);return $(this,ge,zr).call(this,t)}querySelectorAll(e){let t=$(this,ge,nr).call(this,e);return $(this,ge,Mr).call(this,t)}append(...e){for(let t of e)this.insertAt(t)}replaceChildren(...e){for(let t=this.length-1;t>=0;t--)this.removeAt(t);this.append(...e)}setText(e,t=0){t+=t<0?this.length:0;let r=this.childNodes[t],{data:i}=r;return r.replaceData(e),i}toString(e=""){return this.childNodes.map(String).join(e)}lint(e=this.getAbsoluteIndex(),t){let r=[];for(let i=0,s=e+this.getAttribute("padding");i<this.length;i++){let o=this.childNodes[i];r.push(...o.lint(s,t)),s+=o.toString().length+this.getGaps(i)}return r}print(e={}){var t;return this.toString()?`<span class="wpb-${(t=e.class)!=null?t:this.type}">${Ne(this.childNodes,e)}</span>`:""}json(e,t=this.getAbsoluteIndex()){let r={...this,type:this.type,range:[t,t+this.toString().length],childNodes:[]};for(let i=0,s=t+this.getAttribute("padding");i<this.length;i++){let o=this.childNodes[i],{length:l}=o.toString();r.childNodes.push(o.type==="text"?{data:o.data,range:[s,s+l]}:o.json(void 0,s)),s+=l+this.getGaps(i)}return r}};ge=new WeakSet,nr=function(e){let t=new Set(e.split(",").map(r=>r.trim()));return({type:r})=>t.has(r)},zr=function(e){var t;for(let r of this.childNodes){if(r.type==="text")continue;if(e(r))return r;let i=$(t=r,ge,zr).call(t,e);if(i)return i}},Mr=function(e){var r;let t=[];for(let i of this.childNodes)i.type!=="text"&&(e(i)&&t.push(i),t.push(...$(r=i,ge,Mr).call(r,e)));return t}});var Kn,to,ro,no,io,so,oo,sr,Jn,jt,Yn=b(()=>{"use strict";X();R();Or();Kn=String.raw`<\s*(?:/\s*)?([a-z]\w*)|\{+|\}+|\[{2,}|\[(?![^[]*?\])|((?:^|\])[^[]*?)\]+`,to=new RegExp(String.raw`${Kn}|https?[:/]/+`,"giu"),ro=new RegExp(Kn,"giu"),no=new RegExp(String.raw`^https?://${we}${Se}\.(?:gif|png|jpg|jpeg)$`,"iu"),io={"[":/[[\]]/u,"{":/[{}]/u,"]":/[[\]](?=[^[\]]*$)/u,"}":/[{}](?=[^{}]*$)/u},so={"<":"tag-like","[":"lonely-bracket","{":"lonely-bracket","]":"lonely-bracket","}":"lonely-bracket",h:"lonely-http"},oo=["html","head","style","title","body","a","audio","img","video","embed","iframe","object","canvas","script","col","colgroup","tbody","tfoot","thead","button","input","label","option","select","textarea"],jt=class extends dt{constructor(e){super();y(this,sr);U(this,"data","");Object.defineProperties(this,{childNodes:{enumerable:!1,configurable:!1},data:{value:e}})}get type(){return"text"}toString(){return this.data}text(){return this.data}lint(e=this.getAbsoluteIndex(),t){var P,q,V;let{data:r,parentNode:i,nextSibling:s,previousSibling:o}=this;if(!i)throw new Error("An isolated text node cannot be linted!");let{type:l,name:g,parentNode:p}=i,d=!1;if(l==="attr-value"){let{type:re,name:xe,tag:Pe}=p;if(re!=="ext-attr")d=!0;else if(Pe==="choose"&&(xe==="before"||xe==="after"))return[]}if(t!=null||(t=l==="free-ext-link"||l==="ext-link-url"||l==="image-parameter"&&g==="link"||d?ro:to),r.search(t)===-1)return[];t.lastIndex=0;let u=[],h=s==null?void 0:s.type,m=s==null?void 0:s.name,x=o==null?void 0:o.type,k=this.getRootNode(),{ext:E,html:w}=k.getAttribute("config"),{top:v,left:S}=k.posFromIndex(e),L=new Set(["onlyinclude","noinclude","includeonly",E,w,oo].flat(2));for(let re=t.exec(r);re;re=t.exec(r)){let[,xe,Pe]=re,{0:ie,index:W}=re;if(Pe&&Pe!=="]"){let{length:ne}=Pe;W+=ne,ie=ie.slice(ne)}let{0:I,length:Te}=ie;if(I==="<"&&!L.has(xe.toLowerCase())||I==="["&&l==="ext-link-text"&&(/&(?:rbrack|#93|#x5[Dd];);/u.test(r.slice(W+1))||h==="ext"&&m==="nowiki"&&((P=s.innerText)!=null&&P.includes("]"))))continue;if(I==="]"&&(W||Te>1))t.lastIndex--;else if(I==="h"&&W===0&&l==="ext-link-text"&&no.test(r))continue;let ve=e+W,Be=ve+Te,ee=k.toString(),Ae=ee[Be],it=ee[ve-1],Br=Te>1&&!(I==="<"&&!/[\s/>]/u.test(Ae!=null?Ae:"")||d&&(I==="["||I==="]"))||I==="{"&&(Ae===I||it==="-")||I==="}"&&(it===I||Ae==="-")||I==="["&&(Ae===I||l==="ext-link-text"||h==="free-ext-link"&&!r.slice(W+1).trim())||I==="]"&&(it===I||x==="free-ext-link"&&!r.slice(0,W).includes("]"))?"error":"warning",jr=I==="{"||I==="[";if(Br==="warning"&&(jr||(I==="]"||I==="}"))){let ne=io[I],qr=jr?r.slice(W+1):r.slice(0,W);if(I==="{"&&((q=ne.exec(qr))==null?void 0:q[0])==="}"||I==="}"&&((V=ne.exec(qr))==null?void 0:V[0])==="{")continue;if(!qr.includes(I)){let Pn=jr?"nextSibling":"previousSibling",We=this[Pn];for(;We&&(We.type!=="text"||!ne.test(We.data));)We=We[Pn];if(We&&ne.exec(We.data)[0]!==I)continue}}let er=r.slice(0,W).split(`
`),Ln=er.length+v-1,Fn=er[er.length-1],Rn=er.length===1?S+Fn.length:Fn.length,Ft={rule:so[I],message:f.msg('lonely "$1"',I==="h"?ie:I),severity:Br,startIndex:ve,endIndex:Be,startLine:Ln,endLine:Ln,startCol:Rn,endCol:Rn+Te};if(I==="<")Ft.suggestions=[{desc:"escape",range:[ve,ve+1],text:"&lt;"}];else if(I==="h"&&!(l==="ext-link-text"||l==="link-text")&&/[\p{L}\d_]/u.test(it||""))Ft.suggestions=[{desc:"whitespace",range:[ve,ve],text:" "}];else if(I==="["&&l==="ext-link-text"){let ne=i.getAbsoluteIndex()+i.toString().length;Ft.suggestions=[{desc:"escape",range:[ne,ne+1],text:"&#93;"}]}else if(I==="]"&&x==="free-ext-link"&&Br==="error"){let ne=e-o.toString().length;Ft.fix={range:[ne,ne],text:"["}}u.push(Ft)}return u}replaceData(e){$(this,sr,Jn).call(this,e)}print(){return lt(this.data)}};sr=new WeakSet,Jn=function(e){this.setAttribute("data",e)}});var pe,De=b(()=>{"use strict";be();pe=a=>(n,e)=>{class t extends n{text(){return""}lint(i){return a?[]:super.lint(i)}}return or(t,n),t}});var qt,ue,gt=b(()=>{"use strict";B();ue=class extends T{constructor(e,t,r,i,s,o){super(e,i,s,o);y(this,qt);A(this,qt,r)}get type(){return c(this,qt)}lint(){return[]}};qt=new WeakMap});var pt,z,Ee=b(()=>{"use strict";B();z=class extends T{constructor(e,t,r,i,s){super(e,r,i,s);y(this,pt);A(this,pt,t)}get type(){return c(this,pt)}set type(e){A(this,pt,e)}};pt=new WeakMap});var He,ke,je,$e,Gt=b(()=>{"use strict";j();Q();Ce();R();B();Ee();$e=class extends T{constructor(e,t,r=f.getConfig(),i=[],s="|"){super(void 0,r,i,{});y(this,He,!0);y(this,ke);y(this,je);if(this.insertAt(new z(e,"link-target",r,i,{})),t!==void 0){let o=new T(t,r,i,{});o.type="link-text",o.setAttribute("stage",10),this.insertAt(o)}A(this,ke,s)}afterBuild(){A(this,je,this.getTitle()),c(this,ke).includes("\0")&&A(this,ke,this.buildFromStr(c(this,ke),0)),this.setAttribute("name",c(this,je).title),super.afterBuild()}setAttribute(e,t){e==="bracket"?A(this,He,t):e==="title"?A(this,je,t):super.setAttribute(e,t)}toString(){let e=super.toString(c(this,ke));return c(this,He)?`[[${e}]]`:e}text(){let e=super.text("|");return c(this,He)?`[[${e}]]`:e}getAttribute(e){return e==="title"?c(this,je):e==="padding"?2:super.getAttribute(e)}getGaps(e){return e===0?c(this,ke).length:1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{childNodes:[i,s],type:o}=this,{encoded:l,fragment:g}=c(this,je),p=new F(this,e);if(i.childNodes.some(({type:d})=>d==="template")&&r.push(C(i,p,"unknown-page","template in an internal link target","warning")),l&&r.push(C(i,p,"url-encoding","unnecessary URL encoding in an internal link")),o==="link"||o==="category"){let d=s==null?void 0:s.childNodes.find(u=>u.type==="text"&&u.data.includes("|"));if(d){let u=C(s,p,"pipe-like",'additional "|" in the link text',"warning");u.suggestions=[{desc:"escape",range:[u.startIndex+d.getRelativeIndex(),u.startIndex+d.getRelativeIndex()+d.data.length],text:d.data.replace(/\|/gu,"&#124;")}],r.push(u)}}if(o!=="link"&&o!=="redirect-target"&&g!==void 0){let d=C(i,p,"no-ignored","useless fragment"),u=i.childNodes.find(h=>h.type==="text"&&h.data.includes("#"));u&&(d.fix={range:[d.startIndex+u.getRelativeIndex()+u.data.indexOf("#"),d.endIndex],text:""}),r.push(d)}return r}getTitle(e){return this.normalizeTitle(this.firstChild.text(),0,e,!0,!0)}print(){return super.print(c(this,He)?{pre:"[[",post:"]]",sep:c(this,ke)}:{sep:c(this,ke)})}};He=new WeakMap,ke=new WeakMap,je=new WeakMap});var Y,qe=b(()=>{"use strict";B();Y=class extends T{get innerText(){return this.firstChild.data}constructor(n="",e,t){super(n,e,t)}}});var ei,Ur,ao,D,_e=b(()=>{"use strict";De();qe();ei=[pe(!0)];D=class extends(ao=Y){get type(){return"noinclude"}};Ur=se(ao),D=ae(Ur,0,"NoincludeToken",ei,D),oe(Ur,1,D)});var ar,ti=b(()=>{"use strict";j();R();Gt();_e();ar=class extends $e{get type(){return"redirect-target"}constructor(n,e,t=f.getConfig(),r=[]){super(n,void 0,t,r),e!==void 0&&this.insertAt(new D(e,t,r))}getTitle(){return this.normalizeTitle(this.firstChild.toString(),0,!0,!0)}text(){return`[[${this.firstChild.toString()}]]`}lint(n=this.getAbsoluteIndex()){let e=super.lint(n,/\]\]/u);if(this.length===2){let t=C(this.lastChild,{start:n},"no-ignored","useless link text");t.startIndex--,t.startCol--,t.fix={range:[t.startIndex,t.endIndex],text:""},e.push(t)}return e}}});var ri,Ge,ut,Dr,lo,Ve,ni=b(()=>{"use strict";De();R();B();gt();ti();ri=[pe()];Ve=class extends(lo=T){constructor(e,t,r,i,s,o=f.getConfig(),l=[]){super(void 0,o,l);y(this,Ge);y(this,ut);A(this,Ge,e),A(this,ut,s);let g=new RegExp(String.raw`^(?:${o.redirection.join("|")})\s*(?::\s*)?$`,"iu");this.append(new ue(t,g,"redirect-syntax",o,l,{}),new ar(r,i==null?void 0:i.slice(1),o,l))}get type(){return"redirect"}getAttribute(e){return e==="padding"?c(this,Ge).length:super.getAttribute(e)}toString(){return c(this,Ge)+super.toString()+c(this,ut)}lint(e=this.getAbsoluteIndex()){return this.lastChild.lint(e+c(this,Ge).length+this.firstChild.toString().length)}print(){return super.print({pre:c(this,Ge),post:c(this,ut)})}};Dr=se(lo),Ge=new WeakMap,ut=new WeakMap,Ve=ae(Dr,0,"RedirectToken",ri,Ve),oe(Dr,1,Ve)});var ii={};H(ii,{parseRedirect:()=>go});var go,si=b(()=>{"use strict";R();ni();go=(a,n,e)=>{let t=new RegExp(String.raw`^(\s*)((?:${n.redirection.join("|")})\s*(?::\s*)?)\[\[([^\n|\]]+)(\|.*?)?\]\](\s*)`,"iu"),r=t.exec(a);return r&&f.normalizeTitle(r[3],0,!1,n,!0,!0).valid?(a=`\0${e.length}c\x7F${a.slice(r[0].length)}`,new Ve(...r.slice(1),n,e),a):!1}});var lr,oi=b(()=>{"use strict";B();lr=class extends T{get type(){return"onlyinclude"}toString(){return`<onlyinclude>${super.toString()}</onlyinclude>`}getAttribute(n){return n==="padding"?13:n==="plain"||super.getAttribute(n)}print(){return super.print({pre:'<span class="wpb-ext">&lt;onlyinclude&gt;</span>',post:'<span class="wpb-ext">&lt;/onlyinclude&gt;</span>'})}}});var Oe,ct,Hr=b(()=>{"use strict";B();ct=class extends T{constructor(e,t,r,i,s,o=[]){super(void 0,s);y(this,Oe);U(this,"closed");U(this,"selfClosing");this.setAttribute("name",e.toLowerCase()),A(this,Oe,[e,i||e]),this.closed=i!=="",this.selfClosing=i===void 0,this.append(t,r);let l=typeof t=="string"?-1:o.indexOf(t);o.splice(l===-1?1/0:l,0,this)}get innerText(){return this.selfClosing?void 0:this.lastChild.text()}toString(){let{selfClosing:e,firstChild:t,lastChild:r}=this,[i,s]=c(this,Oe);return e?`<${i}${t.toString()}/>`:`<${i}${t.toString()}>${r.toString()}${this.closed?`</${s}>`:""}`}text(){let[e,t]=c(this,Oe);return this.selfClosing?`<${e}${this.firstChild.text()}/>`:`<${e}${super.text(">")}${this.closed?`</${t}>`:""}`}getAttribute(e){return e==="padding"?c(this,Oe)[0].length+1:super.getAttribute(e)}getGaps(){return 1}print(){let[e,t]=c(this,Oe);return super.print(this.selfClosing?{pre:`&lt;${e}`,post:"/&gt;"}:{pre:`&lt;${e}`,sep:"&gt;",post:this.closed?`&lt;/${t}&gt;`:""})}};Oe=new WeakMap});var ai,Vr,po,Xe,li=b(()=>{"use strict";j();De();R();Hr();ai=[pe()];Xe=class extends(po=ct){get type(){return"include"}constructor(n,e="",t,r,i,s){super(n,e,t!=null?t:"",t===void 0||r!=null?r:"",i,s)}lint(n=this.getAbsoluteIndex()){if(this.closed)return[];let e=N(this,{start:n},"unclosed-comment",f.msg("unclosed $1",`<${this.name}>`));return e.suggestions=[{desc:"close",range:[e.endIndex,e.endIndex],text:`</${this.name}>`}],[e]}};Vr=se(po),Xe=ae(Vr,0,"IncludeToken",ai,Xe),oe(Vr,1,Xe)});var uo,Z,di,gi,gr,Xr,pi,Ot,ci,hi,mi,ui,dr,co,ho,mo,zt,ht,K,ce,mt,fi=b(()=>{"use strict";j();Q();X();Ce();R();B();Ee();uo=new Set(["id","class","style","lang","dir","title","tabindex","aria-describedby","aria-flowto","aria-hidden","aria-label","aria-labelledby","aria-level","aria-owns","role","about","property","resource","datatype","typeof","itemid","itemprop","itemref","itemscope","itemtype"]),Z=new Set(["align"]),di=new Set(["cite"]),gi=new Set(["cite","datetime"]),gr=new Set(["width"]),Xr=new Set(["axis","align","bgcolor","height","width","valign"]),pi=new Set([...Xr,"abbr","headers","scope","rowspan","colspan"]),Ot=new Set(["type"]),ci=new Set(["summary","align","bgcolor","cellpadding","cellspacing","frame","rules","width"]),hi=new Set(["clear"]),mi=new Set(["bgcolor","align","valign"]),ui={div:Z,h1:Z,h2:Z,h3:Z,h4:Z,h5:Z,h6:Z,blockquote:di,q:di,p:Z,br:hi,pre:gr,ins:gi,del:gi,ul:Ot,ol:new Set(["type","start","reversed"]),li:new Set(["type","value"]),table:new Set([...ci,"border"]),caption:Z,tr:mi,td:pi,th:pi,img:new Set(["alt","src","width","height","srcset"]),font:new Set(["size","color","face"]),hr:gr,rt:new Set(["rbspan"]),data:new Set(["value"]),time:new Set(["datetime"]),meta:new Set(["itemprop","content"]),link:new Set(["itemprop","href","title"]),gallery:new Set(["mode","showfilename","caption","perrow","widths","heights","showthumbnails","type"]),poem:new Set(["compact","align"]),categorytree:new Set(["align","hideroot","onlyroot","depth","mode","hideprefix","namespaces","showcount","notranslations"]),combooption:new Set(["name","for","inline","align"])},dr=new Set,co={nowiki:dr,indicator:new Set(["name"]),langconvert:new Set(["from","to"]),ref:new Set(["group","name","extends","follow","dir"]),references:new Set(["group","responsive"]),charinsert:new Set(["label"]),choose:new Set(["uncached","before","after"]),option:new Set(["weight"]),imagemap:dr,inputbox:dr,templatestyles:new Set(["src","wrapper"]),dynamicpagelist:dr,poll:new Set(["id","show-results-before-voting"]),sm2:Ot,flashmp3:Ot,score:new Set(["line_width_inches","lang","override_midi","raw","note-language","override_audio","override_ogg","sound","vorbis"]),seo:new Set(["title","title_mode","title_separator","keywords","description","robots","google_bot","image","image_width","image_height","image_alt","type","site_name","locale","section","author","published_time","twitter_site"]),tab:new Set(["nested","name","index","class","block","inline","openname","closename","collapsed","dropdown","style","bgcolor","container","id","title"]),tabs:new Set(["plain","class","container","id","title","style"]),combobox:new Set(["placeholder","value","id","class","text","dropdown","style"])},ho=/expression|(?:accelerator|-o-link(?:-source)?|-o-replace)\s*:|(?:url|image(?:-set)?)\s*\(|attr\s*\([^)]+[\s,]url/u,mo={table:ci,td:new Set([...Xr,"scope"]),th:Xr,br:hi,caption:Z,div:Z,hr:gr,h1:Z,h2:Z,h3:Z,h4:Z,h5:Z,h6:Z,li:Ot,p:Z,pre:gr,tr:mi,ul:Ot},mt=class extends T{constructor(e,t,r,i="",s,o=[],l=f.getConfig(),g=[]){let p=new z(r,"attr-key",l,g,{}),d;if(r==="title"||t==="img"&&r==="alt")d=new T(s,l,g,{}),d.type="attr-value",d.setAttribute("stage",10);else if(t==="gallery"&&r==="caption"){let u={...l,excludes:[...l.excludes,"quote","extLink","magicLink","list"]};d=new T(s,u,g,{}),d.type="attr-value",d.setAttribute("stage",5)}else if(t==="choose"&&(r==="before"||r==="after")){let u={...l,excludes:[...l.excludes,"heading","html","table","hr","list"]};d=new T(s,u,g,{}),d.type="attr-value",d.setAttribute("stage",1)}else d=new z(s,"attr-value",l,g,{});super(void 0,l,g);y(this,zt);y(this,ht);y(this,K);y(this,ce);A(this,zt,e),this.append(p,d),A(this,K,i),A(this,ce,[...o]),A(this,ht,t),this.setAttribute("name",le(r).trim().toLowerCase())}get type(){return c(this,zt)}get tag(){return c(this,ht)}get balanced(){return!c(this,K)||c(this,ce)[0]===c(this,ce)[1]}afterBuild(){c(this,K).includes("\0")&&A(this,K,this.buildFromStr(c(this,K),0)),this.parentNode&&A(this,ht,this.parentNode.name),this.setAttribute("name",this.firstChild.text().trim().toLowerCase()),super.afterBuild()}toString(){let[e="",t=""]=c(this,ce);return c(this,K)?super.toString(c(this,K)+e)+t:this.firstChild.toString()}text(){return c(this,K)?`${super.text(`${c(this,K).trim()}"`)}"`:this.firstChild.text()}getGaps(){var e,t;return c(this,K)?c(this,K).length+((t=(e=c(this,ce)[0])==null?void 0:e.length)!=null?t:0):0}lint(e=this.getAbsoluteIndex(),t){var m,x;let r=super.lint(e,t),{balanced:i,firstChild:s,lastChild:o,type:l,name:g,tag:p}=this,d=this.getValue(),u=new F(this,e);if(!i){let k=C(o,u,"unclosed-quote",f.msg("unclosed $1","quotes"),"warning");k.startIndex--,k.startCol--;let E={range:[k.endIndex,k.endIndex],text:c(this,ce)[0]};o.childNodes.some(({type:w,data:v})=>w==="text"&&/\s/u.test(v))?k.suggestions=[{desc:"close",...E}]:k.fix=E,r.push(k)}let h=co[p];if(h&&!h.has(g)||(l==="ext-attr"?p in ui:!/\{\{[^{]+\}\}/u.test(g))&&!((m=ui[p])!=null&&m.has(g))&&!/^(?:xmlns:[\w:.-]+|data-[^:]*)$/u.test(g)&&(p==="meta"||p==="link"||!uo.has(g)))r.push(C(s,u,"illegal-attr","illegal attribute name"));else if((x=mo[p])!=null&&x.has(g))r.push(C(s,u,"obsolete-attr","obsolete attribute","warning"));else if(g==="style"&&typeof d=="string"&&ho.test(d))r.push(C(o,u,"insecure-style","insecure style"));else if(g==="tabindex"&&typeof d=="string"&&d.trim()!=="0"){let k=C(o,u,"illegal-attr","nonzero tabindex");k.suggestions=[{desc:"remove",range:[e,k.endIndex],text:""},{desc:"0 tabindex",range:[k.startIndex,k.endIndex],text:"0"}],r.push(k)}return r}getValue(){if(c(this,K)){let e=this.lastChild.text();return c(this,ce)[1]?e:e[c(this,ce)[0]?"trimEnd":"trim"]()}return this.type==="ext-attr"||""}print(){let[e="",t=""]=c(this,ce);return c(this,K)?super.print({sep:lt(c(this,K))+e,post:t}):super.print()}};zt=new WeakMap,ht=new WeakMap,K=new WeakMap,ce=new WeakMap});var pr,xi,fo,Mt,ze,ur=b(()=>{"use strict";j();Q();X();R();B();Ee();fi();pr=/([^\s/](?:(?!\0\d+~\x7F)[^\s/=])*)(?:((?:\s(?:\s|\0\d+c\x7F)*)?(?:=|\0\d+~\x7F)(?:\s|\0\d+c\x7F)*)(?:(["'])(.*?)(\3|$)|(\S*)))?/gsu,xi=a=>a.slice(0,-1),fo=a=>`${xi(a)}-dirty`,ze=class extends T{constructor(e,t,r,i=f.getConfig(),s=[]){super(void 0,i,s,{});y(this,Mt);if(A(this,Mt,t),this.setAttribute("name",r),e){pr.lastIndex=0;let o="",l=pr.exec(e),g=0,p=()=>{o&&(super.insertAt(new z(o,fo(t),i,s,{})),o="")};for(;l;){let{index:d,0:u,1:h,2:m,3:x,4:k,5:E,6:w}=l;if(o+=e.slice(g,d),/^(?:[\w:]|\0\d+[t!~{}+-]\x7F)(?:[\w:.-]|\0\d+[t!~{}+-]\x7F)*$/u.test(le(h).trim())){let v=k!=null?k:w,S=[x,E],L=new mt(xi(t),r,h,m,v,S,i,s);p(),super.insertAt(L)}else o+=u;({lastIndex:g}=pr),l=pr.exec(e)}o+=e.slice(g),p()}}get type(){return c(this,Mt)}afterBuild(){let{parentNode:e}=this;(e==null?void 0:e.type)==="td"&&e.subtype==="caption"&&this.setAttribute("name","caption"),super.afterBuild()}getAttrTokens(e){return this.childNodes.filter(t=>t instanceof mt&&(!e||t.name===e.toLowerCase().trim()))}getAttrToken(e){let t=this.getAttrTokens(e);return t[t.length-1]}getAttr(e){var t;return(t=this.getAttrToken(e))==null?void 0:t.getValue()}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{parentNode:i,length:s,childNodes:o}=this,l=new Map,g=new Set,p=new F(this,e);if((i==null?void 0:i.type)==="html"&&i.closing&&this.text().trim()){let d=N(this,p,"no-ignored","attributes of a closing tag");d.fix={range:[e,d.endIndex],text:""},r.push(d)}for(let d=0;d<s;d++){let u=o[d];if(u instanceof z&&u.text().trim()){let h=C(u,p,"no-ignored","containing invalid attribute");h.suggestions=[{desc:"remove",range:[h.startIndex,h.endIndex],text:" "}],r.push(h)}else if(u instanceof mt){let{name:h}=u;l.has(h)?(g.add(h),l.get(h).push(u)):h!=="class"&&l.set(h,[u])}}if(g.size>0)for(let d of g)r.push(...l.get(d).map(u=>C(u,p,"no-duplicate",f.msg("duplicated $1 attribute",d))));return r}print(){return this.toString()?`<span class="wpb-${this.type}">${this.childNodes.map(e=>e.print(e instanceof z?{class:"attr-dirty"}:void 0)).join("")}</span>`:""}};Mt=new WeakMap});var Ti={};H(Ti,{PreToken:()=>Qr});var Qr,bi=b(()=>{"use strict";Ce();R();B();_e();Qr=class extends T{get type(){return"ext-inner"}constructor(n,e=f.getConfig(),t=[]){if(n){let r="<nowiki>",i="</nowiki>",{length:s}=r,o=n.indexOf(r),l=n.indexOf(i,o+s),g="";for(;o!==-1&&l!==-1;)new D(r,e,t),new D(i,e,t),g+=`${n.slice(0,o)}\0${t.length-1}c\x7F${n.slice(o+s,l)}\0${t.length}c\x7F`,n=n.slice(l+s+1),o=n.indexOf(r),l=n.indexOf(i,o+s);n=g+n}super(n,e,t,{}),this.setAttribute("stage",10)}getAttribute(n){return n==="plain"||super.getAttribute(n)}lint(n=this.getAbsoluteIndex()){return super.lint(n,/<\s*\/\s*(pre)\b/giu)}}});var ki={};H(ki,{ParamTagToken:()=>Wt});var Wt,Zr=b(()=>{"use strict";j();Q();R();B();Ee();Wt=class extends T{get type(){return"ext-inner"}constructor(n,e=f.getConfig(),t=[],r={}){if(super(void 0,e,t,{}),n){let i=z;this.append(...n.split(`
`).map(s=>new i(s,"param-line",e,t,{})))}}toString(){return super.toString(`
`)}text(){return super.text(`
`)}getGaps(){return 1}lint(n=this.getAbsoluteIndex()){let e=new F(this,n);return this.childNodes.filter(t=>{let{childNodes:r}=t,i=r.findIndex(({type:o})=>o!=="text"),s=(i>=0?r.slice(0,i).map(String).join(""):t.toString()).trim();return s&&!(i>=0?/^[a-z]+(?:\[\])?\s*(?:=|$)/iu:/^[a-z]+(?:\[\])?\s*=/iu).test(s)}).map(t=>{let r=C(t,e,"no-ignored",f.msg("invalid parameter of <$1>",this.name));return r.suggestions=[{desc:"remove",range:[r.startIndex,r.endIndex],text:""}],r})}print(){return super.print({sep:`
`})}}});var Ut,ft,cr,xt,Kr=b(()=>{"use strict";j();Q();R();B();gt();xt=class extends T{constructor(e,t,r=f.getConfig(),i=[]){super(void 0,r,i);y(this,ft);y(this,Ut);A(this,Ut,e);let s=new T(t[0],r,i);s.type="heading-title",s.setAttribute("stage",2);let o=new ue(t[1],/^[^\S\n]*$/u,"heading-trail",r,i,{});this.append(s,o)}get type(){return"heading"}get level(){return c(this,Ut)}toString(){let e=c(this,ft,cr);return e+this.firstChild.toString()+e+this.lastChild.toString()}text(){let e=c(this,ft,cr);return e+this.firstChild.text()+e}getAttribute(e){return e==="padding"?this.level:super.getAttribute(e)}getGaps(){return this.level}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{firstChild:i,level:s}=this,o=i.toString(),l=i.childNodes.filter(u=>u.type==="quote"),g=l.filter(({bold:u})=>u),p=l.filter(({italic:u})=>u),d=new F(this,e);return this.level===1&&r.push(C(i,d,"h1","<h1>")),(o.startsWith("=")||o.endsWith("="))&&r.push(C(i,d,"unbalanced-header",f.msg("unbalanced $1 in a section header",'"="'))),this.closest("html-attrs, table-attrs")&&r.push(N(this,d,"parsing-order","section header in a HTML tag")),g.length%2&&r.push(C(g[g.length-1],{...d,start:e+s,left:d.left+s},"format-leakage",f.msg("unbalanced $1 in a section header","bold apostrophes"))),p.length%2&&r.push(C(p[p.length-1],{start:e+s},"format-leakage",f.msg("unbalanced $1 in a section header","italic apostrophes"))),r}print(){let e=c(this,ft,cr);return super.print({pre:e,sep:e})}json(){let e=super.json();return e.level=this.level,e}};Ut=new WeakMap,ft=new WeakSet,cr=function(){return"=".repeat(this.level)}});var xo,To,hr,yi=b(()=>{"use strict";X();j();R();B();xo=a=>a.text().replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),To=new RegExp(`https?://${we}${Se}$`,"iu"),hr=class extends T{get type(){return"parameter"}get anon(){return this.firstChild.length===0}constructor(n,e,t=f.getConfig(),r=[]){super(void 0,t,r);let i=new T(typeof n=="number"?void 0:n,t,r,{}),s=new T(e,t,r);i.type="parameter-key",s.type="parameter-value",s.setAttribute("stage",2),this.append(i,s)}afterBuild(){if(!this.anon){let{parentNode:n,firstChild:e}=this,t=xo(e);this.setAttribute("name",t),n&&n.getArgs(t,!1,!1).add(this)}super.afterBuild()}toString(){return this.anon?this.lastChild.toString():super.toString("=")}text(){return this.anon?this.lastChild.text():super.text("=")}getGaps(){return this.anon?0:1}lint(n=this.getAbsoluteIndex(),e){var s;let t=super.lint(n,e),{firstChild:r}=this,i=(s=To.exec(r.text()))==null?void 0:s[0];if(i&&new URL(i).search){let o=C(r,{start:n},"unescaped","unescaped query string in an anonymous parameter");o.startIndex=o.endIndex,o.startLine=o.endLine,o.startCol=o.endCol,o.endIndex++,o.endCol++,o.fix={range:[o.startIndex,o.endIndex],text:"{{=}}"},t.push(o)}return t}print(){return super.print({sep:this.anon?"":"="})}json(){let n=super.json();return n.anon=this.anon,n}}});var bo,Ht,Qe,Ze,Tt,vi,Ai,Dt,wi=b(()=>{"use strict";X();j();Q();be();Ce();R();B();yi();Ee();gt();bo=new Set(["pageid","articlepath","server","servername","scriptpath","stylepath"]),Dt=class extends T{constructor(e,t,r=f.getConfig(),i=[]){var u,h;super(void 0,r,i,{});y(this,Tt);U(this,"modifier","");y(this,Ht,"template");y(this,Qe,!1);y(this,Ze,new Map);let{parserFunction:[s,o]}=r,l=(u=/^(?:\s|\0\d+c\x7F)*\0\d+s\x7F/u.exec(e))==null?void 0:u[0];if(l)this.setAttribute("modifier",l),e=e.slice(l.length);else if(e.includes(":")){let[m,...x]=e.split(":"),[k]=/^(?:\s|\0\d+c\x7F)*/u.exec((h=x[0])!=null?h:"");this.setModifier(`${m}:${k}`)&&(e=x.join(":").slice(k.length))}let g=e.includes(":");if(g||t.length===0&&!c(this,Qe)){let[m,...x]=e.split(":"),k=le(m),E=k[x.length>0?"trimStart":"trim"](),w=E.toLowerCase(),v=s[w],S=o.includes(E);if(S||bo.has(v)||g&&v){this.setAttribute("name",v!=null?v:w),A(this,Ht,"magic-word");let P=new RegExp(String.raw`^\s*${E}\s*$`,S?"u":"iu"),q=new ue(m,P,"magic-word-name",r,i,{});if(super.insertAt(q),x.length>0&&t.unshift([x.join(":")]),this.name==="invoke")for(let V=0;V<2;V++){let re=t.shift();if(!re)break;let xe=new z(re.join("="),`invoke-${V?"function":"module"}`,r,i);super.insertAt(xe)}}}if(this.type==="template"){let m=le(e).trim();if(!this.normalizeTitle(m,10,!0).valid)throw i.pop(),new SyntaxError("Invalid template name");let x=new z(e,"template-name",r,i,{});super.insertAt(x)}let p=this.isTemplate(),d=1;for(let m=0;m<t.length;m++){let x=t[m];!p&&!(this.name==="switch"&&m>0)&&(x[0]=x.join("="),x.length=1),x.length===1&&(x.unshift(d),d++),this.insertAt(new hr(...x,r,i))}this.seal("modifier")}get type(){return c(this,Ht)}setModifier(e){let{parserFunction:[,,t,r]}=this.getAttribute("config"),i=le(e).trim();if(e&&!i.endsWith(":"))return!1;let s=i.slice(0,-1).toLowerCase(),o=t.includes(s),l=r.includes(s);return c(this,Qe)&&o||!c(this,Qe)&&(l||e==="")||(ye.running||this.length>1)&&(o||l||e==="")?(this.setAttribute("modifier",e),A(this,Qe,o),!!e):!1}isTemplate(){return this.type==="template"||this.name==="invoke"}afterBuild(){this.modifier.includes("\0")&&this.setAttribute("modifier",this.buildFromStr(this.modifier,0)),super.afterBuild()}toString(){return`{{${this.modifier}${this.type==="magic-word"?`${this.firstChild.toString()}${this.length===1?"":":"}${this.childNodes.slice(1).map(String).join("|")}`:super.toString("|")}}}`}text(){let{childNodes:e,length:t,firstChild:r,modifier:i,type:s,name:o}=this;return s==="magic-word"&&o==="vardefine"?"":`{{${i}${s==="magic-word"?r.text()+(t===1?"":":")+de(e.slice(1),"|"):super.text("|")}}}`}getAttribute(e){switch(e){case"padding":return this.modifier.length+2;default:return super.getAttribute(e)}}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{type:i,childNodes:s,length:o}=this,l=new F(this,e);if(!this.isTemplate())return r;let g=$(this,Tt,vi).call(this);if(g.fragment!==void 0){let d=s[i==="template"?0:1],u=C(d,l,"no-ignored","useless fragment"),h=d.childNodes.find(m=>m.type==="text"&&m.data.includes("#"));h&&(u.fix={range:[u.startIndex+h.getRelativeIndex()+h.data.indexOf("#"),u.endIndex],text:""}),r.push(u)}if(g.valid||r.push(C(s[1],l,"invalid-invoke","illegal module name")),i==="magic-word"&&o===2)return r.push(N(this,l,"invalid-invoke","missing module function")),r;let p=this.getDuplicatedArgs().filter(([,d])=>!d[0].querySelector("ext"));return p.length>0&&r.push(...p.flatMap(([,d])=>d).map(d=>C(d,l,"no-duplicate","duplicated parameter"))),r}insertAt(e,t=this.length){return super.insertAt(e,t),e.anon?$(this,Tt,Ai).call(this,e):e.name&&this.getArgs(e.name,!1,!1).add(e),e}getAllArgs(){return this.childNodes.filter(Ke("parameter"))}getAnonArgs(){return this.getAllArgs().filter(({anon:e})=>e)}getArgs(e,t,r=!0){let i=String(e).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),s;return c(this,Ze).has(i)?s=c(this,Ze).get(i):(s=new Set(this.getAllArgs().filter(({name:o})=>i===o)),c(this,Ze).set(i,s)),s}getDuplicatedArgs(){return[...c(this,Ze)].filter(([,{size:e}])=>e>1).map(([e,t])=>[e,[...t]])}getPossibleValues(){let{type:e,name:t,childNodes:r}=this;if(e==="template")throw new Error("TranscludeToken.getPossibleValues method is only for specific magic words!");let i;switch(t){case"if":case"ifexist":case"ifexpr":case"iferror":i=2;break;case"ifeq":i=3;break;default:throw new Error("TranscludeToken.getPossibleValues method is only for specific magic words!")}let s=r.slice(i,i+2).map(({childNodes:[,o]})=>o);for(let o=0;o<s.length;){let{length:l,0:g}=s[o].childNodes.filter(p=>p.text().trim());if(l===0)s.splice(o,1);else if(l>1||g.type!=="magic-word")o++;else try{let p=g.getPossibleValues();s.splice(o,1,...p),o+=p.length}catch(p){o++}}return s}print(){let{childNodes:e,length:t,firstChild:r,modifier:i,type:s}=this;return`<span class="wpb-${s}">{{${lt(i)}${s==="magic-word"?r.print()+(t===1?"":":")+Ne(e.slice(1),{sep:"|"}):Ne(e,{sep:"|"})}}}</span>`}};Ht=new WeakMap,Qe=new WeakMap,Ze=new WeakMap,Tt=new WeakSet,vi=function(){let e=this.type==="template",t=this.childNodes[e?0:1];return this.normalizeTitle(t.text(),e?10:828)},Ai=function(e){let t=this.getAnonArgs(),r=typeof e!="number";for(let i=r?t.indexOf(e):e-1;i<t.length;i++){let s=t[i],{name:o}=s,l=String(i+1);o!==l&&(s.setAttribute("name",l),this.getArgs(l,!1,!1).add(s))}}});var Si,Jr,ko,Je,Ci=b(()=>{"use strict";De();B();Si=[pe(!0)];Je=class extends(ko=T){get type(){return"hidden"}};Jr=se(ko),Je=ae(Jr,0,"HiddenToken",Si,Je),oe(Jr,1,Je)});var mr,$i=b(()=>{"use strict";X();j();Q();R();B();Ee();Ci();mr=class extends T{get type(){return"arg"}get default(){var n,e;return(e=(n=this.childNodes[1])==null?void 0:n.text())!=null?e:!1}constructor(n,e=f.getConfig(),t=[]){super(void 0,e,t,{});for(let r=0;r<n.length;r++)if(r===0){let i=new z(n[r],"arg-name",e,t,{});super.insertAt(i)}else if(r>1){let i=new Je(n[r],e,t);super.insertAt(i)}else{let i=new T(n[r],e,t);i.type="arg-default",i.setAttribute("stage",2),super.insertAt(i)}}toString(){return`{{{${super.toString("|")}}}}`}text(){return`{{{${de(this.childNodes.slice(0,2),"|")}}}}`}getAttribute(n){return n==="padding"?3:super.getAttribute(n)}getGaps(){return 1}lint(n=this.getAbsoluteIndex(),e){let{childNodes:[t,r,...i]}=this;if(!this.getAttribute("include")){let o=N(this,{start:n},"no-arg","unexpected template argument");return r&&(o.fix={range:[n,o.endIndex],text:r.text()}),[o]}let s=t.lint(n+3,e);if(r&&s.push(...r.lint(n+4+t.toString().length,e)),i.length>0){let o=new F(this,n);s.push(...i.map(l=>{let g=C(l,o,"no-ignored","invisible content inside triple braces");return g.startIndex--,g.startCol--,g.suggestions=[{desc:"remove",range:[g.startIndex,g.endIndex],text:""},{desc:"escape",range:[g.startIndex,g.startIndex+1],text:"{{!}}"}],g}))}return s}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}json(){let n=super.json();return n.default=this.default,n}}});var Ni={};H(Ni,{parseBraces:()=>Yr});var yo,fr,vo,Yr,en=b(()=>{"use strict";X();Kr();wi();$i();yo={"=":`
`,"{":String.raw`\}{2,}|\|`,"-":String.raw`\}-`,"[":String.raw`\]\]`},fr=new Map([["!","!"],["!!","+"],["(!","{"],["!)","}"],["!-","-"],["=","~"]]),vo=new RegExp(String.raw`\{\{\s*(${[...fr.keys()].map(rr).join("|")})\s*\}\}(?!\})`,"gu"),Yr=(a,n,e)=>{var u,h,m,x,k,E;let t=String.raw`${(u=n.excludes)!=null&&u.includes("heading")?"":String.raw`^(\0\d+c\x7F)*={1,6}|`}\[\[|-\{(?!\{)`,r=String.raw`|\{{2,}`,{parserFunction:[,,,i]}=n,s=[];a=a.replace(vo,(w,v)=>(new Dt(w.slice(2,-2),[],n,e),`\0${e.length-2}${fr.get(v)}\x7F`));let o=a.lastIndexOf("}}")-a.length,l=o+a.length!==-1,g=new RegExp(t+(l?r:""),"gmu"),p=g.exec(a),d;for(;p||d!==void 0&&d<=a.length&&((m=(h=s[s.length-1])==null?void 0:h[0])!=null&&m.startsWith("="));){if(p!=null&&p[1]){let[,{length:W}]=p;p[0]=p[0].slice(W),p.index+=W}let{0:w,index:v}=p!=null?p:{0:`
`,index:a.length},S=(x=s.pop())!=null?x:{},{0:L,index:P,parts:q,findEqual:V,pos:re}=S,xe=w==="="&&V,Pe=W=>{q[q.length-1].push(W.slice(re,v))};if(w==="]]"||w==="}-")d=v+2;else if(w===`
`){d=v+1;let{pos:W,findEqual:I}=(k=s[s.length-1])!=null?k:{};if(W===void 0||I||le(a.slice(W,P))!==""){let Te=/^(={1,6})(.+)\1((?:\s|\0\d+c\x7F)*)$/u.exec(a.slice(P,v));Te&&(a=`${a.slice(0,P)}\0${e.length}h\x7F${a.slice(v)}`,d=P+4+String(e.length).length,new xt(Te[1].length,Te.slice(2),n,e))}}else if(w==="|"||xe)d=v+1,Pe(a),w==="|"&&q.push([]),S.pos=d,S.findEqual=w==="|",s.push(S);else if(w.startsWith("}}")){let W=w.slice(0,Math.min(L.length,3)),I=L.length-W.length,{length:Te}=e;d=v+W.length,Pe(a);let ve=!1,Be="t";if(W.length===3){let ee=q.map(it=>it.join("=")),Ae=ee.length>1&&le(ee[1]).trim();new mr(ee,n,e),Ae&&Ae.endsWith(":")&&i.includes(Ae.slice(0,-1).toLowerCase())&&(Be="s")}else try{new Dt(q[0][0],q.slice(1),n,e);let ee=le(q[0][0]).trim();fr.has(ee)?Be=fr.get(ee):/^(?:filepath|(?:full|canonical)urle?):.|^server$/iu.test(ee)?Be="m":/^#vardefine:./iu.test(ee)&&(Be="c")}catch(ee){if(ee instanceof SyntaxError&&ee.message==="Invalid template name")ve=!0;else throw ee}ve||(a=`${a.slice(0,P+I)}\0${Te}${Be}\x7F${a.slice(d)}`,d=P+I+3+String(Te).length,I>1?s.push({0:L.slice(0,I),index:P,pos:P+I,parts:[[]]}):I===1&&a[P-1]==="-"&&s.push({0:"-{",index:P-1,pos:P+1,parts:[[]]}))}else d=v+w.length,w.startsWith("{")&&(p.pos=d,p.parts=[[]]),s.push(..."0"in S?[S]:[],p);let ie=s[s.length-1];if(l&&o+a.length<d)for(l=!1;(E=ie==null?void 0:ie[0])!=null&&E.startsWith("{");)s.pop(),ie=s[s.length-1];g=new RegExp(t+(l?r:"")+(ie?`|${yo[ie[0][0]]}${ie.findEqual?"|=":""}`:""),"gmu"),g.lastIndex=d,p=g.exec(a)}return a}});var Ei={};H(Ei,{InputboxToken:()=>tn});var tn,Ii=b(()=>{"use strict";en();R();Zr();tn=class extends Wt{constructor(n,e=f.getConfig(),t=[]){let r=Symbol("InputboxToken"),{length:i}=t;t.push(r),n&&(n=Yr(n,e,t)),t.splice(i,1),super(n,e,t,{})}}});var Li,rn,Ao,Ie,nn=b(()=>{"use strict";j();De();R();qe();Li=[pe()];Ie=class extends(Ao=Y){constructor(e,t=!0,r,i){super(e,r,i);U(this,"closed");this.closed=t}get type(){return"comment"}getAttribute(e){return e==="padding"?4:super.getAttribute(e)}lint(e=this.getAbsoluteIndex()){if(this.closed)return[];let t=N(this,{start:e},"unclosed-comment",f.msg("unclosed $1","HTML comment"));return t.fix={range:[t.endIndex,t.endIndex],text:"-->"},[t]}toString(){return`<!--${this.innerText}${this.closed?"-->":""}`}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}};rn=se(Ao),Ie=ae(rn,0,"CommentToken",Li,Ie),oe(rn,1,Ie)});var xr={};H(xr,{NestedToken:()=>sn});var sn,Tr=b(()=>{"use strict";j();Q();R();B();on();_e();nn();sn=class extends T{get type(){return"ext-inner"}constructor(n,e,t,r=f.getConfig(),i=[]){n=n==null?void 0:n.replace(e,(s,o,l,g,p)=>{let d=`\0${i.length+1}${o?"e":"c"}\x7F`;if(o)new bt(o,l,g,p,r,i);else{let u=s.endsWith("-->");new Ie(s.slice(4,u?-3:void 0),u,r,i)}return d}).replace(/(^|\0\d+[ce]\x7F)([^\0]+)(?=$|\0\d+[ce]\x7F)/gu,(s,o,l)=>(new D(l,r,i),`${o}\0${i.length}c\x7F`)),super(n,r,i,{})}lint(n=this.getAbsoluteIndex(),e){let t=new F(this,n);return[...super.lint(n,e),...this.childNodes.filter(r=>{if(r.type==="ext"||r.type==="comment")return!1;let i=r.toString().trim();return i&&!/^<!--.*-->$/su.test(i)}).map(r=>{let i=C(r,t,"no-ignored",f.msg("invalid content in <$1>",this.name));return i.suggestions=[{desc:"remove",range:[i.startIndex,i.endIndex],text:""},{desc:"comment",range:[i.startIndex,i.startIndex],text:`<!--${r.toString()}-->`}],i})]}}});function Fi(a,n,e,t,r){n=n.trim();let i=n.replace(/\0\d+t\x7F/gu,"").trim();switch(a){case"width":return!i||/^(?:\d+x?|\d*x\d+)(?:\s*px)?$/u.test(i);case"link":{if(!i||new RegExp(String.raw`^(?:(?:${e.protocol}|//)${we}|\0\d+m\x7F)${Se}$`,"iu").test(i))return n;i.startsWith("[[")&&i.endsWith("]]")&&(i=i.slice(2,-2));let o=f.normalizeTitle(i,0,!1,e,t,!0,!0);return o.valid&&o}case"lang":return(r==="svg"||r==="svgz")&&!/[^a-z\d-]/u.test(i);case"alt":case"class":case"manualthumb":return!0;case"page":return(r==="djvu"||r==="djv"||r==="pdf")&&Number(i)>0;default:return!!i&&!isNaN(i)}}var wo,te,kr,Ri,br,Pi=b(()=>{"use strict";X();j();R();B();wo=new Set(["alt","link","lang","page","caption"]);br=class extends T{constructor(e,t,r=f.getConfig(),i){var n=(...zd)=>(super(...zd),y(this,kr),y(this,te,""),this);var g;let s,o=Object.entries(r.img).map(([p,d])=>[p,d,new RegExp(String.raw`^(\s*(?!\s))${p.replace("$1","(.*)")}${p.endsWith("$1")?`(?=$|
)`:""}(\s*)$`,"u")]),l=o.find(([,p,d])=>(s=d.exec(e),s&&(s.length!==4||Fi(p,s[2],r,!0,t)!==!1)));if(l&&s){s.length===3?(n(void 0,r,i),A(this,te,e)):(n(s[2],r,i,{}),A(this,te,s[1]+l[0]+s[3])),this.setAttribute("name",l[1]);return}n(e,{...r,excludes:[...(g=r.excludes)!=null?g:[],"list"]},i),this.setAttribute("name","caption"),this.setAttribute("stage",7)}get type(){return"image-parameter"}get link(){return this.name==="link"?Fi("link",super.text(),this.getAttribute("config")):void 0}afterBuild(){var e;((e=this.parentNode)==null?void 0:e.type)==="gallery-image"&&!wo.has(this.name)&&this.setAttribute("name","invalid"),super.afterBuild()}toString(){return c(this,te)?c(this,te).replace("$1",super.toString()):super.toString()}text(){return c(this,te)?c(this,te).replace("$1",super.text()).trim():super.text().trim()}getAttribute(e){return e==="plain"?this.name==="caption":e==="padding"?Math.max(0,c(this,te).indexOf("$1")):super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{link:i,name:s}=this;if(s==="invalid"){let o=N(this,{start:e},"invalid-gallery","invalid gallery image parameter");o.fix={range:[e,e+o.endIndex],text:""},r.push(o)}else typeof i=="object"&&i.encoded&&r.push(N(this,{start:e},"url-encoding","unnecessary URL encoding in an internal link"));return r}getValue(){return this.name==="invalid"?this.text():$(this,kr,Ri).call(this)||super.text()}print(){return c(this,te)?`<span class="wpb-image-parameter">${c(this,te).replace("$1",`<span class="wpb-image-caption">${Ne(this.childNodes)}</span>`)}</span>`:super.print({class:"image-caption"})}};te=new WeakMap,kr=new WeakSet,Ri=function(){return c(this,te)&&!c(this,te).includes("$1")}});var an,ln,dn,So,kt,yr,yt,gn=b(()=>{"use strict";X();j();Q();R();Gt();Pi();an=new Set(["manualthumb","frameless","framed","thumbnail"]),ln=new Set(["left","right","center","none"]),dn=new Set(["baseline","sub","super","top","text-top","middle","bottom","text-bottom"]),So=(a,n,e,t)=>{if(t===void 0)return[];let r=new RegExp(`${[a,n,e].map(rr).join("|")}`,"gu"),i=[],s=r.exec(t),o=0,l=0;for(;s;){let{0:g,index:p}=s;g!==e?o+=g===a?1:-1:o===0&&(i.push(t.slice(l,p)),{lastIndex:l}=r),s=r.exec(t)}return i.push(t.slice(l)),i},yt=class extends $e{constructor(e,t,r=f.getConfig(),i=[],s="|"){super(e,void 0,r,i,s);y(this,kt);let{extension:o}=this.getTitle(!0);this.append(...So("-{","}-","|",t).map(l=>new br(l,o,r,i)))}get type(){return"file"}get extension(){return this.getTitle().extension}lint(e=this.getAbsoluteIndex(),t){var u;let r=super.lint(e,t),i=this.getAllArgs().filter(({childNodes:h})=>{let m=h.filter(x=>x.text().trim());return m.length!==1||m[0].type!=="arg"}),s=[...new Set(i.map(({name:h})=>h))].filter(h=>h!=="invalid"),o=s.filter(h=>an.has(h)),l=s.filter(h=>ln.has(h)),g=s.filter(h=>dn.has(h)),p=new F(this,e);if(this.closest("ext-link-text")&&((u=this.getValue("link"))==null?void 0:u.trim())!==""&&r.push(N(this,p,"nested-link","internal link in an external link")),i.length===s.length&&o.length<2&&l.length<2&&g.length<2)return r;let d=(h,m)=>x=>C(x,p,"no-duplicate",f.msg(`${h} image $1 parameter`,m));for(let h of s){let m=i.filter(({name:x})=>x===h);h==="caption"&&(m=[...m.slice(0,-1).filter(x=>x.text()),...m.slice(-1)]),m.length>1&&r.push(...m.map(d("duplicated",h)))}return o.length>1&&r.push(...i.filter(({name:h})=>an.has(h)).map(d("conflicting","frame"))),l.length>1&&r.push(...i.filter(({name:h})=>ln.has(h)).map(d("conflicting","horizontal-alignment"))),g.length>1&&r.push(...i.filter(({name:h})=>dn.has(h)).map(d("conflicting","vertical-alignment"))),r}getAllArgs(){return this.childNodes.slice(1)}getArgs(e){return this.getAllArgs().filter(({name:t})=>e===t)}getFrameArgs(){return $(this,kt,yr).call(this,an,"frame")}getHorizAlignArgs(){return $(this,kt,yr).call(this,ln,"horizontal-align")}getVertAlignArgs(){return $(this,kt,yr).call(this,dn,"vertical-align")}getArg(e){let t=this.getArgs(e);return t[t.length-1]}getValue(e){var t;return(t=this.getArg(e))==null?void 0:t.getValue()}};kt=new WeakSet,yr=function(e,t){return this.getAllArgs().filter(({name:i})=>e.has(i))}});var vr,Bi,vt,pn=b(()=>{"use strict";j();Ce();R();B();gn();vt=class extends yt{constructor(e,t,r,i=f.getConfig(),s=[]){let o;if(r!==void 0){let{length:l}=s;o=new T(r,i,s);for(let g=1;g<11;g++)o.parseOnce();s.splice(l,1)}super(t,o==null?void 0:o.toString(),i,s);y(this,vr);U(this,"privateType","imagemap-image");this.setAttribute("bracket",!1),this.privateType=`${e}-image`,this.seal("privateType",!0)}get type(){return this.privateType}getTitle(){let e=this.type==="imagemap-image";return this.normalizeTitle(this.firstChild.toString(),e?0:6,!0,!e)}getAttribute(e){return e==="padding"?0:super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{ns:i,interwiki:s}=this.getAttribute("title");return(s||i!==6)&&r.push(N(this,{start:e},"invalid-gallery","invalid gallery image")),r}afterBuild(){$(this,vr,Bi).call(this,this.getTitle()),super.afterBuild()}};vr=new WeakSet,Bi=function(e){this.setAttribute("title",e)}});var qi={};H(qi,{GalleryToken:()=>un});var Ar,ji,un,_i=b(()=>{"use strict";R();B();pn();_e();un=class extends T{constructor(e,t=f.getConfig(),r=[]){var i;super(void 0,t,r,{});y(this,Ar);for(let s of(i=e==null?void 0:e.split(`
`))!=null?i:[]){let o=/^([^|]+)(?:\|(.*))?/u.exec(s);if(!o){super.insertAt(s.trim()?new D(s,t):s);continue}let[,l,g]=o;$(this,Ar,ji).call(this,l)?super.insertAt(new vt("gallery",l,g,t,r)):super.insertAt(new D(s,t))}}get type(){return"ext-inner"}toString(){return super.toString(`
`)}text(){return super.text(`
`).replace(/\n\s*\n/gu,`
`)}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let{top:r,left:i}=this.getRootNode().posFromIndex(e),s=[];for(let o=0;o<this.length;o++){let l=this.childNodes[o],g=l.toString(),{length:p}=g,d=g.trim(),u=r+o,h=o?0:i;l.type==="noinclude"&&d&&!/^<!--.*-->$/u.test(d)?s.push({rule:"no-ignored",message:f.msg("invalid content in <$1>","gallery"),severity:d.startsWith("|")?"warning":"error",startIndex:e,endIndex:e+p,startLine:u,endLine:u,startCol:h,endCol:h+p,suggestions:[{desc:"remove",range:[e,e+p],text:""},{desc:"comment",range:[e,e+p],text:`<!--${g}-->`}]}):l.type!=="noinclude"&&l.type!=="text"&&s.push(...l.lint(e,t)),e+=p+1}return s}print(){return super.print({sep:`
`})}};Ar=new WeakSet,ji=function(e){return this.normalizeTitle(e,6,!0,!0).valid}});var At,cn=b(()=>{"use strict";j();Gt();At=class extends $e{get type(){return"link"}lint(n=this.getAbsoluteIndex(),e){let t=super.lint(n,e);return this.closest("ext-link-text")&&t.push(N(this,{start:n},"nested-link","internal link in an external link")),t}}});var Co,$o,Vt,Le,wr=b(()=>{"use strict";j();Q();X();R();B();Co=String.raw`(?:[\p{Zs}\t]|&nbsp;|&#0*160;|&#[xX]0*[aA]0;)`,$o=new RegExp(`${Co}+`,"gu"),Le=class extends T{constructor(e,t="free-ext-link",r=f.getConfig(),i){super(e,r,i,{});y(this,Vt);A(this,Vt,t)}get type(){return c(this,Vt)}get link(){let e={"!":"|","=":"="},t=de(this.childNodes.map(r=>{let{type:i,name:s}=r;return i==="magic-word"&&String(s)in e?e[s]:r}));return this.type==="magic-link"&&(t=t.replace($o," "),t.startsWith("ISBN")&&(t=`ISBN ${t.slice(5).replace(/[- ]/gu,"").replace(/x$/u,"X")}`)),t}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),i=new F(this,e);if(this.type==="magic-link"){let{link:g}=this;if(g.startsWith("ISBN")){let p=[...g.slice(5)].map(d=>d==="X"?10:Number(d));(p.length===10&&p.reduce((d,u,h)=>d+u*(10-h),0)%11||p.length===13&&(p[12]===10||p.reduce((d,u,h)=>d+u*(h%2?3:1),0)%10))&&r.push(N(this,i,"invalid-isbn","invalid ISBN"))}return r}let s=`[\uFF0C\uFF1B\u3002\uFF1A\uFF01\uFF1F\uFF08\uFF09]+${this.type==="ext-link-url"?String.raw`|\|+`:""}`,o=new RegExp(s,"u"),l=new RegExp(s,"gu");for(let g of this.childNodes){let{type:p,data:d}=g;if(p!=="text"||!o.test(d))continue;let u=C(g,i,"unterminated-url","","warning");l.lastIndex=0;for(let h=l.exec(d);h;h=l.exec(d)){let{index:m,0:x}=h,k=d.slice(0,m).split(`
`),E=k.length,w=k[E-1].length,v=u.startIndex+m,S=u.startLine+E-1,L=E===1?u.startCol+w:w,P=x.startsWith("|"),q={...u,message:f.msg("$1 in URL",P?'"|"':"full-width punctuation"),startIndex:v,endIndex:v+x.length,startLine:S,endLine:S,startCol:L,endCol:L+x.length};P?x.length===1&&(q.suggestions=[{desc:"whitespace",range:[v,v+1],text:" "}]):q.suggestions=[{desc:"whitespace",range:[v,v],text:" "},{desc:"escape",range:[v,q.endIndex],text:encodeURI(x)}],r.push(q)}}return r}};Vt=new WeakMap});var Fe,wt,hn=b(()=>{"use strict";Ce();j();R();B();wr();wt=class extends T{constructor(e,t="",r="",i=f.getConfig(),s=[]){super(void 0,i,s,{});y(this,Fe);let o=e&&/\0\d+f\x7F/u.test(e)?s[Number(e.slice(1,-2))]:new Le(e,"ext-link-url",i,s);if(this.insertAt(o),A(this,Fe,t),r){let l=new T(r,i,s,{});l.type="ext-link-text",l.setAttribute("stage",10),this.insertAt(l)}}get type(){return"ext-link"}toString(){return this.length===1?`[${super.toString()}${c(this,Fe)}]`:`[${super.toString(c(this,Fe))}]`}text(){return`[${super.text(" ")}]`}getAttribute(e){return e==="padding"?1:super.getAttribute(e)}getGaps(){return c(this,Fe).length}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t);return this.length===1&&this.closest("heading-title")&&r.push(N(this,{start:e},"var-anchor","variable anchor in a section header")),r}print(){return super.print(this.length===1?{pre:"[",post:`${c(this,Fe)}]`}:{pre:"[",sep:c(this,Fe),post:"]"})}};Fe=new WeakMap});var Xt,Gi=b(()=>{"use strict";R();B();_e();cn();hn();Xt=class extends T{get type(){return"imagemap-link"}constructor(n,e,t,r=f.getConfig(),i=[]){super(void 0,r,i),this.append(n,e.length===2?new At(...e,r,i):new wt(...e,r,i),new D(t,r,i))}}});var Oi={};H(Oi,{ImagemapToken:()=>mn});var mn,zi=b(()=>{"use strict";j();Q();be();R();B();_e();pn();Gi();mn=class extends T{get type(){return"ext-inner"}get image(){return this.childNodes.find(Ke("imagemap-image"))}constructor(n,e=f.getConfig(),t=[]){if(super(void 0,e,t,{}),!n)return;let r=n.split(`
`),i=new Set(e.protocol.split("|")),s=D,o=!0,l=!1;for(let g of r){let p=g.trim();if(!(l||!p||p.startsWith("#"))){if(o){let[d,...u]=g.split("|"),h=this.normalizeTitle(d,0,!0);if(h.valid&&!h.interwiki&&h.ns===6){let m=new vt("imagemap",d,u.length>0?u.join("|"):void 0,e,t);super.insertAt(m),o=!1;continue}else l=!0}else if(g.trim().split(/[\t ]/u)[0]==="desc"){super.insertAt(g);continue}else if(g.includes("[")){let d=g.indexOf("["),u=g.slice(d),h=/^\[\[([^|]+)(?:\|([^\]]+))?\]\][\w\s]*$/u.exec(u);if(h){if(this.normalizeTitle(h[1],0,!0,!1,!0).valid){super.insertAt(new Xt(g.slice(0,d),h.slice(1),u.slice(u.indexOf("]]")+2),e,t));continue}}else if(i.has(u.slice(1,u.indexOf(":")+1))||i.has(u.slice(1,u.indexOf("//")+2))){let m=/^\[([^\]\s]+)(?:(\s+(?!\s))([^\]]*))?\][\w\s]*$/u.exec(u);if(m){super.insertAt(new Xt(g.slice(0,d),m.slice(1),u.slice(u.indexOf("]")+1),e,t));continue}}}}super.insertAt(new s(g,e,t))}}toString(){return super.toString(`
`)}text(){return super.text(`
`).replace(/\n{2,}/gu,`
`)}getGaps(){return 1}lint(n=this.getAbsoluteIndex(),e){let t=super.lint(n,e),r=new F(this,n);return this.image?t.push(...this.childNodes.filter(i=>{let s=i.toString().trim();return i.type==="noinclude"&&s&&!s.startsWith("#")}).map(i=>C(i,r,"invalid-imagemap","invalid link in <imagemap>"))):t.push(N(this,r,"invalid-imagemap","<imagemap> without an image")),t}print(){return super.print({sep:`
`})}}});var Mi={};H(Mi,{NowikiToken:()=>fn});var fn,Wi=b(()=>{"use strict";j();R();qe();fn=class extends Y{get type(){return"ext-inner"}lint(n=this.getAbsoluteIndex()){let{name:e,firstChild:{data:t}}=this;if((e==="templatestyles"||e==="section")&&t){let r=N(this,{start:n},"void-ext",f.msg("nothing should be in <$1>",e));return r.fix={range:[n-1,r.endIndex+e.length+3],text:"/>"},[r]}return super.lint(n,new RegExp(String.raw`<\s*(?:/\s*)${e==="nowiki"?"":"?"}(${e})\b`,"giu"))}}});var Ui,bt,on=b(()=>{"use strict";j();Q();R();B();Hr();ur();Ui=(a,n)=>{let e=new Set(a);return e.delete(n),[...e]},bt=class extends ct{get type(){return"ext"}constructor(n,e,t,r,i=f.getConfig(),s=[]){var d;let o=n.toLowerCase(),l=new ze(!e||e.trimStart()!==e?e:` ${e}`,"ext-attrs",o,i,s),g={...i,ext:Ui(i.ext,o),excludes:[...(d=i.excludes)!=null?d:[]]},p;switch(g.inExt=!0,o){case"tab":g.ext=Ui(g.ext,"tabs");case"indicator":case"poem":case"ref":case"option":case"combooption":case"tabs":case"poll":case"seo":o==="poem"&&g.excludes.push("heading"),p=new T(t,g,s);break;case"pre":{let{PreToken:u}=(bi(),O(Ti));p=new u(t,g,s);break}case"dynamicpagelist":{let{ParamTagToken:u}=(Zr(),O(ki));p=new u(t,g,s);break}case"inputbox":{g.excludes.push("heading");let{InputboxToken:u}=(Ii(),O(Ei));p=new u(t,g,s);break}case"references":{let{NestedToken:u}=(Tr(),O(xr));p=new u(t,/<!--.*?(?:-->|$)|<(ref)(\s[^>]*)?>(.*?)<\/(ref\s*)>/gisu,["ref"],g,s);break}case"choose":{let{NestedToken:u}=(Tr(),O(xr));p=new u(t,/<(option|choicetemplate)(\s[^>]*)?>(.*?)<\/(\1)>/gsu,["option","choicetemplate"],g,s);break}case"combobox":{let{NestedToken:u}=(Tr(),O(xr));p=new u(t,/<(combooption)(\s[^>]*)?>(.*?)<\/(combooption\s*)>/gisu,["combooption"],g,s);break}case"gallery":{let{GalleryToken:u}=(_i(),O(qi));p=new u(t,g,s);break}case"imagemap":{let{ImagemapToken:u}=(zi(),O(Oi));p=new u(t,g,s);break}default:{let{NowikiToken:u}=(Wi(),O(Mi));p=new u(t,g)}}p.setAttribute("name",o),p.type==="plain"&&(p.type="ext-inner"),super(n,l,p,r,i,s),this.seal("closed",!0)}lint(n=this.getAbsoluteIndex(),e){let t=super.lint(n,e),r=new F(this,n);return this.name!=="nowiki"&&this.closest("html-attrs, table-attrs")&&t.push(N(this,r,"parsing-order","extension tag in HTML tag attributes")),this.name==="ref"&&this.closest("heading-title")&&t.push(N(this,r,"var-anchor","variable anchor in a section header")),t}}});var Di={};H(Di,{parseCommentAndExt:()=>No});var No,Hi=b(()=>{"use strict";oi();_e();li();on();nn();No=(a,n,e,t)=>{let r="<onlyinclude>",i="</onlyinclude>",{length:s}=r,o=()=>{let u=a.indexOf(r);return{i:u,j:a.indexOf(i,u+s)}};if(t){let{i:u,j:h}=o();if(u!==-1&&h!==-1){let m="",x=k=>{new D(k,n,e),m+=`\0${e.length-1}c\x7F`};for(;u!==-1&&h!==-1;){let k=`\0${e.length}e\x7F`;new lr(a.slice(u+s,h),n,e),u>0&&x(a.slice(0,u)),m+=k,a=a.slice(h+s+1),{i:u,j:h}=o()}return a&&x(a),m}}let l=n.ext.join("|"),g=t?"includeonly":"(?:no|only)include",p=t?"noinclude":"includeonly",d=new RegExp(String.raw`<!--.*?(?:-->|$)|<${g}(?:\s[^>]*)?/?>|</${g}\s*>|<(${l})(\s[^>]*?)?(?:/>|>(.*?)</(\1\s*)>)|<(${p})(\s[^>]*?)?(?:/>|>(.*?)(?:</(${p}\s*)>|$))`,"gisu");return a.replace(d,(u,h,m,x,k,E,w,v,S)=>{let L=`\0${e.length}${h?"e":"c"}\x7F`;if(h)new bt(h,m,x,k,n,e);else if(u.startsWith("<!--")){let P=u.endsWith("-->");new Ie(u.slice(4,P?-3:void 0),P,n,e)}else E?new Xe(E,w,v,S,n,e):new D(u,n,e);return L})}});var Eo,Io,Lo,St,he,Me,Sr,Vi=b(()=>{"use strict";j();Q();X();B();Eo=new Set(["if","ifeq","ifexpr","ifexist","iferror","switch"]),Io=new Set(["b","big","center","cite","code","del","dfn","em","font","i","ins","kbd","mark","pre","q","s","samp","small","strike","strong","sub","sup","tt","u","var"]),Lo=new Set(["strike","big","center","font","tt"]),Sr=class extends T{constructor(e,t,r,i,s,o){super(void 0,s,o);y(this,St);y(this,he);y(this,Me);this.insertAt(t),this.setAttribute("name",e.toLowerCase()),A(this,St,r),A(this,he,i),A(this,Me,e)}get type(){return"html"}get selfClosing(){return c(this,he)}get closing(){return c(this,St)}toString(){return`<${this.closing?"/":""}${c(this,Me)}${super.toString()}${c(this,he)?"/":""}>`}text(){let{closing:e}=this,t=c(this,Me)+(e?"":super.text());return`<${e?"/":""}${t}${c(this,he)?"/":""}>`}getAttribute(e){return e==="padding"?c(this,Me).length+(this.closing?2:1):super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){var s;let r=super.lint(e,t),i=new F(this,e);this.name==="h1"&&!this.closing&&r.push(N(this,i,"h1","<h1>")),this.closest("table-attrs")&&r.push(N(this,i,"parsing-order","HTML tag in table attributes"));try{this.findMatchingTag()}catch(o){if(o instanceof SyntaxError){let{message:l}=o,g=l.split(":")[0].toLowerCase(),p=N(this,i,"unmatched-tag",g);if(g==="unclosed tag"&&!this.closest("heading-title"))if(Io.has(this.name)){let d=(s=this.parentNode)==null?void 0:s.childNodes,u=d==null?void 0:d.indexOf(this);d!=null&&d.slice(0,u).some(({type:h,name:m})=>h==="html"&&m===this.name)||(p.severity="warning")}else p.severity="warning";else if(g==="unmatched closing tag"){let d=this.closest("magic-word");d&&Eo.has(d.name)?p.severity="warning":p.suggestions=[{desc:"remove",range:[e,p.endIndex],text:""}]}else if(g==="tag that is both closing and self-closing"){let{html:[,,d]}=this.getAttribute("config");d.includes(this.name)&&(p.fix={range:[e+1,e+2],text:""})}r.push(p)}}return Lo.has(this.name)&&r.push(N(this,i,"obsolete-tag","obsolete HTML tag","warning")),(this.name==="b"||this.name==="strong")&&this.closest("heading-title")&&r.push(N(this,i,"bold-header","bold in section header","warning")),r}findMatchingTag(){let{html:[e,t,r]}=this.getAttribute("config"),{name:i,parentNode:s,closing:o}=this,l=Un(this.toString());if(o&&(c(this,he)||r.includes(i)))throw new SyntaxError(`Tag that is both closing and self-closing: ${l}`);if(r.includes(i)||c(this,he)&&t.includes(i))return this;if(c(this,he)&&e.includes(i))throw new SyntaxError(`Invalid self-closing tag: ${l}`);if(!s)return;let{childNodes:g}=s,p=g.indexOf(this),d=(o?g.slice(0,p).reverse():g.slice(p+1)).filter(h=>h.type==="html"&&h.name===i),u=o?-1:1;for(let h of d)if(c(h,St)?u--:u++,u===0)return h;throw new SyntaxError(`${o?"Unmatched closing":"Unclosed"} tag: ${l}`)}print(){return super.print({pre:`&lt;${this.closing?"/":""}${c(this,Me)}`,post:`${c(this,he)?"/":""}&gt;`})}json(){let e=super.json();return Object.assign(e,{closing:this.closing,selfClosing:c(this,he)}),e}};St=new WeakMap,he=new WeakMap,Me=new WeakMap});var Xi={};H(Xi,{parseHtml:()=>Fo});var Fo,Qi=b(()=>{"use strict";ur();Vi();Fo=(a,n,e)=>{let t=/^(\/?)([a-z][^\s/>]*)((?:\s|\/(?!>))[^>]*?)?(\/?>)([^<]*)$/iu,{html:r}=n,i=new Set([...r[0],...r[1],...r[2]]),s=a.split("<"),o=s.shift();for(let l of s){let g=t.exec(l),p=g==null?void 0:g[2],d=p==null?void 0:p.toLowerCase();if(!g||!i.has(d)){o+=`<${l}`;continue}let[,u,,h="",m,x]=g,{length:k}=e,E=new ze(h,"html-attrs",d,n,e),w=E.getAttr("itemprop");if(d==="meta"&&(w===void 0||E.getAttr("content")===void 0)||d==="link"&&(w===void 0||E.getAttr("href")===void 0)){o+=`<${l}`,e.length=k;continue}o+=`\0${e.length}x\x7F${x}`,new Sr(p,E,u==="/",m==="/>",n,e)}return o}});var Zi,Ji=b(()=>{"use strict";be();Zi=(a=0)=>(n,e)=>{var r,Ki;class t extends n{constructor(){super(...arguments);y(this,r)}getAttr(l){return c(this,r,Ki).getAttr(l)}}return r=new WeakSet,Ki=function(){return this.childNodes[a]},or(t,n),t}});var Ct,xn=b(()=>{"use strict";Ji();R();B();gt();ur();Ct=class extends Zi(1)(T){constructor(n,e,t,r,i=f.getConfig(),s=[],o={}){super(void 0,i,s,o),this.append(new ue(e,n,"table-syntax",i,s,{}),new ze(r,"table-attrs",t,i,s))}}});var me,Qt,et,Tn,Yi,Ye,bn=b(()=>{"use strict";j();Q();Ce();be();R();B();xn();Ye=class extends Ct{constructor(e,t,r=f.getConfig(),i=[]){var g;let s=/\||\0\d+!\x7F/u.exec(t!=null?t:""),o=s?t.slice(0,s.index):"";/\[\[|-\{/u.test(o)&&(s=null,o="");super(/^(?:\n[^\S\n]*(?:[|!]|\|\+|\{\{\s*!\s*\}\}\+?)|(?:\||\{\{\s*!\s*\}\}){2}|!!|\{\{\s*!!\s*\}\})$/u,e,"td",o,r,i);y(this,et);y(this,me,"");y(this,Qt);s&&([tr(this,me)._]=s);let l=new T(t==null?void 0:t.slice(((g=s==null?void 0:s.index)!=null?g:NaN)+c(this,me).length),r,i);l.type="td-inner",l.setAttribute("stage",4),this.insertAt(l)}get type(){return"td"}get rowspan(){return this.getAttr("rowspan")}get colspan(){return this.getAttr("colspan")}get subtype(){return $(this,et,Tn).call(this).subtype}afterBuild(){c(this,me).includes("\0")&&A(this,me,this.buildFromStr(c(this,me),0)),super.afterBuild()}toString(){let{childNodes:[e,t,r]}=this;return e.toString()+t.toString()+c(this,me)+r.toString()}text(){let{childNodes:[e,t,r]}=this;return e.text()+t.text()+c(this,me)+r.text()}getGaps(e){return e===1?c(this,me).length:0}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),i=new F(this,e+this.getRelativeIndex(this.length-1));for(let s of this.lastChild.childNodes)if(s.type==="text"){let{data:o}=s;if(o.includes("|")){let l=o.includes("||"),g=C(s,i,"pipe-like",'additional "|" in a table cell',l?"error":"warning");if(l){let p={caption:"|+",td:"|",th:"!"}[this.subtype];g.fix={range:[g.startIndex,g.endIndex],text:o.replace(/\|\|/gu,`
${p}`)}}else g.suggestions=[{desc:"escape",range:[g.startIndex,g.endIndex],text:o.replace(/\|/gu,"&#124;")}];r.push(g)}}return r}isIndependent(){return this.firstChild.text().startsWith(`
`)}getAttr(e){let t=super.getAttr(e);return e==="rowspan"||e==="colspan"?parseInt(t)||1:t}print(){let{childNodes:[e,t,r]}=this;return`<span class="wpb-td">${e.print()}${t.print()}${c(this,me)}${r.print()}</span>`}json(){let e=super.json();return e.subtype=this.subtype,e}};me=new WeakMap,Qt=new WeakMap,et=new WeakSet,Tn=function(){var t;let{rev:e}=ye;return(t=c(this,Qt))!=null||A(this,Qt,[e,$(this,et,Yi).call(this)]),c(this,Qt)[1]},Yi=function(){var o;let e=this.firstChild.text(),t=e.slice(-1),r="td";if(t==="!"?r="th":t==="+"&&(r="caption"),this.isIndependent())return{subtype:r};let{previousSibling:i}=this;return{...$(o=i,et,Tn).call(o)}}});var $t,kn=b(()=>{"use strict";j();be();xn();bn();$t=class extends Ct{lint(n=this.getAbsoluteIndex(),e){let t=super.lint(n,e),r=this.childNodes.find(({type:p})=>p==="table-inter");if(!r)return t;let i=r.childNodes.find(p=>p.text().trim()),s=/^\s*(?:!|\{\{\s*![!-]?\s*\}\})/u,o=Ke("arg"),l=Ke("magic-word");if(!i||s.test(i.toString())||o(i)&&s.test(i.default||""))return t;if(l(i))try{if(i.getPossibleValues().every(p=>s.test(p.text())))return t}catch(p){}let g=C(r,{start:n},"fostered-content","content to be moved out from the table");return g.severity=i.type==="template"?"warning":"error",g.startIndex++,g.startLine++,g.startCol=0,t.push(g),t}getRowCount(){return Number(this.childNodes.some(n=>n instanceof Ye&&n.isIndependent()&&!n.firstChild.text().endsWith("+")))}getNthCol(n,e){let t=0;for(let r of this.childNodes.slice(2))if(r instanceof Ye&&(r.isIndependent()&&(t=+(r.subtype!=="caption")),n-=t,n<0))return r}}});var Ro,Po,yn,Cr,es=b(()=>{"use strict";j();Q();be();R();kn();gt();Ro=/^\n[^\S\n]*(?:\|\}|\{\{\s*!\s*\}\}\}|\{\{\s*!\)\s*\}\})$/u,Po=({type:a})=>a==="tr"||a==="table-syntax",yn=class extends Array{},Cr=class extends $t{get type(){return"table"}get closed(){return this.lastChild.type==="table-syntax"}constructor(n,e,t,r){super(/^(?:\{\||\{\{\{\s*!\s*\}\}|\{\{\s*\(!\s*\}\})$/u,n,"table",e,t,r,{})}lint(n=this.getAbsoluteIndex(),e){let t=super.lint(n,e),r=new F(this,n);this.closed||t.push(C(this.firstChild,r,"unclosed-table",f.msg("unclosed $1","table")));let i=this.getLayout(),{length:s}=i;if(s>1){let o=1,l=1/0,g=0;for(;g<s;g++){let p=i[g],d=p.length;if(d<o)break;d<l&&(l=d);let u=p.indexOf(p[d-1])+1;if(u>l)break;u>o&&(o=u)}if(g<s){let p=C(this.getNthRow(g),r,"table-layout","inconsistent table layout","warning");p.startIndex++,p.startLine++,p.startCol=0,t.push(p)}}return t}close(n=`
|}`,e){let t=this.getAttribute("config"),r=this.getAttribute("accum"),i=e?[n]:f.parse(n,this.getAttribute("include"),2,t).childNodes;ye.run(()=>{let s=new ue(void 0,Ro,"table-syntax",t,r,{});super.insertAt(s)}),this.lastChild.replaceChildren(...i)}getLayout(n){let e=this.getAllRows(),{length:t}=e,r=new yn(...ts(t,()=>[]));for(let i=0;i<t;i++){let s=r[i],o=0,l=0,g;for(let p of e[i].childNodes.slice(2))if(p.type==="td"){if(p.isIndependent()&&(g=p.subtype!=="caption"),g){let d={row:i,column:o},{rowspan:u,colspan:h}=p;for(o++;s[l];)l++;for(let m=i;m<Math.min(i+u,t);m++)for(let x=l;x<l+h;x++)r[m][x]=d;l+=h}}else if(Po(p))break}return r}getAllRows(){return[...super.getRowCount()?[this]:[],...this.childNodes.slice(1).filter(n=>n.type==="tr"&&n.getRowCount()>0)]}getNthCell(n){var t;let e=n;return e&&((t=this.getNthRow(e.row,!1,!1))==null?void 0:t.getNthCol(e.column))}getNthRow(n,e,t){let r=super.getRowCount();if(n===0&&r)return this;r&&n--;for(let i of this.childNodes.slice(2))if(i.type==="tr"&&i.getRowCount()&&(n--,n<0))return i}json(){let n=super.json();return n.closed=this.closed,n}}});var $r,rs=b(()=>{"use strict";kn();$r=class extends $t{get type(){return"tr"}constructor(n,e,t,r){super(/^\n[^\S\n]*(?:\|-+|\{\{\s*!\s*\}\}-+|\{\{\s*!-\s*\}\}-*)$/u,n,"tr",e,t,r,{})}}});var Nt,vn=b(()=>{"use strict";qe();Nt=class extends Y{}});var Et,An=b(()=>{"use strict";vn();Et=class extends Nt{get type(){return"dd"}}});var ns={};H(ns,{parseTable:()=>jo});var Bo,jo,is=b(()=>{"use strict";B();es();rs();bn();An();Bo=a=>a.lastChild.constructor!==T,jo=({firstChild:{data:a},type:n,name:e},t,r)=>{let i=[],s=a.split(`
`),o=n==="root"||n==="parameter-value"||n==="ext-inner"&&e==="poem"?"":`
${s.shift()}`,l,g=(d,u)=>{if(!u){o+=d;return}let{lastChild:h}=u;if(Bo(u)){let m=new T(d,t,r);m.type="table-inter",m.setAttribute("stage",3),u.insertAt(m)}else h.setText(h.toString()+d)},p=()=>l.type==="td"?i.pop():l;for(let d of s){l=i.pop();let[u]=/^(?:\s|\0\d+c\x7F)*/u.exec(d),h=d.slice(u.length),m=/^(:*)((?:\s|\0\d+c\x7F)*)(\{\||\{(?:\0\d+c\x7F)*\0\d+!\x7F|\0\d+\{\x7F)(.*)$/u.exec(h);if(m){for(;l&&l.type!=="td";)l=i.pop();let[,S,L,P,q]=m;S&&new Et(S,t,r),g(`
${u}${S&&`\0${r.length-1}d\x7F`}${L}\0${r.length}b\x7F`,l),i.push(...l?[l]:[],new Cr(P,q,t,r));continue}else if(!l){o+=`
${d}`;continue}let x=/^(?:(\|\}|\0\d+!\x7F\}|\0\d+\}\x7F)|(\|-+|\0\d+!\x7F-+|\0\d+-\x7F-*)(?!-)|(!|(?:\||\0\d+!\x7F)\+?))(.*)$/u.exec(h);if(!x){g(`
${d}`,l),i.push(l);continue}let[,k,E,w,v]=x;if(k){for(;l.type!=="table";)l=i.pop();l.close(`
${u}${k}`,!0),g(v,i[i.length-1])}else if(E){l=p(),l.type==="tr"&&(l=i.pop());let S=new $r(`
${u}${E}`,v,t,r);i.push(l,S),l.insertAt(S)}else{l=p();let S=w==="!"?/!!|(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu:/(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu,L=S.exec(v),P=0,q=`
${u}${w}`,V=re=>{let xe=new Ye(q,v.slice(P,L==null?void 0:L.index),t,r);return re.insertAt(xe),xe};for(;L;)V(l),{lastIndex:P}=S,[q]=L,L=S.exec(v);i.push(l,V(l))}}return o.slice(1)}});var Nr,ss=b(()=>{"use strict";qe();Nr=class extends Y{get type(){return"hr"}}});var os,wn,qo,tt,as=b(()=>{"use strict";De();qe();os=[pe(!0)];tt=class extends(qo=Y){get type(){return"double-underscore"}constructor(n,e,t,r){super(n,t,r)}getAttribute(n){return n==="padding"?2:super.getAttribute(n)}toString(){return`__${this.innerText}__`}print(){return super.print({pre:"__",post:"__"})}};wn=se(qo),tt=ae(wn,0,"DoubleUnderscoreToken",os,tt),oe(wn,1,tt)});var ls={};H(ls,{parseHrAndDoubleUnderscore:()=>_o});var _o,ds=b(()=>{"use strict";ss();as();Kr();_o=({firstChild:{data:a},type:n,name:e},t,r)=>{let{doubleUnderscore:i}=t,s=new Set(i[0]),o=new Set(i[1]);return n!=="root"&&(n!=="ext-inner"||e!=="poem")&&(a=`\0${a}`),a=a.replace(/^((?:\0\d+c\x7F)*)(-{4,})/gmu,(l,g,p)=>(new Nr(p,t,r),`${g}\0${r.length-1}r\x7F`)).replace(new RegExp(`__(${[...i[0],...i[1]].join("|")})__`,"giu"),(l,g)=>{let p=o.has(g);return p||s.has(g.toLowerCase())?(new tt(g,p,t,r),`\0${r.length-1}u\x7F`):l}).replace(/^((?:\0\d+c\x7F)*)(={1,6})(.+)\2((?:[^\S\n]|\0\d+c\x7F)*)$/gmu,(l,g,p,d,u)=>{let h=`${g}\0${r.length}h\x7F`;return new xt(p.length,[d,u],t,r),h}),n==="root"||n==="ext-inner"&&e==="poem"?a:a.slice(1)}});var Er,gs=b(()=>{"use strict";j();Q();R();qe();Er=class extends Y{get type(){return"quote"}get bold(){return this.innerText.length!==2}get italic(){return this.innerText.length!==3}lint(n=this.getAbsoluteIndex()){let{previousSibling:e,nextSibling:t,bold:r}=this,i=f.msg('lonely "$1"',"'"),s=[],o=new F(this,n),l,g=(p,d,u)=>({desc:"escape",range:[p,d],text:"&apos;".repeat(u)});if((e==null?void 0:e.type)==="text"&&e.data.endsWith("'")){l=N(this,o,"lonely-apos",i);let{startIndex:p,startLine:d,startCol:u}=l,[,{length:h}]=/(?:^|[^'])('+)$/u.exec(e.data),m=n-h;s.push({...l,startIndex:m,endIndex:p,startCol:u-h,endLine:d,endCol:u,suggestions:[g(m,p,h)]})}if((t==null?void 0:t.type)==="text"&&t.data.startsWith("'")){l!=null||(l=N(this,o,"lonely-apos",i));let{endIndex:p,endLine:d,endCol:u}=l,[{length:h}]=/^'+/u.exec(t.data),m=p+h;s.push({...l,startIndex:p,endIndex:m,startLine:d,startCol:u,endCol:u+h,suggestions:[g(p,m,h)]})}return r&&this.closest("heading-title")&&s.push(N(this,o,"bold-header","bold in section header","warning")),s}json(){let n=super.json();return Object.assign(n,{bold:this.bold,italic:this.italic}),n}}});var ps={};H(ps,{parseQuotes:()=>Sn});var Sn,Cn=b(()=>{"use strict";gs();Sn=(a,n,e)=>{var p;let t=a.split(/('{2,})/u),{length:r}=t;if(r===1)return a;let i=0,s=0,o,l,g;for(let d=1;d<r;d+=2){let u=t[d].length;switch(u){case 2:s++;break;case 4:t[d-1]+="'",t[d]="'''";case 3:if(i++,o!==void 0)break;t[d-1].endsWith(" ")?l===void 0&&g===void 0&&(g=d):t[d-1].slice(-2,-1)===" "?o=d:l!=null||(l=d);break;default:t[d-1]+="'".repeat(u-5),t[d]="'''''",s++,i++}}if(s%2===1&&i%2===1){let d=(p=o!=null?o:l)!=null?p:g;d!==void 0&&(t[d]="''",t[d-1]+="'")}for(let d=1;d<r;d+=2)new Er(t[d],n,e),t[d]=`\0${e.length-1}q\x7F`;return t.join("")}});var us={};H(us,{parseExternalLinks:()=>$n});var $n,Nn=b(()=>{"use strict";X();hn();wr();$n=(a,n,e,t)=>{let r=new RegExp(String.raw`\[(\0\d+f\x7F|(?:(?:${n.protocol}|//)${we}|\0\d+m\x7F)${Se}(?=[[\]<>"\t\p{Zs}]|\0\d))(\p{Zs}*(?!\p{Zs}))([^\]\x01-\x08\x0A-\x1F\uFFFD]*)\]`,"giu");return a.replace(r,(i,s,o,l)=>{let{length:g}=e,p=/&[lg]t;/u.exec(s);return p&&(s=s.slice(0,p.index),o="",l=s.slice(p.index)+o+l),t?(new Le(s,"ext-link-url",n,e),`[\0${g}f\x7F${o}${l}]`):(new wt(s,o,l,n,e),`\0${g}w\x7F`)})}});var Ir,cs=b(()=>{"use strict";Gt();Ir=class extends $e{get type(){return"category"}}});var ms={};H(ms,{parseLinks:()=>hs});var hs,fs=b(()=>{"use strict";R();Cn();Nn();cn();gn();cs();hs=(a,n,e)=>{let t=n.inExt?/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)(.*?[^\]]))?\]\](.*)$/su:/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)(.*?[^\]])?)?\]\](.*)$/su,r=/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(\||\0\d+!\x7F)(.*)$/su,i=new RegExp(String.raw`^\s*(?:${n.protocol}|//)`,"iu"),s=a.split("[["),o=s.shift();for(let l=0;l<s.length;l++){let g=!1,p,d,u,h,m=s[l],x=t.exec(m);if(x)[,p,d,u,h]=x,h.startsWith("]")&&(u!=null&&u.includes("["))&&(u+="]",h=h.slice(1));else{let P=r.exec(m);P&&(g=!0,[,p,d,u]=P)}if(p===void 0||i.test(p)||/\0\d+[exhbru]\x7F/u.test(p)){o+=`[[${m}`;continue}let k=p.trim().startsWith(":");if(k&&g){o+=`[[${m}`;continue}let E=f.normalizeTitle(p,0,!1,n,!0,!0,!0),{ns:w,valid:v,interwiki:S}=E;if(v){if(g){if(S||w!==6){o+=`[[${m}`;continue}let P=!1;for(l++;l<s.length;l++){let q=s[l],V=q.split("]]");if(V.length>2){P=!0,u+=`[[${V[0]}]]${V[1]}`,h=V.slice(2).join("]]");break}else if(V.length===2)u+=`[[${V[0]}]]${V[1]}`;else{u+=`[[${q}`;break}}if(u=hs(u,n,e),!P){o+=`[[${p}${d}${u}`;continue}}}else{o+=`[[${m}`;continue}u&&(u=Sn(u,n,e));let L=At;k||(!S&&w===6?(u&&(u=$n(u,n,e,!0)),L=yt):!S&&w===14&&(L=Ir)),u===void 0&&d&&(u=""),o+=`\0${e.length}l\x7F${h}`,new L(p,u,n,e,d)}return o}});var xs={};H(xs,{parseMagicLinks:()=>zo});var Go,Oo,zo,Ts=b(()=>{"use strict";X();wr();Go=/[^,;\\.:!?)][,;\\.:!?)]+$/u,Oo=/[^,;\\.:!?][,;\\.:!?]+$/u,zo=(a,n,e)=>{let t=String.raw`[\p{Zs}\t]|&nbsp;|&#0*160;|&#x0*a0;`,r=`(?:${t}|-)`,i=new RegExp(String.raw`(^|[^\p{L}\d_])(?:(?:${n.protocol})(${we}${Se})|(?:RFC|PMID)(?:${t})+\d+\b|ISBN(?:${t})+(?:97[89]${r}?)?(?:\d${r}?){9}[\dx]\b)`,"giu");return a.replace(i,(s,o,l)=>{let g=o?s.slice(o.length):s;if(l){let p="",d=/&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(g);d&&(p=g.slice(d.index),g=g.slice(0,d.index));let u=g.includes("(")?Oo:Go,h=u.exec(g);if(h){let m=1;h[0][1]===";"&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/iu.test(g.slice(0,h.index))&&(m=2),p=g.slice(h.index+m)+p,g=g.slice(0,h.index+m)}return p.length>=l.length?s:(new Le(g,void 0,n,e),`${o}\0${e.length-1}w\x7F${p}`)}else if(!/^(?:RFC|PMID|ISBN)/u.test(g))return s;return new Le(g,"magic-link",n,e),`${o}\0${e.length-1}i\x7F`})}});var Lr,bs=b(()=>{"use strict";vn();Lr=class extends Nt{get type(){return"list"}}});var ks={};H(ks,{parseList:()=>Mo});var Mo,ys=b(()=>{"use strict";bs();An();Mo=(a,n,e)=>{let t=/^((?:\0\d+c\x7F)*)([;:*#]+)/u.exec(a);if(!t)return a;let[r,i,s]=t,o=`${i}\0${e.length}d\x7F${a.slice(r.length)}`,l=s.split(";").length-1;if(new Lr(s,n,e),!l)return o;let{html:[g]}=n,p=/:+|-\{|\0\d+[xq]\x7F/gu,d=p,u=d.exec(o),h=0,m=!1,x=!1,k=0,E=(v,S)=>(new Et(v,n,e),`${o.slice(0,S)}\0${e.length-1}d\x7F${o.slice(S+v.length)}`),w=v=>{v?h&&h--:h++};for(;u&&l;){let{0:v,index:S}=u;if(v==="-{"){if(!k){let{lastIndex:L}=d;d=/-\{|\}-/gu,d.lastIndex=L}k++}else if(v==="}-"){if(k--,!k){let{lastIndex:L}=d;d=p,d.lastIndex=L}}else if(v.endsWith("x\x7F")){let{name:L,closing:P,selfClosing:q}=e[Number(v.slice(1,-2))];(!q||g.includes(L))&&w(P)}else if(v.endsWith("q\x7F")){let{bold:L,italic:P}=e[Number(v.slice(1,-2))];L&&(w(m),m=!m),P&&(w(x),x=!x)}else if(h===0){if(v.length>=l)return E(v.slice(0,l),S);l-=v.length,d.lastIndex=S+4+String(e.length).length,o=E(v,S)}u=d.exec(o)}return o}});var vs,Re,Fr,As=b(()=>{"use strict";j();Q();R();B();Ee();vs=new Set(["A","T","R","D","-","H","N"]),Fr=class extends T{constructor(e,t=f.getConfig(),r=[]){super(void 0,t,r,{});y(this,Re);this.append(...e.map(i=>new z(i,"converter-flag",t,r)))}get type(){return"converter-flags"}afterBuild(){A(this,Re,this.childNodes.map(e=>e.text().trim())),super.afterBuild()}toString(){return super.toString(";")}text(){return super.text(";")}getGaps(){return 1}getUnknownFlags(){return new Set(c(this,Re).filter(e=>/\{{3}[^{}]+\}{3}/u.test(e)))}getVariantFlags(){let e=new Set(this.getAttribute("config").variants);return new Set(c(this,Re).filter(t=>e.has(t)))}lint(e=this.getAbsoluteIndex(),t){let r=this.getVariantFlags(),i=this.getUnknownFlags(),s=new Set(c(this,Re).filter(h=>vs.has(h))),o=c(this,Re).filter(h=>!h).length,l=c(this,Re).length-i.size-o,g=super.lint(e,t);if(r.size===l||s.size===l)return g;let p=new F(this,e),{childNodes:d,length:u}=this;for(let h=0;h<u;h++){let m=d[h],x=m.text().trim();if(x&&!r.has(x)&&!i.has(x)&&(r.size>0||!s.has(x))){let k=C(m,p,"no-ignored","invalid conversion flag");r.size===0&&vs.has(x.toUpperCase())?k.fix={range:[k.startIndex,k.endIndex],text:x.toUpperCase()}:k.suggestions=[{desc:"remove",range:[k.startIndex,k.endIndex],text:""}],g.push(k)}}return g}print(){return super.print({sep:";"})}};Re=new WeakMap});var It,ws=b(()=>{"use strict";R();B();Ee();It=class extends T{get type(){return"converter-rule"}constructor(n,e=!0,t=f.getConfig(),r=[]){super(void 0,t,r);let i=n.indexOf(":"),s=n.slice(0,i).indexOf("=>"),o=s===-1?n.slice(0,i):n.slice(s+2,i);e&&t.variants.includes(o.trim())?(super.insertAt(new z(o,"converter-rule-variant",t,r)),super.insertAt(new z(n.slice(i+1),"converter-rule-to",t,r)),s!==-1&&super.insertAt(new z(n.slice(0,s),"converter-rule-from",t,r),0)):super.insertAt(new z(n,"converter-rule-to",t,r))}toString(){let{childNodes:n}=this;if(n.length===3){let[e,t,r]=n;return`${e.toString()}=>${t.toString()}:${r.toString()}`}return super.toString(":")}text(){let{childNodes:n}=this;if(n.length===3){let[e,t,r]=n;return`${e.text()}=>${t.text()}:${r.text()}`}return super.text(":")}getGaps(n){return n===0&&this.length===3?2:1}print(){let{childNodes:n}=this;if(n.length===3){let[e,t,r]=n;return`<span class="wpb-converter-rule">${e.print()}=>${t.print()}:${r.print()}</span>`}return super.print({sep:":"})}}});var Rr,Ss=b(()=>{"use strict";X();R();B();As();ws();Rr=class extends T{get type(){return"converter"}constructor(n,e,t=f.getConfig(),r=[]){super(void 0,t,r),this.append(new Fr(n,t,r));let[i]=e,s=i.includes(":"),o=new It(i,s,t,r);s&&o.length===1?this.insertAt(new It(e.join(";"),!1,t,r)):this.append(o,...e.slice(1).map(l=>new It(l,!0,t,r)))}toString(){let{childNodes:[n,...e]}=this;return`-{${n.toString()}${n.length>0?"|":""}${e.map(String).join(";")}}-`}text(){let{childNodes:[n,...e]}=this;return`-{${n.text()}|${de(e,";")}}-`}getAttribute(n){return n==="padding"?2:super.getAttribute(n)}getGaps(n){return n||this.firstChild.length>0?1:0}print(){let{childNodes:[n,...e]}=this;return`<span class="wpb-converter">-{${n.print()}${n.length>0?"|":""}${Ne(e,{sep:";"})}}-</span>`}}});var Cs={};H(Cs,{parseConverter:()=>Wo});var Wo,$s=b(()=>{"use strict";Ss();Wo=(a,n,e)=>{let t=`(?:${n.variants.join("|")})`,r=/-\{/gu,i=/-\{|\}-/gu,s=new RegExp(String.raw`;(?=(?:[^;]*?=>)?\s*${t}\s*:|(?:\s|\0\d+c\x7F)*$)`,"u"),o=[],l=r,g=l.exec(a);for(;g;){let{0:p,index:d}=g;if(p==="}-"){let u=o.pop(),{length:h}=e,m=a.slice(u.index+2,d),x=m.indexOf("|"),[k,E]=x===-1?[[],m]:[m.slice(0,x).split(";"),m.slice(x+1)],w=E.replace(/(&[#a-z\d]+);/giu,"$1"),v=w.split(s).map(S=>S.replace(/\x01/gu,";"));new Rr(k,v,n,e),a=`${a.slice(0,u.index)}\0${h}v\x7F${a.slice(d+2)}`,o.length===0&&(l=r),l.lastIndex=u.index+3+String(h).length}else o.push(g),l=i,l.lastIndex=d+2;g=l.exec(a)}return a}});var Pr={};H(Pr,{Token:()=>T});var Zt,fe,_,M,rt,Lt,Kt,G,Ns,Es,Is,Ls,Fs,Rs,Ps,Bs,js,qs,_s,Gs,En,T,B=b(()=>{"use strict";X();Ce();be();j();R();Zn();Yn();En=class En extends ir{constructor(e,t=f.getConfig(),r=[],i){super();y(this,G);y(this,Zt,"plain");y(this,fe,0);y(this,_);y(this,M);y(this,rt);y(this,Lt,!1);y(this,Kt);typeof e=="string"&&this.insertAt(e),A(this,_,t),A(this,M,r),r.push(this)}get type(){return c(this,Zt)}set type(e){A(this,Zt,e)}parseOnce(e=c(this,fe),t=!1){if(e<c(this,fe)||!this.getAttribute("plain")||this.length===0)return this;if(c(this,fe)>=11)return this;switch(e){case 0:if(this.type==="root"){c(this,M).shift();let r=$(this,G,Ns).call(this);t&&(t=!r)}A(this,rt,t),$(this,G,Es).call(this,t);break;case 1:$(this,G,Is).call(this);break;case 2:$(this,G,Ls).call(this);break;case 3:$(this,G,Fs).call(this);break;case 4:$(this,G,Rs).call(this);break;case 5:$(this,G,Ps).call(this);break;case 6:$(this,G,Bs).call(this);break;case 7:$(this,G,js).call(this);break;case 8:$(this,G,qs).call(this);break;case 9:$(this,G,_s).call(this);break;case 10:$(this,G,Gs).call(this)}if(this.type==="root")for(let r of c(this,M))r.parseOnce(e,t);return tr(this,fe)._++,this}buildFromStr(e,t){let r=e.split(/[\0\x7F]/u).map((i,s)=>{if(s%2===0)return new jt(i);if(isNaN(i.slice(-1)))return c(this,M)[Number(i.slice(0,-1))];throw new Error(`Failed to build! Unrecognized token: ${i}`)});return t===0?r.map(String).join(""):t===1?de(r):r}build(){A(this,fe,11);let{length:e,firstChild:t}=this,r=String(t);if(e===1&&t.type==="text"&&r.includes("\0")&&(this.replaceChildren(...this.buildFromStr(r)),this.normalize(),this.type==="root"))for(let i of c(this,M))i.build()}afterBuild(){if(this.type==="root")for(let e of c(this,M))e.afterBuild();A(this,Lt,!0)}parse(e=11,t){for(e=Math.min(e,11);c(this,fe)<e;)this.parseOnce(c(this,fe),t);return e&&(this.build(),this.afterBuild()),this}getAttribute(e){var t;switch(e){case"plain":return this.constructor===En;case"config":return c(this,_);case"include":return(t=c(this,rt))!=null?t:!!c(this.getRootNode(),rt);case"accum":return c(this,M);case"built":return c(this,Lt);default:return super.getAttribute(e)}}setAttribute(e,t){switch(e){case"stage":c(this,fe)===0&&this.type==="root"&&c(this,M).shift(),A(this,fe,t);break;default:super.setAttribute(e,t)}}insertAt(e,t=this.length){let r=typeof e=="string"?new jt(e):e;return super.insertAt(r,t),r.type==="root"&&(r.type="plain"),r}normalizeTitle(e,t=0,r,i,s){return f.normalizeTitle(e,t,c(this,rt),c(this,_),r,i,s)}lint(e=this.getAbsoluteIndex(),t){var i;let r=super.lint(e,t);if(this.type==="root"){let s={};for(let h of this.querySelectorAll("category")){let m=s[h.name];m?m.add(h):s[h.name]=new Set([h])}for(let h of Object.values(s))h.size>1&&r.push(...[...h].map(m=>{let x=N(m,{start:m.getAbsoluteIndex()},"no-duplicate","duplicated category");return x.suggestions=[{desc:"remove",range:[x.startIndex,x.endIndex],text:""}],x}));let o=/<!--\s*lint-(disable(?:(?:-next)?-line)?|enable)(\s[\sa-z,-]*)?-->/gu,l=this.toString(),g=[],p=o.exec(l),d=0,u=0;for(;p;){let{1:h,index:m}=p,x=(i=p[2])==null?void 0:i.trim();u+=l.slice(d,m).split(`
`).length-1,d=m,g.push({line:u+(h==="disable-line"?0:1),from:h==="disable"?o.lastIndex:void 0,to:h==="enable"?o.lastIndex:void 0,rules:x?new Set(x.split(",").map(k=>k.trim())):void 0}),p=o.exec(l)}r=r.filter(({rule:h,startLine:m,startIndex:x})=>{let k={pos:0};for(let{line:E,from:w,to:v,rules:S}of g){if(E>m+1)break;if(S&&!S.has(h))continue;if(E===m&&w===void 0&&v===void 0)return!1;w<=x&&w>k.pos?(k.pos=w,k.type="from"):v<=x&&v>k.pos&&(k.pos=v,k.type="to")}return k.type!=="from"})}return r}toString(e){var i;let{rev:t}=ye,r=this.getRootNode();return r.type==="root"&&c(r,Lt)?((i=c(this,Kt))!=null||A(this,Kt,[t,super.toString(e)]),c(this,Kt)[1]):super.toString(e)}};Zt=new WeakMap,fe=new WeakMap,_=new WeakMap,M=new WeakMap,rt=new WeakMap,Lt=new WeakMap,Kt=new WeakMap,G=new WeakSet,Ns=function(){let{parseRedirect:e}=(si(),O(ii)),t=this.firstChild.toString(),r=e(t,c(this,_),c(this,M));return r&&this.setText(r),!!r},Es=function(e){let{parseCommentAndExt:t}=(Hi(),O(Di));this.setText(t(this.firstChild.toString(),c(this,_),c(this,M),e))},Is=function(){let{parseBraces:e}=(en(),O(Ni)),t=this.type==="root"?this.firstChild.toString():`\0${this.firstChild.toString()}`,r=e(t,c(this,_),c(this,M));this.setText(this.type==="root"?r:r.slice(1))},Ls=function(){var t;if((t=c(this,_).excludes)!=null&&t.includes("html"))return;let{parseHtml:e}=(Qi(),O(Xi));this.setText(e(this.firstChild.toString(),c(this,_),c(this,M)))},Fs=function(){var t;if((t=c(this,_).excludes)!=null&&t.includes("table"))return;let{parseTable:e}=(is(),O(ns));this.setText(e(this,c(this,_),c(this,M)))},Rs=function(){var t;if((t=c(this,_).excludes)!=null&&t.includes("hr"))return;let{parseHrAndDoubleUnderscore:e}=(ds(),O(ls));this.setText(e(this,c(this,_),c(this,M)))},Ps=function(){let{parseLinks:e}=(fs(),O(ms));this.setText(e(this.firstChild.toString(),c(this,_),c(this,M)))},Bs=function(){var r;if((r=c(this,_).excludes)!=null&&r.includes("quote"))return;let{parseQuotes:e}=(Cn(),O(ps)),t=this.firstChild.toString().split(`
`);for(let i=0;i<t.length;i++)t[i]=e(t[i],c(this,_),c(this,M));this.setText(t.join(`
`))},js=function(){var t;if((t=c(this,_).excludes)!=null&&t.includes("extLink"))return;let{parseExternalLinks:e}=(Nn(),O(us));this.setText(e(this.firstChild.toString(),c(this,_),c(this,M)))},qs=function(){var t;if((t=c(this,_).excludes)!=null&&t.includes("magicLink"))return;let{parseMagicLinks:e}=(Ts(),O(xs));this.setText(e(this.firstChild.toString(),c(this,_),c(this,M)))},_s=function(){var i;if((i=c(this,_).excludes)!=null&&i.includes("list"))return;let{parseList:e}=(ys(),O(ks)),t=this.firstChild.toString().split(`
`),r=this.type==="root"||this.type==="ext-inner"&&this.name==="poem"?0:1;for(;r<t.length;r++)t[r]=e(t[r],c(this,_),c(this,M));this.setText(t.join(`
`))},Gs=function(){if(c(this,_).variants.length>0){let{parseConverter:e}=($s(),O(Cs));this.setText(e(this.firstChild.toString(),c(this,_),c(this,M)))}};T=En});var ye,Ke,Wr,ts,or,be=b(()=>{"use strict";ye={running:!1,run(a){let{running:n}=this;this.running=!0;try{let{Token:e}=(B(),O(Pr)),t=a();return t instanceof e&&!t.getAttribute("built")&&t.afterBuild(),this.running=n,t}catch(e){throw this.running=n,e}},rev:0},Ke=a=>n=>n.type===a,Wr=(a,n,e,t=[])=>{let r=[...a.childNodes],i=r.splice(n,e,...t);a.setAttribute("childNodes",r);for(let s of t)s.setAttribute("parentNode",a);return i},ts=(a,n)=>new Array(a).fill(void 0).map((e,t)=>n(t)),or=(a,n)=>{Object.defineProperty(a,"name",{value:n.name})}});var zs={};H(zs,{Title:()=>In});var Os,Jt,Yt,In,Ms=b(()=>{"use strict";X();Os=a=>decodeURIComponent(a.replace(/%(?![\da-f]{2})/giu,"%25")),In=class{constructor(n,e,t,r,i){y(this,Jt);y(this,Yt);U(this,"ns");U(this,"fragment");U(this,"interwiki","");U(this,"valid");U(this,"encoded",!1);let s=n.trim().startsWith("../");if(n=Wn(n),r&&n.includes("%"))try{let l=/%(?!21|3[ce]|5[bd]|7[b-d])[\da-f]{2}/iu.test(n);n=Os(n),this.encoded=l}catch(l){}if(n=n.replace(/_/gu," ").trim(),s)this.ns=0;else{let l=e;n.startsWith(":")&&(l=0,n=n.slice(1).trim());let g=n.split(":");if(g.length>1){let p=t.nsid[g[0].trim().toLowerCase()];p&&(l=p,n=g.slice(1).join(":").trim())}this.ns=l}let o=n.indexOf("#");if(o!==-1){let l=n.slice(o+1).trimEnd();if(l.includes("%"))try{l=Os(l)}catch(g){}this.fragment=l,n=n.slice(0,o).trim()}this.valid=!!(n||this.interwiki||i&&this.ns===0&&this.fragment!==void 0)&&!/^:|\0\d+[eh!+-]\x7F|[<>[\]{}|\n]|%[\da-f]{2}|(?:^|\/)\.{1,2}(?:$|\/)/iu.test(s?/^(?:\.\.\/)+(.*)/u.exec(n)[1]:n),this.main=n,Object.defineProperties(this,{encoded:{enumerable:!1,writable:!1}}),A(this,Yt,t.namespaces)}get main(){return c(this,Jt)}set main(n){n=n.replace(/_/gu," ").trim(),A(this,Jt,n&&n[0].toUpperCase()+n.slice(1))}get prefix(){let n=c(this,Yt)[this.ns];return n+(n&&":")}get title(){return(this.interwiki+(this.interwiki&&":")+this.prefix+this.main).replace(/ /gu,"_")}get extension(){let{main:n}=this,e=n.lastIndexOf(".");return e===-1?void 0:n.slice(e+1).toLowerCase()}toString(){return`${this.title}${this.fragment===void 0?"":`#${this.fragment}`}`}};Jt=new WeakMap,Yt=new WeakMap});var nt,Ws,Uo,f,R=b(()=>{On();be();Ce();X();nt={i18n:void 0,rules:Gn,getConfig(){return{...Hn,...this.config,excludes:[]}},msg(a,n=""){var e,t;return a&&((t=(e=this.i18n)==null?void 0:e[a])!=null?t:a).replace("$1",this.msg(n))},normalizeTitle(a,n=0,e,t=nt.getConfig(),r,i=!1,s=!1){let{Title:o}=(Ms(),O(zs));if(r)return new o(a,n,t,i,s);let{Token:l}=(B(),O(Pr));return ye.run(()=>{let g=new l(a,t);g.type="root",g.parseOnce(0,e).parseOnce();let p=new o(g.toString(),n,t,i,s);for(let d of["main","fragment"]){let u=p[d];u!=null&&u.includes("\0")&&(p[d]=g.buildFromStr(u,1))}return p})},parse(a,n,e=11,t=nt.getConfig()){a=Mn(a);let{Token:r}=(B(),O(Pr));return ye.run(()=>{let s=new r(a,t);return s.type="root",s.parse(e,n)})}},Ws={},Uo=new Set(["normalizeTitle","parse"]);for(let a in nt)Uo.has(a)||(Ws[a]={enumerable:!1});Object.defineProperties(nt,Ws);typeof self=="object"?Object.assign(self,{Parser:nt}):typeof globalThis=="object"&&Object.assign(globalThis,{Parser:nt});f=nt});R();})();
