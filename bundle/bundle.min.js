"use strict";(()=>{var Rs=Object.create;var Ye=Object.defineProperty;var Cn=Object.getOwnPropertyDescriptor;var Ps=Object.getOwnPropertyNames;var js=Object.prototype.hasOwnProperty;var Nn=(d,i)=>(i=Symbol[d])?i:Symbol.for("Symbol."+d),et=d=>{throw TypeError(d)};var Bs=(d,i,e)=>i in d?Ye(d,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[i]=e;var Sn=(d,i)=>Ye(d,"name",{value:i,configurable:!0});var y=(d,i)=>()=>(d&&(i=d(d=0)),i);var qs=(d,i)=>()=>(i||d((i={exports:{}}).exports,i),i.exports),W=(d,i)=>{for(var e in i)Ye(d,e,{get:i[e],enumerable:!0})},_s=(d,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let r of Ps(i))!js.call(d,r)&&r!==e&&Ye(d,r,{get:()=>i[r],enumerable:!(t=Cn(i,r))||t.enumerable});return d};var O=d=>_s(Ye({},"__esModule",{value:!0}),d);var se=d=>{var i;return[,,,Rs((i=d==null?void 0:d[Nn("metadata")])!=null?i:null)]},$n=["class","method","getter","setter","accessor","field","value","get","set"],St=d=>d!==void 0&&typeof d!="function"?et("Function expected"):d,Gs=(d,i,e,t,r)=>({kind:$n[d],name:i,metadata:t,addInitializer:n=>e._?et("Already initialized"):r.push(St(n||null))}),oe=(d,i,e,t)=>{for(var r=0,n=d[i>>1],s=n&&n.length;r<s;r++)i&1?n[r].call(e):t=n[r].call(e,t);return t},ae=(d,i,e,t,r,n)=>{var s,a,o,g,p,l=i&7,u=!!(i&8),c=!!(i&16),m=l>3?d.length+1:l?u?1:2:0,x=$n[l+5],b=l>3&&(d[m-1]=[]),C=d[m]||(d[m]=[]),w=l&&(!c&&!u&&(r=r.prototype),l<5&&(l>3||!c)&&Cn(l<4?r:{get[e](){return h(this,n)},set[e](A){return N(this,n,A)}},e));l?c&&l<4&&Sn(n,(l>2?"set ":l>1?"get ":"")+e):Sn(r,e);for(var S=t.length-1;S>=0;S--)g=Gs(l,e,o={},d[3],C),l&&(g.static=u,g.private=c,p=g.access={has:c?A=>Os(r,A):A=>e in A},l^3&&(p.get=c?A=>(l^1?h:I)(A,r,l^4?n:w.get):A=>A[e]),l>2&&(p.set=c?(A,F)=>N(A,r,F,l^4?n:w.set):(A,F)=>A[e]=F)),a=(0,t[S])(l?l<4?c?n:w[x]:l>4?void 0:{get:w.get,set:w.set}:r,g),o._=1,l^4||a===void 0?St(a)&&(l>4?b.unshift(a):l?c?n=a:w[x]=a:r=a):typeof a!="object"||a===null?et("Object expected"):(St(s=a.get)&&(w.get=s),St(s=a.set)&&(w.set=s),St(s=a.init)&&b.unshift(s));return l||(r[Nn("metadata")]=d[3]),w&&Ye(r,e,w),c?l^4?n:w:r},T=(d,i,e)=>Bs(d,typeof i!="symbol"?i+"":i,e),Cr=(d,i,e)=>i.has(d)||et("Cannot "+e),Os=(d,i)=>Object(i)!==i?et('Cannot use the "in" operator on this value'):d.has(i),h=(d,i,e)=>(Cr(d,i,"read from private field"),e?e.call(d):i.get(d)),v=(d,i,e)=>i.has(d)?et("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(d):i.set(d,e),N=(d,i,e,t)=>(Cr(d,i,"write to private field"),t?t.call(d,e):i.set(d,e),e),I=(d,i,e)=>(Cr(d,i,"access private method"),e);var Ut=(d,i,e,t)=>({set _(r){N(d,i,r,e)},get _(){return h(d,i,t)}});var In,En=y(()=>{"use strict";In=["bold-header","format-leakage","fostered-content","h1","illegal-attr","insecure-style","invalid-gallery","invalid-imagemap","invalid-invoke","invalid-isbn","lonely-apos","lonely-bracket","lonely-http","nested-link","no-arg","no-duplicate","no-ignored","obsolete-attr","obsolete-tag","parsing-order","pipe-like","table-layout","tag-like","unbalanced-header","unclosed-comment","unclosed-quote","unclosed-table","unescaped","unknown-page","unmatched-tag","unterminated-url","url-encoding","var-anchor","void-ext"]});var Ee,Ge,Nr,Fn,Dt,ve=y(()=>{"use strict";Ee={running:!1,run(d){let{running:i}=this;this.running=!0;try{let e=d();return this.running=i,e}catch(e){throw this.running=i,e}}},Ge=d=>i=>i.type===d,Nr=(d,i,e,t=[])=>{let r=[...d.childNodes],n=r.splice(i,e,...t);d.setAttribute("childNodes",r);for(let s of t)s.setAttribute("parentNode",d);return n},Fn=(d,i)=>new Array(d).fill(void 0).map((e,t)=>i(t)),Dt=(d,i)=>{Object.defineProperty(d,"name",{value:i.name})}});var Ln=qs((_o,Ms)=>{Ms.exports={ext:[],html:[["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","tr","td","th","q","bdo"],["li","dt","dd"],["br","wbr","hr","meta","link"]],namespaces:{},nsid:{file:6,category:14},parserFunction:[{"#language":"language","#special":"special","#speciale":"speciale","#tag":"tag","#formatdate":"formatdate","#dateformat":"formatdate","#invoke":"invoke","#while":"while","#dowhile":"dowhile","#loop":"loop","#forargs":"forargs","#fornumargs":"fornumargs","#if":"if","#ifeq":"ifeq","#switch":"switch","#ifexist":"ifexist","#ifexpr":"ifexpr","#iferror":"iferror","#time":"time","#timel":"timel","#expr":"expr","#rel2abs":"rel2abs","#titleparts":"titleparts","#categorytree":"categorytree","#urldecode":"urldecode","#choose":"choose","#var":"var","#varexists":"varexists","#var_final":"var_final","#vardefine":"vardefine","#vardefineecho":"vardefineecho","#widget":"widget","#regex":"regex","#related":"related","#cscore":"cscore"},["!","="],["msg","raw"],["subst","safesubst"]],doubleUnderscore:[[],[]],protocol:"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|matrix:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|worldwind://|xmpp:",interwiki:[],img:{},redirection:["#redirect"],variants:[]}});var Rn,be=y(()=>{"use strict";Rn=Ln()});var Pn,ke,ye,tt,jn,le,Ht,de,zs,Bn,qn,Ws,rt,we,H=y(()=>{"use strict";Pn=String.raw`[^[\]<>"\0-\x1F\x7F\p{Zs}\uFFFD]`,ke=String.raw`(?:\[[\da-f:.]+\]|${Pn})`,ye=String.raw`(?:${Pn}|\0\d+[c!~]\x7F)*`,tt=(d,i)=>e=>e.replace(d,i),jn=tt(/[\0\x7F]|\r$/gmu,""),le=tt(/\0\d+c\x7F/gu,""),Ht=tt(/[\\{}()|.?*+^$[\]]/gu,String.raw`\$&`),de=(d,i="")=>d.map(e=>typeof e=="string"?e:e.text()).join(i),zs={lt:"<",gt:">",lbrack:"[",rbrack:"]",lbrace:"{",rbrace:"}"},Bn=tt(/&(?:#(\d+|x[\da-fA-F]+)|([lLgG][tT]|[lr]brac[ke]));/gu,(d,i,e)=>i?String.fromCodePoint(+((/^x/iu.test(i)?"0":"")+i)):zs[e.toLowerCase()]),qn=tt(/\n/gu,String.raw`\n`),Ws={"&":"amp","<":"lt",">":"gt"},rt=tt(/[&<>]/gu,d=>`&${Ws[d]};`),we=(d,i={})=>{let{pre:e="",post:t="",sep:r=""}=i;return e+d.map(n=>n.print()).join(r)+t}});var Gn={};W(Gn,{Title:()=>$r});var _n,Ct,Nt,$r,On=y(()=>{"use strict";H();_n=d=>decodeURIComponent(d.replace(/%(?![\da-f]{2})/giu,"%25")),$r=class{constructor(i,e,t,r,n){v(this,Ct);v(this,Nt);T(this,"ns");T(this,"fragment");T(this,"interwiki","");T(this,"valid");T(this,"encoded",!1);let s=i.trim().startsWith("../");if(i=Bn(i),r&&i.includes("%"))try{let o=/%(?!21|3[ce]|5[bd]|7[b-d])[\da-f]{2}/iu.test(i);i=_n(i),this.encoded=o}catch(o){}if(i=i.replace(/_/gu," ").trim(),s)this.ns=0;else{let o=e;i.startsWith(":")&&(o=0,i=i.slice(1).trim());let g=i.split(":");if(g.length>1){let p=t.nsid[g[0].trim().toLowerCase()];p&&(o=p,i=g.slice(1).join(":").trim())}this.ns=o}let a=i.indexOf("#");if(a!==-1){let o=i.slice(a+1).trimEnd();if(o.includes("%"))try{o=_n(o)}catch(g){}this.fragment=o,i=i.slice(0,a).trim()}this.valid=!!(i||this.interwiki||n&&this.ns===0&&this.fragment!==void 0)&&!/^:|\0\d+[eh!+-]\x7F|[<>[\]{}|\n]|%[\da-f]{2}|(?:^|\/)\.{1,2}(?:$|\/)/iu.test(s?/^(?:\.\.\/)+(.*)/u.exec(i)[1]:i),this.main=i,Object.defineProperties(this,{encoded:{enumerable:!1,writable:!1}}),N(this,Nt,t.namespaces)}get main(){return h(this,Ct)}set main(i){i=i.replace(/_/gu," ").trim(),N(this,Ct,i&&i[0].toUpperCase()+i.slice(1))}get prefix(){let i=h(this,Nt)[this.ns];return i+(i&&":")}get title(){return(this.interwiki+(this.interwiki&&":")+this.prefix+this.main).replace(/ /gu,"_")}get extension(){let{main:i}=this,e=i.lastIndexOf(".");return e===-1?void 0:i.slice(e+1).toLowerCase()}toString(){return`${this.title}${this.fragment===void 0?"":`#${this.fragment}`}`}};Ct=new WeakMap,Nt=new WeakMap});var Mn,$,E,B=y(()=>{"use strict";L();Mn=d=>(i,e,t,r,n="error")=>{let{start:s}=e,{top:a,left:o}="top"in e?e:i.getRootNode().posFromIndex(s),{offsetHeight:g,offsetWidth:p}=i,{startIndex:l,startLine:u,startCol:c}=d(i,s,a,o);return{rule:t,message:f.msg(r),severity:n,startIndex:l,endIndex:l+i.toString().length,startLine:u,endLine:u+g-1,startCol:c,endCol:g===1?c+p:p}},$=Mn((d,i,e,t)=>{let r=d.getRelativeIndex(),{top:n,left:s}=d.parentNode.posFromIndex(r);return{startIndex:i+r,startLine:e+n,startCol:n?s:t+s}}),E=Mn((d,i,e,t)=>({startIndex:i,startLine:e,startCol:t}))});var zn,Wn,$t,It,Ir,nt,Er=y(()=>{"use strict";zn=d=>{let i=d.split(`
`),e=i.length;return{height:e,width:i[e-1].length}},Wn=(d,i)=>i.childNodes.slice(0,d).reduce((e,t,r)=>e+t.toString().length+i.getGaps(r),0)+i.getAttribute("padding"),nt=class{constructor(){v(this,It);T(this,"childNodes",[]);v(this,$t)}get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes[this.childNodes.length-1]}get parentNode(){return h(this,$t)}get nextSibling(){var e;let i=(e=this.parentNode)==null?void 0:e.childNodes;return i&&i[i.indexOf(this)+1]}get previousSibling(){var e;let i=(e=this.parentNode)==null?void 0:e.childNodes;return i&&i[i.indexOf(this)-1]}get offsetHeight(){return I(this,It,Ir).call(this).height}get offsetWidth(){return I(this,It,Ir).call(this).width}getAttribute(i){return i==="padding"?0:this[i]}setAttribute(i,e){i==="parentNode"?N(this,$t,e):this[i]=e}getRootNode(){let{parentNode:i}=this;for(;i!=null&&i.parentNode;)({parentNode:i}=i);return i!=null?i:this}posFromIndex(i){let e=String(this);if(i>=-e.length&&i<=e.length){let{height:t,width:r}=zn(e.slice(0,i));return{top:t-1,left:r}}}getGaps(i){return 0}getRelativeIndex(i){if(i===void 0){let{parentNode:e}=this;return e?Wn(e.childNodes.indexOf(this),e):0}return Wn(i,this)}getAbsoluteIndex(){let{parentNode:i}=this;return i?i.getAbsoluteIndex()+this.getRelativeIndex():0}seal(i,e){Object.defineProperty(this,i,{enumerable:!e&&!!this[i],configurable:!0})}};$t=new WeakMap,It=new WeakSet,Ir=function(){return zn(String(this))}});var ge,Vt,Fr,Lr,Xt,Un=y(()=>{"use strict";H();ve();Er();Xt=class extends nt{constructor(){super(...arguments);v(this,ge)}get length(){return this.childNodes.length}text(e){return de(this.childNodes,e)}normalize(){let e=[...this.childNodes],t=r=>{e.splice(r,1)};for(let r=e.length-1;r>=0;r--){let{type:n,data:s}=e[r];n!=="text"||this.getGaps(r-1)||s===""&&t(r)}this.setAttribute("childNodes",e)}removeAt(e){return Nr(this,e,1)[0]}insertAt(e,t=this.length){return Nr(this,t,0,[e]),e}closest(e){let t=I(this,ge,Vt).call(this,e),{parentNode:r}=this;for(;r;){if(t(r))return r;({parentNode:r}=r)}}querySelector(e){let t=I(this,ge,Vt).call(this,e);return I(this,ge,Fr).call(this,t)}querySelectorAll(e){let t=I(this,ge,Vt).call(this,e);return I(this,ge,Lr).call(this,t)}append(...e){for(let t of e)this.insertAt(t)}replaceChildren(...e){for(let t=this.length-1;t>=0;t--)this.removeAt(t);this.append(...e)}setText(e,t=0){t+=t<0?this.length:0;let r=this.childNodes[t],{data:n}=r;return r.replaceData(e),n}toString(e=""){return this.childNodes.map(String).join(e)}lint(e=this.getAbsoluteIndex(),t){let r=[];for(let n=0,s=e+this.getAttribute("padding");n<this.length;n++){let a=this.childNodes[n];r.push(...a.lint(s,t)),s+=a.toString().length+this.getGaps(n)}return r}print(e={}){var t;return this.toString()?`<span class="wpb-${(t=e.class)!=null?t:this.type}">${we(this.childNodes,e)}</span>`:""}json(e,t=this.getAbsoluteIndex()){let r={...this,range:[t,t+this.toString().length],childNodes:[]};for(let n=0,s=t+this.getAttribute("padding");n<this.length;n++){let a=this.childNodes[n],{length:o}=a.toString();a.type==="text"?r.childNodes.push({data:a.data,range:[s,s+o]}):r.childNodes.push(a.json(void 0,s)),s+=o+this.getGaps(n)}return r}};ge=new WeakSet,Vt=function(e){let t=new Set(e.split(",").map(r=>r.trim()));return({type:r})=>t.has(r)},Fr=function(e){var t;for(let r of this.childNodes){if(r.type==="text")continue;if(e(r))return r;let n=I(t=r,ge,Fr).call(t,e);if(n)return n}},Lr=function(e){var r;let t=[];for(let n of this.childNodes)n.type!=="text"&&(e(n)&&t.push(n),t.push(...I(r=n,ge,Lr).call(r,e)));return t}});var Dn,Us,Ds,Hs,Vs,Xs,Qs,Qt,Hn,Et,Vn=y(()=>{"use strict";H();L();Er();Dn=String.raw`<\s*(?:/\s*)?([a-z]\w*)|\{+|\}+|\[{2,}|\[(?![^[]*?\])|((?:^|\])[^[]*?)\]+`,Us=new RegExp(String.raw`${Dn}|https?[:/]/+`,"giu"),Ds=new RegExp(Dn,"giu"),Hs=new RegExp(String.raw`^https?://${ke}${ye}\.(?:gif|png|jpg|jpeg)$`,"iu"),Vs={"[":/[[\]]/u,"{":/[{}]/u,"]":/[[\]](?=[^[\]]*$)/u,"}":/[{}](?=[^{}]*$)/u},Xs={"<":"tag-like","[":"lonely-bracket","{":"lonely-bracket","]":"lonely-bracket","}":"lonely-bracket",h:"lonely-http"},Qs=["html","head","style","title","body","a","audio","img","video","embed","iframe","object","canvas","script","col","colgroup","tbody","tfoot","thead","button","input","label","option","select","textarea"],Et=class extends nt{constructor(e){super();v(this,Qt);T(this,"type","text");T(this,"data","");Object.defineProperties(this,{childNodes:{enumerable:!1,configurable:!1},type:{enumerable:!1,writable:!1},data:{value:e}})}toString(){return this.data}text(){return this.data}lint(e=this.getAbsoluteIndex(),t){var j,J,D;let{data:r,parentNode:n,nextSibling:s,previousSibling:a}=this;if(!n)throw new Error("\u65E0\u6CD5\u5BF9\u5B64\u7ACB\u6587\u672C\u8282\u70B9\u8FDB\u884C\u8BED\u6CD5\u5206\u6790\uFF01");let{type:o,name:g,parentNode:p}=n,l=!1;if(o==="attr-value"){let{type:te,name:X,tag:Q}=p;if(te!=="ext-attr")l=!0;else if(Q==="choose"&&(X==="before"||X==="after"))return[]}if(t!=null||(t=o==="free-ext-link"||o==="ext-link-url"||o==="image-parameter"&&g==="link"||l?Ds:Us),r.search(t)===-1)return[];t.lastIndex=0;let u=[],c=s==null?void 0:s.type,m=s==null?void 0:s.name,x=a==null?void 0:a.type,b=this.getRootNode(),{ext:C,html:w}=b.getAttribute("config"),{top:S,left:A}=b.posFromIndex(e),F=new Set(["onlyinclude","noinclude","includeonly",C,w,Qs].flat(2));for(let te=t.exec(r);te;te=t.exec(r)){let[,X,Q]=te,{0:ne,index:Z}=te;if(Q&&Q!=="]"){let{length:ie}=Q;Z+=ie,ne=ne.slice(ie)}let{0:P,length:Te}=ne;if(P==="<"&&!F.has(X.toLowerCase())||P==="["&&o==="ext-link-text"&&(/&(?:rbrack|#93|#x5[Dd];);/u.test(r.slice(Z+1))||c==="ext"&&m==="nowiki"&&((j=s.innerText)!=null&&j.includes("]"))))continue;if(P==="]"&&(Z||Te>1))t.lastIndex--;else if(P==="h"&&Z===0&&o==="ext-link-text"&&Hs.test(r))continue;let U=e+Z,Ke=U+Te,Mt=b.toString(),Je=Mt[Ke],zt=Mt[U-1],vr=Te>1&&!(P==="<"&&!/[\s/>]/u.test(Je!=null?Je:"")||l&&(P==="["||P==="]"))||P==="{"&&(Je===P||zt==="-")||P==="}"&&(zt===P||Je==="-")||P==="["&&(Je===P||o==="ext-link-text"||c==="free-ext-link"&&!r.slice(Z+1).trim())||P==="]"&&(zt===P||x==="free-ext-link"&&!r.slice(0,Z).includes("]"))?"error":"warning",wr=P==="{"||P==="[";if(vr==="warning"&&(wr||(P==="]"||P==="}"))){let ie=Vs[P],Sr=wr?r.slice(Z+1):r.slice(0,Z);if(P==="{"&&((J=ie.exec(Sr))==null?void 0:J[0])==="}"||P==="}"&&((D=ie.exec(Sr))==null?void 0:D[0])==="{")continue;if(!Sr.includes(P)){let wn=wr?"nextSibling":"previousSibling",_e=this[wn];for(;_e&&(_e.type!=="text"||!ie.test(_e.data));)_e=_e[wn];if(_e&&ie.exec(_e.data)[0]!==P)continue}}let Wt=r.slice(0,Z).split(`
`),yn=Wt.length+S-1,An=Wt[Wt.length-1],vn=Wt.length===1?A+An.length:An.length,wt={rule:Xs[P],message:f.msg('lonely "$1"',P==="h"?ne:P),severity:vr,startIndex:U,endIndex:Ke,startLine:yn,endLine:yn,startCol:vn,endCol:vn+Te};if(P==="<")wt.suggestions=[{desc:"escape",range:[U,U+1],text:"&lt;"}];else if(P==="h"&&!(o==="ext-link-text"||o==="link-text")&&/[\p{L}\d_]/u.test(zt||""))wt.suggestions=[{desc:"whitespace",range:[U,U],text:" "}];else if(P==="["&&o==="ext-link-text"){let ie=n.getAbsoluteIndex()+n.toString().length;wt.suggestions=[{desc:"escape",range:[ie,ie+1],text:"&#93;"}]}else if(P==="]"&&x==="free-ext-link"&&vr==="error"){let ie=e-a.toString().length;wt.fix={range:[ie,ie],text:"["}}u.push(wt)}return u}replaceData(e){I(this,Qt,Hn).call(this,e)}print(){return rt(this.data)}};Qt=new WeakSet,Hn=function(e){this.setAttribute("data",e)}});var pe,Oe=y(()=>{"use strict";ve();pe=d=>(i,e)=>{class t extends i{text(){return""}lint(n){return d?[]:super.lint(n)}}return Dt(t,i),t}});var ue,it=y(()=>{"use strict";R();ue=class extends k{constructor(i,e,t="plain",r,n,s){super(i,r,n,s),this.type=t}lint(){return[]}}});var G,Se=y(()=>{"use strict";R();G=class extends k{constructor(i,e,t,r,n){super(i,t,r,n),this.type=e}}});var Me,xe,Fe,Ae,Lt=y(()=>{"use strict";B();be();L();R();Se();Ae=class extends k{constructor(e,t,r=f.getConfig(),n=[],s="|"){super(void 0,r,n,{});v(this,Me,!0);v(this,xe);v(this,Fe);if(this.insertAt(new G(e,"link-target",r,n,{})),t!==void 0){let a=new k(t,r,n,{});a.type="link-text",a.setAttribute("stage",10),this.insertAt(a)}N(this,xe,s)}afterBuild(){N(this,Fe,this.getTitle()),h(this,xe).includes("\0")&&N(this,xe,this.buildFromStr(h(this,xe),0)),this.setAttribute("name",h(this,Fe).title)}setAttribute(e,t){e==="bracket"?N(this,Me,t):e==="title"?N(this,Fe,t):super.setAttribute(e,t)}toString(){let e=super.toString(h(this,xe));return h(this,Me)?`[[${e}]]`:e}text(){let e=super.text("|");return h(this,Me)?`[[${e}]]`:e}getAttribute(e){return e==="title"?h(this,Fe):e==="padding"?2:super.getAttribute(e)}getGaps(e){return e===0?h(this,xe).length:1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{childNodes:[n,s],type:a}=this,{encoded:o,fragment:g}=h(this,Fe),p;if(n.childNodes.some(({type:l})=>l==="template")&&(p={start:e,...this.getRootNode().posFromIndex(e)},r.push($(n,p,"unknown-page","template in an internal link target","warning"))),o&&(p!=null||(p={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(n,p,"url-encoding","unnecessary URL encoding in an internal link"))),a==="link"||a==="category"){let l=s==null?void 0:s.childNodes.find(u=>u.type==="text"&&u.data.includes("|"));if(l){p!=null||(p={start:e,...this.getRootNode().posFromIndex(e)});let u=$(s,p,"pipe-like",'additional "|" in the link text',"warning");u.suggestions=[{desc:"escape",range:[u.startIndex+l.getRelativeIndex(),u.startIndex+l.getRelativeIndex()+l.data.length],text:l.data.replace(/\|/gu,"&#124;")}],r.push(u)}}if(a!=="link"&&a!=="redirect-target"&&g!==void 0){p!=null||(p={start:e,...this.getRootNode().posFromIndex(e)});let l=$(n,p,"no-ignored","useless fragment"),u=n.childNodes.find(c=>c.type==="text"&&c.data.includes("#"));u&&(l.fix={range:[l.startIndex+u.getRelativeIndex()+u.data.indexOf("#"),l.endIndex],text:""}),r.push(l)}return r}getTitle(e){return this.normalizeTitle(this.firstChild.text(),0,e,!0,!0)}print(){return super.print(h(this,Me)?{pre:"[[",post:"]]",sep:h(this,xe)}:{sep:h(this,xe)})}};Me=new WeakMap,xe=new WeakMap,Fe=new WeakMap});var ee,Le=y(()=>{"use strict";R();ee=class extends k{get innerText(){return this.firstChild.data}constructor(i="",e,t){super(i,e,t)}}});var Xn,Rr,Zs,z,Re=y(()=>{"use strict";Oe();Le();Xn=[pe(!0)];z=class extends(Zs=ee){constructor(){super(...arguments);T(this,"type","noinclude")}};Rr=se(Zs),z=ae(Rr,0,"NoincludeToken",Xn,z),oe(Rr,1,z)});var Zt,Qn=y(()=>{"use strict";B();L();Lt();Re();Zt=class extends Ae{constructor(e,t,r=f.getConfig(),n=[]){super(e,void 0,r,n);T(this,"type","redirect-target");t!==void 0&&this.insertAt(new z(t,r,n))}getTitle(){return this.normalizeTitle(this.firstChild.toString(),0,!0,!0)}text(){return`[[${this.firstChild.toString()}]]`}lint(e=this.getAbsoluteIndex()){let t=super.lint(e,/\]\]/u);if(this.length===2){let r=$(this.lastChild,{start:e},"no-ignored","useless link text");r.startIndex--,r.startCol--,r.fix={range:[r.startIndex,r.endIndex],text:""},t.push(r)}return t}}});var Zn,Pe,st,Pr,Ks,ze,Kn=y(()=>{"use strict";Oe();L();R();it();Qn();Zn=[pe()];ze=class extends(Ks=k){constructor(e,t,r,n,s,a=f.getConfig(),o=[]){super(void 0,a,o);T(this,"type","redirect");v(this,Pe);v(this,st);N(this,Pe,e),N(this,st,s);let g=new RegExp(String.raw`^(?:${a.redirection.join("|")})\s*(?::\s*)?$`,"iu");this.append(new ue(t,g,"redirect-syntax",a,o,{}),new Zt(r,n==null?void 0:n.slice(1),a,o))}getAttribute(e){return e==="padding"?h(this,Pe).length:super.getAttribute(e)}toString(){return h(this,Pe)+super.toString()+h(this,st)}lint(e=this.getAbsoluteIndex()){return this.lastChild.lint(e+h(this,Pe).length+this.firstChild.toString().length)}print(){return super.print({pre:h(this,Pe),post:h(this,st)})}};Pr=se(Ks),Pe=new WeakMap,st=new WeakMap,ze=ae(Pr,0,"RedirectToken",Zn,ze),oe(Pr,1,ze)});var Jn={};W(Jn,{parseRedirect:()=>Js});var Js,Yn=y(()=>{"use strict";L();Kn();Js=(d,i,e)=>{let t=new RegExp(String.raw`^(\s*)((?:${i.redirection.join("|")})\s*(?::\s*)?)\[\[([^\n|\]]+)(\|.*?)?\]\](\s*)`,"iu"),r=t.exec(d);return r&&f.normalizeTitle(r[3],0,!1,i,!0,!0).valid?(d=`\0${e.length}c\x7F${d.slice(r[0].length)}`,new ze(...r.slice(1),i,e),d):!1}});var Kt,ei=y(()=>{"use strict";R();Kt=class extends k{constructor(){super(...arguments);T(this,"type","onlyinclude")}toString(){return`<onlyinclude>${super.toString()}</onlyinclude>`}getAttribute(e){return e==="padding"?13:e==="plain"||super.getAttribute(e)}print(){return super.print({pre:'<span class="wpb-ext">&lt;onlyinclude&gt;</span>',post:'<span class="wpb-ext">&lt;/onlyinclude&gt;</span>'})}}});var je,ot,jr=y(()=>{"use strict";R();ot=class extends k{constructor(e,t,r,n,s,a=[]){super(void 0,s);v(this,je);T(this,"closed");T(this,"selfClosing");this.setAttribute("name",e.toLowerCase()),N(this,je,[e,n||e]),this.closed=n!=="",this.selfClosing=n===void 0,this.append(t,r);let o=typeof t=="string"?-1:a.indexOf(t);a.splice(o===-1?1/0:o,0,this)}get innerText(){return this.selfClosing?void 0:this.lastChild.text()}toString(){let{selfClosing:e,firstChild:t,lastChild:r}=this,[n,s]=h(this,je);return e?`<${n}${t.toString()}/>`:`<${n}${t.toString()}>${r.toString()}${this.closed?`</${s}>`:""}`}text(){let[e,t]=h(this,je);return this.selfClosing?`<${e}${this.firstChild.text()}/>`:`<${e}${super.text(">")}${this.closed?`</${t}>`:""}`}getAttribute(e){return e==="padding"?h(this,je)[0].length+1:super.getAttribute(e)}getGaps(){return 1}print(){let[e,t]=h(this,je);return super.print(this.selfClosing?{pre:`&lt;${e}`,post:"/&gt;"}:{pre:`&lt;${e}`,sep:"&gt;",post:this.closed?`&lt;/${t}&gt;`:""})}};je=new WeakMap});var ti,Br,Ys,We,ri=y(()=>{"use strict";B();Oe();L();jr();ti=[pe()];We=class extends(Ys=ot){constructor(e,t="",r,n,s,a){super(e,t,r!=null?r:"",r===void 0||n!=null?n:"",s,a);T(this,"type","include")}lint(e=this.getAbsoluteIndex()){if(this.closed)return[];let t=E(this,{start:e},"unclosed-comment",f.msg("unclosed $1",`<${this.name}>`));return t.suggestions=[{desc:"close",range:[t.endIndex,t.endIndex],text:`</${this.name}>`}],[t]}};Br=se(Ys),We=ae(Br,0,"IncludeToken",ti,We),oe(Br,1,We)});var eo,V,ni,ii,Yt,qr,si,Rt,ai,li,di,oi,Jt,to,ro,no,at,K,ce,lt,gi=y(()=>{"use strict";B();H();be();L();R();Se();eo=new Set(["id","class","style","lang","dir","title","tabindex","aria-describedby","aria-flowto","aria-hidden","aria-label","aria-labelledby","aria-level","aria-owns","role","about","property","resource","datatype","typeof","itemid","itemprop","itemref","itemscope","itemtype"]),V=new Set(["align"]),ni=new Set(["cite"]),ii=new Set(["cite","datetime"]),Yt=new Set(["width"]),qr=new Set(["axis","align","bgcolor","height","width","valign"]),si=new Set([...qr,"abbr","headers","scope","rowspan","colspan"]),Rt=new Set(["type"]),ai=new Set(["summary","align","bgcolor","cellpadding","cellspacing","frame","rules","width"]),li=new Set(["clear"]),di=new Set(["bgcolor","align","valign"]),oi={div:V,h1:V,h2:V,h3:V,h4:V,h5:V,h6:V,blockquote:ni,q:ni,p:V,br:li,pre:Yt,ins:ii,del:ii,ul:Rt,ol:new Set(["type","start","reversed"]),li:new Set(["type","value"]),table:new Set([...ai,"border"]),caption:V,tr:di,td:si,th:si,img:new Set(["alt","src","width","height","srcset"]),font:new Set(["size","color","face"]),hr:Yt,rt:new Set(["rbspan"]),data:new Set(["value"]),time:new Set(["datetime"]),meta:new Set(["itemprop","content"]),link:new Set(["itemprop","href","title"]),gallery:new Set(["mode","showfilename","caption","perrow","widths","heights","showthumbnails","type"]),poem:new Set(["compact","align"]),categorytree:new Set(["align","hideroot","onlyroot","depth","mode","hideprefix","namespaces","showcount","notranslations"]),combooption:new Set(["name","for","inline","align"])},Jt=new Set,to={nowiki:Jt,indicator:new Set(["name"]),langconvert:new Set(["from","to"]),ref:new Set(["group","name","extends","follow","dir"]),references:new Set(["group","responsive"]),charinsert:new Set(["label"]),choose:new Set(["uncached","before","after"]),option:new Set(["weight"]),imagemap:Jt,inputbox:Jt,templatestyles:new Set(["src","wrapper"]),dynamicpagelist:Jt,poll:new Set(["id","show-results-before-voting"]),sm2:Rt,flashmp3:Rt,score:new Set(["line_width_inches","lang","override_midi","raw","note-language","override_audio","override_ogg","sound","vorbis"]),seo:new Set(["title","title_mode","title_separator","keywords","description","robots","google_bot","image","image_width","image_height","image_alt","type","site_name","locale","section","author","published_time","twitter_site"]),tab:new Set(["nested","name","index","class","block","inline","openname","closename","collapsed","dropdown","style","bgcolor","container","id","title"]),tabs:new Set(["plain","class","container","id","title","style"]),combobox:new Set(["placeholder","value","id","class","text","dropdown","style"])},ro=/expression|(?:accelerator|-o-link(?:-source)?|-o-replace)\s*:|(?:url|image(?:-set)?)\s*\(|attr\s*\([^)]+[\s,]url/u,no={table:ai,td:new Set([...qr,"scope"]),th:qr,br:li,caption:V,div:V,hr:Yt,h1:V,h2:V,h3:V,h4:V,h5:V,h6:V,li:Rt,p:V,pre:Yt,tr:di,ul:Rt},lt=class extends k{constructor(e,t,r,n="",s,a=[],o=f.getConfig(),g=[]){let p=new G(r,"attr-key",o,g,{}),l;if(r==="title"||t==="img"&&r==="alt")l=new k(s,o,g,{}),l.type="attr-value",l.setAttribute("stage",10);else if(t==="gallery"&&r==="caption"){let u={...o,excludes:[...o.excludes,"quote","extLink","magicLink","list"]};l=new k(s,u,g,{}),l.type="attr-value",l.setAttribute("stage",5)}else if(t==="choose"&&(r==="before"||r==="after")){let u={...o,excludes:[...o.excludes,"heading","html","table","hr","list"]};l=new k(s,u,g,{}),l.type="attr-value",l.setAttribute("stage",1)}else l=new G(s,"attr-value",o,g,{});super(void 0,o,g);v(this,at);v(this,K);v(this,ce);this.type=e,this.append(p,l),N(this,K,n),N(this,ce,[...a]),N(this,at,t),this.setAttribute("name",le(r).trim().toLowerCase())}get tag(){return h(this,at)}get balanced(){return!h(this,K)||h(this,ce)[0]===h(this,ce)[1]}afterBuild(){h(this,K).includes("\0")&&N(this,K,this.buildFromStr(h(this,K),0)),this.parentNode&&N(this,at,this.parentNode.name),this.setAttribute("name",this.firstChild.text().trim().toLowerCase())}toString(){let[e="",t=""]=h(this,ce);return h(this,K)?super.toString(h(this,K)+e)+t:this.firstChild.toString()}text(){return h(this,K)?`${super.text(`${h(this,K).trim()}"`)}"`:this.firstChild.text()}getGaps(){var e,t;return h(this,K)?h(this,K).length+((t=(e=h(this,ce)[0])==null?void 0:e.length)!=null?t:0):0}lint(e=this.getAbsoluteIndex(),t){var m,x;let r=super.lint(e,t),{balanced:n,firstChild:s,lastChild:a,type:o,name:g,tag:p}=this,l=this.getValue(),u;if(!n){let b=this.getRootNode();u={start:e,...b.posFromIndex(e)};let C=$(a,u,"unclosed-quote",f.msg("unclosed $1","quotes"),"warning");C.startIndex--,C.startCol--;let w={range:[C.endIndex,C.endIndex],text:h(this,ce)[0]};a.childNodes.some(({type:S,data:A})=>S==="text"&&/\s/u.test(A))?C.suggestions=[{desc:"close",...w}]:C.fix=w,r.push(C)}let c=to[p];if(c&&!c.has(g)||(o==="ext-attr"?p in oi:!/\{\{[^{]+\}\}/u.test(g))&&!((m=oi[p])!=null&&m.has(g))&&!/^(?:xmlns:[\w:.-]+|data-[^:]*)$/u.test(g)&&(p==="meta"||p==="link"||!eo.has(g)))u!=null||(u={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(s,u,"illegal-attr","illegal attribute name"));else if((x=no[p])!=null&&x.has(g))u!=null||(u={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(s,u,"obsolete-attr","obsolete attribute","warning"));else if(g==="style"&&typeof l=="string"&&ro.test(l))u!=null||(u={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(a,u,"insecure-style","insecure style"));else if(g==="tabindex"&&typeof l=="string"&&l.trim()!=="0"){u!=null||(u={start:e,...this.getRootNode().posFromIndex(e)});let b=$(a,u,"illegal-attr","nonzero tabindex");b.suggestions=[{desc:"remove",range:[e,b.endIndex],text:""},{desc:"0 tabindex",range:[b.startIndex,b.endIndex],text:"0"}],r.push(b)}return r}getValue(){if(h(this,K)){let e=this.lastChild.text();return h(this,ce)[1]?e:e[h(this,ce)[0]?"trimEnd":"trim"]()}return this.type==="ext-attr"||""}print(){let[e="",t=""]=h(this,ce);return h(this,K)?super.print({sep:rt(h(this,K))+e,post:t}):super.print()}};at=new WeakMap,K=new WeakMap,ce=new WeakMap});var er,pi,io,Be,tr=y(()=>{"use strict";B();H();L();R();Se();gi();er=/([^\s/](?:(?!\0\d+~\x7F)[^\s/=])*)(?:((?:\s|\0\d+c\x7F)*(?:=|\0\d+~\x7F)(?:\s|\0\d+c\x7F)*)(?:(["'])(.*?)(\3|$)|(\S*)))?/gsu,pi=d=>d.slice(0,-1),io=d=>`${pi(d)}-dirty`,Be=class extends k{constructor(i,e,t,r=f.getConfig(),n=[]){if(super(void 0,r,n,{}),this.type=e,this.setAttribute("name",t),i){er.lastIndex=0;let s="",a=er.exec(i),o=0,g=()=>{s&&(super.insertAt(new G(s,io(e),r,n,{})),s="")};for(;a;){let{index:p,0:l,1:u,2:c,3:m,4:x,5:b,6:C}=a;if(s+=i.slice(o,p),/^(?:[\w:]|\0\d+[t!~{}+-]\x7F)(?:[\w:.-]|\0\d+[t!~{}+-]\x7F)*$/u.test(le(u).trim())){let w=x!=null?x:C,S=[m,b],A=new lt(pi(e),t,u,c,w,S,r,n);g(),super.insertAt(A)}else s+=l;({lastIndex:o}=er),a=er.exec(i)}s+=i.slice(o),g()}}afterBuild(){if(this.type==="table-attrs"){let{parentNode:i}=this;this.setAttribute("name",(i==null?void 0:i.type)==="td"&&i.subtype==="caption"?"caption":i==null?void 0:i.type)}}getAttrTokens(i){return this.childNodes.filter(e=>e instanceof lt&&(!i||e.name===i.toLowerCase().trim()))}getAttrToken(i){let e=this.getAttrTokens(i);return e[e.length-1]}getAttr(i){var e;return(e=this.getAttrToken(i))==null?void 0:e.getValue()}lint(i=this.getAbsoluteIndex(),e){let t=super.lint(i,e),{parentNode:r,length:n,childNodes:s}=this,a=new Map,o=new Set,g;if((r==null?void 0:r.type)==="html"&&r.closing&&this.text().trim()){g={start:i,...this.getRootNode().posFromIndex(i)};let p=E(this,g,"no-ignored","attributes of a closing tag");p.fix={range:[i,p.endIndex],text:""},t.push(p)}for(let p=0;p<n;p++){let l=s[p];if(l instanceof G&&l.text().trim()){g!=null||(g={start:i,...this.getRootNode().posFromIndex(i)});let u=$(l,g,"no-ignored","containing invalid attribute");u.suggestions=[{desc:"remove",range:[u.startIndex,u.endIndex],text:" "}],t.push(u)}else if(l instanceof lt){let{name:u}=l;a.has(u)?(o.add(u),a.get(u).push(l)):u!=="class"&&a.set(u,[l])}}if(o.size>0){g!=null||(g={start:i,...this.getRootNode().posFromIndex(i)});for(let p of o)t.push(...a.get(p).map(l=>$(l,g,"no-duplicate",f.msg("duplicated $1 attribute",p))))}return t}print(){return this.toString()?`<span class="wpb-${this.type}">${this.childNodes.map(i=>i.print(i instanceof G?{class:"attr-dirty"}:void 0)).join("")}</span>`:""}}});var ui={};W(ui,{PreToken:()=>_r});var _r,ci=y(()=>{"use strict";be();L();R();Re();_r=class extends k{constructor(e,t=f.getConfig(),r=[]){if(e){let n="<nowiki>",s="</nowiki>",{length:a}=n,o=e.indexOf(n),g=e.indexOf(s,o+a),p="";for(;o!==-1&&g!==-1;)new z(n,t,r),new z(s,t,r),p+=`${e.slice(0,o)}\0${r.length-1}c\x7F${e.slice(o+a,g)}\0${r.length}c\x7F`,e=e.slice(g+a+1),o=e.indexOf(n),g=e.indexOf(s,o+a);e=p+e}super(e,t,r,{});T(this,"type","ext-inner");this.setAttribute("stage",10)}getAttribute(e){return e==="plain"||super.getAttribute(e)}lint(e=this.getAbsoluteIndex()){return super.lint(e,/<\s*\/\s*(pre)\b/giu)}}});var hi={};W(hi,{ParamTagToken:()=>Pt});var Pt,Gr=y(()=>{"use strict";B();L();R();Se();Pt=class extends k{constructor(e,t=f.getConfig(),r=[],n={}){super(void 0,t,r,{});T(this,"type","ext-inner");if(e){let s=G;this.append(...e.split(`
`).map(a=>new s(a,"param-line",t,r,{})))}}toString(){return super.toString(`
`)}text(){return super.text(`
`)}getGaps(){return 1}lint(e=this.getAbsoluteIndex()){let t;return this.childNodes.filter(r=>{let{childNodes:n}=r,s=n.findIndex(({type:o})=>o!=="text"),a=(s>=0?n.slice(0,s).map(String).join(""):r.toString()).trim();return a&&!(s>=0?/^[a-z]+(?:\[\])?\s*(?:=|$)/iu:/^[a-z]+(?:\[\])?\s*=/iu).test(a)}).map(r=>{t!=null||(t={start:e,...this.getRootNode().posFromIndex(e)});let n=$(r,t,"no-ignored",f.msg("invalid parameter of <$1>",this.name));return n.suggestions=[{desc:"remove",range:[n.startIndex,n.endIndex],text:""}],n})}print(){return super.print({sep:`
`})}}});var jt,dt,rr,gt,Or=y(()=>{"use strict";B();L();R();it();gt=class extends k{constructor(e,t,r=f.getConfig(),n=[]){super(void 0,r,n);v(this,dt);T(this,"type","heading");v(this,jt);N(this,jt,e);let s=new k(t[0],r,n);s.type="heading-title",s.setAttribute("stage",2);let a=new ue(t[1],/^[^\S\n]*$/u,"heading-trail",r,n,{});this.append(s,a)}get level(){return h(this,jt)}toString(){let e=h(this,dt,rr);return e+this.firstChild.toString()+e+this.lastChild.toString()}text(){let e=h(this,dt,rr);return e+this.firstChild.text()+e}getAttribute(e){return e==="padding"?this.level:super.getAttribute(e)}getGaps(){return this.level}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{firstChild:n,level:s}=this,a=n.toString(),o=n.childNodes.filter(u=>u.type==="quote"),g=o.filter(({bold:u})=>u),p=o.filter(({italic:u})=>u),l;return this.level===1&&(l={start:e,...this.getRootNode().posFromIndex(e)},r.push($(n,l,"h1","<h1>"))),(a.startsWith("=")||a.endsWith("="))&&(l!=null||(l={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(n,l,"unbalanced-header",f.msg("unbalanced $1 in a section header",'"="')))),this.closest("html-attrs, table-attrs")&&(l!=null||(l={start:e,...this.getRootNode().posFromIndex(e)}),r.push(E(this,l,"parsing-order","section header in a HTML tag"))),g.length%2&&(l!=null||(l={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(g[g.length-1],{...l,start:e+s,left:l.left+s},"format-leakage",f.msg("unbalanced $1 in a section header","bold apostrophes")))),p.length%2&&(l!=null||(l={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(p[p.length-1],{start:e+s},"format-leakage",f.msg("unbalanced $1 in a section header","italic apostrophes")))),r}print(){let e=h(this,dt,rr);return super.print({pre:e,sep:e})}json(){let e=super.json();return e.level=this.level,e}};jt=new WeakMap,dt=new WeakSet,rr=function(){return"=".repeat(this.level)}});var so,oo,nr,mi=y(()=>{"use strict";H();B();L();R();so=d=>d.text().replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),oo=new RegExp(`https?://${ke}${ye}$`,"iu"),nr=class extends k{constructor(e,t,r=f.getConfig(),n=[]){super(void 0,r,n);T(this,"type","parameter");let s=new k(typeof e=="number"?void 0:e,r,n,{}),a=new k(t,r,n);s.type="parameter-key",a.type="parameter-value",a.setAttribute("stage",2),this.append(s,a)}get anon(){return this.firstChild.length===0}afterBuild(){if(!this.anon){let{parentNode:e,firstChild:t}=this,r=so(t);this.setAttribute("name",r),e&&e.getArgs(r,!1,!1).add(this)}}toString(){return this.anon?this.lastChild.toString():super.toString("=")}text(){return this.anon?this.lastChild.text():super.text("=")}getGaps(){return this.anon?0:1}lint(e=this.getAbsoluteIndex(),t){var a;let r=super.lint(e,t),{firstChild:n}=this,s=(a=oo.exec(n.text()))==null?void 0:a[0];if(s&&new URL(s).search){let o=$(n,{start:e},"unescaped","unescaped query string in an anonymous parameter");o.startIndex=o.endIndex,o.startLine=o.endLine,o.startCol=o.endCol,o.endIndex++,o.endCol++,o.fix={range:[o.startIndex,o.endIndex],text:"{{=}}"},r.push(o)}return r}print(){return super.print({sep:this.anon?"":"="})}json(){let e=super.json();return e.anon=this.anon,e}}});var ao,Ue,De,pt,fi,xi,Bt,Ti=y(()=>{"use strict";H();B();ve();be();L();R();mi();Se();it();ao=new Set(["pageid","articlepath","server","servername","scriptpath","stylepath"]),Bt=class extends k{constructor(e,t,r=f.getConfig(),n=[]){var u,c;super(void 0,r,n,{});v(this,pt);T(this,"type","template");T(this,"modifier","");v(this,Ue,!1);v(this,De,new Map);let{parserFunction:[s,a]}=r,o=(u=/^(?:\s|\0\d+c\x7F)*\0\d+s\x7F/u.exec(e))==null?void 0:u[0];if(o)this.setAttribute("modifier",o),e=e.slice(o.length);else if(e.includes(":")){let[m,...x]=e.split(":"),[b]=/^(?:\s|\0\d+c\x7F)*/u.exec((c=x[0])!=null?c:"");this.setModifier(`${m}:${b}`)&&(e=x.join(":").slice(b.length))}let g=e.includes(":");if(g||t.length===0&&!h(this,Ue)){let[m,...x]=e.split(":"),b=le(m),C=b[x.length>0?"trimStart":"trim"](),w=C.toLowerCase(),S=s[w],A=a.includes(C);if(A||ao.has(S)||g&&S){this.setAttribute("name",S!=null?S:w),this.type="magic-word";let j=new RegExp(String.raw`^\s*${C}\s*$`,A?"u":"iu"),J=new ue(m,j,"magic-word-name",r,n,{});if(super.insertAt(J),x.length>0&&t.unshift([x.join(":")]),this.name==="invoke")for(let D=0;D<2;D++){let te=t.shift();if(!te)break;let X=new G(te.join("="),`invoke-${D?"function":"module"}`,r,n);super.insertAt(X)}}}if(this.type==="template"){let m=le(e).trim();if(!this.normalizeTitle(m,10,!0).valid)throw n.pop(),new SyntaxError("\u975E\u6CD5\u7684\u6A21\u677F\u540D\u79F0");let x=new G(e,"template-name",r,n,{});super.insertAt(x)}let p=this.isTemplate(),l=1;for(let m=0;m<t.length;m++){let x=t[m];!p&&!(this.name==="switch"&&m>0)&&(x[0]=x.join("="),x.length=1),x.length===1&&(x.unshift(l),l++),this.insertAt(new nr(...x,r,n))}this.seal("modifier")}setModifier(e){let{parserFunction:[,,t,r]}=this.getAttribute("config"),n=le(e).trim();if(e&&!n.endsWith(":"))return!1;let s=n.slice(0,-1).toLowerCase(),a=t.includes(s),o=r.includes(s);return h(this,Ue)&&a||!h(this,Ue)&&(o||e==="")||(Ee.running||this.length>1)&&(a||o||e==="")?(this.setAttribute("modifier",e),N(this,Ue,a),!!e):!1}isTemplate(){return this.type==="template"||this.name==="invoke"}afterBuild(){this.modifier.includes("\0")&&this.setAttribute("modifier",this.buildFromStr(this.modifier,0))}toString(){return`{{${this.modifier}${this.type==="magic-word"?`${this.firstChild.toString()}${this.length===1?"":":"}${this.childNodes.slice(1).map(String).join("|")}`:super.toString("|")}}}`}text(){let{childNodes:e,length:t,firstChild:r,modifier:n,type:s,name:a}=this;return s==="magic-word"&&a==="vardefine"?"":`{{${n}${s==="magic-word"?r.text()+(t===1?"":":")+de(e.slice(1),"|"):super.text("|")}}}`}getAttribute(e){switch(e){case"padding":return this.modifier.length+2;default:return super.getAttribute(e)}}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{type:n,childNodes:s,length:a}=this,o;if(!this.isTemplate())return r;let g=I(this,pt,fi).call(this);if(g.fragment!==void 0){o={start:e,...this.getRootNode().posFromIndex(e)};let l=s[n==="template"?0:1],u=$(l,o,"no-ignored","useless fragment"),c=l.childNodes.find(m=>m.type==="text"&&m.data.includes("#"));c&&(u.fix={range:[u.startIndex+c.getRelativeIndex()+c.data.indexOf("#"),u.endIndex],text:""}),r.push(u)}if(g.valid||(o!=null||(o={start:e,...this.getRootNode().posFromIndex(e)}),r.push($(s[1],o,"invalid-invoke","illegal module name"))),n==="magic-word"&&a===2)return o!=null||(o={start:e,...this.getRootNode().posFromIndex(e)}),r.push(E(this,o,"invalid-invoke","missing module function")),r;let p=this.getDuplicatedArgs().filter(([,l])=>!l[0].querySelector("ext"));return p.length>0&&(o!=null||(o={start:e,...this.getRootNode().posFromIndex(e)}),r.push(...p.flatMap(([,l])=>l).map(l=>$(l,o,"no-duplicate","duplicated parameter")))),r}insertAt(e,t=this.length){return super.insertAt(e,t),e.anon?I(this,pt,xi).call(this,e):e.name&&this.getArgs(e.name,!1,!1).add(e),e}getAllArgs(){return this.childNodes.filter(Ge("parameter"))}getAnonArgs(){return this.getAllArgs().filter(({anon:e})=>e)}getArgs(e,t,r=!0){let n=String(e).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),s;return h(this,De).has(n)?s=h(this,De).get(n):(s=new Set(this.getAllArgs().filter(({name:a})=>n===a)),h(this,De).set(n,s)),s}getDuplicatedArgs(){return[...h(this,De)].filter(([,{size:e}])=>e>1).map(([e,t])=>[e,[...t]])}getPossibleValues(){let{type:e,name:t,childNodes:r,constructor:{name:n}}=this;if(e==="template")throw new Error(`${n}.getPossibleValues \u65B9\u6CD5\u4EC5\u4F9B\u7279\u5B9A\u9B54\u672F\u5B57\u4F7F\u7528\uFF01`);let s;switch(t){case"if":case"ifexist":case"ifexpr":case"iferror":s=2;break;case"ifeq":s=3;break;default:throw new Error(`${n}.getPossibleValues \u65B9\u6CD5\u4EC5\u4F9B\u7279\u5B9A\u9B54\u672F\u5B57\u4F7F\u7528\uFF01`)}let a=r.slice(s,s+2).map(({childNodes:[,o]})=>o);for(let o=0;o<a.length;){let{length:g,0:p}=a[o].childNodes.filter(l=>l.text().trim());if(g===0)a.splice(o,1);else if(g>1||p.type!=="magic-word")o++;else try{let l=p.getPossibleValues();a.splice(o,1,...l),o+=l.length}catch(l){o++}}return a}print(){let{childNodes:e,length:t,firstChild:r,modifier:n,type:s}=this;return`<span class="wpb-${s}">{{${rt(n)}${s==="magic-word"?r.print()+(t===1?"":":")+we(e.slice(1),{sep:"|"}):we(e,{sep:"|"})}}}</span>`}};Ue=new WeakMap,De=new WeakMap,pt=new WeakSet,fi=function(){let e=this.type==="template",t=this.childNodes[e?0:1];return this.normalizeTitle(t.text(),e?10:828)},xi=function(e){let t=this.getAnonArgs(),r=typeof e!="number";for(let n=r?t.indexOf(e):e-1;n<t.length;n++){let s=t[n],{name:a}=s,o=String(n+1);a!==o&&(s.setAttribute("name",o),this.getArgs(o,!1,!1).add(s))}}});var bi,Mr,lo,He,ki=y(()=>{"use strict";Oe();R();bi=[pe(!0)];He=class extends(lo=k){constructor(){super(...arguments);T(this,"type","hidden")}};Mr=se(lo),He=ae(Mr,0,"HiddenToken",bi,He),oe(Mr,1,He)});var ir,yi=y(()=>{"use strict";H();B();L();R();Se();ki();ir=class extends k{constructor(e,t=f.getConfig(),r=[]){super(void 0,t,r,{});T(this,"type","arg");for(let n=0;n<e.length;n++)if(n===0){let s=new G(e[n],"arg-name",t,r,{});super.insertAt(s)}else if(n>1){let s=new He(e[n],t,r);super.insertAt(s)}else{let s=new k(e[n],t,r);s.type="arg-default",s.setAttribute("stage",2),super.insertAt(s)}}get default(){var e,t;return(t=(e=this.childNodes[1])==null?void 0:e.text())!=null?t:!1}toString(){return`{{{${super.toString("|")}}}}`}text(){return`{{{${de(this.childNodes.slice(0,2),"|")}}}}`}getAttribute(e){return e==="padding"?3:super.getAttribute(e)}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let{childNodes:[r,n,...s]}=this;if(!this.getAttribute("include")){let o=E(this,{start:e},"no-arg","unexpected template argument");return n&&(o.fix={range:[e,o.endIndex],text:n.text()}),[o]}let a=r.lint(e+3,t);if(n&&a.push(...n.lint(e+4+r.toString().length,t)),s.length>0){let o={start:e,...this.getRootNode().posFromIndex(e)};a.push(...s.map(g=>{let p=$(g,o,"no-ignored","invisible content inside triple braces");return p.startIndex--,p.startCol--,p.suggestions=[{desc:"remove",range:[p.startIndex,p.endIndex],text:""},{desc:"escape",range:[p.startIndex,p.startIndex+1],text:"{{!}}"}],p}))}return a}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}json(){let e=super.json();return e.default=this.default,e}}});var Ai={};W(Ai,{parseBraces:()=>zr});var go,sr,po,zr,Wr=y(()=>{"use strict";H();Or();Ti();yi();go={"=":`
`,"{":String.raw`\}{2,}|\|`,"-":String.raw`\}-`,"[":String.raw`\]\]`},sr=new Map([["!","!"],["!!","+"],["(!","{"],["!)","}"],["!-","-"],["=","~"]]),po=new RegExp(String.raw`\{\{\s*(${[...sr.keys()].map(Ht).join("|")})\s*\}\}(?!\})`,"gu"),zr=(d,i,e)=>{var p,l,u,c,m,x;let t=String.raw`${(p=i.excludes)!=null&&p.includes("heading")?"":String.raw`^(\0\d+c\x7F)*={1,6}|`}\[\[|\{{2,}|-\{(?!\{)`,{parserFunction:[,,,r]}=i,n=[];d=d.replace(po,(b,C)=>(new Bt(b.slice(2,-2),[],i,e),`\0${e.length-2}${sr.get(C)}\x7F`));let s=new RegExp(t,"gmu"),a=s.exec(d),o=d.includes("}}"),g;for(;a||g!==void 0&&g<=d.length&&((u=(l=n[n.length-1])==null?void 0:l[0])!=null&&u.startsWith("="));){if(a!=null&&a[1]){let[,{length:Q}]=a;a[0]=a[0].slice(Q),a.index+=Q}let{0:b,index:C}=a!=null?a:{0:`
`,index:d.length},w=(c=n.pop())!=null?c:{},{0:S,index:A,parts:F,findEqual:j,pos:J}=w,D=b==="="&&j,te=Q=>{F[F.length-1].push(Q.slice(J,C))};if(b==="]]"||b==="}-")g=C+2;else if(b===`
`){g=C+1;let{pos:Q,findEqual:ne}=(m=n[n.length-1])!=null?m:{};if(Q===void 0||ne||le(d.slice(Q,A))!==""){let Z=/^(={1,6})(.+)\1((?:\s|\0\d+c\x7F)*)$/u.exec(d.slice(A,C));Z&&(d=`${d.slice(0,A)}\0${e.length}h\x7F${d.slice(C)}`,g=A+4+String(e.length).length,new gt(Z[1].length,Z.slice(2),i,e))}}else if(b==="|"||D)g=C+1,te(d),b==="|"&&F.push([]),w.pos=g,w.findEqual=b==="|",n.push(w);else if(b.startsWith("}}")){let Q=b.slice(0,Math.min(S.length,3)),ne=S.length-Q.length,{length:Z}=e;g=C+Q.length,te(d);let P=!1,Te="t";if(Q.length===3){let U=F.map(Mt=>Mt.join("=")),Ke=U.length>1&&le(U[1]).trim();new ir(U,i,e),Ke&&Ke.endsWith(":")&&r.includes(Ke.slice(0,-1).toLowerCase())&&(Te="s")}else try{new Bt(F[0][0],F.slice(1),i,e);let U=le(F[0][0]).trim();sr.has(U)?Te=sr.get(U):/^(?:filepath|(?:full|canonical)urle?):.|^server$/iu.test(U)?Te="m":/^#vardefine:./iu.test(U)&&(Te="c")}catch(U){if(U instanceof SyntaxError&&U.message==="\u975E\u6CD5\u7684\u6A21\u677F\u540D\u79F0")P=!0;else throw U}P||(d=`${d.slice(0,A+ne)}\0${Z}${Te}\x7F${d.slice(g)}`,g=A+ne+3+String(Z).length,ne>1?n.push({0:S.slice(0,ne),index:A,pos:A+ne,parts:[[]]}):ne===1&&d[A-1]==="-"&&n.push({0:"-{",index:A-1,pos:A+1,parts:[[]]}))}else g=C+b.length,b.startsWith("{")&&(a.pos=g,a.parts=[[]]),n.push(..."0"in w?[w]:[],a);o&&(o=d.slice(g).includes("}}"));let X=n[n.length-1];!o&&((x=X==null?void 0:X[0])!=null&&x.startsWith("{"))&&(n.pop(),X=n[n.length-1]),s=new RegExp(t+(X?`|${go[X[0][0]]}${X.findEqual?"|=":""}`:""),"gmu"),s.lastIndex=g,a=s.exec(d)}return d}});var vi={};W(vi,{InputboxToken:()=>Ur});var Ur,wi=y(()=>{"use strict";Wr();L();Gr();Ur=class extends Pt{constructor(i,e=f.getConfig(),t=[]){let r=Symbol("InputboxToken"),{length:n}=t;t.push(r),i&&(i=zr(i,e,t)),t.splice(n,1),super(i,e,t,{})}}});var Si,Dr,uo,Ce,Hr=y(()=>{"use strict";B();Oe();L();Le();Si=[pe()];Ce=class extends(uo=ee){constructor(e,t=!0,r,n){super(e,r,n);T(this,"type","comment");T(this,"closed");this.closed=t}getAttribute(e){return e==="padding"?4:super.getAttribute(e)}lint(e=this.getAbsoluteIndex()){if(this.closed)return[];let t=E(this,{start:e},"unclosed-comment",f.msg("unclosed $1","HTML comment"));return t.fix={range:[t.endIndex,t.endIndex],text:"-->"},[t]}toString(){return`<!--${this.innerText}${this.closed?"-->":""}`}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}};Dr=se(uo),Ce=ae(Dr,0,"CommentToken",Si,Ce),oe(Dr,1,Ce)});var or={};W(or,{NestedToken:()=>Vr});var Vr,ar=y(()=>{"use strict";B();L();R();Xr();Re();Hr();Vr=class extends k{constructor(e,t,r,n=f.getConfig(),s=[]){e=e==null?void 0:e.replace(t,(a,o,g,p,l)=>{let u=`\0${s.length+1}${o?"e":"c"}\x7F`;if(o)new ut(o,g,p,l,n,s);else{let c=a.endsWith("-->");new Ce(a.slice(4,c?-3:void 0),c,n,s)}return u}).replace(/(^|\0\d+[ce]\x7F)([^\0]+)(?=$|\0\d+[ce]\x7F)/gu,(a,o,g)=>(new z(g,n,s),`${o}\0${s.length}c\x7F`));super(e,n,s,{});T(this,"type","ext-inner")}lint(e=this.getAbsoluteIndex(),t){let r;return[...super.lint(e,t),...this.childNodes.filter(n=>{if(n.type==="ext"||n.type==="comment")return!1;let s=n.toString().trim();return s&&!/^<!--.*-->$/su.test(s)}).map(n=>{r!=null||(r={start:e,...this.getRootNode().posFromIndex(e)});let s=$(n,r,"no-ignored",f.msg("invalid content in <$1>",this.name));return s.suggestions=[{desc:"remove",range:[s.startIndex,s.endIndex],text:""},{desc:"comment",range:[s.startIndex,s.startIndex],text:`<!--${n.toString()}-->`}],s})]}}});function Ci(d,i,e,t,r){i=i.trim();let n=i.replace(/\0\d+t\x7F/gu,"").trim();switch(d){case"width":return!n||/^(?:\d+x?|\d*x\d+)(?:\s*px)?$/u.test(n);case"link":{if(!n||new RegExp(String.raw`^(?:(?:${e.protocol}|//)${ke}|\0\d+m\x7F)${ye}$`,"iu").test(n))return i;n.startsWith("[[")&&n.endsWith("]]")&&(n=n.slice(2,-2));let a=f.normalizeTitle(n,0,!1,e,t,!0,!0);return a.valid&&a}case"lang":return(r==="svg"||r==="svgz")&&!/[^a-z\d-]/u.test(n);case"alt":case"class":case"manualthumb":return!0;case"page":return(r==="djvu"||r==="djv"||r==="pdf")&&Number(n)>0;default:return!!n&&!isNaN(n)}}var co,re,dr,Ni,lr,$i=y(()=>{"use strict";H();B();L();R();co=new Set(["alt","link","lang","page","caption"]);lr=class extends k{constructor(e,t,r=f.getConfig(),n){var i=(...Cd)=>(super(...Cd),v(this,dr),T(this,"type","image-parameter"),v(this,re,""),this);var g;let s,a=Object.entries(r.img).map(([p,l])=>[p,l,new RegExp(String.raw`^(\s*(?!\s))${p.replace("$1","(.*)")}${p.endsWith("$1")?`(?=$|
)`:""}(\s*)$`,"u")]),o=a.find(([,p,l])=>(s=l.exec(e),s&&(s.length!==4||Ci(p,s[2],r,!0,t)!==!1)));if(o&&s){s.length===3?(i(void 0,r,n),N(this,re,e)):(i(s[2],r,n,{}),N(this,re,s[1]+o[0]+s[3])),this.setAttribute("name",o[1]);return}i(e,{...r,excludes:[...(g=r.excludes)!=null?g:[],"list"]},n),this.setAttribute("name","caption"),this.setAttribute("stage",7)}get link(){return this.name==="link"?Ci("link",super.text(),this.getAttribute("config")):void 0}afterBuild(){var e;((e=this.parentNode)==null?void 0:e.type)==="gallery-image"&&!co.has(this.name)&&this.setAttribute("name","invalid")}toString(){return h(this,re)?h(this,re).replace("$1",super.toString()):super.toString()}text(){return h(this,re)?h(this,re).replace("$1",super.text()).trim():super.text().trim()}getAttribute(e){return e==="plain"?this.name==="caption":e==="padding"?Math.max(0,h(this,re).indexOf("$1")):super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{link:n,name:s}=this;if(s==="invalid"){let a=E(this,{start:e},"invalid-gallery","invalid gallery image parameter");a.fix={range:[e,e+a.endIndex],text:""},r.push(a)}else typeof n=="object"&&n.encoded&&r.push(E(this,{start:e},"url-encoding","unnecessary URL encoding in an internal link"));return r}getValue(){return this.name==="invalid"?this.text():I(this,dr,Ni).call(this)||super.text()}print(){return h(this,re)?`<span class="wpb-image-parameter">${h(this,re).replace("$1",`<span class="wpb-image-caption">${we(this.childNodes)}</span>`)}</span>`:super.print({class:"image-caption"})}};re=new WeakMap,dr=new WeakSet,Ni=function(){return h(this,re)&&!h(this,re).includes("$1")}});var Qr,Zr,Kr,ho,ct,gr,ht,Jr=y(()=>{"use strict";H();B();L();Lt();$i();Qr=new Set(["manualthumb","frameless","framed","thumbnail"]),Zr=new Set(["left","right","center","none"]),Kr=new Set(["baseline","sub","super","top","text-top","middle","bottom","text-bottom"]),ho=(d,i,e,t)=>{if(t===void 0)return[];let r=new RegExp(`${[d,i,e].map(Ht).join("|")}`,"gu"),n=[],s=r.exec(t),a=0,o=0;for(;s;){let{0:g,index:p}=s;g!==e?a+=g===d?1:-1:a===0&&(n.push(t.slice(o,p)),{lastIndex:o}=r),s=r.exec(t)}return n.push(t.slice(o)),n},ht=class extends Ae{constructor(e,t,r=f.getConfig(),n=[],s="|"){super(e,void 0,r,n,s);v(this,ct);T(this,"type","file");let{extension:a}=this.getTitle(!0);this.append(...ho("-{","}-","|",t).map(o=>new lr(o,a,r,n)))}get extension(){return this.getTitle().extension}lint(e=this.getAbsoluteIndex(),t){var u;let r=super.lint(e,t),n=this.getAllArgs().filter(({childNodes:c})=>{let m=c.filter(x=>x.text().trim());return m.length!==1||m[0].type!=="arg"}),s=[...new Set(n.map(({name:c})=>c))].filter(c=>c!=="invalid"),a=s.filter(c=>Qr.has(c)),o=s.filter(c=>Zr.has(c)),g=s.filter(c=>Kr.has(c));if(this.closest("ext-link-text")&&((u=this.getValue("link"))==null?void 0:u.trim())!==""&&r.push(E(this,{start:e},"nested-link","internal link in an external link")),n.length===s.length&&a.length<2&&o.length<2&&g.length<2)return r;let p={start:e,...this.getRootNode().posFromIndex(e)},l=(c,m)=>x=>$(x,p,"no-duplicate",f.msg(`${c} image $1 parameter`,m));for(let c of s){let m=n.filter(({name:x})=>x===c);c==="caption"&&(m=[...m.slice(0,-1).filter(x=>x.text()),...m.slice(-1)]),m.length>1&&r.push(...m.map(l("duplicated",c)))}return a.length>1&&r.push(...n.filter(({name:c})=>Qr.has(c)).map(l("conflicting","frame"))),o.length>1&&r.push(...n.filter(({name:c})=>Zr.has(c)).map(l("conflicting","horizontal-alignment"))),g.length>1&&r.push(...n.filter(({name:c})=>Kr.has(c)).map(l("conflicting","vertical-alignment"))),r}getAllArgs(){return this.childNodes.slice(1)}getArgs(e){return this.getAllArgs().filter(({name:t})=>e===t)}getFrameArgs(){return I(this,ct,gr).call(this,Qr,"\u6846\u67B6")}getHorizAlignArgs(){return I(this,ct,gr).call(this,Zr,"\u6C34\u5E73\u5BF9\u9F50")}getVertAlignArgs(){return I(this,ct,gr).call(this,Kr,"\u5782\u76F4\u5BF9\u9F50")}getArg(e){let t=this.getArgs(e);return t[t.length-1]}getValue(e){var t;return(t=this.getArg(e))==null?void 0:t.getValue()}};ct=new WeakSet,gr=function(e,t){return this.getAllArgs().filter(({name:n})=>e.has(n))}});var pr,Ii,mt,Yr=y(()=>{"use strict";B();be();L();R();Jr();mt=class extends ht{constructor(e,t,r,n=f.getConfig(),s=[]){let a;if(r!==void 0){let{length:o}=s;a=new k(r,n,s);for(let g=1;g<11;g++)a.parseOnce();s.splice(o,1)}super(t,a==null?void 0:a.toString(),n,s);v(this,pr);this.setAttribute("bracket",!1),this.type=`${e}-image`}getTitle(){let e=this.type==="imagemap-image";return this.normalizeTitle(this.firstChild.toString(),e?0:6,!0,!e)}getAttribute(e){return e==="padding"?0:super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{ns:n,interwiki:s}=this.getAttribute("title");return(s||n!==6)&&r.push(E(this,{start:e},"invalid-gallery","invalid gallery image")),r}afterBuild(){I(this,pr,Ii).call(this,this.getTitle())}};pr=new WeakSet,Ii=function(e){this.setAttribute("title",e)}});var Fi={};W(Fi,{GalleryToken:()=>en});var ur,Ei,en,Li=y(()=>{"use strict";L();R();Yr();Re();en=class extends k{constructor(e,t=f.getConfig(),r=[]){var n;super(void 0,t,r,{});v(this,ur);T(this,"type","ext-inner");for(let s of(n=e==null?void 0:e.split(`
`))!=null?n:[]){let a=/^([^|]+)(?:\|(.*))?/u.exec(s);if(!a){super.insertAt(s.trim()?new z(s,t):s);continue}let[,o,g]=a;I(this,ur,Ei).call(this,o)?super.insertAt(new mt("gallery",o,g,t,r)):super.insertAt(new z(s,t))}}toString(){return super.toString(`
`)}text(){return super.text(`
`).replace(/\n\s*\n/gu,`
`)}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let{top:r,left:n}=this.getRootNode().posFromIndex(e),s=[];for(let a=0;a<this.length;a++){let o=this.childNodes[a],g=o.toString(),{length:p}=g,l=g.trim(),u=r+a,c=a?0:n;o.type==="noinclude"&&l&&!/^<!--.*-->$/u.test(l)?s.push({rule:"no-ignored",message:f.msg("invalid content in <$1>","gallery"),severity:l.startsWith("|")?"warning":"error",startIndex:e,endIndex:e+p,startLine:u,endLine:u,startCol:c,endCol:c+p,suggestions:[{desc:"remove",range:[e,e+p],text:""},{desc:"comment",range:[e,e+p],text:`<!--${g}-->`}]}):o.type!=="noinclude"&&o.type!=="text"&&s.push(...o.lint(e,t)),e+=p+1}return s}print(){return super.print({sep:`
`})}};ur=new WeakSet,Ei=function(e){return this.normalizeTitle(e,6,!0,!0).valid}});var ft,tn=y(()=>{"use strict";B();Lt();ft=class extends Ae{constructor(){super(...arguments);T(this,"type","link")}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t);return this.closest("ext-link-text")&&r.push(E(this,{start:e},"nested-link","internal link in an external link")),r}}});var mo,fo,Ne,cr=y(()=>{"use strict";B();H();L();R();mo=String.raw`(?:[\p{Zs}\t]|&nbsp;|&#0*160;|&#[xX]0*[aA]0;)`,fo=new RegExp(`${mo}+`,"gu"),Ne=class extends k{get link(){let i={"!":"|","=":"="},e=de(this.childNodes.map(t=>{let{type:r,name:n}=t;return r==="magic-word"&&String(n)in i?i[n]:t}));return this.type==="magic-link"&&(e=e.replace(fo," "),e.startsWith("ISBN")&&(e=`ISBN ${e.slice(5).replace(/[- ]/gu,"").replace(/x$/u,"X")}`)),e}constructor(i,e="free-ext-link",t=f.getConfig(),r){super(i,t,r,{}),this.type=e}lint(i=this.getAbsoluteIndex(),e){let t=super.lint(i,e),r;if(this.type==="magic-link"){let{link:o}=this;if(o.startsWith("ISBN")){let g=[...o.slice(5)].map(p=>p==="X"?10:Number(p));(g.length===10&&g.reduce((p,l,u)=>p+l*(10-u),0)%11||g.length===13&&(g[12]===10||g.reduce((p,l,u)=>p+l*(u%2?3:1),0)%10))&&(r={start:i,...this.getRootNode().posFromIndex(i)},t.push(E(this,r,"invalid-isbn","invalid ISBN")))}return t}let n=`[\uFF0C\uFF1B\u3002\uFF1A\uFF01\uFF1F\uFF08\uFF09]+${this.type==="ext-link-url"?String.raw`|\|+`:""}`,s=new RegExp(n,"u"),a=new RegExp(n,"gu");for(let o of this.childNodes){let{type:g,data:p}=o;if(g!=="text"||!s.test(p))continue;r!=null||(r={start:i,...this.getRootNode().posFromIndex(i)});let l=$(o,r,"unterminated-url","","warning");a.lastIndex=0;for(let u=a.exec(p);u;u=a.exec(p)){let{index:c,0:m}=u,x=p.slice(0,c).split(`
`),b=x.length,C=x[b-1].length,w=l.startIndex+c,S=l.startLine+b-1,A=b===1?l.startCol+C:C,F=m.startsWith("|"),j={...l,message:f.msg("$1 in URL",F?'"|"':"full-width punctuation"),startIndex:w,endIndex:w+m.length,startLine:S,endLine:S,startCol:A,endCol:A+m.length};F?m.length===1&&(j.suggestions=[{desc:"whitespace",range:[w,w+1],text:" "}]):j.suggestions=[{desc:"whitespace",range:[w,w],text:" "},{desc:"escape",range:[w,j.endIndex],text:encodeURI(m)}],t.push(j)}}return t}}});var $e,xt,rn=y(()=>{"use strict";be();B();L();R();cr();xt=class extends k{constructor(e,t="",r="",n=f.getConfig(),s=[]){super(void 0,n,s,{});T(this,"type","ext-link");v(this,$e);let a=e&&/\0\d+f\x7F/u.test(e)?s[Number(e.slice(1,-2))]:new Ne(e,"ext-link-url",n,s);if(this.insertAt(a),N(this,$e,t),r){let o=new k(r,n,s,{});o.type="ext-link-text",o.setAttribute("stage",10),this.insertAt(o)}}toString(){return this.length===1?`[${super.toString()}${h(this,$e)}]`:`[${super.toString(h(this,$e))}]`}text(){return`[${super.text(" ")}]`}getAttribute(e){return e==="padding"?1:super.getAttribute(e)}getGaps(){return h(this,$e).length}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t);return this.length===1&&this.closest("heading-title")&&r.push(E(this,{start:e},"var-anchor","variable anchor in a section header")),r}print(){return super.print(this.length===1?{pre:"[",post:`${h(this,$e)}]`}:{pre:"[",sep:h(this,$e),post:"]"})}};$e=new WeakMap});var qt,Ri=y(()=>{"use strict";L();R();Re();tn();rn();qt=class extends k{constructor(e,t,r,n=f.getConfig(),s=[]){super(void 0,n,s);T(this,"type","imagemap-link");this.append(e,t.length===2?new ft(...t,n,s):new xt(...t,n,s),new z(r,n,s))}}});var Pi={};W(Pi,{ImagemapToken:()=>nn});var nn,ji=y(()=>{"use strict";B();ve();L();R();Re();Yr();Ri();nn=class extends k{constructor(e,t=f.getConfig(),r=[]){super(void 0,t,r,{});T(this,"type","ext-inner");if(!e)return;let n=e.split(`
`),s=new Set(t.protocol.split("|")),a=z,o=!0,g=!1;for(let p of n){let l=p.trim();if(!(g||!l||l.startsWith("#"))){if(o){let[u,...c]=p.split("|"),m=this.normalizeTitle(u,0,!0);if(m.valid&&!m.interwiki&&m.ns===6){let x=new mt("imagemap",u,c.length>0?c.join("|"):void 0,t,r);super.insertAt(x),o=!1;continue}else g=!0}else if(p.trim().split(/[\t ]/u)[0]==="desc"){super.insertAt(p);continue}else if(p.includes("[")){let u=p.indexOf("["),c=p.slice(u),m=/^\[\[([^|]+)(?:\|([^\]]+))?\]\][\w\s]*$/u.exec(c);if(m){if(this.normalizeTitle(m[1],0,!0,!1,!0).valid){super.insertAt(new qt(p.slice(0,u),m.slice(1),c.slice(c.indexOf("]]")+2),t,r));continue}}else if(s.has(c.slice(1,c.indexOf(":")+1))||s.has(c.slice(1,c.indexOf("//")+2))){let x=/^\[([^\]\s]+)(?:(\s+(?!\s))([^\]]*))?\][\w\s]*$/u.exec(c);if(x){super.insertAt(new qt(p.slice(0,u),x.slice(1),c.slice(c.indexOf("]")+1),t,r));continue}}}}super.insertAt(new a(p,t,r))}}get image(){return this.childNodes.find(Ge("imagemap-image"))}toString(){return super.toString(`
`)}text(){return super.text(`
`).replace(/\n{2,}/gu,`
`)}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),n={start:e,...this.getRootNode().posFromIndex(e)};return this.image?r.push(...this.childNodes.filter(s=>{let a=s.toString().trim();return s.type==="noinclude"&&a&&!a.startsWith("#")}).map(s=>$(s,n,"invalid-imagemap","invalid link in <imagemap>"))):r.push(E(this,n,"invalid-imagemap","<imagemap> without an image")),r}print(){return super.print({sep:`
`})}}});var Bi={};W(Bi,{NowikiToken:()=>sn});var sn,qi=y(()=>{"use strict";B();L();Le();sn=class extends ee{constructor(){super(...arguments);T(this,"type","ext-inner")}lint(e=this.getAbsoluteIndex()){let{name:t,firstChild:{data:r}}=this;if((t==="templatestyles"||t==="section")&&r){let n=E(this,{start:e},"void-ext",f.msg("nothing should be in <$1>",t));return n.fix={range:[e-1,n.endIndex+t.length+3],text:"/>"},[n]}return super.lint(e,new RegExp(String.raw`<\s*(?:/\s*)${t==="nowiki"?"":"?"}(${t})\b`,"giu"))}}});var _i,ut,Xr=y(()=>{"use strict";B();L();R();jr();tr();_i=(d,i)=>{let e=new Set(d);return e.delete(i),[...e]},ut=class extends ot{constructor(e,t,r,n,s=f.getConfig(),a=[]){var u;let o=e.toLowerCase(),g=new Be(!t||t.trimStart()!==t?t:` ${t}`,"ext-attrs",o,s,a),p={...s,ext:_i(s.ext,o),excludes:[...(u=s.excludes)!=null?u:[]]},l;switch(p.inExt=!0,o){case"tab":p.ext=_i(p.ext,"tabs");case"indicator":case"poem":case"ref":case"option":case"combooption":case"tabs":case"poll":case"seo":o==="poem"&&p.excludes.push("heading"),l=new k(r,p,a);break;case"pre":{let{PreToken:c}=(ci(),O(ui));l=new c(r,p,a);break}case"dynamicpagelist":{let{ParamTagToken:c}=(Gr(),O(hi));l=new c(r,p,a);break}case"inputbox":{p.excludes.push("heading");let{InputboxToken:c}=(wi(),O(vi));l=new c(r,p,a);break}case"references":{let{NestedToken:c}=(ar(),O(or));l=new c(r,/<!--.*?(?:-->|$)|<(ref)(\s[^>]*)?>(.*?)<\/(ref\s*)>/gisu,["ref"],p,a);break}case"choose":{let{NestedToken:c}=(ar(),O(or));l=new c(r,/<(option|choicetemplate)(\s[^>]*)?>(.*?)<\/(\1)>/gsu,["option","choicetemplate"],p,a);break}case"combobox":{let{NestedToken:c}=(ar(),O(or));l=new c(r,/<(combooption)(\s[^>]*)?>(.*?)<\/(combooption\s*)>/gisu,["combooption"],p,a);break}case"gallery":{let{GalleryToken:c}=(Li(),O(Fi));l=new c(r,p,a);break}case"imagemap":{let{ImagemapToken:c}=(ji(),O(Pi));l=new c(r,p,a);break}default:{let{NowikiToken:c}=(qi(),O(Bi));l=new c(r,p)}}l.setAttribute("name",o),l.type="ext-inner";super(e,g,l,n,s,a);T(this,"type","ext");this.seal("closed",!0)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),n;return this.name!=="nowiki"&&this.closest("html-attrs, table-attrs")&&(n={start:e,...this.getRootNode().posFromIndex(e)},r.push(E(this,n,"parsing-order","extension tag in HTML tag attributes"))),this.name==="ref"&&this.closest("heading-title")&&(n!=null||(n={start:e,...this.getRootNode().posFromIndex(e)}),r.push(E(this,n,"var-anchor","variable anchor in a section header"))),r}}});var Gi={};W(Gi,{parseCommentAndExt:()=>xo});var xo,Oi=y(()=>{"use strict";ei();Re();ri();Xr();Hr();xo=(d,i,e,t)=>{let r="<onlyinclude>",n="</onlyinclude>",{length:s}=r,a=()=>{let u=d.indexOf(r);return{i:u,j:d.indexOf(n,u+s)}};if(t){let{i:u,j:c}=a();if(u!==-1&&c!==-1){let m="",x=b=>{new z(b,i,e),m+=`\0${e.length-1}c\x7F`};for(;u!==-1&&c!==-1;){let b=`\0${e.length}e\x7F`;new Kt(d.slice(u+s,c),i,e),u>0&&x(d.slice(0,u)),m+=b,d=d.slice(c+s+1),{i:u,j:c}=a()}return d&&x(d),m}}let o=i.ext.join("|"),g=t?"includeonly":"(?:no|only)include",p=t?"noinclude":"includeonly",l=new RegExp(String.raw`<!--.*?(?:-->|$)|<${g}(?:\s[^>]*)?/?>|</${g}\s*>|<(${o})(\s[^>]*?)?(?:/>|>(.*?)</(\1\s*)>)|<(${p})(\s[^>]*?)?(?:/>|>(.*?)(?:</(${p}\s*)>|$))`,"gisu");return d.replace(l,(u,c,m,x,b,C,w,S,A)=>{let F=`\0${e.length}${c?"e":"c"}\x7F`;if(c)new ut(c,m,x,b,i,e);else if(u.startsWith("<!--")){let j=u.endsWith("-->");new Ce(u.slice(4,j?-3:void 0),j,i,e)}else C?new We(C,w,S,A,i,e):new z(u,i,e);return F})}});var To,bo,ko,Tt,he,qe,hr,Mi=y(()=>{"use strict";B();H();L();R();To=new Set(["if","ifeq","ifexpr","ifexist","iferror","switch"]),bo=new Set(["b","big","center","cite","code","del","dfn","em","font","i","ins","kbd","mark","pre","q","s","samp","small","strike","strong","sub","sup","tt","u","var"]),ko=new Set(["strike","big","center","font","tt"]),hr=class extends k{constructor(e,t,r,n,s,a){super(void 0,s,a);T(this,"type","html");v(this,Tt);v(this,he);v(this,qe);this.insertAt(t),this.setAttribute("name",e.toLowerCase()),N(this,Tt,r),N(this,he,n),N(this,qe,e)}get selfClosing(){return h(this,he)}get closing(){return h(this,Tt)}toString(){return`<${this.closing?"/":""}${h(this,qe)}${super.toString()}${h(this,he)?"/":""}>`}text(){let{closing:e}=this,t=h(this,qe)+(e?"":super.text());return`<${e?"/":""}${t}${h(this,he)?"/":""}>`}getAttribute(e){return e==="padding"?h(this,qe).length+(this.closing?2:1):super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){var s;let r=super.lint(e,t),n;this.name==="h1"&&!this.closing&&(n=E(this,{start:e},"h1","<h1>"),r.push(n)),this.closest("table-attrs")&&(n!=null||(n=E(this,{start:e},"h1","")),r.push({...n,rule:"parsing-order",message:f.msg("HTML tag in table attributes")}));try{this.findMatchingTag()}catch(a){if(a instanceof SyntaxError){let{message:o}=a;n!=null||(n=E(this,{start:e},"h1",""));let[g]=o.split(":"),p={...n,rule:"unmatched-tag",message:f.msg(g)};if(g==="unclosed tag"&&!this.closest("heading-title"))if(bo.has(this.name)){let l=(s=this.parentNode)==null?void 0:s.childNodes,u=l==null?void 0:l.indexOf(this);l!=null&&l.slice(0,u).some(({type:c,name:m})=>c==="html"&&m===this.name)||(p.severity="warning")}else p.severity="warning";else if(g==="unmatched closing tag"){let l=this.closest("magic-word");l&&To.has(l.name)?p.severity="warning":p.suggestions=[{desc:"remove",range:[e,p.endIndex],text:""}]}else if(g==="tag that is both closing and self-closing"){let{html:[,,l]}=this.getAttribute("config");l.includes(this.name)&&(p.fix={range:[e+1,e+2],text:""})}r.push(p)}}return ko.has(this.name)&&(n!=null||(n=E(this,{start:e},"h1","")),r.push({...n,rule:"obsolete-tag",message:f.msg("obsolete HTML tag"),severity:"warning"})),(this.name==="b"||this.name==="strong")&&this.closest("heading-title")&&(n!=null||(n=E(this,{start:e},"h1","")),r.push({...n,rule:"bold-header",message:f.msg("bold in section header"),severity:"warning"})),r}findMatchingTag(){let{html:[e,t,r]}=this.getAttribute("config"),{name:n,parentNode:s,closing:a}=this,o=qn(this.toString());if(a&&(h(this,he)||r.includes(n)))throw new SyntaxError(`tag that is both closing and self-closing: ${o}`);if(r.includes(n)||h(this,he)&&t.includes(n))return this;if(h(this,he)&&e.includes(n))throw new SyntaxError(`invalid self-closing tag: ${o}`);if(!s)return;let{childNodes:g}=s,p=g.indexOf(this),l=(a?g.slice(0,p).reverse():g.slice(p+1)).filter(c=>c.type==="html"&&c.name===n),u=a?-1:1;for(let c of l)if(h(c,Tt)?u--:u++,u===0)return c;throw new SyntaxError(`${a?"unmatched closing":"unclosed"} tag: ${o}`)}print(){return super.print({pre:`&lt;${this.closing?"/":""}${h(this,qe)}`,post:`${h(this,he)?"/":""}&gt;`})}json(){let e=super.json();return Object.assign(e,{closing:this.closing,selfClosing:h(this,he)}),e}};Tt=new WeakMap,he=new WeakMap,qe=new WeakMap});var zi={};W(zi,{parseHtml:()=>yo});var yo,Wi=y(()=>{"use strict";tr();Mi();yo=(d,i,e)=>{let t=/^(\/?)([a-z][^\s/>]*)((?:\s|\/(?!>))[^>]*?)?(\/?>)([^<]*)$/iu,{html:r}=i,n=new Set([...r[0],...r[1],...r[2]]),s=d.split("<"),a=s.shift();for(let o of s){let g=t.exec(o),p=g==null?void 0:g[2],l=p==null?void 0:p.toLowerCase();if(!g||!n.has(l)){a+=`<${o}`;continue}let[,u,,c="",m,x]=g,{length:b}=e,C=new Be(c,"html-attrs",l,i,e),w=C.getAttr("itemprop");if(l==="meta"&&(w===void 0||C.getAttr("content")===void 0)||l==="link"&&(w===void 0||C.getAttr("href")===void 0)){a+=`<${o}`,e.length=b;continue}a+=`\0${e.length}x\x7F${x}`,new hr(p,C,u==="/",m==="/>",i,e)}return a}});var Ui,Hi=y(()=>{"use strict";ve();Ui=(d=0)=>(i,e)=>{var r,Di;class t extends i{constructor(){super(...arguments);v(this,r)}getAttr(o){return h(this,r,Di).getAttr(o)}}return r=new WeakSet,Di=function(){return this.childNodes[d]},Dt(t,i),t}});var bt,on=y(()=>{"use strict";Hi();L();R();it();tr();bt=class extends Ui(1)(k){constructor(i,e,t,r=f.getConfig(),n=[],s={}){super(void 0,r,n,s),this.append(new ue(e,i,"table-syntax",r,n,{}),new Be(t,"table-attrs",this.type,r,n))}}});var me,_t,an,Ve,ln=y(()=>{"use strict";B();be();L();R();on();Ve=class extends bt{constructor(e,t,r=f.getConfig(),n=[]){var g;let s=/\||\0\d+!\x7F/u.exec(t!=null?t:""),a=s?t.slice(0,s.index):"";/\[\[|-\{/u.test(a)&&(s=null,a="");super(/^(?:\n[^\S\n]*(?:[|!]|\|\+|\{\{\s*!\s*\}\}\+?)|(?:\||\{\{\s*!\s*\}\}){2}|!!|\{\{\s*!!\s*\}\})$/u,e,a,r,n);v(this,_t);T(this,"type","td");v(this,me,"");s&&([Ut(this,me)._]=s);let o=new k(t==null?void 0:t.slice(((g=s==null?void 0:s.index)!=null?g:NaN)+h(this,me).length),r,n);o.type="td-inner",o.setAttribute("stage",4),this.insertAt(o)}get rowspan(){return this.getAttr("rowspan")}get colspan(){return this.getAttr("colspan")}get subtype(){return I(this,_t,an).call(this).subtype}afterBuild(){h(this,me).includes("\0")&&N(this,me,this.buildFromStr(h(this,me),0))}toString(){let{childNodes:[e,t,r]}=this;return e.toString()+t.toString()+h(this,me)+r.toString()}text(){let{childNodes:[e,t,r]}=this;return e.text()+t.text()+h(this,me)+r.text()}getGaps(e){return e===1?h(this,me).length:0}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t);e+=this.getRelativeIndex(this.length-1);for(let n of this.lastChild.childNodes)if(n.type==="text"){let{data:s}=n;if(s.includes("|")){let a=s.includes("||"),o=$(n,{start:e},"pipe-like",'additional "|" in a table cell',a?"error":"warning");if(a){let g={caption:"|+",td:"|",th:"!"}[this.subtype];o.fix={range:[o.startIndex,o.endIndex],text:s.replace(/\|\|/gu,`
${g}`)}}else o.suggestions=[{desc:"escape",range:[o.startIndex,o.endIndex],text:s.replace(/\|/gu,"&#124;")}];r.push(o)}}return r}isIndependent(){return this.firstChild.text().startsWith(`
`)}getAttr(e){let t=super.getAttr(e);return e==="rowspan"||e==="colspan"?parseInt(t)||1:t}print(){let{childNodes:[e,t,r]}=this;return`<span class="wpb-td">${e.print()}${t.print()}${h(this,me)}${r.print()}</span>`}json(){let e=super.json();return e.subtype=this.subtype,e}};me=new WeakMap,_t=new WeakSet,an=function(){var a;let e=this.firstChild.text(),t=e.slice(-1),r="td";if(t==="!"?r="th":t==="+"&&(r="caption"),this.isIndependent())return{subtype:r};let{previousSibling:n}=this;return I(a=n,_t,an).call(a)}});var kt,dn=y(()=>{"use strict";B();ve();on();ln();kt=class extends bt{lint(i=this.getAbsoluteIndex(),e){let t=super.lint(i,e),r=this.childNodes.find(({type:p})=>p==="table-inter");if(!r)return t;let n=r.childNodes.find(p=>p.text().trim()),s=/^\s*(?:!|\{\{\s*![!-]?\s*\}\})/u,a=Ge("arg"),o=Ge("magic-word");if(!n||s.test(n.toString())||a(n)&&s.test(n.default||""))return t;if(o(n))try{if(n.getPossibleValues().every(p=>s.test(p.text())))return t}catch(p){}let g=$(r,{start:i},"fostered-content","content to be moved out from the table");return g.severity=n.type==="template"?"warning":"error",g.startIndex++,g.startLine++,g.startCol=0,t.push(g),t}getRowCount(){return Number(this.childNodes.some(i=>i instanceof Ve&&i.isIndependent()&&!i.firstChild.text().endsWith("+")))}getNthCol(i,e){let t=0;for(let r of this.childNodes.slice(2))if(r instanceof Ve&&(r.isIndependent()&&(t=+(r.subtype!=="caption")),i-=t,i<0))return r}}});var Ao,vo,gn,mr,Vi=y(()=>{"use strict";B();ve();L();dn();it();Ao=/^\n[^\S\n]*(?:\|\}|\{\{\s*!\s*\}\}\}|\{\{\s*!\)\s*\}\})$/u,vo=({type:d})=>d==="tr"||d==="table-syntax",gn=class extends Array{},mr=class extends kt{constructor(e,t,r,n){super(/^(?:\{\||\{\{\{\s*!\s*\}\}|\{\{\s*\(!\s*\}\})$/u,e,t,r,n,{});T(this,"type","table")}get closed(){return this.lastChild.type==="table-syntax"}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t);this.closed||r.push($(this.firstChild,{start:e},"unclosed-table",f.msg("unclosed $1","table")));let n=this.getLayout(),{length:s}=n;if(s>1){let a=1,o=1/0,g=0;for(;g<s;g++){let p=n[g],l=p.length;if(l<a)break;l<o&&(o=l);let{colspan:u}=this.getNthCell(p[p.length-1]),c=l-u+1;if(c>o)break;c>a&&(a=c)}if(g<s){let p=$(this.getNthRow(g),{start:e},"table-layout","inconsistent table layout","warning");p.startIndex++,p.startLine++,p.startCol=0,r.push(p)}}return r}close(e=`
|}`,t){let r=this.getAttribute("config"),n=this.getAttribute("accum"),s=t?[e]:f.parse(e,this.getAttribute("include"),2,r).childNodes,a=Ee.run(()=>super.insertAt(new ue(void 0,Ao,"table-syntax",r,n,{})));t||a.afterBuild(),this.lastChild.replaceChildren(...s)}getLayout(e){let t=this.getAllRows(),{length:r}=t,n=new gn(...Fn(r,()=>[]));for(let s=0;s<r;s++){let a=n[s],o=0,g=0,p;for(let l of t[s].childNodes.slice(2))if(l.type==="td"){if(l.isIndependent()&&(p=l.subtype!=="caption"),p){let u={row:s,column:o},{rowspan:c,colspan:m}=l;for(o++;a[g];)g++;for(let x=s;x<Math.min(s+c,r);x++)for(let b=g;b<g+m;b++)n[x][b]=u;g+=m}}else if(vo(l))break}return n}getAllRows(){return[...super.getRowCount()?[this]:[],...this.childNodes.slice(1).filter(e=>e.type==="tr"&&e.getRowCount()>0)]}getNthCell(e){var r;let t=e;return t&&((r=this.getNthRow(t.row,!1,!1))==null?void 0:r.getNthCol(t.column))}getNthRow(e,t,r){let n=super.getRowCount();if(e===0&&n)return this;n&&e--;for(let s of this.childNodes.slice(2))if(s.type==="tr"&&s.getRowCount()&&(e--,e<0))return s}json(){let e=super.json();return e.closed=this.closed,e}}});var fr,Xi=y(()=>{"use strict";dn();fr=class extends kt{constructor(e,t,r,n){super(/^\n[^\S\n]*(?:\|-+|\{\{\s*!\s*\}\}-+|\{\{\s*!-\s*\}\}-*)$/u,e,t,r,n,{});T(this,"type","tr")}}});var yt,pn=y(()=>{"use strict";Le();yt=class extends ee{}});var At,un=y(()=>{"use strict";pn();At=class extends yt{constructor(){super(...arguments);T(this,"type","dd")}}});var Qi={};W(Qi,{parseTable:()=>So});var wo,So,Zi=y(()=>{"use strict";R();Vi();Xi();ln();un();wo=d=>d.lastChild.constructor!==k,So=({firstChild:{data:d},type:i,name:e},t,r)=>{let n=[],s=d.split(`
`),a=i==="root"||i==="parameter-value"||i==="ext-inner"&&e==="poem"?"":`
${s.shift()}`,o,g=(l,u)=>{if(!u){a+=l;return}let{lastChild:c}=u;if(wo(u)){let m=new k(l,t,r);m.type="table-inter",m.setAttribute("stage",3),u.insertAt(m)}else c.setText(c.toString()+l)},p=()=>o.type==="td"?n.pop():o;for(let l of s){o=n.pop();let[u]=/^(?:\s|\0\d+c\x7F)*/u.exec(l),c=l.slice(u.length),m=/^(:*)((?:\s|\0\d+c\x7F)*)(\{\||\{(?:\0\d+c\x7F)*\0\d+!\x7F|\0\d+\{\x7F)(.*)$/u.exec(c);if(m){for(;o&&o.type!=="td";)o=n.pop();let[,A,F,j,J]=m;A&&new At(A,t,r),g(`
${u}${A&&`\0${r.length-1}d\x7F`}${F}\0${r.length}b\x7F`,o),n.push(...o?[o]:[],new mr(j,J,t,r));continue}else if(!o){a+=`
${l}`;continue}let x=/^(?:(\|\}|\0\d+!\x7F\}|\0\d+\}\x7F)|(\|-+|\0\d+!\x7F-+|\0\d+-\x7F-*)(?!-)|(!|(?:\||\0\d+!\x7F)\+?))(.*)$/u.exec(c);if(!x){g(`
${l}`,o),n.push(o);continue}let[,b,C,w,S]=x;if(b){for(;o.type!=="table";)o=n.pop();o.close(`
${u}${b}`,!0),g(S,n[n.length-1])}else if(C){o=p(),o.type==="tr"&&(o=n.pop());let A=new fr(`
${u}${C}`,S,t,r);n.push(o,A),o.insertAt(A)}else{o=p();let A=w==="!"?/!!|(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu:/(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu,F=A.exec(S),j=0,J=`
${u}${w}`,D=te=>{let X=new Ve(J,S.slice(j,F==null?void 0:F.index),t,r);return te.insertAt(X),X};for(;F;)D(o),{lastIndex:j}=A,[J]=F,F=A.exec(S);n.push(o,D(o))}}return a.slice(1)}});var xr,Ki=y(()=>{"use strict";Le();xr=class extends ee{constructor(){super(...arguments);T(this,"type","hr")}}});var Ji,cn,Co,Xe,Yi=y(()=>{"use strict";Oe();Le();Ji=[pe(!0)];Xe=class extends(Co=ee){constructor(e,t,r,n){super(e,r,n);T(this,"type","double-underscore")}getAttribute(e){return e==="padding"?2:super.getAttribute(e)}toString(){return`__${this.innerText}__`}print(){return super.print({pre:"__",post:"__"})}};cn=se(Co),Xe=ae(cn,0,"DoubleUnderscoreToken",Ji,Xe),oe(cn,1,Xe)});var es={};W(es,{parseHrAndDoubleUnderscore:()=>No});var No,ts=y(()=>{"use strict";Ki();Yi();Or();No=({firstChild:{data:d},type:i,name:e},t,r)=>{let{doubleUnderscore:n}=t,s=new Set(n[0]),a=new Set(n[1]);return i!=="root"&&(i!=="ext-inner"||e!=="poem")&&(d=`\0${d}`),d=d.replace(/^((?:\0\d+c\x7F)*)(-{4,})/gmu,(o,g,p)=>(new xr(p,t,r),`${g}\0${r.length-1}r\x7F`)).replace(new RegExp(`__(${[...n[0],...n[1]].join("|")})__`,"giu"),(o,g)=>{let p=a.has(g);return p||s.has(g.toLowerCase())?(new Xe(g,p,t,r),`\0${r.length-1}u\x7F`):o}).replace(/^((?:\0\d+c\x7F)*)(={1,6})(.+)\2((?:[^\S\n]|\0\d+c\x7F)*)$/gmu,(o,g,p,l,u)=>{let c=`${g}\0${r.length}h\x7F`;return new gt(p.length,[l,u],t,r),c}),i==="root"||i==="ext-inner"&&e==="poem"?d:d.slice(1)}});var Tr,rs=y(()=>{"use strict";B();L();Le();Tr=class extends ee{constructor(){super(...arguments);T(this,"type","quote")}get bold(){return this.innerText.length!==2}get italic(){return this.innerText.length!==3}lint(e=this.getAbsoluteIndex()){let{previousSibling:t,nextSibling:r,bold:n}=this,s=f.msg('lonely "$1"',"'"),a=[],o;if((t==null?void 0:t.type)==="text"&&t.data.endsWith("'")){o=E(this,{start:e},"lonely-apos",s);let{startIndex:g,startLine:p,startCol:l}=o,[,{length:u}]=/(?:^|[^'])('+)$/u.exec(t.data),c=e-u;a.push({...o,startIndex:c,endIndex:g,startCol:l-u,endLine:p,endCol:l,suggestions:[{desc:"escape",range:[c,g],text:"&apos;".repeat(u)}]})}if((r==null?void 0:r.type)==="text"&&r.data.startsWith("'")){o!=null||(o=E(this,{start:e},"lonely-apos",s));let{endIndex:g,endLine:p,endCol:l}=o,[{length:u}]=/^'+/u.exec(r.data),c=g+u;a.push({...o,startIndex:g,endIndex:c,startLine:p,startCol:l,endCol:l+u,suggestions:[{desc:"escape",range:[g,c],text:"&apos;".repeat(u)}]})}return n&&this.closest("heading-title")&&(o!=null||(o=E(this,{start:e},"lonely-apos",s)),a.push({...o,rule:"bold-header",message:f.msg("bold in section header"),severity:"warning"})),a}json(){let e=super.json();return Object.assign(e,{bold:this.bold,italic:this.italic}),e}}});var ns={};W(ns,{parseQuotes:()=>hn});var hn,mn=y(()=>{"use strict";rs();hn=(d,i,e)=>{var p;let t=d.split(/('{2,})/u),{length:r}=t;if(r===1)return d;let n=0,s=0,a,o,g;for(let l=1;l<r;l+=2){let u=t[l].length;switch(u){case 2:s++;break;case 4:t[l-1]+="'",t[l]="'''";case 3:if(n++,a!==void 0)break;t[l-1].endsWith(" ")?o===void 0&&g===void 0&&(g=l):t[l-1].slice(-2,-1)===" "?a=l:o!=null||(o=l);break;default:t[l-1]+="'".repeat(u-5),t[l]="'''''",s++,n++}}if(s%2===1&&n%2===1){let l=(p=a!=null?a:o)!=null?p:g;l!==void 0&&(t[l]="''",t[l-1]+="'")}for(let l=1;l<r;l+=2)new Tr(t[l],i,e),t[l]=`\0${e.length-1}q\x7F`;return t.join("")}});var is={};W(is,{parseExternalLinks:()=>fn});var fn,xn=y(()=>{"use strict";H();rn();cr();fn=(d,i,e,t)=>{let r=new RegExp(String.raw`\[(\0\d+f\x7F|(?:(?:${i.protocol}|//)${ke}|\0\d+m\x7F)${ye}(?=[[\]<>"\t\p{Zs}]|\0\d))(\p{Zs}*(?!\p{Zs}))([^\]\x01-\x08\x0A-\x1F\uFFFD]*)\]`,"giu");return d.replace(r,(n,s,a,o)=>{let{length:g}=e,p=/&[lg]t;/u.exec(s);return p&&(s=s.slice(0,p.index),a="",o=s.slice(p.index)+a+o),t?(new Ne(s,"ext-link-url",i,e),`[\0${g}f\x7F${a}${o}]`):(new xt(s,a,o,i,e),`\0${g}w\x7F`)})}});var br,ss=y(()=>{"use strict";Lt();br=class extends Ae{constructor(){super(...arguments);T(this,"type","category")}}});var as={};W(as,{parseLinks:()=>os});var os,ls=y(()=>{"use strict";L();mn();xn();tn();Jr();ss();os=(d,i,e)=>{let t=i.inExt?/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)(.*?[^\]]))?\]\](.*)$/su:/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)(.*?[^\]])?)?\]\](.*)$/su,r=/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(\||\0\d+!\x7F)(.*)$/su,n=new RegExp(String.raw`^\s*(?:${i.protocol}|//)`,"iu"),s=d.split("[["),a=s.shift();for(let o=0;o<s.length;o++){let g=!1,p,l,u,c,m=s[o],x=t.exec(m);if(x)[,p,l,u,c]=x,c.startsWith("]")&&(u!=null&&u.includes("["))&&(u+="]",c=c.slice(1));else{let j=r.exec(m);j&&(g=!0,[,p,l,u]=j)}if(p===void 0||n.test(p)||/\0\d+[exhbru]\x7F/u.test(p)){a+=`[[${m}`;continue}let b=p.trim().startsWith(":");if(b&&g){a+=`[[${m}`;continue}let C=f.normalizeTitle(p,0,!1,i,!0,!0,!0),{ns:w,valid:S,interwiki:A}=C;if(S){if(g){if(A||w!==6){a+=`[[${m}`;continue}let j=!1;for(o++;o<s.length;o++){let J=s[o],D=J.split("]]");if(D.length>2){j=!0,u+=`[[${D[0]}]]${D[1]}`,c=D.slice(2).join("]]");break}else if(D.length===2)u+=`[[${D[0]}]]${D[1]}`;else{u+=`[[${J}`;break}}if(u=os(u,i,e),!j){a+=`[[${p}${l}${u}`;continue}}}else{a+=`[[${m}`;continue}u&&(u=hn(u,i,e));let F=ft;b||(!A&&w===6?(u&&(u=fn(u,i,e,!0)),F=ht):!A&&w===14&&(F=br)),u===void 0&&l&&(u=""),a+=`\0${e.length}l\x7F${c}`,new F(p,u,i,e,l)}return a}});var ds={};W(ds,{parseMagicLinks:()=>Eo});var $o,Io,Eo,gs=y(()=>{"use strict";H();cr();$o=/[^,;\\.:!?)][,;\\.:!?)]+$/u,Io=/[^,;\\.:!?][,;\\.:!?]+$/u,Eo=(d,i,e)=>{let t=String.raw`[\p{Zs}\t]|&nbsp;|&#0*160;|&#x0*a0;`,r=`(?:${t}|-)`,n=new RegExp(String.raw`(^|[^\p{L}\d_])(?:(?:${i.protocol})(${ke}${ye})|(?:RFC|PMID)(?:${t})+\d+\b|ISBN(?:${t})+(?:97[89]${r}?)?(?:\d${r}?){9}[\dx]\b)`,"giu");return d.replace(n,(s,a,o)=>{let g=a?s.slice(a.length):s;if(o){let p="",l=/&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(g);l&&(p=g.slice(l.index),g=g.slice(0,l.index));let u=g.includes("(")?Io:$o,c=u.exec(g);if(c){let m=1;c[0][1]===";"&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/iu.test(g.slice(0,c.index))&&(m=2),p=g.slice(c.index+m)+p,g=g.slice(0,c.index+m)}return p.length>=o.length?s:(new Ne(g,void 0,i,e),`${a}\0${e.length-1}w\x7F${p}`)}else if(!/^(?:RFC|PMID|ISBN)/u.test(g))return s;return new Ne(g,"magic-link",i,e),`${a}\0${e.length-1}i\x7F`})}});var kr,ps=y(()=>{"use strict";pn();kr=class extends yt{constructor(){super(...arguments);T(this,"type","list")}}});var us={};W(us,{parseList:()=>Fo});var Fo,cs=y(()=>{"use strict";ps();un();Fo=(d,i,e)=>{let t=/^((?:\0\d+c\x7F)*)([;:*#]+)/u.exec(d);if(!t)return d;let[r,n,s]=t,a=`${n}\0${e.length}d\x7F${d.slice(r.length)}`,o=s.split(";").length-1;if(new kr(s,i,e),!o)return a;let{html:[g]}=i,p=/:+|-\{|\0\d+[xq]\x7F/gu,l=p,u=l.exec(a),c=0,m=!1,x=!1,b=0,C=(S,A)=>(new At(S,i,e),`${a.slice(0,A)}\0${e.length-1}d\x7F${a.slice(A+S.length)}`),w=S=>{S?c&&c--:c++};for(;u&&o;){let{0:S,index:A}=u;if(S==="-{"){if(!b){let{lastIndex:F}=l;l=/-\{|\}-/gu,l.lastIndex=F}b++}else if(S==="}-"){if(b--,!b){let{lastIndex:F}=l;l=p,l.lastIndex=F}}else if(S.endsWith("x\x7F")){let{name:F,closing:j,selfClosing:J}=e[Number(S.slice(1,-2))];(!J||g.includes(F))&&w(j)}else if(S.endsWith("q\x7F")){let{bold:F,italic:j}=e[Number(S.slice(1,-2))];F&&(w(m),m=!m),j&&(w(x),x=!x)}else if(c===0){if(S.length>=o)return C(S.slice(0,o),A);o-=S.length,l.lastIndex=A+4+String(e.length).length,a=C(S,A)}u=l.exec(a)}return a}});var hs,Ie,yr,ms=y(()=>{"use strict";B();L();R();Se();hs=new Set(["A","T","R","D","-","H","N"]),yr=class extends k{constructor(e,t=f.getConfig(),r=[]){super(void 0,t,r,{});T(this,"type","converter-flags");v(this,Ie);this.append(...e.map(n=>new G(n,"converter-flag",t,r)))}afterBuild(){N(this,Ie,this.childNodes.map(e=>e.text().trim()))}toString(){return super.toString(";")}text(){return super.text(";")}getGaps(){return 1}getUnknownFlags(){return new Set(h(this,Ie).filter(e=>/\{{3}[^{}]+\}{3}/u.test(e)))}getVariantFlags(){let e=new Set(this.getAttribute("config").variants);return new Set(h(this,Ie).filter(t=>e.has(t)))}lint(e=this.getAbsoluteIndex(),t){let r=this.getVariantFlags(),n=this.getUnknownFlags(),s=new Set(h(this,Ie).filter(c=>hs.has(c))),a=h(this,Ie).filter(c=>!c).length,o=h(this,Ie).length-n.size-a,g=super.lint(e,t);if(r.size===o||s.size===o)return g;let p={start:e,...this.getRootNode().posFromIndex(e)},{childNodes:l,length:u}=this;for(let c=0;c<u;c++){let m=l[c],x=m.text().trim();if(x&&!r.has(x)&&!n.has(x)&&(r.size>0||!s.has(x))){let b=$(m,p,"no-ignored","invalid conversion flag");r.size===0&&hs.has(x.toUpperCase())?b.fix={range:[b.startIndex,b.endIndex],text:x.toUpperCase()}:b.suggestions=[{desc:"remove",range:[b.startIndex,b.endIndex],text:""}],g.push(b)}}return g}print(){return super.print({sep:";"})}};Ie=new WeakMap});var vt,fs=y(()=>{"use strict";L();R();Se();vt=class extends k{constructor(e,t=!0,r=f.getConfig(),n=[]){super(void 0,r,n);T(this,"type","converter-rule");let s=e.indexOf(":"),a=e.slice(0,s).indexOf("=>"),o=a===-1?e.slice(0,s):e.slice(a+2,s);t&&r.variants.includes(o.trim())?(super.insertAt(new G(o,"converter-rule-variant",r,n)),super.insertAt(new G(e.slice(s+1),"converter-rule-to",r,n)),a!==-1&&super.insertAt(new G(e.slice(0,a),"converter-rule-from",r,n),0)):super.insertAt(new G(e,"converter-rule-to",r,n))}toString(){let{childNodes:e}=this;if(e.length===3){let[t,r,n]=e;return`${t.toString()}=>${r.toString()}:${n.toString()}`}return super.toString(":")}text(){let{childNodes:e}=this;if(e.length===3){let[t,r,n]=e;return`${t.text()}=>${r.text()}:${n.text()}`}return super.text(":")}getGaps(e){return e===0&&this.length===3?2:1}print(){let{childNodes:e}=this;if(e.length===3){let[t,r,n]=e;return`<span class="wpb-converter-rule">${t.print()}=>${r.print()}:${n.print()}</span>`}return super.print({sep:":"})}}});var Ar,xs=y(()=>{"use strict";H();L();R();ms();fs();Ar=class extends k{constructor(e,t,r=f.getConfig(),n=[]){super(void 0,r,n);T(this,"type","converter");this.append(new yr(e,r,n));let[s]=t,a=s.includes(":"),o=new vt(s,a,r,n);a&&o.length===1?this.insertAt(new vt(t.join(";"),!1,r,n)):this.append(o,...t.slice(1).map(g=>new vt(g,!0,r,n)))}toString(){let{childNodes:[e,...t]}=this;return`-{${e.toString()}${e.length>0?"|":""}${t.map(String).join(";")}}-`}text(){let{childNodes:[e,...t]}=this;return`-{${e.text()}|${de(t,";")}}-`}getAttribute(e){return e==="padding"?2:super.getAttribute(e)}getGaps(e){return e||this.firstChild.length>0?1:0}print(){let{childNodes:[e,...t]}=this;return`<span class="wpb-converter">-{${e.print()}${e.length>0?"|":""}${we(t,{sep:";"})}}-</span>`}}});var Ts={};W(Ts,{parseConverter:()=>Lo});var Lo,bs=y(()=>{"use strict";xs();Lo=(d,i,e)=>{let t=`(?:${i.variants.join("|")})`,r=/-\{/gu,n=/-\{|\}-/gu,s=new RegExp(String.raw`;(?=(?:[^;]*?=>)?\s*${t}\s*:|(?:\s|\0\d+c\x7F)*$)`,"u"),a=[],o=r,g=o.exec(d);for(;g;){let{0:p,index:l}=g;if(p==="}-"){let u=a.pop(),{length:c}=e,m=d.slice(u.index+2,l),x=m.indexOf("|"),[b,C]=x===-1?[[],m]:[m.slice(0,x).split(";"),m.slice(x+1)],w=C.replace(/(&[#a-z\d]+);/giu,"$1"),S=w.split(s).map(A=>A.replace(/\x01/gu,";"));new Ar(b,S,i,e),d=`${d.slice(0,u.index)}\0${c}v\x7F${d.slice(l+2)}`,a.length===0&&(o=r),o.lastIndex=u.index+3+String(c).length}else a.push(g),o=n,o.lastIndex=l+2;g=o.exec(d)}return d}});var bn={};W(bn,{Token:()=>k});var fe,_,M,Qe,Gt,Ot,q,Tn,ks,ys,As,vs,ws,Ss,Cs,Ns,$s,Is,Es,Fs,kn,k,R=y(()=>{"use strict";H();be();B();L();Un();Vn();kn=class kn extends Xt{constructor(e,t=f.getConfig(),r=[],n){super();v(this,q);T(this,"type","plain");v(this,fe,0);v(this,_);v(this,M);v(this,Qe);v(this,Gt,!1);v(this,Ot);typeof e=="string"&&this.insertAt(e),N(this,_,t),N(this,M,r),r.push(this)}parseOnce(e=h(this,fe),t=!1){if(e<h(this,fe)||!this.getAttribute("plain")||this.length===0)return this;if(h(this,fe)>=11)return this;switch(e){case 0:if(this.type==="root"){h(this,M).shift();let r=I(this,q,ks).call(this);t&&(t=!r)}N(this,Qe,t),I(this,q,ys).call(this,t);break;case 1:I(this,q,As).call(this);break;case 2:I(this,q,vs).call(this);break;case 3:I(this,q,ws).call(this);break;case 4:I(this,q,Ss).call(this);break;case 5:I(this,q,Cs).call(this);break;case 6:I(this,q,Ns).call(this);break;case 7:I(this,q,$s).call(this);break;case 8:I(this,q,Is).call(this);break;case 9:I(this,q,Es).call(this);break;case 10:I(this,q,Fs).call(this)}if(this.type==="root")for(let r of h(this,M))r.parseOnce(e,t);return Ut(this,fe)._++,this}buildFromStr(e,t){let r=e.split(/[\0\x7F]/u).map((n,s)=>{if(s%2===0)return new Et(n);if(isNaN(n.slice(-1)))return h(this,M)[Number(n.slice(0,-1))];throw new Error(`\u89E3\u6790\u9519\u8BEF\uFF01\u672A\u6B63\u786E\u6807\u8BB0\u7684 Token\uFF1A${n}`)});return t===0?r.map(String).join(""):t===1?de(r):r}afterBuild(){if(this.type==="root")for(let e of h(this,M))e.afterBuild();N(this,Gt,!0)}parse(e=11,t){for(e=Math.min(e,11);h(this,fe)<e;)this.parseOnce(h(this,fe),t);return e&&(I(this,q,Tn).call(this),this.afterBuild()),this}getAttribute(e){var t;switch(e){case"plain":return this.constructor===kn;case"config":return h(this,_);case"include":return(t=h(this,Qe))!=null?t:!!h(this.getRootNode(),Qe);case"accum":return h(this,M);default:return super.getAttribute(e)}}setAttribute(e,t){switch(e){case"stage":h(this,fe)===0&&this.type==="root"&&h(this,M).shift(),N(this,fe,t);break;default:super.setAttribute(e,t)}}insertAt(e,t=this.length){let r=typeof e=="string"?new Et(e):e;return super.insertAt(r,t),r.type==="root"&&(r.type="plain"),r}normalizeTitle(e,t=0,r,n,s){return f.normalizeTitle(e,t,h(this,Qe),h(this,_),r,n,s)}lint(e=this.getAbsoluteIndex(),t){var n;let r=super.lint(e,t);if(this.type==="root"){let s={};for(let c of this.querySelectorAll("category")){let m=s[c.name];m?m.add(c):s[c.name]=new Set([c])}for(let c of Object.values(s))c.size>1&&r.push(...[...c].map(m=>{let x=E(m,{start:m.getAbsoluteIndex()},"no-duplicate","duplicated category");return x.suggestions=[{desc:"remove",range:[x.startIndex,x.endIndex],text:""}],x}));let a=/<!--\s*lint-(disable(?:(?:-next)?-line)?|enable)(\s[\sa-z,-]*)?-->/gu,o=this.toString(),g=[],p=a.exec(o),l=0,u=0;for(;p;){let{1:c,index:m}=p,x=(n=p[2])==null?void 0:n.trim();u+=o.slice(l,m).split(`
`).length-1,l=m,g.push({line:u+(c==="disable-line"?0:1),from:c==="disable"?a.lastIndex:void 0,to:c==="enable"?a.lastIndex:void 0,rules:x?new Set(x.split(",").map(b=>b.trim())):void 0}),p=a.exec(o)}r=r.filter(({rule:c,startLine:m,startIndex:x})=>{let b={pos:0};for(let{line:C,from:w,to:S,rules:A}of g){if(C>m+1)break;if(A&&!A.has(c))continue;if(C===m&&w===void 0&&S===void 0)return!1;w<=x&&w>b.pos?(b.pos=w,b.type="from"):S<=x&&S>b.pos&&(b.pos=S,b.type="to")}return b.type!=="from"})}return r}toString(e){var r;let t=this.getRootNode();return t.type==="root"&&h(t,Gt)?((r=h(this,Ot))!=null||N(this,Ot,super.toString(e)),h(this,Ot)):super.toString(e)}};fe=new WeakMap,_=new WeakMap,M=new WeakMap,Qe=new WeakMap,Gt=new WeakMap,Ot=new WeakMap,q=new WeakSet,Tn=function(){var n;N(this,fe,11);let{length:e,firstChild:t}=this,r=String(t);if(e===1&&t.type==="text"&&r.includes("\0")&&(this.replaceChildren(...this.buildFromStr(r)),this.normalize(),this.type==="root"))for(let s of h(this,M))I(n=s,q,Tn).call(n)},ks=function(){let{parseRedirect:e}=(Yn(),O(Jn)),t=this.firstChild.toString(),r=e(t,h(this,_),h(this,M));return r&&this.setText(r),!!r},ys=function(e){let{parseCommentAndExt:t}=(Oi(),O(Gi));this.setText(t(this.firstChild.toString(),h(this,_),h(this,M),e))},As=function(){let{parseBraces:e}=(Wr(),O(Ai)),t=this.type==="root"?this.firstChild.toString():`\0${this.firstChild.toString()}`,r=e(t,h(this,_),h(this,M));this.setText(this.type==="root"?r:r.slice(1))},vs=function(){var t;if((t=h(this,_).excludes)!=null&&t.includes("html"))return;let{parseHtml:e}=(Wi(),O(zi));this.setText(e(this.firstChild.toString(),h(this,_),h(this,M)))},ws=function(){var t;if((t=h(this,_).excludes)!=null&&t.includes("table"))return;let{parseTable:e}=(Zi(),O(Qi));this.setText(e(this,h(this,_),h(this,M)))},Ss=function(){var t;if((t=h(this,_).excludes)!=null&&t.includes("hr"))return;let{parseHrAndDoubleUnderscore:e}=(ts(),O(es));this.setText(e(this,h(this,_),h(this,M)))},Cs=function(){let{parseLinks:e}=(ls(),O(as));this.setText(e(this.firstChild.toString(),h(this,_),h(this,M)))},Ns=function(){var r;if((r=h(this,_).excludes)!=null&&r.includes("quote"))return;let{parseQuotes:e}=(mn(),O(ns)),t=this.firstChild.toString().split(`
`);for(let n=0;n<t.length;n++)t[n]=e(t[n],h(this,_),h(this,M));this.setText(t.join(`
`))},$s=function(){var t;if((t=h(this,_).excludes)!=null&&t.includes("extLink"))return;let{parseExternalLinks:e}=(xn(),O(is));this.setText(e(this.firstChild.toString(),h(this,_),h(this,M)))},Is=function(){var t;if((t=h(this,_).excludes)!=null&&t.includes("magicLink"))return;let{parseMagicLinks:e}=(gs(),O(ds));this.setText(e(this.firstChild.toString(),h(this,_),h(this,M)))},Es=function(){var n;if((n=h(this,_).excludes)!=null&&n.includes("list"))return;let{parseList:e}=(cs(),O(us)),t=this.firstChild.toString().split(`
`),r=this.type==="root"||this.type==="ext-inner"&&this.name==="poem"?0:1;for(;r<t.length;r++)t[r]=e(t[r],h(this,_),h(this,M));this.setText(t.join(`
`))},Fs=function(){if(h(this,_).variants.length>0){let{parseConverter:e}=(bs(),O(Ts));this.setText(e(this.firstChild.toString(),h(this,_),h(this,M)))}};k=kn});var Ze,Ls,Ro,f,L=y(()=>{En();ve();be();H();Ze={i18n:void 0,rules:In,getConfig(){return{...Rn,...this.config,excludes:[]}},msg(d,i=""){var e,t;return d&&((t=(e=this.i18n)==null?void 0:e[d])!=null?t:d).replace("$1",this.msg(i))},normalizeTitle(d,i=0,e,t=Ze.getConfig(),r,n=!1,s=!1){let{Title:a}=(On(),O(Gn));if(r)return new a(d,i,t,n,s);let{Token:o}=(R(),O(bn)),g=Ee.run(()=>{let l=new o(d,t);return l.type="root",l.parseOnce(0,e).parseOnce()}),p=new a(g.toString(),i,t,n,s);return Ee.run(()=>{for(let l of["main","fragment"]){let u=p[l];u!=null&&u.includes("\0")&&(p[l]=g.buildFromStr(u,1))}}),p},parse(d,i,e=11,t=Ze.getConfig()){d=jn(d);let{Token:r}=(R(),O(bn));return Ee.run(()=>{let s=new r(d,t);return s.type="root",s.parse(e,i)})}},Ls={},Ro=new Set(["normalizeTitle","parse"]);for(let d in Ze)Ro.has(d)||(Ls[d]={enumerable:!1});Object.defineProperties(Ze,Ls);typeof self=="object"?Object.assign(self,{Parser:Ze}):typeof globalThis=="object"&&Object.assign(globalThis,{Parser:Ze});f=Ze});L();})();
