"use strict";var an=Object.create;var pe=Object.defineProperty,ln=Object.defineProperties,Jt=Object.getOwnPropertyDescriptor,dn=Object.getOwnPropertyDescriptors,gn=Object.getOwnPropertyNames,Ut=Object.getOwnPropertySymbols;var Ht=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable;var Xt=(r,t)=>(t=Symbol[r])?t:Symbol.for("Symbol."+r),ue=r=>{throw TypeError(r)};var He=(r,t,e)=>t in r?pe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,W=(r,t)=>{for(var e in t||(t={}))Ht.call(t,e)&&He(r,e,t[e]);if(Ut)for(var e of Ut(t))pn.call(t,e)&&He(r,e,t[e]);return r},V=(r,t)=>ln(r,dn(t)),Vt=(r,t)=>pe(r,"name",{value:t,configurable:!0});var y=(r,t)=>()=>(r&&(t=r(r=0)),t);var un=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),se=(r,t)=>{for(var e in t)pe(r,e,{get:t[e],enumerable:!0})},fn=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of gn(t))!Ht.call(r,s)&&s!==e&&pe(r,s,{get:()=>t[s],enumerable:!(n=Jt(t,s))||n.enumerable});return r};var J=r=>fn(pe({},"__esModule",{value:!0}),r);var L=r=>{var t;return[,,,an((t=r==null?void 0:r[Xt("metadata")])!=null?t:null)]},Qt=["class","method","getter","setter","accessor","field","value","get","set"],Ce=r=>r!==void 0&&typeof r!="function"?ue("Function expected"):r,mn=(r,t,e,n,s)=>({kind:Qt[r],name:t,metadata:n,addInitializer:i=>e._?ue("Already initialized"):s.push(Ce(i||null))}),cn=(r,t)=>He(t,Xt("metadata"),r[3]),q=(r,t,e,n)=>{for(var s=0,i=r[t>>1],o=i&&i.length;s<o;s++)t&1?i[s].call(e):n=i[s].call(e,n);return n},R=(r,t,e,n,s,i)=>{var o,a,l,p,m,d=t&7,u=!!(t&8),b=!!(t&16),v=d>3?r.length+1:d?u?1:2:0,P=Qt[d+5],$=d>3&&(r[v-1]=[]),B=r[v]||(r[v]=[]),k=d&&(!b&&!u&&(s=s.prototype),d<5&&(d>3||!b)&&Jt(d<4?s:{get[e](){return g(this,i)},set[e](f){return h(this,i,f)}},e));d?b&&d<4&&Vt(i,(d>2?"set ":d>1?"get ":"")+e):Vt(s,e);for(var x=n.length-1;x>=0;x--)p=mn(d,e,l={},r[3],B),d&&(p.static=u,p.private=b,m=p.access={has:b?f=>hn(s,f):f=>e in f},d^3&&(m.get=b?f=>(d^1?g:C)(f,s,d^4?i:k.get):f=>f[e]),d>2&&(m.set=b?(f,A)=>h(f,s,A,d^4?i:k.set):(f,A)=>f[e]=A)),a=(0,n[x])(d?d<4?b?i:k[P]:d>4?void 0:{get:k.get,set:k.set}:s,p),l._=1,d^4||a===void 0?Ce(a)&&(d>4?$.unshift(a):d?b?i=a:k[P]=a:s=a):typeof a!="object"||a===null?ue("Object expected"):(Ce(o=a.get)&&(k.get=o),Ce(o=a.set)&&(k.set=o),Ce(o=a.init)&&$.unshift(o));return d||cn(r,s),k&&pe(s,e,k),b?d^4?i:k:s},F=(r,t,e)=>He(r,typeof t!="symbol"?t+"":t,e),Tt=(r,t,e)=>t.has(r)||ue("Cannot "+e),hn=(r,t)=>Object(t)!==t?ue('Cannot use the "in" operator on this value'):r.has(t),g=(r,t,e)=>(Tt(r,t,"read from private field"),e?e.call(r):t.get(r)),c=(r,t,e)=>t.has(r)?ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),h=(r,t,e,n)=>(Tt(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),C=(r,t,e)=>(Tt(r,t,"access private method"),e);var Kt=(r,t,e,n)=>({set _(s){h(r,t,s,e)},get _(){return g(r,t,n)}});var bt,Se,Yt,Ne=y(()=>{"use strict";bt={run(r,t){return r()}},Se=(r,t,e,n=[])=>{var o,a;let s=r.getChildNodes(),i;s.length===e?(i=s,s=n):i=Array.prototype.splice.apply(s,[t,e,...n]);for(let l=0;l<n.length;l++){let p=n[l];p.setAttribute("parentNode",r),p.setAttribute("nextSibling",s[t+l+1]),p.setAttribute("previousSibling",s[t+l-1])}return(o=s[t-1])==null||o.setAttribute("nextSibling",s[t]),(a=s[t+n.length])==null||a.setAttribute("previousSibling",s[t+n.length-1]),s===n&&r.setAttribute("childNodes",s),i},Yt=(r,t)=>{let e=r.toLowerCase(),[n,s]=t,i=Object.prototype.hasOwnProperty.call(s,r);return[e,i,i?s[r]:Object.prototype.hasOwnProperty.call(n,e)&&n[e]]}});var Zt=un((qn,Tn)=>{Tn.exports={ext:[],namespaces:{"0":"","6":"File","10":"Template"},nsid:{"":0,file:6,template:10},functionHook:[],variable:["!","="],parserFunction:[{},{"!":"!","=":"="},["msg","raw"],["subst","safesubst"]]}});var er,tr=y(()=>{"use strict";er=Zt()});function ie(r,t){return r.replace(/\0(\d+)\x7F/gu,(e,n)=>t[n])}var Qe,yt,rr,j,H,bn,yn,Xe,xt,M=y(()=>{"use strict";Qe=r=>r.trim().toLowerCase();yt=(r,t)=>e=>e.replace(r,t),rr=yt(/[\0\x7F]|\r$/gmu,""),j=yt(/\0\d+[cn]\x7F/gu,""),H=(r,t="")=>r.map(e=>typeof e=="string"?e:e.text()).join(t),bn={lt:"<",gt:">",lbrack:"[",rbrack:"]",lbrace:"{",rbrace:"}",nbsp:" ",amp:"&",quot:'"'},yn=yt(/&(?:#(\d+|[Xx][\da-fA-F]+)|([lg]t|[LG]T|[lr]brac[ke]|nbsp|amp|AMP|quot|QUOT));/gu,(r,t,e)=>t?String.fromCodePoint(+((/^x/iu.test(t)?"0":"")+t)):bn[e.toLowerCase()]),xt=r=>(Xe!=null||(Xe=yn),Xe(r))});function Ke(r){let t=new Map,e=new WeakMap;return n=>{let s=typeof n=="string"?t:e;if(s.has(n)){let o=s.get(n);return o.lastIndex=0,o}let i=r(n);return s.set(n,i),i}}var nr,Ye=y(()=>{"use strict";nr=r=>decodeURIComponent(r.replace(/%(?![\da-f]{2})/giu,"%25"))});var xn,$e,Ee,fe,Ze,sr,we,ir=y(()=>{"use strict";Ye();M();xn=r=>{let[,{length:t},e]=/^((?:\.\.\/)*)([\s\S]*)/u.exec(r);return[t/3,e]},we=class{constructor(t,e,n,{temporary:s,decode:i,selfLink:o,page:a}={}){c(this,Ze);c(this,$e);c(this,Ee);c(this,fe);F(this,"valid");let l=t.trim(),p=l.startsWith("../");if(i&&t.includes("%"))try{t=nr(t)}catch(b){}if(t=xt(t).replace(/[_ ]+/gu," ").trim(),p)h(this,fe,0);else{let b=e;t.startsWith(":")&&(b=0,t=t.slice(1).trim());let v=t.split(":");if(v.length>1){let P=Qe(v[0]),$=Object.prototype.hasOwnProperty.call(n.nsid,P)&&n.nsid[P];$&&(b=$,t=v.slice(1).join(":").trim())}h(this,fe,b)}let m=t.indexOf("#");m!==-1&&(t=t.slice(0,m).trim());let[d,u]=p?xn(t):[0,t];this.valid=!!t&&xt(t)===t&&!/^:|\0\d+[eh!+-]\x7F|[<>[\]{}|\n]|%[\da-f]{2}|(?:^|\/)\.{1,2}(?:$|\/)/iu.test(u),this.main=t,h(this,Ee,n.namespaces)}get ns(){return g(this,fe)}get main(){return g(this,$e)}set main(t){t=t.replace(/_/gu," ").trim(),h(this,$e,t&&t[0].toUpperCase()+t.slice(1))}get prefix(){let t=g(this,Ee)[this.ns];return t+(t&&":")}get title(){return this.getRedirection()[1]}getRedirection(){let{prefix:t}=this,e=t;return C(this,Ze,sr).call(this,e)}};$e=new WeakMap,Ee=new WeakMap,fe=new WeakMap,Ze=new WeakSet,sr=function(t){let e=(t+this.main).replace(/ /gu,"_");return e.startsWith("/")&&(e=e.replace(/(.)\/$/u,"$1")),[!1,e]}});var or,ar=y(()=>{"use strict";or=r=>{class t extends r{get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes[this.childNodes.length-1]}}return t}});var lr,Pe,me,ce,At,_,kt=y(()=>{"use strict";ar();lr=[or];_=class{constructor(){F(this,"childNodes",[]);c(this,Pe);c(this,me);c(this,ce)}get parentNode(){return g(this,Pe)}get nextSibling(){return g(this,me)}get previousSibling(){return g(this,ce)}getChildNodes(){let{childNodes:t}=this;return t}getAttribute(t){return t==="padding"?0:this[t]}setAttribute(t,e){switch(t){case"parentNode":h(this,Pe,e),e||(h(this,me,void 0),h(this,ce,void 0));break;case"nextSibling":h(this,me,e);break;case"previousSibling":h(this,ce,e);break;default:this[t]=e}}insertAdjacent(t,e){let{parentNode:n}=this;if(!n)throw new Error("There is no parent node!");let s=n.childNodes.indexOf(this)+e;for(let i=0;i<t.length;i++)n.insertAt(t[i],s+i)}after(...t){this.insertAdjacent(t,1)}before(...t){this.insertAdjacent(t,0)}remove(t){let{parentNode:e,nextSibling:n,previousSibling:s}=this,i=e==null?void 0:e.childNodes.indexOf(this);e==null||e.removeAt(i),t&&(n==null?void 0:n.type)==="text"&&(s==null?void 0:s.type)==="text"&&n.data.startsWith(`
`)&&s.data.endsWith(`
`)&&n.deleteData(0,1)}};At=L(null),Pe=new WeakMap,me=new WeakMap,ce=new WeakMap,_=R(At,0,"AstNode",lr,_),q(At,1,_)});var An,dr,gr=y(()=>{"use strict";An=r=>{if(r.includes("#")){let t=r.indexOf("#"),e=r.slice(0,t),n=r.slice(t+1);return(s,i)=>(t===0||s===e)&&i===n}return t=>t===r},dr=(r,t,e)=>{r=r.trim();let n=r.split(",").map(s=>s.trim()).filter(s=>s!=="").map(An);return(({type:s,name:i})=>n.some(o=>o(s,i)))}});var pr,ur=y(()=>{"use strict";gr();pr=r=>{var e,vt;class t extends r{constructor(){super(...arguments);c(this,e)}getElementBy(o){let a=[...this.childNodes].reverse();for(;a.length>0;){let l=a.pop(),{type:p,childNodes:m}=l;if(p!=="text"){if(o(l))return l;for(let d=m.length-1;d>=0;d--)a.push(m[d])}}}querySelector(o){return this.getElementBy(C(this,e,vt).call(this,o))}getElementsBy(o){let a=[...this.childNodes].reverse(),l=[];for(;a.length>0;){let p=a.pop(),{type:m,childNodes:d}=p;if(m!=="text"){o(p)&&l.push(p);for(let u=d.length-1;u>=0;u--)a.push(d[u])}}return l}querySelectorAll(o){return this.getElementsBy(C(this,e,vt).call(this,o))}}return e=new WeakSet,vt=function(o){return dr(o,this)},t}});var fr,Ct,kn,oe,mr=y(()=>{"use strict";M();Ne();kt();ur();fr=[pr];oe=class extends(kn=_){get length(){return this.childNodes.length}text(t){return H(this.childNodes,t)}removeAt(t){return Se(this,t,1)[0]}insertAt(t,e=this.length){return Se(this,e,0,[t]),t}append(...t){this.safeAppend(t)}safeAppend(t){for(let e of t)this.insertAt(e)}safeReplaceChildren(t){for(let e=this.length-1;e>=0;e--)this.removeAt(e);this.safeAppend([...t])}setText(t,e=0){e+=e<0?this.length:0;let n=this.childNodes[e],{data:s}=n;return n.replaceData(t),s}toString(t,e=""){return this.childNodes.map(n=>n.toString(t)).join(e)}replaceChildren(...t){this.safeReplaceChildren(t)}};Ct=L(kn),oe=R(Ct,0,"AstElement",fr,oe),q(Ct,1,oe)});var Be,St,Fe,cr=y(()=>{"use strict";kt();Fe=class extends _{constructor(e){super();c(this,Be);F(this,"data","");this.data=e}get type(){return"text"}toString(e){return this.data}text(){return this.data}replaceData(e){C(this,Be,St).call(this,e)}deleteData(e,n=1/0){C(this,Be,St).call(this,this.data.slice(0,e)+(e<0&&e+n>=0?"":this.data.slice(e+n)))}};Be=new WeakSet,St=function(e){this.setAttribute("data",e)}});var et,hr=y(()=>{"use strict";S();et=class extends T{get type(){return"onlyinclude"}toString(t){return`<onlyinclude>${super.toString(t)}</onlyinclude>`}isPlain(){return!0}}});var X,Oe=y(()=>{"use strict";X=(r=!0,t=!0)=>e=>{class n extends e{text(){return""}}return n}});var Q,tt=y(()=>{"use strict";S();Q=class extends T{get innerText(){return this.firstChild.data}constructor(t="",e,n){super(t,e,n)}}});var Tr,Nt,vn,K,br=y(()=>{"use strict";Oe();tt();Tr=[X(!1)];K=class extends(vn=Q){get type(){return"noinclude"}toString(t){return t?"":super.toString()}};Nt=L(vn),K=R(Nt,0,"NoincludeToken",Tr,K),q(Nt,1,K)});var he,Y,Te,wt=y(()=>{"use strict";S();Te=class extends T{constructor(e,n,s,i,o,a=[]){super(void 0,o);c(this,he);c(this,Y);F(this,"closed");h(this,he,[e,i||e]),this.closed=i!=="",h(this,Y,i===void 0),this.append(n,s);let l=typeof n=="string"?-1:a.indexOf(n);a.splice(l===-1?1/0:l,0,this)}get selfClosing(){return g(this,Y)}set selfClosing(e){if(h(this,Y,!!e),e){let{lastChild:n}=this;n.type==="text"?n.replaceData(""):n.replaceChildren()}}toString(e){let{firstChild:n,lastChild:s}=this,[i,o]=g(this,he);return g(this,Y)?`<${i}${n.toString(e)}/>`:`<${i}${n.toString(e)}>${s.toString(e)}${this.closed?`</${o}>`:""}`}text(){let[e,n]=g(this,he);return g(this,Y)?`<${e}${this.firstChild.text()}/>`:`<${e}${super.text(">")}${this.closed?`</${n}>`:""}`}};he=new WeakMap,Y=new WeakMap});var yr,$t,Cn,ae,xr=y(()=>{"use strict";Oe();wt();yr=[X(!1)];ae=class extends(Cn=Te){get type(){return"include"}constructor(t,e="",n,s,i,o){super(t,e,n!=null?n:"",n===void 0||s!=null?s:"",i,o)}toString(t){return t?"":super.toString()}};$t=L(Cn),ae=R($t,0,"IncludeToken",yr,ae),q($t,1,ae)});var Le,Z,qe,rt,Ar=y(()=>{"use strict";S();rt=class extends T{constructor(e,n,s,i,o,a="",l,p=[]){let m=s,d;if(n==="gallery"&&s==="caption"||n==="ref"&&s==="details"){let u=V(W({},o),{excludes:[...o.excludes,"heading","html","table","hr","list"]});d=new T(l,u,p,{}),d.type="attr-value",d.setAttribute("stage",1)}else d=l!=null?l:"";super(void 0,o,p);c(this,Le);c(this,Z);c(this,qe);h(this,Le,e),this.append(m,d),h(this,Z,a),h(this,qe,[...i])}get type(){return g(this,Le)}toString(e){let[n="",s=""]=g(this,qe);return g(this,Z)?super.toString(e,g(this,Z)+n)+s:this.firstChild.toString(e)}text(){return g(this,Z)?`${super.text(`${g(this,Z).trim()}"`)}"`:this.firstChild.text()}};Le=new WeakMap,Z=new WeakMap,qe=new WeakMap});var Sn,Re,nt,kr=y(()=>{"use strict";M();S();Ar();Sn=r=>r.slice(0,-1),nt=class extends T{constructor(e,n,s,i,o=[]){super(void 0,i,o,{});c(this,Re);if(h(this,Re,n),e){let a=/([^\s/][^\s/=]*)(?:(\s*=\s*)(?:(["'])([\s\S]*?)(\3|$)|(\S*)))?/gu,l="",p=a.exec(e),m=0,d=()=>{l&&(super.insertAt(l),l="")};for(;p;){let{index:u,0:b,1:v,2:P,3:$,4:B,5:k,6:x}=p;if(l+=e.slice(m,u),/^[\w:][\w:.-]*$/u.test(j(v).trim())){let f=B!=null?B:x,A=[$,k],E=new rt(Sn(n),s,v,A,i,P,f,o);d(),super.insertAt(E)}else l+=b;({lastIndex:m}=a),p=a.exec(e)}l+=e.slice(m),d()}}get type(){return g(this,Re)}};Re=new WeakMap});var je,z,st=y(()=>{"use strict";S();z=class extends T{constructor(e,n,s,i,o){super(e,s,i,o);c(this,je);h(this,je,n)}get type(){return g(this,je)}};je=new WeakMap});var Ie,We,Et,it,vr=y(()=>{"use strict";S();st();it=class extends T{constructor(e,n,s,i=[]){super(void 0,s,i);c(this,We);c(this,Ie);h(this,Ie,e);let o=new T(n[0],s,i);o.type="heading-title",o.setAttribute("stage",2);let a=new z(n[1],"heading-trail",s,i);this.append(o,a)}get type(){return"heading"}get level(){return g(this,Ie)}toString(e){let n=C(this,We,Et).call(this);return n+this.firstChild.toString(e)+n+this.lastChild.toString(e)}text(){let e=C(this,We,Et).call(this);return e+this.firstChild.text()+e}};Ie=new WeakMap,We=new WeakSet,Et=function(){return"=".repeat(this.level)}});var Me,Cr=y(()=>{"use strict";M();S();Me=class extends T{get type(){return"parameter"}get anon(){return this.firstChild.length===0}constructor(t,e,n,s=[]){super(void 0,n,s);let i=new T(typeof t=="number"?void 0:t,n,s,{}),o=new T(e,n,s);i.type="parameter-key",i.setAttribute("stage",2),o.type="parameter-value",o.setAttribute("stage",2),this.append(i,o)}trimName(t,e=!0){let n=t.toString(!0).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1");return this.setAttribute("name",n),n}afterBuild(){if(!this.anon){let{parentNode:t,firstChild:e}=this,n=this.trimName(e);t&&t.getArgs(n,!1,!1).add(this)}super.afterBuild()}toString(t){return this.anon?this.lastChild.toString(t):super.toString(t,"=")}text(){return this.anon?this.lastChild.text():super.text("=")}getValue(){var e;let t=j(this.lastChild.text());return this.anon&&((e=this.parentNode)==null?void 0:e.isTemplate())!==!1?t:t.trim()}setValue(t){this.lastChild.replaceChildren(t)}}});var Nn,De,be,_e,ye,ze,xe,Sr,Nr,Ge,wr=y(()=>{"use strict";M();Ne();S();Cr();st();Nn=r=>{let{lastChild:t,type:e}=r,n=t.type==="parameter";!(e==="template"?n&&t.anon:t.type==="magic-word-name")&&!t.toString().endsWith(`
`)&&(n?t.lastChild:t).insertAt(`
`)},Ge=class extends T{constructor(e,n,s,i=[]){var B,k;let o,a=/^(?:\s|\0\d+[cn]\x7F)*\0(\d+)h\x7F(?:\s|\0\d+[cn]\x7F)*/u.exec(e);a&&(o=Number(a[1]),e=e.replace(`\0${o}h`,i[o].toString().replace(/^\n/u,"")));super(void 0,s,i,{});c(this,xe);F(this,"modifier","");c(this,De,"template");c(this,be,":");c(this,_e,!1);c(this,ye,new Map);c(this,ze);let{parserFunction:l,variable:p,functionHook:m}=s,d=(B=/^(?:\s|\0\d+[cn]\x7F)*\0\d+s\x7F/u.exec(e))==null?void 0:B[0];if(d)this.setAttribute("modifier",d),e=e.slice(d.length);else if(e.includes(":")){let[x,...f]=e.split(":"),[A]=/^(?:\s|\0\d+[cn]\x7F)*/u.exec((k=f[0])!=null?k:"");this.setModifier(`${x}:${A}`)&&(e=f.join(":").slice(A.length))}let u=e.search(/[:：]/u),b=e[u]==="：",v=u!==-1;if(v||n.length===0&&!g(this,_e)){let x=v?e.slice(0,u):e,f=v&&e.slice(u+1),A=j(x),E=v?A.slice(A.search(/\S/u))+(b?"：":""):A.trim(),[,w,N]=Yt(E,l),te=!("functionHook"in s)||m.includes(N),ge=p.includes(N);if(v?N&&te:ge){this.setAttribute("name",N),h(this,De,"magic-word"),b&&h(this,be,"：");let mt=new z(x,"magic-word-name",s,i);super.insertAt(mt),f!==!1&&n.unshift([f])}}if(this.type==="template"){let x=j(e).trim();if(!this.normalizeTitle(x,10,{halfParsed:!0,temporary:!0}).valid)throw i.pop(),new SyntaxError("Invalid template name");let f=new z(e,"template-name",s,i,{});super.insertAt(f)}typeof o=="number"&&(i[o]=void 0);let P=this.isTemplate(),$=1;for(let x=0;x<n.length;x++){let f=n[x];P||(f[0]=f.join("="),f.length=1),f.length===1&&(f.unshift($),$++),this.insertAt(new Me(...f,s,i))}}get type(){return g(this,De)}setModifier(e){let[,,n,s]=this.getAttribute("config").parserFunction,o=j(e).trim().slice(0,-1).toLowerCase(),a=n.includes(o),l=s.includes(o);return a||l||!e?(this.setAttribute("modifier",e),h(this,_e,a),!!e):!1}isTemplate(){return this.type==="template"}afterBuild(){this.modifier.includes("\0")&&this.setAttribute("modifier",this.buildFromStr(this.modifier,0)),super.afterBuild(),this.isTemplate()&&(h(this,ze,C(this,xe,Sr).call(this)),this.setAttribute("name",g(this,ze).title))}toString(e){let{childNodes:n,length:s,firstChild:i,modifier:o,type:a,name:l}=this;return`{{${o}${a==="magic-word"?i.toString(e)+(s===1?"":g(this,be))+n.slice(1).map(p=>p.toString(e)).join("|"):super.toString(e,"|")}}}`}text(){let{childNodes:e,length:n,firstChild:s,modifier:i,type:o}=this;return`{{${i}${o==="magic-word"?s.text()+(n===1?"":g(this,be))+H(e.slice(1),"|"):super.text("|")}}}`}insertAt(e,n=this.length){return super.insertAt(e,n),e.anon?C(this,xe,Nr).call(this,e):e.name&&this.getArgs(e.name,!1,!1).add(e),e}getAllArgs(){return this.childNodes.slice(1)}getAnonArgs(){return this.getAllArgs().filter(({anon:e})=>e)}getArgs(e,n,s=!0){let i=String(e).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),o;return g(this,ye).has(i)?o=g(this,ye).get(i):(o=new Set(this.getAllArgs().filter(({name:a})=>i===a)),g(this,ye).set(i,o)),o}getArg(e){let{childNodes:n}=this;return[...this.getArgs(e)].sort((s,i)=>n.indexOf(i)-n.indexOf(s))[0]}getValue(e){var n;return(n=this.getArg(e))==null?void 0:n.getValue()}setValue(e,n,s){let i=this.getArg(e);if(i){i.setValue(n);return}s&&Nn(this),this.insertAt(new Me(String(e),n,this.getAttribute("config")))}};De=new WeakMap,be=new WeakMap,_e=new WeakMap,ye=new WeakMap,ze=new WeakMap,xe=new WeakSet,Sr=function(){let e=this.type==="template";return this.normalizeTitle(this.childNodes[0].text(),10,W({temporary:!0},!e&&{page:""}))},Nr=function(e){let n=this.getAnonArgs(),s=!0,i=e,o=String(n.length);i.setAttribute("name",o),this.getArgs(o,!1,!1).add(i)}});var $r,Pt,wn,le,Er=y(()=>{"use strict";Oe();S();$r=[X()];le=class extends(wn=T){get type(){return"hidden"}};Pt=L(wn),le=R(Pt,0,"HiddenToken",$r,le),q(Pt,1,le)});var ot,Pr=y(()=>{"use strict";M();S();st();Er();ot=class extends T{get type(){return"arg"}constructor(t,e,n=[]){super(void 0,e,n,{});for(let s=0;s<t.length;s++){let i=t[s];if(s===0){let o=new z(i,"arg-name",e,n,{});super.insertAt(o)}else if(s>1){let o=new le(i,e,n);super.insertAt(o)}else{let o=new T(i,e,n);o.type="arg-default",o.setAttribute("stage",2),super.insertAt(o)}}}toString(t){return`{{{${super.toString(t,"|")}}}}`}text(){return`{{{${H(this.childNodes.slice(0,2),"|")}}}}`}}});var jr={};se(jr,{parseBraces:()=>Bt});var $n,Fr,Ft,Br,Or,Lr,Rr,qr,Bt,Ot=y(()=>{"use strict";Ye();M();vr();wr();Pr();$n={"=":String.raw`\n(?!(?:[^\S\n]|\0\d+[cn]\x7F)*\n)`,"{":String.raw`\}{2,}|\|`,"-":String.raw`\}-`,"[":String.raw`\]\]`},Fr=String.raw`\[(?!\[)`,Ft=String.raw`\n(?![=\0])`,Br=String.raw`|\{{2,}`,Or=new Map([["!","!"],["!!","+"],["(!","{"],["!)","}"],["!-","-"],["=","~"],["server","m"]]),Lr=Ke(r=>new RegExp(r,"gmu"));Rr=new RegExp(String.raw`\{\{((?:[^\n{}[]|${Fr}|${Ft})*)\}\}(?!\})`+"|"+String.raw`\[\[(?:[^\n[\]{]|${Ft})*\]\]`+"|"+String.raw`-\{(?:[^\n{}[]|${Fr}|${Ft})*\}-`,"gu");qr=r=>{let t=Qe(j(r));return Or.has(t)?Or.get(t):/^(?:filepath|(?:full|canonical)urle?):./u.test(t)?"m":"t"},Bt=(r,t,e)=>{var v,P,$,B,k;let n=String.raw`${t.excludes.includes("heading")?"":String.raw`^((?:\0\d+[cno]\x7F)*)={1,6}|`}\[\[|-\{(?!\{)`,[,,,s]=t.parserFunction,i=[],o=[],a=(x,f,A,E)=>{f[f.length-1].push(ie(x.slice(A,E),o))},l;do l!==void 0&&(r=l),l=r.replace(Rr,(x,f,A)=>{if(f!==void 0||typeof A=="string")try{let{length:E}=e,w=(f!=null?f:A).split("|");return new Ge(ie(w[0],o),w.slice(1).map(N=>{let te=N.indexOf("=");return(te===-1?[N]:[N.slice(0,te),N.slice(te+1)]).map(ge=>ie(ge,o))}),t,e),`\0${E}${qr(w[0])}`}catch(E){if(!(E instanceof SyntaxError)||E.message!=="Invalid template name")throw E}return o.push(ie(x,o)),`\0${o.length-1}`});while(l!==r);r=l;let p=r.lastIndexOf("}}")-r.length,m=p+r.length!==-1,d=Lr(n+(m?Br:"")),u=d.exec(r),b;for(;u||b!==void 0&&b<=r.length&&((P=(v=i[i.length-1])==null?void 0:v[0])!=null&&P.startsWith("="));){if(u!=null&&u[1]){let[,{length:G}]=u;u[0]=u[0].slice(G),u.index+=G}let{0:x,index:f}=u!=null?u:{0:`
`,index:r.length},A=($=i.pop())!=null?$:{},{0:E,index:w,parts:N,findEqual:te,pos:ge}=A,mt=x==="="&&te;if(x==="]]"||x==="}-")b=f+2;else if(x===`
`){b=f+1;let{pos:G,findEqual:U}=(B=i[i.length-1])!=null?B:{};if(G===void 0||U||j(r.slice(G,w))!==""){let D=/^(={1,6})(.+)\1((?:\s|\0\d+[cn]\x7F)*)$/u.exec(r.slice(w,f));D&&(D[2]=ie(D[2],o),D[2].includes(`
`)||(r=`${r.slice(0,w)}\0${e.length}h${r.slice(f)}`,b=w+4+String(e.length).length,new it(D[1].length,D.slice(2),t,e)))}}else if(x==="|"||mt)b=f+1,a(r,N,ge,f),x==="|"&&N.push([]),A.pos=b,A.findEqual=x==="|",i.push(A);else if(x.startsWith("}}")){let G=x.slice(0,Math.min(E.length,3)),U=E.length-G.length,{length:D}=e;b=f+G.length,a(r,N,ge,f);let zt=!1,ct="t";if(G.length===3){let ne=N.map(on=>on.join("=")),ht=ne.length>1&&j(ne[1]).trim();new ot(ne,t,e),ht&&ht.endsWith(":")&&s.includes(ht.slice(0,-1).toLowerCase())&&(ct="s")}else try{new Ge(N[0][0],N.slice(1),t,e),ct=qr(N[0][0])}catch(ne){if(!(ne instanceof SyntaxError&&ne.message==="Invalid template name"))throw ne;zt=!0}zt||(r=`${r.slice(0,w+U)}\0${D}${ct}${r.slice(b)}`,b=w+U+3+String(D).length,U>1?i.push({0:E.slice(0,U),index:w,pos:w+U,parts:[[]]}):U===1&&r[w-1]==="-"&&i.push({0:"-{",index:w-1,pos:w+1,parts:[[]]}))}else b=f+x.length,x.startsWith("{")&&(u.pos=b,u.parts=[[]]),i.push(..."0"in A?[A]:[],u);let re=i[i.length-1];if(m&&p+r.length<b)for(m=!1;(k=re==null?void 0:re[0])!=null&&k.startsWith("{");)i.pop(),re=i[i.length-1];d=Lr(n+(m?Br:"")+(re?`|${$n[re[0][0]]}${re.findEqual?"|=":""}`:"")),d.lastIndex=b,u=d.exec(r)}return ie(r,o)}});var Ir={};se(Ir,{NestedToken:()=>Lt});var Lt,Wr=y(()=>{"use strict";Rt();Ot();S();Lt=class extends T{get type(){return"ext-inner"}constructor(t,e,n,s,i=[]){let o=Symbol("NestedToken"),{length:a}=i;i.push(o),t&&(t=qt(t,s,i,e)),t&&(t=Bt(t,s,i)),i.splice(a,1),super(t,s,i)}}});var at,Mr=y(()=>{"use strict";S();at=class extends T{get type(){return"ext-inner"}toString(t){return super.toString(t,`
`)}text(){return super.text(`
`).replace(/\n\s*\n/gu,`
`)}}});var Ue,lt,Gr=y(()=>{"use strict";S();lt=class extends T{constructor(e,n,s,i=[],o="|"){super(void 0,s,i,{});c(this,Ue);this.insertAt(e),h(this,Ue,o)}toString(e){return super.toString(e,g(this,Ue))}text(){return super.text("|")}};Ue=new WeakMap});var dt,Dr=y(()=>{"use strict";S();dt=class extends T{get type(){return"image-parameter"}}});var gt,_r=y(()=>{"use strict";Gr();Dr();gt=class extends lt{constructor(t,e,n,s=[],i="|",o){super(t,void 0,n,s,i),e!==void 0&&this.append(new dt(e,n,s))}}});var pt,zr=y(()=>{"use strict";S();_r();pt=class extends gt{constructor(e,n,s,i,o=[]){let a;if(s!==void 0){let{length:p}=o;a=new T(s,i,o);for(let m=0;m<2;m++)a.parseOnce();o.splice(p,1)}let l=`${e}-image`;super(n,a==null?void 0:a.firstChild.toString(),i,o,void 0,l);F(this,"privateType","imagemap-image");this.privateType=l}get type(){return this.privateType}}});var Vr={};se(Vr,{GalleryToken:()=>jt});var ut,Ur,jt,Jr=y(()=>{"use strict";Mr();zr();jt=class extends at{constructor(e,n,s=[]){var i;super(void 0,n,s,{});c(this,ut);for(let o of(i=e==null?void 0:e.split(`
`))!=null?i:[]){let a=/^([^|]+)(?:\|(.*))?/u.exec(o);if(!a){super.insertAt(o);continue}let[,l,p]=a;C(this,ut,Ur).call(this,l)?super.insertAt(new pt("gallery",l,p,n,s)):super.insertAt(o)}}};ut=new WeakSet,Ur=function(e){return this.normalizeTitle(e,6,{halfParsed:!0,temporary:!0,decode:!0,page:""}).valid}});var Hr={};se(Hr,{NowikiToken:()=>It});var It,Xr=y(()=>{"use strict";tt();It=class extends Q{get type(){return"ext-inner"}safeReplaceChildren(t){t.length===0?this.setText(""):super.safeReplaceChildren(t)}}});var ft,Qr=y(()=>{"use strict";Wt();S();wt();kr();ft=class extends Te{get type(){return"ext"}constructor(t,e,n,s,i=ke.getConfig(),o=!1,a=[]){let l=t.toLowerCase(),p=new nt(!e||/^\s/u.test(e)?e:` ${e}`,"ext-attrs",l,i,a),m=V(W({},i),{ext:i.ext.filter(u=>u!==l),excludes:[...i.excludes]}),d;switch(l){case"indicator":case"poem":case"ref":l==="poem"&&m.excludes.push("heading"),d=new T(n,m,a);break;case"references":{let{NestedToken:u}=(Wr(),J(Ir));m.excludes.push("heading"),d=new u(n,o,["ref"],m,a);break}case"gallery":{let{GalleryToken:u}=(Jr(),J(Vr));d=new u(n,m,a);break}default:{let{NowikiToken:u}=(Xr(),J(Hr));d=new u(n,m,a)}}d.setAttribute("name",l),d.type==="plain"&&(d.type="ext-inner"),super(t,p,d,s,i,a)}}});var Kr,Mt,En,de,Yr=y(()=>{"use strict";Oe();tt();Kr=[X(!1)];de=class extends(En=Q){constructor(e,n,s,i){super(e,s,i);F(this,"closed");this.closed=n}get type(){return"comment"}toString(e){return e?"":`<!--${this.innerText}${this.closed?"-->":""}`}};Mt=L(En),de=R(Mt,0,"CommentToken",Kr,de),q(Mt,1,de)});var tn={};se(tn,{parseCommentAndExt:()=>qt});var en,Pn,Gt,Fn,Zr,qt,Rt=y(()=>{"use strict";Ye();hr();br();xr();Qr();Yr();en="<onlyinclude>",Pn="</onlyinclude>",{length:Gt}=en,Fn=[!1,!0].map(r=>{let t=r?"includeonly":"(?:no|only)include",e=r?"noinclude":"includeonly";return Ke(n=>new RegExp(String.raw`<!--[\s\S]*?(?:-->|$)|<${t}(?:\s[^>]*)?/?>|</${t}\s*>|<(${n})(\s[^>]*?)?(?:/>|>([\s\S]*?)</(${"\\1"}\s*)>)|<(${e})(\s[^>]*?)?(?:/>|>([\s\S]*?)(?:</(${e}\s*)>|$))`,"giu"))}),Zr=r=>{let t=r.indexOf(en);return{i:t,j:r.indexOf(Pn,t+Gt)}},qt=(r,t,e,n)=>{if(n){let{i:l,j:p}=Zr(r);if(l!==-1&&p!==-1){let m="",d=u=>{new K(u,t,e),m+=`\0${e.length-1}n`};for(;l!==-1&&p!==-1;){let u=`\0${e.length}g`;new et(r.slice(l+Gt,p),t,e),l>0&&d(r.slice(0,l)),m+=u,r=r.slice(p+Gt+1),{i:l,j:p}=Zr(r)}return r&&d(r),m}}let{ext:s}=t,i=s,o=t;s.includes("translate")&&(i=s.filter(l=>l!=="translate"&&l!=="tvar"),o=V(W({},t),{ext:i}));let a=Fn[n?1:0](i.join("|"));return a.lastIndex=0,a.test(r)?r.replace(a,(l,p,m,d,u,b,v,P,$)=>{let B=e.length,k="n";if(p)k="e",new ft(p,m,d,u,o,b,e);else if(l.startsWith("<!--")){k="c";let x=l.endsWith("-->");new de(l.slice(4,x?-3:void 0),x,t,e)}else b?new ae(b,v,P,$,t,e):new K(l,t,e,!0);return`\0${B}${k}`}):r}});var Dt={};se(Dt,{Token:()=>T});var Ve,I,ee,O,Je,ve,rn,nn,_t,T,S=y(()=>{"use strict";M();Ne();Wt();mr();cr();_t=class _t extends oe{constructor(e,n=ke.getConfig(),s=[],i){super();c(this,ve);c(this,Ve,"plain");c(this,I,0);c(this,ee);c(this,O);c(this,Je);typeof e=="string"&&this.insertAt(e),h(this,ee,n),h(this,O,s),s.push(this)}get type(){return g(this,Ve)}set type(e){h(this,Ve,e)}parseOnce(e=g(this,I),n=!1,s){if(e<g(this,I)||this.length!==1||!this.isPlain())return this;if(g(this,I)>=2)return this;switch(e){case 0:this.type==="root"&&g(this,O).pop(),h(this,Je,n),C(this,ve,rn).call(this,n);break;case 1:C(this,ve,nn).call(this)}if(this.type==="root")for(let i of g(this,O))i==null||i.parseOnce(e,n,s);return Kt(this,I)._++,this}buildFromStr(e,n){let s=e.split(/[\0\x7F]/u).map((i,o)=>{if(o%2===0)return i&&new Fe(i);let a=Number(i.slice(0,-1));if(isNaN(i.slice(-1))&&Number.isInteger(a)&&a>=0&&a<g(this,O).length)return g(this,O)[a];throw new Error(`Failed to build! Unrecognized token: ${i}`)}).filter(i=>i!=="");return n===0?s.map(String).join(""):n===1?H(s):s}build(){h(this,I,2);let{length:e,firstChild:n}=this,s=n==null?void 0:n.toString();if(e===1&&n.type==="text"&&s.includes("\0")&&(Se(this,0,1,this.buildFromStr(s)),this.type==="root"))for(let i of g(this,O))i==null||i.build()}afterBuild(){if(this.type==="root")for(let e of g(this,O))e==null||e.afterBuild()}parse(e=2,n,s){for(e=Math.min(e,2);g(this,I)<e;)this.parseOnce(g(this,I),n,s);return e&&(this.build(),this.afterBuild()),this}isPlain(){return this.constructor===_t}getAttribute(e){return e==="config"?g(this,ee):super.getAttribute(e)}setAttribute(e,n){e==="stage"?(g(this,I)===0&&this.type==="root"&&g(this,O).shift(),h(this,I,n)):super.setAttribute(e,n)}insertAt(e,n=this.length){let s=typeof e=="string"?new Fe(e):e,{length:i}=this;n+=n<0?i:0,super.insertAt(s,n);let{type:o}=s;return o==="root"&&(s.type="plain"),s}normalizeTitle(e,n=0,s){return ke.normalizeTitle(e,n,g(this,Je),g(this,ee),s)}};Ve=new WeakMap,I=new WeakMap,ee=new WeakMap,O=new WeakMap,Je=new WeakMap,ve=new WeakSet,rn=function(e){let{parseCommentAndExt:n}=(Rt(),J(tn));this.setText(n(this.firstChild.toString(),g(this,ee),g(this,O),e))},nn=function(){let{parseBraces:e}=(Ot(),J(jr)),n=this.type==="root"?this.firstChild.toString():`\0${this.firstChild.toString()}`,s=e(n,g(this,ee),g(this,O));this.setText(this.type==="root"?s:s.slice(1))};T=_t});var Bn={};se(Bn,{default:()=>ke});module.exports=J(Bn);var sn,ke,Wt=y(()=>{Ne();tr();M();ir();sn={getConfig(r){let t=r!=null?r:this.config,{}=t;return V(W(W({},er),t),{excludes:[]})},normalizeTitle(r,t=0,e,n=sn.getConfig(),s){let i;if(s!=null&&s.halfParsed)i=new we(r,t,n,s);else{let{Token:o}=(S(),J(Dt));i=bt.run(()=>{let a=new o(r,n);a.type="root",a.parseOnce(0,e).parseOnce();let l=new we(a.firstChild.toString(),t,n,s);a.build();for(let p of["main"]){let m=l[p];if(m!=null&&m.includes("\0")){let d=a.buildFromStr(m,1);l.main=d}}return l},this)}return i},parse(r,t,e,n,s){r=rr(r);let i,o,a,l;typeof t=="string"?(i=!!e,o=n,a=s):(i=!!t,o=e,a=n),o!=null||(o=2),a!=null||(a=this.getConfig());let{Token:p}=(S(),J(Dt));return bt.run(()=>{let d=new p(r,a);return d.type="root",d.parse(o,i)})}},ke=sn});Wt();
//# sourceMappingURL=bundle.min.js.map
