"use strict";(()=>{var js=Object.create;var rt=Object.defineProperty;var En=Object.getOwnPropertyDescriptor;var qs=Object.getOwnPropertyNames;var _s=Object.prototype.hasOwnProperty;var In=(l,i)=>(i=Symbol[l])?i:Symbol.for("Symbol."+l),nt=l=>{throw TypeError(l)};var Gs=(l,i,e)=>i in l?rt(l,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[i]=e;var Nn=(l,i)=>rt(l,"name",{value:i,configurable:!0});var y=(l,i)=>()=>(l&&(i=l(l=0)),i);var Os=(l,i)=>()=>(i||l((i={exports:{}}).exports,i),i.exports),U=(l,i)=>{for(var e in i)rt(l,e,{get:i[e],enumerable:!0})},Ms=(l,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let r of qs(i))!_s.call(l,r)&&r!==e&&rt(l,r,{get:()=>i[r],enumerable:!(t=En(i,r))||t.enumerable});return l};var M=l=>Ms(rt({},"__esModule",{value:!0}),l);var ae=l=>{var i;return[,,,js((i=l==null?void 0:l[In("metadata")])!=null?i:null)]},Ln=["class","method","getter","setter","accessor","field","value","get","set"],Nt=l=>l!==void 0&&typeof l!="function"?nt("Function expected"):l,zs=(l,i,e,t,r)=>({kind:Ln[l],name:i,metadata:t,addInitializer:n=>e._?nt("Already initialized"):r.push(Nt(n||null))}),le=(l,i,e,t)=>{for(var r=0,n=l[i>>1],s=n&&n.length;r<s;r++)i&1?n[r].call(e):t=n[r].call(e,t);return t},de=(l,i,e,t,r,n)=>{var s,o,a,g,p,d=i&7,c=!!(i&8),u=!!(i&16),m=d>3?l.length+1:d?c?1:2:0,f=Ln[d+5],T=d>3&&(l[m-1]=[]),N=l[m]||(l[m]=[]),w=d&&(!u&&!c&&(r=r.prototype),d<5&&(d>3||!u)&&En(d<4?r:{get[e](){return h(this,n)},set[e](A){return C(this,n,A)}},e));d?u&&d<4&&Nn(n,(d>2?"set ":d>1?"get ":"")+e):Nn(r,e);for(var S=t.length-1;S>=0;S--)g=zs(d,e,a={},l[3],N),d&&(g.static=c,g.private=u,p=g.access={has:u?A=>Ws(r,A):A=>e in A},d^3&&(p.get=u?A=>(d^1?h:E)(A,r,d^4?n:w.get):A=>A[e]),d>2&&(p.set=u?(A,L)=>C(A,r,L,d^4?n:w.set):(A,L)=>A[e]=L)),o=(0,t[S])(d?d<4?u?n:w[f]:d>4?void 0:{get:w.get,set:w.set}:r,g),a._=1,d^4||o===void 0?Nt(o)&&(d>4?T.unshift(o):d?u?n=o:w[f]=o:r=o):typeof o!="object"||o===null?nt("Object expected"):(Nt(s=o.get)&&(w.get=s),Nt(s=o.set)&&(w.set=s),Nt(s=o.init)&&T.unshift(s));return d||(r[In("metadata")]=l[3]),w&&rt(r,e,w),u?d^4?n:w:r},x=(l,i,e)=>Gs(l,typeof i!="symbol"?i+"":i,e),Er=(l,i,e)=>i.has(l)||nt("Cannot "+e),Ws=(l,i)=>Object(i)!==i?nt('Cannot use the "in" operator on this value'):l.has(i),h=(l,i,e)=>(Er(l,i,"read from private field"),e?e.call(l):i.get(l)),v=(l,i,e)=>i.has(l)?nt("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(l):i.set(l,e),C=(l,i,e,t)=>(Er(l,i,"write to private field"),t?t.call(l,e):i.set(l,e),e),E=(l,i,e)=>(Er(l,i,"access private method"),e);var Vt=(l,i,e,t)=>({set _(r){C(l,i,r,e)},get _(){return h(l,i,t)}});var Fn,Rn=y(()=>{"use strict";Fn=["bold-header","format-leakage","fostered-content","h1","illegal-attr","insecure-style","invalid-gallery","invalid-imagemap","invalid-invoke","invalid-isbn","lonely-apos","lonely-bracket","lonely-http","nested-link","no-arg","no-duplicate","no-ignored","obsolete-attr","obsolete-tag","parsing-order","pipe-like","table-layout","tag-like","unbalanced-header","unclosed-comment","unclosed-quote","unclosed-table","unescaped","unknown-page","unmatched-tag","unterminated-url","url-encoding","var-anchor","void-ext"]});var Fe,Me,Ir,Pn,Xt,Se=y(()=>{"use strict";Fe={running:!1,run(l){let{running:i}=this;this.running=!0;try{let e=l();return this.running=i,e}catch(e){throw this.running=i,e}}},Me=l=>i=>i.type===l,Ir=(l,i,e,t=[])=>{let r=[...l.childNodes],n=r.splice(i,e,...t);l.setAttribute("childNodes",r);for(let s of t)s.setAttribute("parentNode",l);return n},Pn=(l,i)=>new Array(l).fill(void 0).map((e,t)=>i(t)),Xt=(l,i)=>{Object.defineProperty(l,"name",{value:i.name})}});var Bn=Os((Mo,Us)=>{Us.exports={ext:[],html:[["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","tr","td","th","q","bdo"],["li","dt","dd"],["br","wbr","hr","meta","link"]],namespaces:{},nsid:{file:6,category:14},parserFunction:[{"#language":"language","#special":"special","#speciale":"speciale","#tag":"tag","#formatdate":"formatdate","#dateformat":"formatdate","#invoke":"invoke","#while":"while","#dowhile":"dowhile","#loop":"loop","#forargs":"forargs","#fornumargs":"fornumargs","#if":"if","#ifeq":"ifeq","#switch":"switch","#ifexist":"ifexist","#ifexpr":"ifexpr","#iferror":"iferror","#time":"time","#timel":"timel","#expr":"expr","#rel2abs":"rel2abs","#titleparts":"titleparts","#categorytree":"categorytree","#urldecode":"urldecode","#choose":"choose","#var":"var","#varexists":"varexists","#var_final":"var_final","#vardefine":"vardefine","#vardefineecho":"vardefineecho","#widget":"widget","#regex":"regex","#related":"related","#cscore":"cscore"},["!","="],["msg","raw"],["subst","safesubst"]],doubleUnderscore:[[],[]],protocol:"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|matrix:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|worldwind://|xmpp:",interwiki:[],img:{},redirection:["#redirect"],variants:[]}});var jn,ye=y(()=>{"use strict";jn=Bn()});var qn,Ae,ve,it,_n,ge,Qt,pe,Ds,Gn,On,Hs,st,Ce,V=y(()=>{"use strict";qn=String.raw`[^[\]<>"\0-\x1F\x7F\p{Zs}\uFFFD]`,Ae=String.raw`(?:\[[\da-f:.]+\]|${qn})`,ve=String.raw`(?:${qn}|\0\d+[c!~]\x7F)*`,it=(l,i)=>e=>e.replace(l,i),_n=it(/[\0\x7F]|\r$/gmu,""),ge=it(/\0\d+c\x7F/gu,""),Qt=it(/[\\{}()|.?*+^$[\]]/gu,String.raw`\$&`),pe=(l,i="")=>l.map(e=>typeof e=="string"?e:e.text()).join(i),Ds={lt:"<",gt:">",lbrack:"[",rbrack:"]",lbrace:"{",rbrace:"}"},Gn=it(/&(?:#(\d+|x[\da-fA-F]+)|([lLgG][tT]|[lr]brac[ke]));/gu,(l,i,e)=>i?String.fromCodePoint(+((/^x/iu.test(i)?"0":"")+i)):Ds[e.toLowerCase()]),On=it(/\n/gu,String.raw`\n`),Hs={"&":"amp","<":"lt",">":"gt"},st=it(/[&<>]/gu,l=>`&${Hs[l]};`),Ce=(l,i={})=>{let{pre:e="",post:t="",sep:r=""}=i;return e+l.map(n=>n.print()).join(r)+t}});var zn={};U(zn,{Title:()=>Lr});var Mn,Et,It,Lr,Wn=y(()=>{"use strict";V();Mn=l=>decodeURIComponent(l.replace(/%(?![\da-f]{2})/giu,"%25")),Lr=class{constructor(i,e,t,r,n){v(this,Et);v(this,It);x(this,"ns");x(this,"fragment");x(this,"interwiki","");x(this,"valid");x(this,"encoded",!1);let s=i.trim().startsWith("../");if(i=Gn(i),r&&i.includes("%"))try{let a=/%(?!21|3[ce]|5[bd]|7[b-d])[\da-f]{2}/iu.test(i);i=Mn(i),this.encoded=a}catch(a){}if(i=i.replace(/_/gu," ").trim(),s)this.ns=0;else{let a=e;i.startsWith(":")&&(a=0,i=i.slice(1).trim());let g=i.split(":");if(g.length>1){let p=t.nsid[g[0].trim().toLowerCase()];p&&(a=p,i=g.slice(1).join(":").trim())}this.ns=a}let o=i.indexOf("#");if(o!==-1){let a=i.slice(o+1).trimEnd();if(a.includes("%"))try{a=Mn(a)}catch(g){}this.fragment=a,i=i.slice(0,o).trim()}this.valid=!!(i||this.interwiki||n&&this.ns===0&&this.fragment!==void 0)&&!/^:|\0\d+[eh!+-]\x7F|[<>[\]{}|\n]|%[\da-f]{2}|(?:^|\/)\.{1,2}(?:$|\/)/iu.test(s?/^(?:\.\.\/)+(.*)/u.exec(i)[1]:i),this.main=i,Object.defineProperties(this,{encoded:{enumerable:!1,writable:!1}}),C(this,It,t.namespaces)}get main(){return h(this,Et)}set main(i){i=i.replace(/_/gu," ").trim(),C(this,Et,i&&i[0].toUpperCase()+i.slice(1))}get prefix(){let i=h(this,It)[this.ns];return i+(i&&":")}get title(){return(this.interwiki+(this.interwiki&&":")+this.prefix+this.main).replace(/ /gu,"_")}get extension(){let{main:i}=this,e=i.lastIndexOf(".");return e===-1?void 0:i.slice(e+1).toLowerCase()}toString(){return`${this.title}${this.fragment===void 0?"":`#${this.fragment}`}`}};Et=new WeakMap,It=new WeakMap});var ze,F,X=y(()=>{"use strict";F=class{constructor(i,e){v(this,ze);x(this,"token");x(this,"start");this.token=i,this.start=e}get top(){var i;return(i=h(this,ze))!=null||C(this,ze,this.getPosition()),h(this,ze).top}get left(){var i;return(i=h(this,ze))!=null||C(this,ze,this.getPosition()),h(this,ze).left}getPosition(){return this.token.getRootNode().posFromIndex(this.start)}};ze=new WeakMap});var Un,$,I,q=y(()=>{"use strict";X();R();Un=l=>(i,e,t,r,n="error")=>{let{start:s}=e,{top:o,left:a}="top"in e?e:new F(i,s),{offsetHeight:g,offsetWidth:p}=i,{startIndex:d,startLine:c,startCol:u}=l(i,s,o,a);return{rule:t,message:b.msg(r),severity:n,startIndex:d,endIndex:d+i.toString().length,startLine:c,endLine:c+g-1,startCol:u,endCol:g===1?u+p:p}},$=Un((l,i,e,t)=>{let r=l.getRelativeIndex(),{top:n,left:s}=l.parentNode.posFromIndex(r);return{startIndex:i+r,startLine:e+n,startCol:n?s:t+s}}),I=Un((l,i,e,t)=>({startIndex:i,startLine:e,startCol:t}))});var Dn,Hn,Lt,Ft,Fr,ot,Rr=y(()=>{"use strict";Dn=l=>{let i=l.split(`
`),e=i.length;return{height:e,width:i[e-1].length}},Hn=(l,i)=>i.childNodes.slice(0,l).reduce((e,t,r)=>e+t.toString().length+i.getGaps(r),0)+i.getAttribute("padding"),ot=class{constructor(){v(this,Ft);x(this,"childNodes",[]);v(this,Lt)}get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes[this.childNodes.length-1]}get parentNode(){return h(this,Lt)}get nextSibling(){var e;let i=(e=this.parentNode)==null?void 0:e.childNodes;return i&&i[i.indexOf(this)+1]}get previousSibling(){var e;let i=(e=this.parentNode)==null?void 0:e.childNodes;return i&&i[i.indexOf(this)-1]}get offsetHeight(){return E(this,Ft,Fr).call(this).height}get offsetWidth(){return E(this,Ft,Fr).call(this).width}getAttribute(i){return i==="padding"?0:this[i]}setAttribute(i,e){i==="parentNode"?C(this,Lt,e):this[i]=e}getRootNode(){let{parentNode:i}=this;for(;i!=null&&i.parentNode;)({parentNode:i}=i);return i!=null?i:this}posFromIndex(i){let e=String(this);if(i>=-e.length&&i<=e.length){let{height:t,width:r}=Dn(e.slice(0,i));return{top:t-1,left:r}}}getGaps(i){return 0}getRelativeIndex(i){if(i===void 0){let{parentNode:e}=this;return e?Hn(e.childNodes.indexOf(this),e):0}return Hn(i,this)}getAbsoluteIndex(){let{parentNode:i}=this;return i?i.getAbsoluteIndex()+this.getRelativeIndex():0}seal(i,e){Object.defineProperty(this,i,{enumerable:!e&&!!this[i],configurable:!0})}};Lt=new WeakMap,Ft=new WeakSet,Fr=function(){return Dn(String(this))}});var ue,Zt,Pr,Br,Kt,Vn=y(()=>{"use strict";V();Se();Rr();Kt=class extends ot{constructor(){super(...arguments);v(this,ue)}get length(){return this.childNodes.length}text(e){return pe(this.childNodes,e)}normalize(){let e=[...this.childNodes],t=r=>{e.splice(r,1)};for(let r=e.length-1;r>=0;r--){let{type:n,data:s}=e[r];n!=="text"||this.getGaps(r-1)||s===""&&t(r)}this.setAttribute("childNodes",e)}removeAt(e){return Ir(this,e,1)[0]}insertAt(e,t=this.length){return Ir(this,t,0,[e]),e}closest(e){let t=E(this,ue,Zt).call(this,e),{parentNode:r}=this;for(;r;){if(t(r))return r;({parentNode:r}=r)}}querySelector(e){let t=E(this,ue,Zt).call(this,e);return E(this,ue,Pr).call(this,t)}querySelectorAll(e){let t=E(this,ue,Zt).call(this,e);return E(this,ue,Br).call(this,t)}append(...e){for(let t of e)this.insertAt(t)}replaceChildren(...e){for(let t=this.length-1;t>=0;t--)this.removeAt(t);this.append(...e)}setText(e,t=0){t+=t<0?this.length:0;let r=this.childNodes[t],{data:n}=r;return r.replaceData(e),n}toString(e=""){return this.childNodes.map(String).join(e)}lint(e=this.getAbsoluteIndex(),t){let r=[];for(let n=0,s=e+this.getAttribute("padding");n<this.length;n++){let o=this.childNodes[n];r.push(...o.lint(s,t)),s+=o.toString().length+this.getGaps(n)}return r}print(e={}){var t;return this.toString()?`<span class="wpb-${(t=e.class)!=null?t:this.type}">${Ce(this.childNodes,e)}</span>`:""}json(e,t=this.getAbsoluteIndex()){let r={...this,range:[t,t+this.toString().length],childNodes:[]};for(let n=0,s=t+this.getAttribute("padding");n<this.length;n++){let o=this.childNodes[n],{length:a}=o.toString();o.type==="text"?r.childNodes.push({data:o.data,range:[s,s+a]}):r.childNodes.push(o.json(void 0,s)),s+=a+this.getGaps(n)}return r}};ue=new WeakSet,Zt=function(e){let t=new Set(e.split(",").map(r=>r.trim()));return({type:r})=>t.has(r)},Pr=function(e){var t;for(let r of this.childNodes){if(r.type==="text")continue;if(e(r))return r;let n=E(t=r,ue,Pr).call(t,e);if(n)return n}},Br=function(e){var r;let t=[];for(let n of this.childNodes)n.type!=="text"&&(e(n)&&t.push(n),t.push(...E(r=n,ue,Br).call(r,e)));return t}});var Xn,Vs,Xs,Qs,Zs,Ks,Js,Jt,Qn,Rt,Zn=y(()=>{"use strict";V();R();Rr();Xn=String.raw`<\s*(?:/\s*)?([a-z]\w*)|\{+|\}+|\[{2,}|\[(?![^[]*?\])|((?:^|\])[^[]*?)\]+`,Vs=new RegExp(String.raw`${Xn}|https?[:/]/+`,"giu"),Xs=new RegExp(Xn,"giu"),Qs=new RegExp(String.raw`^https?://${Ae}${ve}\.(?:gif|png|jpg|jpeg)$`,"iu"),Zs={"[":/[[\]]/u,"{":/[{}]/u,"]":/[[\]](?=[^[\]]*$)/u,"}":/[{}](?=[^{}]*$)/u},Ks={"<":"tag-like","[":"lonely-bracket","{":"lonely-bracket","]":"lonely-bracket","}":"lonely-bracket",h:"lonely-http"},Js=["html","head","style","title","body","a","audio","img","video","embed","iframe","object","canvas","script","col","colgroup","tbody","tfoot","thead","button","input","label","option","select","textarea"],Rt=class extends ot{constructor(e){super();v(this,Jt);x(this,"type","text");x(this,"data","");Object.defineProperties(this,{childNodes:{enumerable:!1,configurable:!1},type:{enumerable:!1,writable:!1},data:{value:e}})}toString(){return this.data}text(){return this.data}lint(e=this.getAbsoluteIndex(),t){var j,ee,H;let{data:r,parentNode:n,nextSibling:s,previousSibling:o}=this;if(!n)throw new Error("\u65E0\u6CD5\u5BF9\u5B64\u7ACB\u6587\u672C\u8282\u70B9\u8FDB\u884C\u8BED\u6CD5\u5206\u6790\uFF01");let{type:a,name:g,parentNode:p}=n,d=!1;if(a==="attr-value"){let{type:ne,name:Z,tag:K}=p;if(ne!=="ext-attr")d=!0;else if(K==="choose"&&(Z==="before"||Z==="after"))return[]}if(t!=null||(t=a==="free-ext-link"||a==="ext-link-url"||a==="image-parameter"&&g==="link"||d?Xs:Vs),r.search(t)===-1)return[];t.lastIndex=0;let c=[],u=s==null?void 0:s.type,m=s==null?void 0:s.name,f=o==null?void 0:o.type,T=this.getRootNode(),{ext:N,html:w}=T.getAttribute("config"),{top:S,left:A}=T.posFromIndex(e),L=new Set(["onlyinclude","noinclude","includeonly",N,w,Js].flat(2));for(let ne=t.exec(r);ne;ne=t.exec(r)){let[,Z,K]=ne,{0:se,index:J}=ne;if(K&&K!=="]"){let{length:oe}=K;J+=oe,se=se.slice(oe)}let{0:B,length:ke}=se;if(B==="<"&&!L.has(Z.toLowerCase())||B==="["&&a==="ext-link-text"&&(/&(?:rbrack|#93|#x5[Dd];);/u.test(r.slice(J+1))||u==="ext"&&m==="nowiki"&&((j=s.innerText)!=null&&j.includes("]"))))continue;if(B==="]"&&(J||ke>1))t.lastIndex--;else if(B==="h"&&J===0&&a==="ext-link-text"&&Qs.test(r))continue;let D=e+J,et=D+ke,Ut=T.toString(),tt=Ut[et],Dt=Ut[D-1],Cr=ke>1&&!(B==="<"&&!/[\s/>]/u.test(tt!=null?tt:"")||d&&(B==="["||B==="]"))||B==="{"&&(tt===B||Dt==="-")||B==="}"&&(Dt===B||tt==="-")||B==="["&&(tt===B||a==="ext-link-text"||u==="free-ext-link"&&!r.slice(J+1).trim())||B==="]"&&(Dt===B||f==="free-ext-link"&&!r.slice(0,J).includes("]"))?"error":"warning",$r=B==="{"||B==="[";if(Cr==="warning"&&($r||(B==="]"||B==="}"))){let oe=Zs[B],Nr=$r?r.slice(J+1):r.slice(0,J);if(B==="{"&&((ee=oe.exec(Nr))==null?void 0:ee[0])==="}"||B==="}"&&((H=oe.exec(Nr))==null?void 0:H[0])==="{")continue;if(!Nr.includes(B)){let $n=$r?"nextSibling":"previousSibling",Oe=this[$n];for(;Oe&&(Oe.type!=="text"||!oe.test(Oe.data));)Oe=Oe[$n];if(Oe&&oe.exec(Oe.data)[0]!==B)continue}}let Ht=r.slice(0,J).split(`
`),wn=Ht.length+S-1,Sn=Ht[Ht.length-1],Cn=Ht.length===1?A+Sn.length:Sn.length,$t={rule:Ks[B],message:b.msg('lonely "$1"',B==="h"?se:B),severity:Cr,startIndex:D,endIndex:et,startLine:wn,endLine:wn,startCol:Cn,endCol:Cn+ke};if(B==="<")$t.suggestions=[{desc:"escape",range:[D,D+1],text:"&lt;"}];else if(B==="h"&&!(a==="ext-link-text"||a==="link-text")&&/[\p{L}\d_]/u.test(Dt||""))$t.suggestions=[{desc:"whitespace",range:[D,D],text:" "}];else if(B==="["&&a==="ext-link-text"){let oe=n.getAbsoluteIndex()+n.toString().length;$t.suggestions=[{desc:"escape",range:[oe,oe+1],text:"&#93;"}]}else if(B==="]"&&f==="free-ext-link"&&Cr==="error"){let oe=e-o.toString().length;$t.fix={range:[oe,oe],text:"["}}c.push($t)}return c}replaceData(e){E(this,Jt,Qn).call(this,e)}print(){return st(this.data)}};Jt=new WeakSet,Qn=function(e){this.setAttribute("data",e)}});var ce,We=y(()=>{"use strict";Se();ce=l=>(i,e)=>{class t extends i{text(){return""}lint(n){return l?[]:super.lint(n)}}return Xt(t,i),t}});var he,at=y(()=>{"use strict";P();he=class extends k{constructor(i,e,t="plain",r,n,s){super(i,r,n,s),this.type=t}lint(){return[]}}});var O,$e=y(()=>{"use strict";P();O=class extends k{constructor(i,e,t,r,n){super(i,t,r,n),this.type=e}}});var Ue,be,Re,we,Bt=y(()=>{"use strict";q();X();ye();R();P();$e();we=class extends k{constructor(e,t,r=b.getConfig(),n=[],s="|"){super(void 0,r,n,{});v(this,Ue,!0);v(this,be);v(this,Re);if(this.insertAt(new O(e,"link-target",r,n,{})),t!==void 0){let o=new k(t,r,n,{});o.type="link-text",o.setAttribute("stage",10),this.insertAt(o)}C(this,be,s)}afterBuild(){C(this,Re,this.getTitle()),h(this,be).includes("\0")&&C(this,be,this.buildFromStr(h(this,be),0)),this.setAttribute("name",h(this,Re).title)}setAttribute(e,t){e==="bracket"?C(this,Ue,t):e==="title"?C(this,Re,t):super.setAttribute(e,t)}toString(){let e=super.toString(h(this,be));return h(this,Ue)?`[[${e}]]`:e}text(){let e=super.text("|");return h(this,Ue)?`[[${e}]]`:e}getAttribute(e){return e==="title"?h(this,Re):e==="padding"?2:super.getAttribute(e)}getGaps(e){return e===0?h(this,be).length:1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{childNodes:[n,s],type:o}=this,{encoded:a,fragment:g}=h(this,Re),p=new F(this,e);if(n.childNodes.some(({type:d})=>d==="template")&&r.push($(n,p,"unknown-page","template in an internal link target","warning")),a&&r.push($(n,p,"url-encoding","unnecessary URL encoding in an internal link")),o==="link"||o==="category"){let d=s==null?void 0:s.childNodes.find(c=>c.type==="text"&&c.data.includes("|"));if(d){let c=$(s,p,"pipe-like",'additional "|" in the link text',"warning");c.suggestions=[{desc:"escape",range:[c.startIndex+d.getRelativeIndex(),c.startIndex+d.getRelativeIndex()+d.data.length],text:d.data.replace(/\|/gu,"&#124;")}],r.push(c)}}if(o!=="link"&&o!=="redirect-target"&&g!==void 0){let d=$(n,p,"no-ignored","useless fragment"),c=n.childNodes.find(u=>u.type==="text"&&u.data.includes("#"));c&&(d.fix={range:[d.startIndex+c.getRelativeIndex()+c.data.indexOf("#"),d.endIndex],text:""}),r.push(d)}return r}getTitle(e){return this.normalizeTitle(this.firstChild.text(),0,e,!0,!0)}print(){return super.print(h(this,Ue)?{pre:"[[",post:"]]",sep:h(this,be)}:{sep:h(this,be)})}};Ue=new WeakMap,be=new WeakMap,Re=new WeakMap});var re,Pe=y(()=>{"use strict";P();re=class extends k{get innerText(){return this.firstChild.data}constructor(i="",e,t){super(i,e,t)}}});var Kn,jr,Ys,W,Be=y(()=>{"use strict";We();Pe();Kn=[ce(!0)];W=class extends(Ys=re){constructor(){super(...arguments);x(this,"type","noinclude")}};jr=ae(Ys),W=de(jr,0,"NoincludeToken",Kn,W),le(jr,1,W)});var Yt,Jn=y(()=>{"use strict";q();R();Bt();Be();Yt=class extends we{constructor(e,t,r=b.getConfig(),n=[]){super(e,void 0,r,n);x(this,"type","redirect-target");t!==void 0&&this.insertAt(new W(t,r,n))}getTitle(){return this.normalizeTitle(this.firstChild.toString(),0,!0,!0)}text(){return`[[${this.firstChild.toString()}]]`}lint(e=this.getAbsoluteIndex()){let t=super.lint(e,/\]\]/u);if(this.length===2){let r=$(this.lastChild,{start:e},"no-ignored","useless link text");r.startIndex--,r.startCol--,r.fix={range:[r.startIndex,r.endIndex],text:""},t.push(r)}return t}}});var Yn,je,lt,qr,eo,De,ei=y(()=>{"use strict";We();R();P();at();Jn();Yn=[ce()];De=class extends(eo=k){constructor(e,t,r,n,s,o=b.getConfig(),a=[]){super(void 0,o,a);x(this,"type","redirect");v(this,je);v(this,lt);C(this,je,e),C(this,lt,s);let g=new RegExp(String.raw`^(?:${o.redirection.join("|")})\s*(?::\s*)?$`,"iu");this.append(new he(t,g,"redirect-syntax",o,a,{}),new Yt(r,n==null?void 0:n.slice(1),o,a))}getAttribute(e){return e==="padding"?h(this,je).length:super.getAttribute(e)}toString(){return h(this,je)+super.toString()+h(this,lt)}lint(e=this.getAbsoluteIndex()){return this.lastChild.lint(e+h(this,je).length+this.firstChild.toString().length)}print(){return super.print({pre:h(this,je),post:h(this,lt)})}};qr=ae(eo),je=new WeakMap,lt=new WeakMap,De=de(qr,0,"RedirectToken",Yn,De),le(qr,1,De)});var ti={};U(ti,{parseRedirect:()=>to});var to,ri=y(()=>{"use strict";R();ei();to=(l,i,e)=>{let t=new RegExp(String.raw`^(\s*)((?:${i.redirection.join("|")})\s*(?::\s*)?)\[\[([^\n|\]]+)(\|.*?)?\]\](\s*)`,"iu"),r=t.exec(l);return r&&b.normalizeTitle(r[3],0,!1,i,!0,!0).valid?(l=`\0${e.length}c\x7F${l.slice(r[0].length)}`,new De(...r.slice(1),i,e),l):!1}});var er,ni=y(()=>{"use strict";P();er=class extends k{constructor(){super(...arguments);x(this,"type","onlyinclude")}toString(){return`<onlyinclude>${super.toString()}</onlyinclude>`}getAttribute(e){return e==="padding"?13:e==="plain"||super.getAttribute(e)}print(){return super.print({pre:'<span class="wpb-ext">&lt;onlyinclude&gt;</span>',post:'<span class="wpb-ext">&lt;/onlyinclude&gt;</span>'})}}});var qe,dt,_r=y(()=>{"use strict";P();dt=class extends k{constructor(e,t,r,n,s,o=[]){super(void 0,s);v(this,qe);x(this,"closed");x(this,"selfClosing");this.setAttribute("name",e.toLowerCase()),C(this,qe,[e,n||e]),this.closed=n!=="",this.selfClosing=n===void 0,this.append(t,r);let a=typeof t=="string"?-1:o.indexOf(t);o.splice(a===-1?1/0:a,0,this)}get innerText(){return this.selfClosing?void 0:this.lastChild.text()}toString(){let{selfClosing:e,firstChild:t,lastChild:r}=this,[n,s]=h(this,qe);return e?`<${n}${t.toString()}/>`:`<${n}${t.toString()}>${r.toString()}${this.closed?`</${s}>`:""}`}text(){let[e,t]=h(this,qe);return this.selfClosing?`<${e}${this.firstChild.text()}/>`:`<${e}${super.text(">")}${this.closed?`</${t}>`:""}`}getAttribute(e){return e==="padding"?h(this,qe)[0].length+1:super.getAttribute(e)}getGaps(){return 1}print(){let[e,t]=h(this,qe);return super.print(this.selfClosing?{pre:`&lt;${e}`,post:"/&gt;"}:{pre:`&lt;${e}`,sep:"&gt;",post:this.closed?`&lt;/${t}&gt;`:""})}};qe=new WeakMap});var ii,Gr,ro,He,si=y(()=>{"use strict";q();We();R();_r();ii=[ce()];He=class extends(ro=dt){constructor(e,t="",r,n,s,o){super(e,t,r!=null?r:"",r===void 0||n!=null?n:"",s,o);x(this,"type","include")}lint(e=this.getAbsoluteIndex()){if(this.closed)return[];let t=I(this,{start:e},"unclosed-comment",b.msg("unclosed $1",`<${this.name}>`));return t.suggestions=[{desc:"close",range:[t.endIndex,t.endIndex],text:`</${this.name}>`}],[t]}};Gr=ae(ro),He=de(Gr,0,"IncludeToken",ii,He),le(Gr,1,He)});var no,Q,oi,ai,rr,Or,li,jt,gi,pi,ui,di,tr,io,so,oo,gt,Y,me,pt,ci=y(()=>{"use strict";q();X();V();ye();R();P();$e();no=new Set(["id","class","style","lang","dir","title","tabindex","aria-describedby","aria-flowto","aria-hidden","aria-label","aria-labelledby","aria-level","aria-owns","role","about","property","resource","datatype","typeof","itemid","itemprop","itemref","itemscope","itemtype"]),Q=new Set(["align"]),oi=new Set(["cite"]),ai=new Set(["cite","datetime"]),rr=new Set(["width"]),Or=new Set(["axis","align","bgcolor","height","width","valign"]),li=new Set([...Or,"abbr","headers","scope","rowspan","colspan"]),jt=new Set(["type"]),gi=new Set(["summary","align","bgcolor","cellpadding","cellspacing","frame","rules","width"]),pi=new Set(["clear"]),ui=new Set(["bgcolor","align","valign"]),di={div:Q,h1:Q,h2:Q,h3:Q,h4:Q,h5:Q,h6:Q,blockquote:oi,q:oi,p:Q,br:pi,pre:rr,ins:ai,del:ai,ul:jt,ol:new Set(["type","start","reversed"]),li:new Set(["type","value"]),table:new Set([...gi,"border"]),caption:Q,tr:ui,td:li,th:li,img:new Set(["alt","src","width","height","srcset"]),font:new Set(["size","color","face"]),hr:rr,rt:new Set(["rbspan"]),data:new Set(["value"]),time:new Set(["datetime"]),meta:new Set(["itemprop","content"]),link:new Set(["itemprop","href","title"]),gallery:new Set(["mode","showfilename","caption","perrow","widths","heights","showthumbnails","type"]),poem:new Set(["compact","align"]),categorytree:new Set(["align","hideroot","onlyroot","depth","mode","hideprefix","namespaces","showcount","notranslations"]),combooption:new Set(["name","for","inline","align"])},tr=new Set,io={nowiki:tr,indicator:new Set(["name"]),langconvert:new Set(["from","to"]),ref:new Set(["group","name","extends","follow","dir"]),references:new Set(["group","responsive"]),charinsert:new Set(["label"]),choose:new Set(["uncached","before","after"]),option:new Set(["weight"]),imagemap:tr,inputbox:tr,templatestyles:new Set(["src","wrapper"]),dynamicpagelist:tr,poll:new Set(["id","show-results-before-voting"]),sm2:jt,flashmp3:jt,score:new Set(["line_width_inches","lang","override_midi","raw","note-language","override_audio","override_ogg","sound","vorbis"]),seo:new Set(["title","title_mode","title_separator","keywords","description","robots","google_bot","image","image_width","image_height","image_alt","type","site_name","locale","section","author","published_time","twitter_site"]),tab:new Set(["nested","name","index","class","block","inline","openname","closename","collapsed","dropdown","style","bgcolor","container","id","title"]),tabs:new Set(["plain","class","container","id","title","style"]),combobox:new Set(["placeholder","value","id","class","text","dropdown","style"])},so=/expression|(?:accelerator|-o-link(?:-source)?|-o-replace)\s*:|(?:url|image(?:-set)?)\s*\(|attr\s*\([^)]+[\s,]url/u,oo={table:gi,td:new Set([...Or,"scope"]),th:Or,br:pi,caption:Q,div:Q,hr:rr,h1:Q,h2:Q,h3:Q,h4:Q,h5:Q,h6:Q,li:jt,p:Q,pre:rr,tr:ui,ul:jt},pt=class extends k{constructor(e,t,r,n="",s,o=[],a=b.getConfig(),g=[]){let p=new O(r,"attr-key",a,g,{}),d;if(r==="title"||t==="img"&&r==="alt")d=new k(s,a,g,{}),d.type="attr-value",d.setAttribute("stage",10);else if(t==="gallery"&&r==="caption"){let c={...a,excludes:[...a.excludes,"quote","extLink","magicLink","list"]};d=new k(s,c,g,{}),d.type="attr-value",d.setAttribute("stage",5)}else if(t==="choose"&&(r==="before"||r==="after")){let c={...a,excludes:[...a.excludes,"heading","html","table","hr","list"]};d=new k(s,c,g,{}),d.type="attr-value",d.setAttribute("stage",1)}else d=new O(s,"attr-value",a,g,{});super(void 0,a,g);v(this,gt);v(this,Y);v(this,me);this.type=e,this.append(p,d),C(this,Y,n),C(this,me,[...o]),C(this,gt,t),this.setAttribute("name",ge(r).trim().toLowerCase())}get tag(){return h(this,gt)}get balanced(){return!h(this,Y)||h(this,me)[0]===h(this,me)[1]}afterBuild(){h(this,Y).includes("\0")&&C(this,Y,this.buildFromStr(h(this,Y),0)),this.parentNode&&C(this,gt,this.parentNode.name),this.setAttribute("name",this.firstChild.text().trim().toLowerCase())}toString(){let[e="",t=""]=h(this,me);return h(this,Y)?super.toString(h(this,Y)+e)+t:this.firstChild.toString()}text(){return h(this,Y)?`${super.text(`${h(this,Y).trim()}"`)}"`:this.firstChild.text()}getGaps(){var e,t;return h(this,Y)?h(this,Y).length+((t=(e=h(this,me)[0])==null?void 0:e.length)!=null?t:0):0}lint(e=this.getAbsoluteIndex(),t){var m,f;let r=super.lint(e,t),{balanced:n,firstChild:s,lastChild:o,type:a,name:g,tag:p}=this,d=this.getValue(),c=new F(this,e);if(!n){let T=$(o,c,"unclosed-quote",b.msg("unclosed $1","quotes"),"warning");T.startIndex--,T.startCol--;let N={range:[T.endIndex,T.endIndex],text:h(this,me)[0]};o.childNodes.some(({type:w,data:S})=>w==="text"&&/\s/u.test(S))?T.suggestions=[{desc:"close",...N}]:T.fix=N,r.push(T)}let u=io[p];if(u&&!u.has(g)||(a==="ext-attr"?p in di:!/\{\{[^{]+\}\}/u.test(g))&&!((m=di[p])!=null&&m.has(g))&&!/^(?:xmlns:[\w:.-]+|data-[^:]*)$/u.test(g)&&(p==="meta"||p==="link"||!no.has(g)))r.push($(s,c,"illegal-attr","illegal attribute name"));else if((f=oo[p])!=null&&f.has(g))r.push($(s,c,"obsolete-attr","obsolete attribute","warning"));else if(g==="style"&&typeof d=="string"&&so.test(d))r.push($(o,c,"insecure-style","insecure style"));else if(g==="tabindex"&&typeof d=="string"&&d.trim()!=="0"){let T=$(o,c,"illegal-attr","nonzero tabindex");T.suggestions=[{desc:"remove",range:[e,T.endIndex],text:""},{desc:"0 tabindex",range:[T.startIndex,T.endIndex],text:"0"}],r.push(T)}return r}getValue(){if(h(this,Y)){let e=this.lastChild.text();return h(this,me)[1]?e:e[h(this,me)[0]?"trimEnd":"trim"]()}return this.type==="ext-attr"||""}print(){let[e="",t=""]=h(this,me);return h(this,Y)?super.print({sep:st(h(this,Y))+e,post:t}):super.print()}};gt=new WeakMap,Y=new WeakMap,me=new WeakMap});var nr,hi,ao,_e,ir=y(()=>{"use strict";q();X();V();R();P();$e();ci();nr=/([^\s/](?:(?!\0\d+~\x7F)[^\s/=])*)(?:((?:\s|\0\d+c\x7F)*(?:=|\0\d+~\x7F)(?:\s|\0\d+c\x7F)*)(?:(["'])(.*?)(\3|$)|(\S*)))?/gsu,hi=l=>l.slice(0,-1),ao=l=>`${hi(l)}-dirty`,_e=class extends k{constructor(i,e,t,r=b.getConfig(),n=[]){if(super(void 0,r,n,{}),this.type=e,this.setAttribute("name",t),i){nr.lastIndex=0;let s="",o=nr.exec(i),a=0,g=()=>{s&&(super.insertAt(new O(s,ao(e),r,n,{})),s="")};for(;o;){let{index:p,0:d,1:c,2:u,3:m,4:f,5:T,6:N}=o;if(s+=i.slice(a,p),/^(?:[\w:]|\0\d+[t!~{}+-]\x7F)(?:[\w:.-]|\0\d+[t!~{}+-]\x7F)*$/u.test(ge(c).trim())){let w=f!=null?f:N,S=[m,T],A=new pt(hi(e),t,c,u,w,S,r,n);g(),super.insertAt(A)}else s+=d;({lastIndex:a}=nr),o=nr.exec(i)}s+=i.slice(a),g()}}afterBuild(){if(this.type==="table-attrs"){let{parentNode:i}=this;this.setAttribute("name",(i==null?void 0:i.type)==="td"&&i.subtype==="caption"?"caption":i==null?void 0:i.type)}}getAttrTokens(i){return this.childNodes.filter(e=>e instanceof pt&&(!i||e.name===i.toLowerCase().trim()))}getAttrToken(i){let e=this.getAttrTokens(i);return e[e.length-1]}getAttr(i){var e;return(e=this.getAttrToken(i))==null?void 0:e.getValue()}lint(i=this.getAbsoluteIndex(),e){let t=super.lint(i,e),{parentNode:r,length:n,childNodes:s}=this,o=new Map,a=new Set,g=new F(this,i);if((r==null?void 0:r.type)==="html"&&r.closing&&this.text().trim()){let p=I(this,g,"no-ignored","attributes of a closing tag");p.fix={range:[i,p.endIndex],text:""},t.push(p)}for(let p=0;p<n;p++){let d=s[p];if(d instanceof O&&d.text().trim()){let c=$(d,g,"no-ignored","containing invalid attribute");c.suggestions=[{desc:"remove",range:[c.startIndex,c.endIndex],text:" "}],t.push(c)}else if(d instanceof pt){let{name:c}=d;o.has(c)?(a.add(c),o.get(c).push(d)):c!=="class"&&o.set(c,[d])}}if(a.size>0)for(let p of a)t.push(...o.get(p).map(d=>$(d,g,"no-duplicate",b.msg("duplicated $1 attribute",p))));return t}print(){return this.toString()?`<span class="wpb-${this.type}">${this.childNodes.map(i=>i.print(i instanceof O?{class:"attr-dirty"}:void 0)).join("")}</span>`:""}}});var mi={};U(mi,{PreToken:()=>Mr});var Mr,fi=y(()=>{"use strict";ye();R();P();Be();Mr=class extends k{constructor(e,t=b.getConfig(),r=[]){if(e){let n="<nowiki>",s="</nowiki>",{length:o}=n,a=e.indexOf(n),g=e.indexOf(s,a+o),p="";for(;a!==-1&&g!==-1;)new W(n,t,r),new W(s,t,r),p+=`${e.slice(0,a)}\0${r.length-1}c\x7F${e.slice(a+o,g)}\0${r.length}c\x7F`,e=e.slice(g+o+1),a=e.indexOf(n),g=e.indexOf(s,a+o);e=p+e}super(e,t,r,{});x(this,"type","ext-inner");this.setAttribute("stage",10)}getAttribute(e){return e==="plain"||super.getAttribute(e)}lint(e=this.getAbsoluteIndex()){return super.lint(e,/<\s*\/\s*(pre)\b/giu)}}});var xi={};U(xi,{ParamTagToken:()=>qt});var qt,zr=y(()=>{"use strict";q();X();R();P();$e();qt=class extends k{constructor(e,t=b.getConfig(),r=[],n={}){super(void 0,t,r,{});x(this,"type","ext-inner");if(e){let s=O;this.append(...e.split(`
`).map(o=>new s(o,"param-line",t,r,{})))}}toString(){return super.toString(`
`)}text(){return super.text(`
`)}getGaps(){return 1}lint(e=this.getAbsoluteIndex()){let t=new F(this,e);return this.childNodes.filter(r=>{let{childNodes:n}=r,s=n.findIndex(({type:a})=>a!=="text"),o=(s>=0?n.slice(0,s).map(String).join(""):r.toString()).trim();return o&&!(s>=0?/^[a-z]+(?:\[\])?\s*(?:=|$)/iu:/^[a-z]+(?:\[\])?\s*=/iu).test(o)}).map(r=>{let n=$(r,t,"no-ignored",b.msg("invalid parameter of <$1>",this.name));return n.suggestions=[{desc:"remove",range:[n.startIndex,n.endIndex],text:""}],n})}print(){return super.print({sep:`
`})}}});var _t,ut,sr,ct,Wr=y(()=>{"use strict";q();X();R();P();at();ct=class extends k{constructor(e,t,r=b.getConfig(),n=[]){super(void 0,r,n);v(this,ut);x(this,"type","heading");v(this,_t);C(this,_t,e);let s=new k(t[0],r,n);s.type="heading-title",s.setAttribute("stage",2);let o=new he(t[1],/^[^\S\n]*$/u,"heading-trail",r,n,{});this.append(s,o)}get level(){return h(this,_t)}toString(){let e=h(this,ut,sr);return e+this.firstChild.toString()+e+this.lastChild.toString()}text(){let e=h(this,ut,sr);return e+this.firstChild.text()+e}getAttribute(e){return e==="padding"?this.level:super.getAttribute(e)}getGaps(){return this.level}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{firstChild:n,level:s}=this,o=n.toString(),a=n.childNodes.filter(c=>c.type==="quote"),g=a.filter(({bold:c})=>c),p=a.filter(({italic:c})=>c),d=new F(this,e);return this.level===1&&r.push($(n,d,"h1","<h1>")),(o.startsWith("=")||o.endsWith("="))&&r.push($(n,d,"unbalanced-header",b.msg("unbalanced $1 in a section header",'"="'))),this.closest("html-attrs, table-attrs")&&r.push(I(this,d,"parsing-order","section header in a HTML tag")),g.length%2&&r.push($(g[g.length-1],{...d,start:e+s,left:d.left+s},"format-leakage",b.msg("unbalanced $1 in a section header","bold apostrophes"))),p.length%2&&r.push($(p[p.length-1],{start:e+s},"format-leakage",b.msg("unbalanced $1 in a section header","italic apostrophes"))),r}print(){let e=h(this,ut,sr);return super.print({pre:e,sep:e})}json(){let e=super.json();return e.level=this.level,e}};_t=new WeakMap,ut=new WeakSet,sr=function(){return"=".repeat(this.level)}});var lo,go,or,Ti=y(()=>{"use strict";V();q();R();P();lo=l=>l.text().replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),go=new RegExp(`https?://${Ae}${ve}$`,"iu"),or=class extends k{constructor(e,t,r=b.getConfig(),n=[]){super(void 0,r,n);x(this,"type","parameter");let s=new k(typeof e=="number"?void 0:e,r,n,{}),o=new k(t,r,n);s.type="parameter-key",o.type="parameter-value",o.setAttribute("stage",2),this.append(s,o)}get anon(){return this.firstChild.length===0}afterBuild(){if(!this.anon){let{parentNode:e,firstChild:t}=this,r=lo(t);this.setAttribute("name",r),e&&e.getArgs(r,!1,!1).add(this)}}toString(){return this.anon?this.lastChild.toString():super.toString("=")}text(){return this.anon?this.lastChild.text():super.text("=")}getGaps(){return this.anon?0:1}lint(e=this.getAbsoluteIndex(),t){var o;let r=super.lint(e,t),{firstChild:n}=this,s=(o=go.exec(n.text()))==null?void 0:o[0];if(s&&new URL(s).search){let a=$(n,{start:e},"unescaped","unescaped query string in an anonymous parameter");a.startIndex=a.endIndex,a.startLine=a.endLine,a.startCol=a.endCol,a.endIndex++,a.endCol++,a.fix={range:[a.startIndex,a.endIndex],text:"{{=}}"},r.push(a)}return r}print(){return super.print({sep:this.anon?"":"="})}json(){let e=super.json();return e.anon=this.anon,e}}});var po,Ve,Xe,ht,bi,ki,Gt,yi=y(()=>{"use strict";V();q();X();Se();ye();R();P();Ti();$e();at();po=new Set(["pageid","articlepath","server","servername","scriptpath","stylepath"]),Gt=class extends k{constructor(e,t,r=b.getConfig(),n=[]){var c,u;super(void 0,r,n,{});v(this,ht);x(this,"type","template");x(this,"modifier","");v(this,Ve,!1);v(this,Xe,new Map);let{parserFunction:[s,o]}=r,a=(c=/^(?:\s|\0\d+c\x7F)*\0\d+s\x7F/u.exec(e))==null?void 0:c[0];if(a)this.setAttribute("modifier",a),e=e.slice(a.length);else if(e.includes(":")){let[m,...f]=e.split(":"),[T]=/^(?:\s|\0\d+c\x7F)*/u.exec((u=f[0])!=null?u:"");this.setModifier(`${m}:${T}`)&&(e=f.join(":").slice(T.length))}let g=e.includes(":");if(g||t.length===0&&!h(this,Ve)){let[m,...f]=e.split(":"),T=ge(m),N=T[f.length>0?"trimStart":"trim"](),w=N.toLowerCase(),S=s[w],A=o.includes(N);if(A||po.has(S)||g&&S){this.setAttribute("name",S!=null?S:w),this.type="magic-word";let j=new RegExp(String.raw`^\s*${N}\s*$`,A?"u":"iu"),ee=new he(m,j,"magic-word-name",r,n,{});if(super.insertAt(ee),f.length>0&&t.unshift([f.join(":")]),this.name==="invoke")for(let H=0;H<2;H++){let ne=t.shift();if(!ne)break;let Z=new O(ne.join("="),`invoke-${H?"function":"module"}`,r,n);super.insertAt(Z)}}}if(this.type==="template"){let m=ge(e).trim();if(!this.normalizeTitle(m,10,!0).valid)throw n.pop(),new SyntaxError("\u975E\u6CD5\u7684\u6A21\u677F\u540D\u79F0");let f=new O(e,"template-name",r,n,{});super.insertAt(f)}let p=this.isTemplate(),d=1;for(let m=0;m<t.length;m++){let f=t[m];!p&&!(this.name==="switch"&&m>0)&&(f[0]=f.join("="),f.length=1),f.length===1&&(f.unshift(d),d++),this.insertAt(new or(...f,r,n))}this.seal("modifier")}setModifier(e){let{parserFunction:[,,t,r]}=this.getAttribute("config"),n=ge(e).trim();if(e&&!n.endsWith(":"))return!1;let s=n.slice(0,-1).toLowerCase(),o=t.includes(s),a=r.includes(s);return h(this,Ve)&&o||!h(this,Ve)&&(a||e==="")||(Fe.running||this.length>1)&&(o||a||e==="")?(this.setAttribute("modifier",e),C(this,Ve,o),!!e):!1}isTemplate(){return this.type==="template"||this.name==="invoke"}afterBuild(){this.modifier.includes("\0")&&this.setAttribute("modifier",this.buildFromStr(this.modifier,0))}toString(){return`{{${this.modifier}${this.type==="magic-word"?`${this.firstChild.toString()}${this.length===1?"":":"}${this.childNodes.slice(1).map(String).join("|")}`:super.toString("|")}}}`}text(){let{childNodes:e,length:t,firstChild:r,modifier:n,type:s,name:o}=this;return s==="magic-word"&&o==="vardefine"?"":`{{${n}${s==="magic-word"?r.text()+(t===1?"":":")+pe(e.slice(1),"|"):super.text("|")}}}`}getAttribute(e){switch(e){case"padding":return this.modifier.length+2;default:return super.getAttribute(e)}}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{type:n,childNodes:s,length:o}=this,a=new F(this,e);if(!this.isTemplate())return r;let g=E(this,ht,bi).call(this);if(g.fragment!==void 0){let d=s[n==="template"?0:1],c=$(d,a,"no-ignored","useless fragment"),u=d.childNodes.find(m=>m.type==="text"&&m.data.includes("#"));u&&(c.fix={range:[c.startIndex+u.getRelativeIndex()+u.data.indexOf("#"),c.endIndex],text:""}),r.push(c)}if(g.valid||r.push($(s[1],a,"invalid-invoke","illegal module name")),n==="magic-word"&&o===2)return r.push(I(this,a,"invalid-invoke","missing module function")),r;let p=this.getDuplicatedArgs().filter(([,d])=>!d[0].querySelector("ext"));return p.length>0&&r.push(...p.flatMap(([,d])=>d).map(d=>$(d,a,"no-duplicate","duplicated parameter"))),r}insertAt(e,t=this.length){return super.insertAt(e,t),e.anon?E(this,ht,ki).call(this,e):e.name&&this.getArgs(e.name,!1,!1).add(e),e}getAllArgs(){return this.childNodes.filter(Me("parameter"))}getAnonArgs(){return this.getAllArgs().filter(({anon:e})=>e)}getArgs(e,t,r=!0){let n=String(e).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1"),s;return h(this,Xe).has(n)?s=h(this,Xe).get(n):(s=new Set(this.getAllArgs().filter(({name:o})=>n===o)),h(this,Xe).set(n,s)),s}getDuplicatedArgs(){return[...h(this,Xe)].filter(([,{size:e}])=>e>1).map(([e,t])=>[e,[...t]])}getPossibleValues(){let{type:e,name:t,childNodes:r,constructor:{name:n}}=this;if(e==="template")throw new Error(`${n}.getPossibleValues \u65B9\u6CD5\u4EC5\u4F9B\u7279\u5B9A\u9B54\u672F\u5B57\u4F7F\u7528\uFF01`);let s;switch(t){case"if":case"ifexist":case"ifexpr":case"iferror":s=2;break;case"ifeq":s=3;break;default:throw new Error(`${n}.getPossibleValues \u65B9\u6CD5\u4EC5\u4F9B\u7279\u5B9A\u9B54\u672F\u5B57\u4F7F\u7528\uFF01`)}let o=r.slice(s,s+2).map(({childNodes:[,a]})=>a);for(let a=0;a<o.length;){let{length:g,0:p}=o[a].childNodes.filter(d=>d.text().trim());if(g===0)o.splice(a,1);else if(g>1||p.type!=="magic-word")a++;else try{let d=p.getPossibleValues();o.splice(a,1,...d),a+=d.length}catch(d){a++}}return o}print(){let{childNodes:e,length:t,firstChild:r,modifier:n,type:s}=this;return`<span class="wpb-${s}">{{${st(n)}${s==="magic-word"?r.print()+(t===1?"":":")+Ce(e.slice(1),{sep:"|"}):Ce(e,{sep:"|"})}}}</span>`}};Ve=new WeakMap,Xe=new WeakMap,ht=new WeakSet,bi=function(){let e=this.type==="template",t=this.childNodes[e?0:1];return this.normalizeTitle(t.text(),e?10:828)},ki=function(e){let t=this.getAnonArgs(),r=typeof e!="number";for(let n=r?t.indexOf(e):e-1;n<t.length;n++){let s=t[n],{name:o}=s,a=String(n+1);o!==a&&(s.setAttribute("name",a),this.getArgs(a,!1,!1).add(s))}}});var Ai,Ur,uo,Qe,vi=y(()=>{"use strict";We();P();Ai=[ce(!0)];Qe=class extends(uo=k){constructor(){super(...arguments);x(this,"type","hidden")}};Ur=ae(uo),Qe=de(Ur,0,"HiddenToken",Ai,Qe),le(Ur,1,Qe)});var ar,wi=y(()=>{"use strict";V();q();X();R();P();$e();vi();ar=class extends k{constructor(e,t=b.getConfig(),r=[]){super(void 0,t,r,{});x(this,"type","arg");for(let n=0;n<e.length;n++)if(n===0){let s=new O(e[n],"arg-name",t,r,{});super.insertAt(s)}else if(n>1){let s=new Qe(e[n],t,r);super.insertAt(s)}else{let s=new k(e[n],t,r);s.type="arg-default",s.setAttribute("stage",2),super.insertAt(s)}}get default(){var e,t;return(t=(e=this.childNodes[1])==null?void 0:e.text())!=null?t:!1}toString(){return`{{{${super.toString("|")}}}}`}text(){return`{{{${pe(this.childNodes.slice(0,2),"|")}}}}`}getAttribute(e){return e==="padding"?3:super.getAttribute(e)}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let{childNodes:[r,n,...s]}=this;if(!this.getAttribute("include")){let a=I(this,{start:e},"no-arg","unexpected template argument");return n&&(a.fix={range:[e,a.endIndex],text:n.text()}),[a]}let o=r.lint(e+3,t);if(n&&o.push(...n.lint(e+4+r.toString().length,t)),s.length>0){let a=new F(this,e);o.push(...s.map(g=>{let p=$(g,a,"no-ignored","invisible content inside triple braces");return p.startIndex--,p.startCol--,p.suggestions=[{desc:"remove",range:[p.startIndex,p.endIndex],text:""},{desc:"escape",range:[p.startIndex,p.startIndex+1],text:"{{!}}"}],p}))}return o}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}json(){let e=super.json();return e.default=this.default,e}}});var Si={};U(Si,{parseBraces:()=>Dr});var co,lr,ho,Dr,Hr=y(()=>{"use strict";V();Wr();yi();wi();co={"=":`
`,"{":String.raw`\}{2,}|\|`,"-":String.raw`\}-`,"[":String.raw`\]\]`},lr=new Map([["!","!"],["!!","+"],["(!","{"],["!)","}"],["!-","-"],["=","~"]]),ho=new RegExp(String.raw`\{\{\s*(${[...lr.keys()].map(Qt).join("|")})\s*\}\}(?!\})`,"gu"),Dr=(l,i,e)=>{var p,d,c,u,m,f;let t=String.raw`${(p=i.excludes)!=null&&p.includes("heading")?"":String.raw`^(\0\d+c\x7F)*={1,6}|`}\[\[|\{{2,}|-\{(?!\{)`,{parserFunction:[,,,r]}=i,n=[];l=l.replace(ho,(T,N)=>(new Gt(T.slice(2,-2),[],i,e),`\0${e.length-2}${lr.get(N)}\x7F`));let s=new RegExp(t,"gmu"),o=s.exec(l),a=l.includes("}}"),g;for(;o||g!==void 0&&g<=l.length&&((c=(d=n[n.length-1])==null?void 0:d[0])!=null&&c.startsWith("="));){if(o!=null&&o[1]){let[,{length:K}]=o;o[0]=o[0].slice(K),o.index+=K}let{0:T,index:N}=o!=null?o:{0:`
`,index:l.length},w=(u=n.pop())!=null?u:{},{0:S,index:A,parts:L,findEqual:j,pos:ee}=w,H=T==="="&&j,ne=K=>{L[L.length-1].push(K.slice(ee,N))};if(T==="]]"||T==="}-")g=N+2;else if(T===`
`){g=N+1;let{pos:K,findEqual:se}=(m=n[n.length-1])!=null?m:{};if(K===void 0||se||ge(l.slice(K,A))!==""){let J=/^(={1,6})(.+)\1((?:\s|\0\d+c\x7F)*)$/u.exec(l.slice(A,N));J&&(l=`${l.slice(0,A)}\0${e.length}h\x7F${l.slice(N)}`,g=A+4+String(e.length).length,new ct(J[1].length,J.slice(2),i,e))}}else if(T==="|"||H)g=N+1,ne(l),T==="|"&&L.push([]),w.pos=g,w.findEqual=T==="|",n.push(w);else if(T.startsWith("}}")){let K=T.slice(0,Math.min(S.length,3)),se=S.length-K.length,{length:J}=e;g=N+K.length,ne(l);let B=!1,ke="t";if(K.length===3){let D=L.map(Ut=>Ut.join("=")),et=D.length>1&&ge(D[1]).trim();new ar(D,i,e),et&&et.endsWith(":")&&r.includes(et.slice(0,-1).toLowerCase())&&(ke="s")}else try{new Gt(L[0][0],L.slice(1),i,e);let D=ge(L[0][0]).trim();lr.has(D)?ke=lr.get(D):/^(?:filepath|(?:full|canonical)urle?):.|^server$/iu.test(D)?ke="m":/^#vardefine:./iu.test(D)&&(ke="c")}catch(D){if(D instanceof SyntaxError&&D.message==="\u975E\u6CD5\u7684\u6A21\u677F\u540D\u79F0")B=!0;else throw D}B||(l=`${l.slice(0,A+se)}\0${J}${ke}\x7F${l.slice(g)}`,g=A+se+3+String(J).length,se>1?n.push({0:S.slice(0,se),index:A,pos:A+se,parts:[[]]}):se===1&&l[A-1]==="-"&&n.push({0:"-{",index:A-1,pos:A+1,parts:[[]]}))}else g=N+T.length,T.startsWith("{")&&(o.pos=g,o.parts=[[]]),n.push(..."0"in w?[w]:[],o);a&&(a=l.slice(g).includes("}}"));let Z=n[n.length-1];!a&&((f=Z==null?void 0:Z[0])!=null&&f.startsWith("{"))&&(n.pop(),Z=n[n.length-1]),s=new RegExp(t+(Z?`|${co[Z[0][0]]}${Z.findEqual?"|=":""}`:""),"gmu"),s.lastIndex=g,o=s.exec(l)}return l}});var Ci={};U(Ci,{InputboxToken:()=>Vr});var Vr,$i=y(()=>{"use strict";Hr();R();zr();Vr=class extends qt{constructor(i,e=b.getConfig(),t=[]){let r=Symbol("InputboxToken"),{length:n}=t;t.push(r),i&&(i=Dr(i,e,t)),t.splice(n,1),super(i,e,t,{})}}});var Ni,Xr,mo,Ne,Qr=y(()=>{"use strict";q();We();R();Pe();Ni=[ce()];Ne=class extends(mo=re){constructor(e,t=!0,r,n){super(e,r,n);x(this,"type","comment");x(this,"closed");this.closed=t}getAttribute(e){return e==="padding"?4:super.getAttribute(e)}lint(e=this.getAbsoluteIndex()){if(this.closed)return[];let t=I(this,{start:e},"unclosed-comment",b.msg("unclosed $1","HTML comment"));return t.fix={range:[t.endIndex,t.endIndex],text:"-->"},[t]}toString(){return`<!--${this.innerText}${this.closed?"-->":""}`}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}};Xr=ae(mo),Ne=de(Xr,0,"CommentToken",Ni,Ne),le(Xr,1,Ne)});var dr={};U(dr,{NestedToken:()=>Zr});var Zr,gr=y(()=>{"use strict";q();X();R();P();Kr();Be();Qr();Zr=class extends k{constructor(e,t,r,n=b.getConfig(),s=[]){e=e==null?void 0:e.replace(t,(o,a,g,p,d)=>{let c=`\0${s.length+1}${a?"e":"c"}\x7F`;if(a)new mt(a,g,p,d,n,s);else{let u=o.endsWith("-->");new Ne(o.slice(4,u?-3:void 0),u,n,s)}return c}).replace(/(^|\0\d+[ce]\x7F)([^\0]+)(?=$|\0\d+[ce]\x7F)/gu,(o,a,g)=>(new W(g,n,s),`${a}\0${s.length}c\x7F`));super(e,n,s,{});x(this,"type","ext-inner")}lint(e=this.getAbsoluteIndex(),t){let r=new F(this,e);return[...super.lint(e,t),...this.childNodes.filter(n=>{if(n.type==="ext"||n.type==="comment")return!1;let s=n.toString().trim();return s&&!/^<!--.*-->$/su.test(s)}).map(n=>{let s=$(n,r,"no-ignored",b.msg("invalid content in <$1>",this.name));return s.suggestions=[{desc:"remove",range:[s.startIndex,s.endIndex],text:""},{desc:"comment",range:[s.startIndex,s.startIndex],text:`<!--${n.toString()}-->`}],s})]}}});function Ei(l,i,e,t,r){i=i.trim();let n=i.replace(/\0\d+t\x7F/gu,"").trim();switch(l){case"width":return!n||/^(?:\d+x?|\d*x\d+)(?:\s*px)?$/u.test(n);case"link":{if(!n||new RegExp(String.raw`^(?:(?:${e.protocol}|//)${Ae}|\0\d+m\x7F)${ve}$`,"iu").test(n))return i;n.startsWith("[[")&&n.endsWith("]]")&&(n=n.slice(2,-2));let o=b.normalizeTitle(n,0,!1,e,t,!0,!0);return o.valid&&o}case"lang":return(r==="svg"||r==="svgz")&&!/[^a-z\d-]/u.test(n);case"alt":case"class":case"manualthumb":return!0;case"page":return(r==="djvu"||r==="djv"||r==="pdf")&&Number(n)>0;default:return!!n&&!isNaN(n)}}var fo,ie,ur,Ii,pr,Li=y(()=>{"use strict";V();q();R();P();fo=new Set(["alt","link","lang","page","caption"]);pr=class extends k{constructor(e,t,r=b.getConfig(),n){var i=(...Od)=>(super(...Od),v(this,ur),x(this,"type","image-parameter"),v(this,ie,""),this);var g;let s,o=Object.entries(r.img).map(([p,d])=>[p,d,new RegExp(String.raw`^(\s*(?!\s))${p.replace("$1","(.*)")}${p.endsWith("$1")?`(?=$|
)`:""}(\s*)$`,"u")]),a=o.find(([,p,d])=>(s=d.exec(e),s&&(s.length!==4||Ei(p,s[2],r,!0,t)!==!1)));if(a&&s){s.length===3?(i(void 0,r,n),C(this,ie,e)):(i(s[2],r,n,{}),C(this,ie,s[1]+a[0]+s[3])),this.setAttribute("name",a[1]);return}i(e,{...r,excludes:[...(g=r.excludes)!=null?g:[],"list"]},n),this.setAttribute("name","caption"),this.setAttribute("stage",7)}get link(){return this.name==="link"?Ei("link",super.text(),this.getAttribute("config")):void 0}afterBuild(){var e;((e=this.parentNode)==null?void 0:e.type)==="gallery-image"&&!fo.has(this.name)&&this.setAttribute("name","invalid")}toString(){return h(this,ie)?h(this,ie).replace("$1",super.toString()):super.toString()}text(){return h(this,ie)?h(this,ie).replace("$1",super.text()).trim():super.text().trim()}getAttribute(e){return e==="plain"?this.name==="caption":e==="padding"?Math.max(0,h(this,ie).indexOf("$1")):super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{link:n,name:s}=this;if(s==="invalid"){let o=I(this,{start:e},"invalid-gallery","invalid gallery image parameter");o.fix={range:[e,e+o.endIndex],text:""},r.push(o)}else typeof n=="object"&&n.encoded&&r.push(I(this,{start:e},"url-encoding","unnecessary URL encoding in an internal link"));return r}getValue(){return this.name==="invalid"?this.text():E(this,ur,Ii).call(this)||super.text()}print(){return h(this,ie)?`<span class="wpb-image-parameter">${h(this,ie).replace("$1",`<span class="wpb-image-caption">${Ce(this.childNodes)}</span>`)}</span>`:super.print({class:"image-caption"})}};ie=new WeakMap,ur=new WeakSet,Ii=function(){return h(this,ie)&&!h(this,ie).includes("$1")}});var Jr,Yr,en,xo,ft,cr,xt,tn=y(()=>{"use strict";V();q();X();R();Bt();Li();Jr=new Set(["manualthumb","frameless","framed","thumbnail"]),Yr=new Set(["left","right","center","none"]),en=new Set(["baseline","sub","super","top","text-top","middle","bottom","text-bottom"]),xo=(l,i,e,t)=>{if(t===void 0)return[];let r=new RegExp(`${[l,i,e].map(Qt).join("|")}`,"gu"),n=[],s=r.exec(t),o=0,a=0;for(;s;){let{0:g,index:p}=s;g!==e?o+=g===l?1:-1:o===0&&(n.push(t.slice(a,p)),{lastIndex:a}=r),s=r.exec(t)}return n.push(t.slice(a)),n},xt=class extends we{constructor(e,t,r=b.getConfig(),n=[],s="|"){super(e,void 0,r,n,s);v(this,ft);x(this,"type","file");let{extension:o}=this.getTitle(!0);this.append(...xo("-{","}-","|",t).map(a=>new pr(a,o,r,n)))}get extension(){return this.getTitle().extension}lint(e=this.getAbsoluteIndex(),t){var c;let r=super.lint(e,t),n=this.getAllArgs().filter(({childNodes:u})=>{let m=u.filter(f=>f.text().trim());return m.length!==1||m[0].type!=="arg"}),s=[...new Set(n.map(({name:u})=>u))].filter(u=>u!=="invalid"),o=s.filter(u=>Jr.has(u)),a=s.filter(u=>Yr.has(u)),g=s.filter(u=>en.has(u)),p=new F(this,e);if(this.closest("ext-link-text")&&((c=this.getValue("link"))==null?void 0:c.trim())!==""&&r.push(I(this,p,"nested-link","internal link in an external link")),n.length===s.length&&o.length<2&&a.length<2&&g.length<2)return r;let d=(u,m)=>f=>$(f,p,"no-duplicate",b.msg(`${u} image $1 parameter`,m));for(let u of s){let m=n.filter(({name:f})=>f===u);u==="caption"&&(m=[...m.slice(0,-1).filter(f=>f.text()),...m.slice(-1)]),m.length>1&&r.push(...m.map(d("duplicated",u)))}return o.length>1&&r.push(...n.filter(({name:u})=>Jr.has(u)).map(d("conflicting","frame"))),a.length>1&&r.push(...n.filter(({name:u})=>Yr.has(u)).map(d("conflicting","horizontal-alignment"))),g.length>1&&r.push(...n.filter(({name:u})=>en.has(u)).map(d("conflicting","vertical-alignment"))),r}getAllArgs(){return this.childNodes.slice(1)}getArgs(e){return this.getAllArgs().filter(({name:t})=>e===t)}getFrameArgs(){return E(this,ft,cr).call(this,Jr,"\u6846\u67B6")}getHorizAlignArgs(){return E(this,ft,cr).call(this,Yr,"\u6C34\u5E73\u5BF9\u9F50")}getVertAlignArgs(){return E(this,ft,cr).call(this,en,"\u5782\u76F4\u5BF9\u9F50")}getArg(e){let t=this.getArgs(e);return t[t.length-1]}getValue(e){var t;return(t=this.getArg(e))==null?void 0:t.getValue()}};ft=new WeakSet,cr=function(e,t){return this.getAllArgs().filter(({name:n})=>e.has(n))}});var hr,Fi,Tt,rn=y(()=>{"use strict";q();ye();R();P();tn();Tt=class extends xt{constructor(e,t,r,n=b.getConfig(),s=[]){let o;if(r!==void 0){let{length:a}=s;o=new k(r,n,s);for(let g=1;g<11;g++)o.parseOnce();s.splice(a,1)}super(t,o==null?void 0:o.toString(),n,s);v(this,hr);this.setAttribute("bracket",!1),this.type=`${e}-image`}getTitle(){let e=this.type==="imagemap-image";return this.normalizeTitle(this.firstChild.toString(),e?0:6,!0,!e)}getAttribute(e){return e==="padding"?0:super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),{ns:n,interwiki:s}=this.getAttribute("title");return(s||n!==6)&&r.push(I(this,{start:e},"invalid-gallery","invalid gallery image")),r}afterBuild(){E(this,hr,Fi).call(this,this.getTitle())}};hr=new WeakSet,Fi=function(e){this.setAttribute("title",e)}});var Pi={};U(Pi,{GalleryToken:()=>nn});var mr,Ri,nn,Bi=y(()=>{"use strict";R();P();rn();Be();nn=class extends k{constructor(e,t=b.getConfig(),r=[]){var n;super(void 0,t,r,{});v(this,mr);x(this,"type","ext-inner");for(let s of(n=e==null?void 0:e.split(`
`))!=null?n:[]){let o=/^([^|]+)(?:\|(.*))?/u.exec(s);if(!o){super.insertAt(s.trim()?new W(s,t):s);continue}let[,a,g]=o;E(this,mr,Ri).call(this,a)?super.insertAt(new Tt("gallery",a,g,t,r)):super.insertAt(new W(s,t))}}toString(){return super.toString(`
`)}text(){return super.text(`
`).replace(/\n\s*\n/gu,`
`)}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let{top:r,left:n}=this.getRootNode().posFromIndex(e),s=[];for(let o=0;o<this.length;o++){let a=this.childNodes[o],g=a.toString(),{length:p}=g,d=g.trim(),c=r+o,u=o?0:n;a.type==="noinclude"&&d&&!/^<!--.*-->$/u.test(d)?s.push({rule:"no-ignored",message:b.msg("invalid content in <$1>","gallery"),severity:d.startsWith("|")?"warning":"error",startIndex:e,endIndex:e+p,startLine:c,endLine:c,startCol:u,endCol:u+p,suggestions:[{desc:"remove",range:[e,e+p],text:""},{desc:"comment",range:[e,e+p],text:`<!--${g}-->`}]}):a.type!=="noinclude"&&a.type!=="text"&&s.push(...a.lint(e,t)),e+=p+1}return s}print(){return super.print({sep:`
`})}};mr=new WeakSet,Ri=function(e){return this.normalizeTitle(e,6,!0,!0).valid}});var bt,sn=y(()=>{"use strict";q();Bt();bt=class extends we{constructor(){super(...arguments);x(this,"type","link")}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t);return this.closest("ext-link-text")&&r.push(I(this,{start:e},"nested-link","internal link in an external link")),r}}});var To,bo,Ee,fr=y(()=>{"use strict";q();X();V();R();P();To=String.raw`(?:[\p{Zs}\t]|&nbsp;|&#0*160;|&#[xX]0*[aA]0;)`,bo=new RegExp(`${To}+`,"gu"),Ee=class extends k{get link(){let i={"!":"|","=":"="},e=pe(this.childNodes.map(t=>{let{type:r,name:n}=t;return r==="magic-word"&&String(n)in i?i[n]:t}));return this.type==="magic-link"&&(e=e.replace(bo," "),e.startsWith("ISBN")&&(e=`ISBN ${e.slice(5).replace(/[- ]/gu,"").replace(/x$/u,"X")}`)),e}constructor(i,e="free-ext-link",t=b.getConfig(),r){super(i,t,r,{}),this.type=e}lint(i=this.getAbsoluteIndex(),e){let t=super.lint(i,e),r=new F(this,i);if(this.type==="magic-link"){let{link:a}=this;if(a.startsWith("ISBN")){let g=[...a.slice(5)].map(p=>p==="X"?10:Number(p));(g.length===10&&g.reduce((p,d,c)=>p+d*(10-c),0)%11||g.length===13&&(g[12]===10||g.reduce((p,d,c)=>p+d*(c%2?3:1),0)%10))&&t.push(I(this,r,"invalid-isbn","invalid ISBN"))}return t}let n=`[\uFF0C\uFF1B\u3002\uFF1A\uFF01\uFF1F\uFF08\uFF09]+${this.type==="ext-link-url"?String.raw`|\|+`:""}`,s=new RegExp(n,"u"),o=new RegExp(n,"gu");for(let a of this.childNodes){let{type:g,data:p}=a;if(g!=="text"||!s.test(p))continue;let d=$(a,r,"unterminated-url","","warning");o.lastIndex=0;for(let c=o.exec(p);c;c=o.exec(p)){let{index:u,0:m}=c,f=p.slice(0,u).split(`
`),T=f.length,N=f[T-1].length,w=d.startIndex+u,S=d.startLine+T-1,A=T===1?d.startCol+N:N,L=m.startsWith("|"),j={...d,message:b.msg("$1 in URL",L?'"|"':"full-width punctuation"),startIndex:w,endIndex:w+m.length,startLine:S,endLine:S,startCol:A,endCol:A+m.length};L?m.length===1&&(j.suggestions=[{desc:"whitespace",range:[w,w+1],text:" "}]):j.suggestions=[{desc:"whitespace",range:[w,w],text:" "},{desc:"escape",range:[w,j.endIndex],text:encodeURI(m)}],t.push(j)}}return t}}});var Ie,kt,on=y(()=>{"use strict";ye();q();R();P();fr();kt=class extends k{constructor(e,t="",r="",n=b.getConfig(),s=[]){super(void 0,n,s,{});x(this,"type","ext-link");v(this,Ie);let o=e&&/\0\d+f\x7F/u.test(e)?s[Number(e.slice(1,-2))]:new Ee(e,"ext-link-url",n,s);if(this.insertAt(o),C(this,Ie,t),r){let a=new k(r,n,s,{});a.type="ext-link-text",a.setAttribute("stage",10),this.insertAt(a)}}toString(){return this.length===1?`[${super.toString()}${h(this,Ie)}]`:`[${super.toString(h(this,Ie))}]`}text(){return`[${super.text(" ")}]`}getAttribute(e){return e==="padding"?1:super.getAttribute(e)}getGaps(){return h(this,Ie).length}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t);return this.length===1&&this.closest("heading-title")&&r.push(I(this,{start:e},"var-anchor","variable anchor in a section header")),r}print(){return super.print(this.length===1?{pre:"[",post:`${h(this,Ie)}]`}:{pre:"[",sep:h(this,Ie),post:"]"})}};Ie=new WeakMap});var Ot,ji=y(()=>{"use strict";R();P();Be();sn();on();Ot=class extends k{constructor(e,t,r,n=b.getConfig(),s=[]){super(void 0,n,s);x(this,"type","imagemap-link");this.append(e,t.length===2?new bt(...t,n,s):new kt(...t,n,s),new W(r,n,s))}}});var qi={};U(qi,{ImagemapToken:()=>an});var an,_i=y(()=>{"use strict";q();X();Se();R();P();Be();rn();ji();an=class extends k{constructor(e,t=b.getConfig(),r=[]){super(void 0,t,r,{});x(this,"type","ext-inner");if(!e)return;let n=e.split(`
`),s=new Set(t.protocol.split("|")),o=W,a=!0,g=!1;for(let p of n){let d=p.trim();if(!(g||!d||d.startsWith("#"))){if(a){let[c,...u]=p.split("|"),m=this.normalizeTitle(c,0,!0);if(m.valid&&!m.interwiki&&m.ns===6){let f=new Tt("imagemap",c,u.length>0?u.join("|"):void 0,t,r);super.insertAt(f),a=!1;continue}else g=!0}else if(p.trim().split(/[\t ]/u)[0]==="desc"){super.insertAt(p);continue}else if(p.includes("[")){let c=p.indexOf("["),u=p.slice(c),m=/^\[\[([^|]+)(?:\|([^\]]+))?\]\][\w\s]*$/u.exec(u);if(m){if(this.normalizeTitle(m[1],0,!0,!1,!0).valid){super.insertAt(new Ot(p.slice(0,c),m.slice(1),u.slice(u.indexOf("]]")+2),t,r));continue}}else if(s.has(u.slice(1,u.indexOf(":")+1))||s.has(u.slice(1,u.indexOf("//")+2))){let f=/^\[([^\]\s]+)(?:(\s+(?!\s))([^\]]*))?\][\w\s]*$/u.exec(u);if(f){super.insertAt(new Ot(p.slice(0,c),f.slice(1),u.slice(u.indexOf("]")+1),t,r));continue}}}}super.insertAt(new o(p,t,r))}}get image(){return this.childNodes.find(Me("imagemap-image"))}toString(){return super.toString(`
`)}text(){return super.text(`
`).replace(/\n{2,}/gu,`
`)}getGaps(){return 1}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),n=new F(this,e);return this.image?r.push(...this.childNodes.filter(s=>{let o=s.toString().trim();return s.type==="noinclude"&&o&&!o.startsWith("#")}).map(s=>$(s,n,"invalid-imagemap","invalid link in <imagemap>"))):r.push(I(this,n,"invalid-imagemap","<imagemap> without an image")),r}print(){return super.print({sep:`
`})}}});var Gi={};U(Gi,{NowikiToken:()=>ln});var ln,Oi=y(()=>{"use strict";q();R();Pe();ln=class extends re{constructor(){super(...arguments);x(this,"type","ext-inner")}lint(e=this.getAbsoluteIndex()){let{name:t,firstChild:{data:r}}=this;if((t==="templatestyles"||t==="section")&&r){let n=I(this,{start:e},"void-ext",b.msg("nothing should be in <$1>",t));return n.fix={range:[e-1,n.endIndex+t.length+3],text:"/>"},[n]}return super.lint(e,new RegExp(String.raw`<\s*(?:/\s*)${t==="nowiki"?"":"?"}(${t})\b`,"giu"))}}});var Mi,mt,Kr=y(()=>{"use strict";q();X();R();P();_r();ir();Mi=(l,i)=>{let e=new Set(l);return e.delete(i),[...e]},mt=class extends dt{constructor(e,t,r,n,s=b.getConfig(),o=[]){var c;let a=e.toLowerCase(),g=new _e(!t||t.trimStart()!==t?t:` ${t}`,"ext-attrs",a,s,o),p={...s,ext:Mi(s.ext,a),excludes:[...(c=s.excludes)!=null?c:[]]},d;switch(p.inExt=!0,a){case"tab":p.ext=Mi(p.ext,"tabs");case"indicator":case"poem":case"ref":case"option":case"combooption":case"tabs":case"poll":case"seo":a==="poem"&&p.excludes.push("heading"),d=new k(r,p,o);break;case"pre":{let{PreToken:u}=(fi(),M(mi));d=new u(r,p,o);break}case"dynamicpagelist":{let{ParamTagToken:u}=(zr(),M(xi));d=new u(r,p,o);break}case"inputbox":{p.excludes.push("heading");let{InputboxToken:u}=($i(),M(Ci));d=new u(r,p,o);break}case"references":{let{NestedToken:u}=(gr(),M(dr));d=new u(r,/<!--.*?(?:-->|$)|<(ref)(\s[^>]*)?>(.*?)<\/(ref\s*)>/gisu,["ref"],p,o);break}case"choose":{let{NestedToken:u}=(gr(),M(dr));d=new u(r,/<(option|choicetemplate)(\s[^>]*)?>(.*?)<\/(\1)>/gsu,["option","choicetemplate"],p,o);break}case"combobox":{let{NestedToken:u}=(gr(),M(dr));d=new u(r,/<(combooption)(\s[^>]*)?>(.*?)<\/(combooption\s*)>/gisu,["combooption"],p,o);break}case"gallery":{let{GalleryToken:u}=(Bi(),M(Pi));d=new u(r,p,o);break}case"imagemap":{let{ImagemapToken:u}=(_i(),M(qi));d=new u(r,p,o);break}default:{let{NowikiToken:u}=(Oi(),M(Gi));d=new u(r,p)}}d.setAttribute("name",a),d.type="ext-inner";super(e,g,d,n,s,o);x(this,"type","ext");this.seal("closed",!0)}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),n=new F(this,e);return this.name!=="nowiki"&&this.closest("html-attrs, table-attrs")&&r.push(I(this,n,"parsing-order","extension tag in HTML tag attributes")),this.name==="ref"&&this.closest("heading-title")&&r.push(I(this,n,"var-anchor","variable anchor in a section header")),r}}});var zi={};U(zi,{parseCommentAndExt:()=>ko});var ko,Wi=y(()=>{"use strict";ni();Be();si();Kr();Qr();ko=(l,i,e,t)=>{let r="<onlyinclude>",n="</onlyinclude>",{length:s}=r,o=()=>{let c=l.indexOf(r);return{i:c,j:l.indexOf(n,c+s)}};if(t){let{i:c,j:u}=o();if(c!==-1&&u!==-1){let m="",f=T=>{new W(T,i,e),m+=`\0${e.length-1}c\x7F`};for(;c!==-1&&u!==-1;){let T=`\0${e.length}e\x7F`;new er(l.slice(c+s,u),i,e),c>0&&f(l.slice(0,c)),m+=T,l=l.slice(u+s+1),{i:c,j:u}=o()}return l&&f(l),m}}let a=i.ext.join("|"),g=t?"includeonly":"(?:no|only)include",p=t?"noinclude":"includeonly",d=new RegExp(String.raw`<!--.*?(?:-->|$)|<${g}(?:\s[^>]*)?/?>|</${g}\s*>|<(${a})(\s[^>]*?)?(?:/>|>(.*?)</(\1\s*)>)|<(${p})(\s[^>]*?)?(?:/>|>(.*?)(?:</(${p}\s*)>|$))`,"gisu");return l.replace(d,(c,u,m,f,T,N,w,S,A)=>{let L=`\0${e.length}${u?"e":"c"}\x7F`;if(u)new mt(u,m,f,T,i,e);else if(c.startsWith("<!--")){let j=c.endsWith("-->");new Ne(c.slice(4,j?-3:void 0),j,i,e)}else N?new He(N,w,S,A,i,e):new W(c,i,e);return L})}});var yo,Ao,vo,yt,fe,Ge,xr,Ui=y(()=>{"use strict";q();X();V();P();yo=new Set(["if","ifeq","ifexpr","ifexist","iferror","switch"]),Ao=new Set(["b","big","center","cite","code","del","dfn","em","font","i","ins","kbd","mark","pre","q","s","samp","small","strike","strong","sub","sup","tt","u","var"]),vo=new Set(["strike","big","center","font","tt"]),xr=class extends k{constructor(e,t,r,n,s,o){super(void 0,s,o);x(this,"type","html");v(this,yt);v(this,fe);v(this,Ge);this.insertAt(t),this.setAttribute("name",e.toLowerCase()),C(this,yt,r),C(this,fe,n),C(this,Ge,e)}get selfClosing(){return h(this,fe)}get closing(){return h(this,yt)}toString(){return`<${this.closing?"/":""}${h(this,Ge)}${super.toString()}${h(this,fe)?"/":""}>`}text(){let{closing:e}=this,t=h(this,Ge)+(e?"":super.text());return`<${e?"/":""}${t}${h(this,fe)?"/":""}>`}getAttribute(e){return e==="padding"?h(this,Ge).length+(this.closing?2:1):super.getAttribute(e)}lint(e=this.getAbsoluteIndex(),t){var s;let r=super.lint(e,t),n=new F(this,e);this.name==="h1"&&!this.closing&&r.push(I(this,n,"h1","<h1>")),this.closest("table-attrs")&&r.push(I(this,n,"parsing-order","HTML tag in table attributes"));try{this.findMatchingTag()}catch(o){if(o instanceof SyntaxError){let{message:a}=o,[g]=a.split(":"),p=I(this,n,"unmatched-tag",g);if(g==="unclosed tag"&&!this.closest("heading-title"))if(Ao.has(this.name)){let d=(s=this.parentNode)==null?void 0:s.childNodes,c=d==null?void 0:d.indexOf(this);d!=null&&d.slice(0,c).some(({type:u,name:m})=>u==="html"&&m===this.name)||(p.severity="warning")}else p.severity="warning";else if(g==="unmatched closing tag"){let d=this.closest("magic-word");d&&yo.has(d.name)?p.severity="warning":p.suggestions=[{desc:"remove",range:[e,p.endIndex],text:""}]}else if(g==="tag that is both closing and self-closing"){let{html:[,,d]}=this.getAttribute("config");d.includes(this.name)&&(p.fix={range:[e+1,e+2],text:""})}r.push(p)}}return vo.has(this.name)&&r.push(I(this,n,"obsolete-tag","obsolete HTML tag","warning")),(this.name==="b"||this.name==="strong")&&this.closest("heading-title")&&r.push(I(this,n,"bold-header","bold in section header","warning")),r}findMatchingTag(){let{html:[e,t,r]}=this.getAttribute("config"),{name:n,parentNode:s,closing:o}=this,a=On(this.toString());if(o&&(h(this,fe)||r.includes(n)))throw new SyntaxError(`tag that is both closing and self-closing: ${a}`);if(r.includes(n)||h(this,fe)&&t.includes(n))return this;if(h(this,fe)&&e.includes(n))throw new SyntaxError(`invalid self-closing tag: ${a}`);if(!s)return;let{childNodes:g}=s,p=g.indexOf(this),d=(o?g.slice(0,p).reverse():g.slice(p+1)).filter(u=>u.type==="html"&&u.name===n),c=o?-1:1;for(let u of d)if(h(u,yt)?c--:c++,c===0)return u;throw new SyntaxError(`${o?"unmatched closing":"unclosed"} tag: ${a}`)}print(){return super.print({pre:`&lt;${this.closing?"/":""}${h(this,Ge)}`,post:`${h(this,fe)?"/":""}&gt;`})}json(){let e=super.json();return Object.assign(e,{closing:this.closing,selfClosing:h(this,fe)}),e}};yt=new WeakMap,fe=new WeakMap,Ge=new WeakMap});var Di={};U(Di,{parseHtml:()=>wo});var wo,Hi=y(()=>{"use strict";ir();Ui();wo=(l,i,e)=>{let t=/^(\/?)([a-z][^\s/>]*)((?:\s|\/(?!>))[^>]*?)?(\/?>)([^<]*)$/iu,{html:r}=i,n=new Set([...r[0],...r[1],...r[2]]),s=l.split("<"),o=s.shift();for(let a of s){let g=t.exec(a),p=g==null?void 0:g[2],d=p==null?void 0:p.toLowerCase();if(!g||!n.has(d)){o+=`<${a}`;continue}let[,c,,u="",m,f]=g,{length:T}=e,N=new _e(u,"html-attrs",d,i,e),w=N.getAttr("itemprop");if(d==="meta"&&(w===void 0||N.getAttr("content")===void 0)||d==="link"&&(w===void 0||N.getAttr("href")===void 0)){o+=`<${a}`,e.length=T;continue}o+=`\0${e.length}x\x7F${f}`,new xr(p,N,c==="/",m==="/>",i,e)}return o}});var Vi,Qi=y(()=>{"use strict";Se();Vi=(l=0)=>(i,e)=>{var r,Xi;class t extends i{constructor(){super(...arguments);v(this,r)}getAttr(a){return h(this,r,Xi).getAttr(a)}}return r=new WeakSet,Xi=function(){return this.childNodes[l]},Xt(t,i),t}});var At,dn=y(()=>{"use strict";Qi();R();P();at();ir();At=class extends Vi(1)(k){constructor(i,e,t,r=b.getConfig(),n=[],s={}){super(void 0,r,n,s),this.append(new he(e,i,"table-syntax",r,n,{}),new _e(t,"table-attrs",this.type,r,n))}}});var xe,Mt,gn,Ze,pn=y(()=>{"use strict";q();X();ye();R();P();dn();Ze=class extends At{constructor(e,t,r=b.getConfig(),n=[]){var g;let s=/\||\0\d+!\x7F/u.exec(t!=null?t:""),o=s?t.slice(0,s.index):"";/\[\[|-\{/u.test(o)&&(s=null,o="");super(/^(?:\n[^\S\n]*(?:[|!]|\|\+|\{\{\s*!\s*\}\}\+?)|(?:\||\{\{\s*!\s*\}\}){2}|!!|\{\{\s*!!\s*\}\})$/u,e,o,r,n);v(this,Mt);x(this,"type","td");v(this,xe,"");s&&([Vt(this,xe)._]=s);let a=new k(t==null?void 0:t.slice(((g=s==null?void 0:s.index)!=null?g:NaN)+h(this,xe).length),r,n);a.type="td-inner",a.setAttribute("stage",4),this.insertAt(a)}get rowspan(){return this.getAttr("rowspan")}get colspan(){return this.getAttr("colspan")}get subtype(){return E(this,Mt,gn).call(this).subtype}afterBuild(){h(this,xe).includes("\0")&&C(this,xe,this.buildFromStr(h(this,xe),0))}toString(){let{childNodes:[e,t,r]}=this;return e.toString()+t.toString()+h(this,xe)+r.toString()}text(){let{childNodes:[e,t,r]}=this;return e.text()+t.text()+h(this,xe)+r.text()}getGaps(e){return e===1?h(this,xe).length:0}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),n=new F(this,e+this.getRelativeIndex(this.length-1));for(let s of this.lastChild.childNodes)if(s.type==="text"){let{data:o}=s;if(o.includes("|")){let a=o.includes("||"),g=$(s,n,"pipe-like",'additional "|" in a table cell',a?"error":"warning");if(a){let p={caption:"|+",td:"|",th:"!"}[this.subtype];g.fix={range:[g.startIndex,g.endIndex],text:o.replace(/\|\|/gu,`
${p}`)}}else g.suggestions=[{desc:"escape",range:[g.startIndex,g.endIndex],text:o.replace(/\|/gu,"&#124;")}];r.push(g)}}return r}isIndependent(){return this.firstChild.text().startsWith(`
`)}getAttr(e){let t=super.getAttr(e);return e==="rowspan"||e==="colspan"?parseInt(t)||1:t}print(){let{childNodes:[e,t,r]}=this;return`<span class="wpb-td">${e.print()}${t.print()}${h(this,xe)}${r.print()}</span>`}json(){let e=super.json();return e.subtype=this.subtype,e}};xe=new WeakMap,Mt=new WeakSet,gn=function(){var o;let e=this.firstChild.text(),t=e.slice(-1),r="td";if(t==="!"?r="th":t==="+"&&(r="caption"),this.isIndependent())return{subtype:r};let{previousSibling:n}=this;return E(o=n,Mt,gn).call(o)}});var vt,un=y(()=>{"use strict";q();Se();dn();pn();vt=class extends At{lint(i=this.getAbsoluteIndex(),e){let t=super.lint(i,e),r=this.childNodes.find(({type:p})=>p==="table-inter");if(!r)return t;let n=r.childNodes.find(p=>p.text().trim()),s=/^\s*(?:!|\{\{\s*![!-]?\s*\}\})/u,o=Me("arg"),a=Me("magic-word");if(!n||s.test(n.toString())||o(n)&&s.test(n.default||""))return t;if(a(n))try{if(n.getPossibleValues().every(p=>s.test(p.text())))return t}catch(p){}let g=$(r,{start:i},"fostered-content","content to be moved out from the table");return g.severity=n.type==="template"?"warning":"error",g.startIndex++,g.startLine++,g.startCol=0,t.push(g),t}getRowCount(){return Number(this.childNodes.some(i=>i instanceof Ze&&i.isIndependent()&&!i.firstChild.text().endsWith("+")))}getNthCol(i,e){let t=0;for(let r of this.childNodes.slice(2))if(r instanceof Ze&&(r.isIndependent()&&(t=+(r.subtype!=="caption")),i-=t,i<0))return r}}});var So,Co,cn,Tr,Zi=y(()=>{"use strict";q();X();Se();R();un();at();So=/^\n[^\S\n]*(?:\|\}|\{\{\s*!\s*\}\}\}|\{\{\s*!\)\s*\}\})$/u,Co=({type:l})=>l==="tr"||l==="table-syntax",cn=class extends Array{},Tr=class extends vt{constructor(e,t,r,n){super(/^(?:\{\||\{\{\{\s*!\s*\}\}|\{\{\s*\(!\s*\}\})$/u,e,t,r,n,{});x(this,"type","table")}get closed(){return this.lastChild.type==="table-syntax"}lint(e=this.getAbsoluteIndex(),t){let r=super.lint(e,t),n=new F(this,e);this.closed||r.push($(this.firstChild,n,"unclosed-table",b.msg("unclosed $1","table")));let s=this.getLayout(),{length:o}=s;if(o>1){let a=1,g=1/0,p=0;for(;p<o;p++){let d=s[p],c=d.length;if(c<a)break;c<g&&(g=c);let{colspan:u}=this.getNthCell(d[d.length-1]),m=c-u+1;if(m>g)break;m>a&&(a=m)}if(p<o){let d=$(this.getNthRow(p),n,"table-layout","inconsistent table layout","warning");d.startIndex++,d.startLine++,d.startCol=0,r.push(d)}}return r}close(e=`
|}`,t){let r=this.getAttribute("config"),n=this.getAttribute("accum"),s=t?[e]:b.parse(e,this.getAttribute("include"),2,r).childNodes,o=Fe.run(()=>super.insertAt(new he(void 0,So,"table-syntax",r,n,{})));t||o.afterBuild(),this.lastChild.replaceChildren(...s)}getLayout(e){let t=this.getAllRows(),{length:r}=t,n=new cn(...Pn(r,()=>[]));for(let s=0;s<r;s++){let o=n[s],a=0,g=0,p;for(let d of t[s].childNodes.slice(2))if(d.type==="td"){if(d.isIndependent()&&(p=d.subtype!=="caption"),p){let c={row:s,column:a},{rowspan:u,colspan:m}=d;for(a++;o[g];)g++;for(let f=s;f<Math.min(s+u,r);f++)for(let T=g;T<g+m;T++)n[f][T]=c;g+=m}}else if(Co(d))break}return n}getAllRows(){return[...super.getRowCount()?[this]:[],...this.childNodes.slice(1).filter(e=>e.type==="tr"&&e.getRowCount()>0)]}getNthCell(e){var r;let t=e;return t&&((r=this.getNthRow(t.row,!1,!1))==null?void 0:r.getNthCol(t.column))}getNthRow(e,t,r){let n=super.getRowCount();if(e===0&&n)return this;n&&e--;for(let s of this.childNodes.slice(2))if(s.type==="tr"&&s.getRowCount()&&(e--,e<0))return s}json(){let e=super.json();return e.closed=this.closed,e}}});var br,Ki=y(()=>{"use strict";un();br=class extends vt{constructor(e,t,r,n){super(/^\n[^\S\n]*(?:\|-+|\{\{\s*!\s*\}\}-+|\{\{\s*!-\s*\}\}-*)$/u,e,t,r,n,{});x(this,"type","tr")}}});var wt,hn=y(()=>{"use strict";Pe();wt=class extends re{}});var St,mn=y(()=>{"use strict";hn();St=class extends wt{constructor(){super(...arguments);x(this,"type","dd")}}});var Ji={};U(Ji,{parseTable:()=>No});var $o,No,Yi=y(()=>{"use strict";P();Zi();Ki();pn();mn();$o=l=>l.lastChild.constructor!==k,No=({firstChild:{data:l},type:i,name:e},t,r)=>{let n=[],s=l.split(`
`),o=i==="root"||i==="parameter-value"||i==="ext-inner"&&e==="poem"?"":`
${s.shift()}`,a,g=(d,c)=>{if(!c){o+=d;return}let{lastChild:u}=c;if($o(c)){let m=new k(d,t,r);m.type="table-inter",m.setAttribute("stage",3),c.insertAt(m)}else u.setText(u.toString()+d)},p=()=>a.type==="td"?n.pop():a;for(let d of s){a=n.pop();let[c]=/^(?:\s|\0\d+c\x7F)*/u.exec(d),u=d.slice(c.length),m=/^(:*)((?:\s|\0\d+c\x7F)*)(\{\||\{(?:\0\d+c\x7F)*\0\d+!\x7F|\0\d+\{\x7F)(.*)$/u.exec(u);if(m){for(;a&&a.type!=="td";)a=n.pop();let[,A,L,j,ee]=m;A&&new St(A,t,r),g(`
${c}${A&&`\0${r.length-1}d\x7F`}${L}\0${r.length}b\x7F`,a),n.push(...a?[a]:[],new Tr(j,ee,t,r));continue}else if(!a){o+=`
${d}`;continue}let f=/^(?:(\|\}|\0\d+!\x7F\}|\0\d+\}\x7F)|(\|-+|\0\d+!\x7F-+|\0\d+-\x7F-*)(?!-)|(!|(?:\||\0\d+!\x7F)\+?))(.*)$/u.exec(u);if(!f){g(`
${d}`,a),n.push(a);continue}let[,T,N,w,S]=f;if(T){for(;a.type!=="table";)a=n.pop();a.close(`
${c}${T}`,!0),g(S,n[n.length-1])}else if(N){a=p(),a.type==="tr"&&(a=n.pop());let A=new br(`
${c}${N}`,S,t,r);n.push(a,A),a.insertAt(A)}else{a=p();let A=w==="!"?/!!|(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu:/(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu,L=A.exec(S),j=0,ee=`
${c}${w}`,H=ne=>{let Z=new Ze(ee,S.slice(j,L==null?void 0:L.index),t,r);return ne.insertAt(Z),Z};for(;L;)H(a),{lastIndex:j}=A,[ee]=L,L=A.exec(S);n.push(a,H(a))}}return o.slice(1)}});var kr,es=y(()=>{"use strict";Pe();kr=class extends re{constructor(){super(...arguments);x(this,"type","hr")}}});var ts,fn,Eo,Ke,rs=y(()=>{"use strict";We();Pe();ts=[ce(!0)];Ke=class extends(Eo=re){constructor(e,t,r,n){super(e,r,n);x(this,"type","double-underscore")}getAttribute(e){return e==="padding"?2:super.getAttribute(e)}toString(){return`__${this.innerText}__`}print(){return super.print({pre:"__",post:"__"})}};fn=ae(Eo),Ke=de(fn,0,"DoubleUnderscoreToken",ts,Ke),le(fn,1,Ke)});var ns={};U(ns,{parseHrAndDoubleUnderscore:()=>Io});var Io,is=y(()=>{"use strict";es();rs();Wr();Io=({firstChild:{data:l},type:i,name:e},t,r)=>{let{doubleUnderscore:n}=t,s=new Set(n[0]),o=new Set(n[1]);return i!=="root"&&(i!=="ext-inner"||e!=="poem")&&(l=`\0${l}`),l=l.replace(/^((?:\0\d+c\x7F)*)(-{4,})/gmu,(a,g,p)=>(new kr(p,t,r),`${g}\0${r.length-1}r\x7F`)).replace(new RegExp(`__(${[...n[0],...n[1]].join("|")})__`,"giu"),(a,g)=>{let p=o.has(g);return p||s.has(g.toLowerCase())?(new Ke(g,p,t,r),`\0${r.length-1}u\x7F`):a}).replace(/^((?:\0\d+c\x7F)*)(={1,6})(.+)\2((?:[^\S\n]|\0\d+c\x7F)*)$/gmu,(a,g,p,d,c)=>{let u=`${g}\0${r.length}h\x7F`;return new ct(p.length,[d,c],t,r),u}),i==="root"||i==="ext-inner"&&e==="poem"?l:l.slice(1)}});var yr,ss=y(()=>{"use strict";q();X();R();Pe();yr=class extends re{constructor(){super(...arguments);x(this,"type","quote")}get bold(){return this.innerText.length!==2}get italic(){return this.innerText.length!==3}lint(e=this.getAbsoluteIndex()){let{previousSibling:t,nextSibling:r,bold:n}=this,s=b.msg('lonely "$1"',"'"),o=[],a=new F(this,e),g,p=(d,c,u)=>({desc:"escape",range:[d,c],text:"&apos;".repeat(u)});if((t==null?void 0:t.type)==="text"&&t.data.endsWith("'")){g=I(this,a,"lonely-apos",s);let{startIndex:d,startLine:c,startCol:u}=g,[,{length:m}]=/(?:^|[^'])('+)$/u.exec(t.data),f=e-m;o.push({...g,startIndex:f,endIndex:d,startCol:u-m,endLine:c,endCol:u,suggestions:[p(f,d,m)]})}if((r==null?void 0:r.type)==="text"&&r.data.startsWith("'")){g!=null||(g=I(this,a,"lonely-apos",s));let{endIndex:d,endLine:c,endCol:u}=g,[{length:m}]=/^'+/u.exec(r.data),f=d+m;o.push({...g,startIndex:d,endIndex:f,startLine:c,startCol:u,endCol:u+m,suggestions:[p(d,f,m)]})}return n&&this.closest("heading-title")&&o.push(I(this,a,"bold-header","bold in section header","warning")),o}json(){let e=super.json();return Object.assign(e,{bold:this.bold,italic:this.italic}),e}}});var os={};U(os,{parseQuotes:()=>xn});var xn,Tn=y(()=>{"use strict";ss();xn=(l,i,e)=>{var p;let t=l.split(/('{2,})/u),{length:r}=t;if(r===1)return l;let n=0,s=0,o,a,g;for(let d=1;d<r;d+=2){let c=t[d].length;switch(c){case 2:s++;break;case 4:t[d-1]+="'",t[d]="'''";case 3:if(n++,o!==void 0)break;t[d-1].endsWith(" ")?a===void 0&&g===void 0&&(g=d):t[d-1].slice(-2,-1)===" "?o=d:a!=null||(a=d);break;default:t[d-1]+="'".repeat(c-5),t[d]="'''''",s++,n++}}if(s%2===1&&n%2===1){let d=(p=o!=null?o:a)!=null?p:g;d!==void 0&&(t[d]="''",t[d-1]+="'")}for(let d=1;d<r;d+=2)new yr(t[d],i,e),t[d]=`\0${e.length-1}q\x7F`;return t.join("")}});var as={};U(as,{parseExternalLinks:()=>bn});var bn,kn=y(()=>{"use strict";V();on();fr();bn=(l,i,e,t)=>{let r=new RegExp(String.raw`\[(\0\d+f\x7F|(?:(?:${i.protocol}|//)${Ae}|\0\d+m\x7F)${ve}(?=[[\]<>"\t\p{Zs}]|\0\d))(\p{Zs}*(?!\p{Zs}))([^\]\x01-\x08\x0A-\x1F\uFFFD]*)\]`,"giu");return l.replace(r,(n,s,o,a)=>{let{length:g}=e,p=/&[lg]t;/u.exec(s);return p&&(s=s.slice(0,p.index),o="",a=s.slice(p.index)+o+a),t?(new Ee(s,"ext-link-url",i,e),`[\0${g}f\x7F${o}${a}]`):(new kt(s,o,a,i,e),`\0${g}w\x7F`)})}});var Ar,ls=y(()=>{"use strict";Bt();Ar=class extends we{constructor(){super(...arguments);x(this,"type","category")}}});var gs={};U(gs,{parseLinks:()=>ds});var ds,ps=y(()=>{"use strict";R();Tn();kn();sn();tn();ls();ds=(l,i,e)=>{let t=i.inExt?/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)(.*?[^\]]))?\]\](.*)$/su:/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)(.*?[^\]])?)?\]\](.*)$/su,r=/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(\||\0\d+!\x7F)(.*)$/su,n=new RegExp(String.raw`^\s*(?:${i.protocol}|//)`,"iu"),s=l.split("[["),o=s.shift();for(let a=0;a<s.length;a++){let g=!1,p,d,c,u,m=s[a],f=t.exec(m);if(f)[,p,d,c,u]=f,u.startsWith("]")&&(c!=null&&c.includes("["))&&(c+="]",u=u.slice(1));else{let j=r.exec(m);j&&(g=!0,[,p,d,c]=j)}if(p===void 0||n.test(p)||/\0\d+[exhbru]\x7F/u.test(p)){o+=`[[${m}`;continue}let T=p.trim().startsWith(":");if(T&&g){o+=`[[${m}`;continue}let N=b.normalizeTitle(p,0,!1,i,!0,!0,!0),{ns:w,valid:S,interwiki:A}=N;if(S){if(g){if(A||w!==6){o+=`[[${m}`;continue}let j=!1;for(a++;a<s.length;a++){let ee=s[a],H=ee.split("]]");if(H.length>2){j=!0,c+=`[[${H[0]}]]${H[1]}`,u=H.slice(2).join("]]");break}else if(H.length===2)c+=`[[${H[0]}]]${H[1]}`;else{c+=`[[${ee}`;break}}if(c=ds(c,i,e),!j){o+=`[[${p}${d}${c}`;continue}}}else{o+=`[[${m}`;continue}c&&(c=xn(c,i,e));let L=bt;T||(!A&&w===6?(c&&(c=bn(c,i,e,!0)),L=xt):!A&&w===14&&(L=Ar)),c===void 0&&d&&(c=""),o+=`\0${e.length}l\x7F${u}`,new L(p,c,i,e,d)}return o}});var us={};U(us,{parseMagicLinks:()=>Ro});var Lo,Fo,Ro,cs=y(()=>{"use strict";V();fr();Lo=/[^,;\\.:!?)][,;\\.:!?)]+$/u,Fo=/[^,;\\.:!?][,;\\.:!?]+$/u,Ro=(l,i,e)=>{let t=String.raw`[\p{Zs}\t]|&nbsp;|&#0*160;|&#x0*a0;`,r=`(?:${t}|-)`,n=new RegExp(String.raw`(^|[^\p{L}\d_])(?:(?:${i.protocol})(${Ae}${ve})|(?:RFC|PMID)(?:${t})+\d+\b|ISBN(?:${t})+(?:97[89]${r}?)?(?:\d${r}?){9}[\dx]\b)`,"giu");return l.replace(n,(s,o,a)=>{let g=o?s.slice(o.length):s;if(a){let p="",d=/&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(g);d&&(p=g.slice(d.index),g=g.slice(0,d.index));let c=g.includes("(")?Fo:Lo,u=c.exec(g);if(u){let m=1;u[0][1]===";"&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/iu.test(g.slice(0,u.index))&&(m=2),p=g.slice(u.index+m)+p,g=g.slice(0,u.index+m)}return p.length>=a.length?s:(new Ee(g,void 0,i,e),`${o}\0${e.length-1}w\x7F${p}`)}else if(!/^(?:RFC|PMID|ISBN)/u.test(g))return s;return new Ee(g,"magic-link",i,e),`${o}\0${e.length-1}i\x7F`})}});var vr,hs=y(()=>{"use strict";hn();vr=class extends wt{constructor(){super(...arguments);x(this,"type","list")}}});var ms={};U(ms,{parseList:()=>Po});var Po,fs=y(()=>{"use strict";hs();mn();Po=(l,i,e)=>{let t=/^((?:\0\d+c\x7F)*)([;:*#]+)/u.exec(l);if(!t)return l;let[r,n,s]=t,o=`${n}\0${e.length}d\x7F${l.slice(r.length)}`,a=s.split(";").length-1;if(new vr(s,i,e),!a)return o;let{html:[g]}=i,p=/:+|-\{|\0\d+[xq]\x7F/gu,d=p,c=d.exec(o),u=0,m=!1,f=!1,T=0,N=(S,A)=>(new St(S,i,e),`${o.slice(0,A)}\0${e.length-1}d\x7F${o.slice(A+S.length)}`),w=S=>{S?u&&u--:u++};for(;c&&a;){let{0:S,index:A}=c;if(S==="-{"){if(!T){let{lastIndex:L}=d;d=/-\{|\}-/gu,d.lastIndex=L}T++}else if(S==="}-"){if(T--,!T){let{lastIndex:L}=d;d=p,d.lastIndex=L}}else if(S.endsWith("x\x7F")){let{name:L,closing:j,selfClosing:ee}=e[Number(S.slice(1,-2))];(!ee||g.includes(L))&&w(j)}else if(S.endsWith("q\x7F")){let{bold:L,italic:j}=e[Number(S.slice(1,-2))];L&&(w(m),m=!m),j&&(w(f),f=!f)}else if(u===0){if(S.length>=a)return N(S.slice(0,a),A);a-=S.length,d.lastIndex=A+4+String(e.length).length,o=N(S,A)}c=d.exec(o)}return o}});var xs,Le,wr,Ts=y(()=>{"use strict";q();X();R();P();$e();xs=new Set(["A","T","R","D","-","H","N"]),wr=class extends k{constructor(e,t=b.getConfig(),r=[]){super(void 0,t,r,{});x(this,"type","converter-flags");v(this,Le);this.append(...e.map(n=>new O(n,"converter-flag",t,r)))}afterBuild(){C(this,Le,this.childNodes.map(e=>e.text().trim()))}toString(){return super.toString(";")}text(){return super.text(";")}getGaps(){return 1}getUnknownFlags(){return new Set(h(this,Le).filter(e=>/\{{3}[^{}]+\}{3}/u.test(e)))}getVariantFlags(){let e=new Set(this.getAttribute("config").variants);return new Set(h(this,Le).filter(t=>e.has(t)))}lint(e=this.getAbsoluteIndex(),t){let r=this.getVariantFlags(),n=this.getUnknownFlags(),s=new Set(h(this,Le).filter(u=>xs.has(u))),o=h(this,Le).filter(u=>!u).length,a=h(this,Le).length-n.size-o,g=super.lint(e,t);if(r.size===a||s.size===a)return g;let p=new F(this,e),{childNodes:d,length:c}=this;for(let u=0;u<c;u++){let m=d[u],f=m.text().trim();if(f&&!r.has(f)&&!n.has(f)&&(r.size>0||!s.has(f))){let T=$(m,p,"no-ignored","invalid conversion flag");r.size===0&&xs.has(f.toUpperCase())?T.fix={range:[T.startIndex,T.endIndex],text:f.toUpperCase()}:T.suggestions=[{desc:"remove",range:[T.startIndex,T.endIndex],text:""}],g.push(T)}}return g}print(){return super.print({sep:";"})}};Le=new WeakMap});var Ct,bs=y(()=>{"use strict";R();P();$e();Ct=class extends k{constructor(e,t=!0,r=b.getConfig(),n=[]){super(void 0,r,n);x(this,"type","converter-rule");let s=e.indexOf(":"),o=e.slice(0,s).indexOf("=>"),a=o===-1?e.slice(0,s):e.slice(o+2,s);t&&r.variants.includes(a.trim())?(super.insertAt(new O(a,"converter-rule-variant",r,n)),super.insertAt(new O(e.slice(s+1),"converter-rule-to",r,n)),o!==-1&&super.insertAt(new O(e.slice(0,o),"converter-rule-from",r,n),0)):super.insertAt(new O(e,"converter-rule-to",r,n))}toString(){let{childNodes:e}=this;if(e.length===3){let[t,r,n]=e;return`${t.toString()}=>${r.toString()}:${n.toString()}`}return super.toString(":")}text(){let{childNodes:e}=this;if(e.length===3){let[t,r,n]=e;return`${t.text()}=>${r.text()}:${n.text()}`}return super.text(":")}getGaps(e){return e===0&&this.length===3?2:1}print(){let{childNodes:e}=this;if(e.length===3){let[t,r,n]=e;return`<span class="wpb-converter-rule">${t.print()}=>${r.print()}:${n.print()}</span>`}return super.print({sep:":"})}}});var Sr,ks=y(()=>{"use strict";V();R();P();Ts();bs();Sr=class extends k{constructor(e,t,r=b.getConfig(),n=[]){super(void 0,r,n);x(this,"type","converter");this.append(new wr(e,r,n));let[s]=t,o=s.includes(":"),a=new Ct(s,o,r,n);o&&a.length===1?this.insertAt(new Ct(t.join(";"),!1,r,n)):this.append(a,...t.slice(1).map(g=>new Ct(g,!0,r,n)))}toString(){let{childNodes:[e,...t]}=this;return`-{${e.toString()}${e.length>0?"|":""}${t.map(String).join(";")}}-`}text(){let{childNodes:[e,...t]}=this;return`-{${e.text()}|${pe(t,";")}}-`}getAttribute(e){return e==="padding"?2:super.getAttribute(e)}getGaps(e){return e||this.firstChild.length>0?1:0}print(){let{childNodes:[e,...t]}=this;return`<span class="wpb-converter">-{${e.print()}${e.length>0?"|":""}${Ce(t,{sep:";"})}}-</span>`}}});var ys={};U(ys,{parseConverter:()=>Bo});var Bo,As=y(()=>{"use strict";ks();Bo=(l,i,e)=>{let t=`(?:${i.variants.join("|")})`,r=/-\{/gu,n=/-\{|\}-/gu,s=new RegExp(String.raw`;(?=(?:[^;]*?=>)?\s*${t}\s*:|(?:\s|\0\d+c\x7F)*$)`,"u"),o=[],a=r,g=a.exec(l);for(;g;){let{0:p,index:d}=g;if(p==="}-"){let c=o.pop(),{length:u}=e,m=l.slice(c.index+2,d),f=m.indexOf("|"),[T,N]=f===-1?[[],m]:[m.slice(0,f).split(";"),m.slice(f+1)],w=N.replace(/(&[#a-z\d]+);/giu,"$1"),S=w.split(s).map(A=>A.replace(/\x01/gu,";"));new Sr(T,S,i,e),l=`${l.slice(0,c.index)}\0${u}v\x7F${l.slice(d+2)}`,o.length===0&&(a=r),a.lastIndex=c.index+3+String(u).length}else o.push(g),a=n,a.lastIndex=d+2;g=a.exec(l)}return l}});var An={};U(An,{Token:()=>k});var Te,G,z,Je,zt,Wt,_,yn,vs,ws,Ss,Cs,$s,Ns,Es,Is,Ls,Fs,Rs,Ps,vn,k,P=y(()=>{"use strict";V();ye();q();R();Vn();Zn();vn=class vn extends Kt{constructor(e,t=b.getConfig(),r=[],n){super();v(this,_);x(this,"type","plain");v(this,Te,0);v(this,G);v(this,z);v(this,Je);v(this,zt,!1);v(this,Wt);typeof e=="string"&&this.insertAt(e),C(this,G,t),C(this,z,r),r.push(this)}parseOnce(e=h(this,Te),t=!1){if(e<h(this,Te)||!this.getAttribute("plain")||this.length===0)return this;if(h(this,Te)>=11)return this;switch(e){case 0:if(this.type==="root"){h(this,z).shift();let r=E(this,_,vs).call(this);t&&(t=!r)}C(this,Je,t),E(this,_,ws).call(this,t);break;case 1:E(this,_,Ss).call(this);break;case 2:E(this,_,Cs).call(this);break;case 3:E(this,_,$s).call(this);break;case 4:E(this,_,Ns).call(this);break;case 5:E(this,_,Es).call(this);break;case 6:E(this,_,Is).call(this);break;case 7:E(this,_,Ls).call(this);break;case 8:E(this,_,Fs).call(this);break;case 9:E(this,_,Rs).call(this);break;case 10:E(this,_,Ps).call(this)}if(this.type==="root")for(let r of h(this,z))r.parseOnce(e,t);return Vt(this,Te)._++,this}buildFromStr(e,t){let r=e.split(/[\0\x7F]/u).map((n,s)=>{if(s%2===0)return new Rt(n);if(isNaN(n.slice(-1)))return h(this,z)[Number(n.slice(0,-1))];throw new Error(`\u89E3\u6790\u9519\u8BEF\uFF01\u672A\u6B63\u786E\u6807\u8BB0\u7684 Token\uFF1A${n}`)});return t===0?r.map(String).join(""):t===1?pe(r):r}afterBuild(){if(this.type==="root")for(let e of h(this,z))e.afterBuild();C(this,zt,!0)}parse(e=11,t){for(e=Math.min(e,11);h(this,Te)<e;)this.parseOnce(h(this,Te),t);return e&&(E(this,_,yn).call(this),this.afterBuild()),this}getAttribute(e){var t;switch(e){case"plain":return this.constructor===vn;case"config":return h(this,G);case"include":return(t=h(this,Je))!=null?t:!!h(this.getRootNode(),Je);case"accum":return h(this,z);default:return super.getAttribute(e)}}setAttribute(e,t){switch(e){case"stage":h(this,Te)===0&&this.type==="root"&&h(this,z).shift(),C(this,Te,t);break;default:super.setAttribute(e,t)}}insertAt(e,t=this.length){let r=typeof e=="string"?new Rt(e):e;return super.insertAt(r,t),r.type==="root"&&(r.type="plain"),r}normalizeTitle(e,t=0,r,n,s){return b.normalizeTitle(e,t,h(this,Je),h(this,G),r,n,s)}lint(e=this.getAbsoluteIndex(),t){var n;let r=super.lint(e,t);if(this.type==="root"){let s={};for(let u of this.querySelectorAll("category")){let m=s[u.name];m?m.add(u):s[u.name]=new Set([u])}for(let u of Object.values(s))u.size>1&&r.push(...[...u].map(m=>{let f=I(m,{start:m.getAbsoluteIndex()},"no-duplicate","duplicated category");return f.suggestions=[{desc:"remove",range:[f.startIndex,f.endIndex],text:""}],f}));let o=/<!--\s*lint-(disable(?:(?:-next)?-line)?|enable)(\s[\sa-z,-]*)?-->/gu,a=this.toString(),g=[],p=o.exec(a),d=0,c=0;for(;p;){let{1:u,index:m}=p,f=(n=p[2])==null?void 0:n.trim();c+=a.slice(d,m).split(`
`).length-1,d=m,g.push({line:c+(u==="disable-line"?0:1),from:u==="disable"?o.lastIndex:void 0,to:u==="enable"?o.lastIndex:void 0,rules:f?new Set(f.split(",").map(T=>T.trim())):void 0}),p=o.exec(a)}r=r.filter(({rule:u,startLine:m,startIndex:f})=>{let T={pos:0};for(let{line:N,from:w,to:S,rules:A}of g){if(N>m+1)break;if(A&&!A.has(u))continue;if(N===m&&w===void 0&&S===void 0)return!1;w<=f&&w>T.pos?(T.pos=w,T.type="from"):S<=f&&S>T.pos&&(T.pos=S,T.type="to")}return T.type!=="from"})}return r}toString(e){var r;let t=this.getRootNode();return t.type==="root"&&h(t,zt)?((r=h(this,Wt))!=null||C(this,Wt,super.toString(e)),h(this,Wt)):super.toString(e)}};Te=new WeakMap,G=new WeakMap,z=new WeakMap,Je=new WeakMap,zt=new WeakMap,Wt=new WeakMap,_=new WeakSet,yn=function(){var n;C(this,Te,11);let{length:e,firstChild:t}=this,r=String(t);if(e===1&&t.type==="text"&&r.includes("\0")&&(this.replaceChildren(...this.buildFromStr(r)),this.normalize(),this.type==="root"))for(let s of h(this,z))E(n=s,_,yn).call(n)},vs=function(){let{parseRedirect:e}=(ri(),M(ti)),t=this.firstChild.toString(),r=e(t,h(this,G),h(this,z));return r&&this.setText(r),!!r},ws=function(e){let{parseCommentAndExt:t}=(Wi(),M(zi));this.setText(t(this.firstChild.toString(),h(this,G),h(this,z),e))},Ss=function(){let{parseBraces:e}=(Hr(),M(Si)),t=this.type==="root"?this.firstChild.toString():`\0${this.firstChild.toString()}`,r=e(t,h(this,G),h(this,z));this.setText(this.type==="root"?r:r.slice(1))},Cs=function(){var t;if((t=h(this,G).excludes)!=null&&t.includes("html"))return;let{parseHtml:e}=(Hi(),M(Di));this.setText(e(this.firstChild.toString(),h(this,G),h(this,z)))},$s=function(){var t;if((t=h(this,G).excludes)!=null&&t.includes("table"))return;let{parseTable:e}=(Yi(),M(Ji));this.setText(e(this,h(this,G),h(this,z)))},Ns=function(){var t;if((t=h(this,G).excludes)!=null&&t.includes("hr"))return;let{parseHrAndDoubleUnderscore:e}=(is(),M(ns));this.setText(e(this,h(this,G),h(this,z)))},Es=function(){let{parseLinks:e}=(ps(),M(gs));this.setText(e(this.firstChild.toString(),h(this,G),h(this,z)))},Is=function(){var r;if((r=h(this,G).excludes)!=null&&r.includes("quote"))return;let{parseQuotes:e}=(Tn(),M(os)),t=this.firstChild.toString().split(`
`);for(let n=0;n<t.length;n++)t[n]=e(t[n],h(this,G),h(this,z));this.setText(t.join(`
`))},Ls=function(){var t;if((t=h(this,G).excludes)!=null&&t.includes("extLink"))return;let{parseExternalLinks:e}=(kn(),M(as));this.setText(e(this.firstChild.toString(),h(this,G),h(this,z)))},Fs=function(){var t;if((t=h(this,G).excludes)!=null&&t.includes("magicLink"))return;let{parseMagicLinks:e}=(cs(),M(us));this.setText(e(this.firstChild.toString(),h(this,G),h(this,z)))},Rs=function(){var n;if((n=h(this,G).excludes)!=null&&n.includes("list"))return;let{parseList:e}=(fs(),M(ms)),t=this.firstChild.toString().split(`
`),r=this.type==="root"||this.type==="ext-inner"&&this.name==="poem"?0:1;for(;r<t.length;r++)t[r]=e(t[r],h(this,G),h(this,z));this.setText(t.join(`
`))},Ps=function(){if(h(this,G).variants.length>0){let{parseConverter:e}=(As(),M(ys));this.setText(e(this.firstChild.toString(),h(this,G),h(this,z)))}};k=vn});var Ye,Bs,jo,b,R=y(()=>{Rn();Se();ye();V();Ye={i18n:void 0,rules:Fn,getConfig(){return{...jn,...this.config,excludes:[]}},msg(l,i=""){var e,t;return l&&((t=(e=this.i18n)==null?void 0:e[l])!=null?t:l).replace("$1",this.msg(i))},normalizeTitle(l,i=0,e,t=Ye.getConfig(),r,n=!1,s=!1){let{Title:o}=(Wn(),M(zn));if(r)return new o(l,i,t,n,s);let{Token:a}=(P(),M(An)),g=Fe.run(()=>{let d=new a(l,t);return d.type="root",d.parseOnce(0,e).parseOnce()}),p=new o(g.toString(),i,t,n,s);return Fe.run(()=>{for(let d of["main","fragment"]){let c=p[d];c!=null&&c.includes("\0")&&(p[d]=g.buildFromStr(c,1))}}),p},parse(l,i,e=11,t=Ye.getConfig()){l=_n(l);let{Token:r}=(P(),M(An));return Fe.run(()=>{let s=new r(l,t);return s.type="root",s.parse(e,i)})}},Bs={},jo=new Set(["normalizeTitle","parse"]);for(let l in Ye)jo.has(l)||(Bs[l]={enumerable:!1});Object.defineProperties(Ye,Bs);typeof self=="object"?Object.assign(self,{Parser:Ye}):typeof globalThis=="object"&&Object.assign(globalThis,{Parser:Ye});b=Ye});R();})();
