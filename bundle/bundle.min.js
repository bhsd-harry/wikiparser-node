"use strict";(()=>{var Ga=Object.defineProperty;var xr=t=>{throw TypeError(t)};var Va=(t,e,s)=>e in t?Ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Qa=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var lt=(t,e,s)=>Va(t,typeof e!="symbol"?e+"":e,s),ze=(t,e,s)=>e.has(t)||xr("Cannot "+s);var c=(t,e,s)=>(ze(t,e,"read from private field"),s?s.call(t):e.get(t)),$=(t,e,s)=>e.has(t)?xr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),k=(t,e,s,r)=>(ze(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),E=(t,e,s)=>(ze(t,e,"access private method"),s);var fr=(t,e,s,r)=>({set _(n){k(t,e,n,s)},get _(){return c(t,e,r)}});var Yl=Qa((to,Ua)=>{var Xa=Object.create,Wt=Object.defineProperty,Hi=Object.getOwnPropertyDescriptor,Hs=Object.getOwnPropertyNames,Ja=Object.prototype.hasOwnProperty,Gi=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Mt=t=>{throw TypeError(t)},Vi=(t,e,s)=>e in t?Wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,mr=(t,e)=>Wt(t,"name",{value:e,configurable:!0}),m=(t,e)=>function(){return t&&(e=(0,t[Hs(t)[0]])(t=0)),e},Ka=(t,e)=>function(){return e||(0,t[Hs(t)[0]])((e={exports:{}}).exports,e),e.exports},M=(t,e)=>{for(var s in e)Wt(t,s,{get:e[s],enumerable:!0})},Ya=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Hs(e))!Ja.call(t,n)&&n!==s&&Wt(t,n,{get:()=>e[n],enumerable:!(r=Hi(e,n))||r.enumerable});return t},R=t=>Ya(Wt({},"__esModule",{value:!0}),t),W=t=>{var e;return[,,,Xa((e=t==null?void 0:t[Gi("metadata")])!=null?e:null)]},Qi=["class","method","getter","setter","accessor","field","value","get","set"],Kt=t=>t!==void 0&&typeof t!="function"?Mt("Function expected"):t,Za=(t,e,s,r,n)=>({kind:Qi[t],name:e,metadata:r,addInitializer:i=>s._?Mt("Already initialized"):n.push(Kt(i||null))}),Gs=(t,e)=>Vi(e,Gi("metadata"),t[3]),B=(t,e,s,r)=>{for(var n=0,i=t[e>>1],a=i&&i.length;n<a;n++)e&1?i[n].call(s):r=i[n].call(s,r);return r},q=(t,e,s,r,n,i)=>{var a,l,u,d,o,h=e&7,x=!!(e&8),g=!!(e&16),p=h>3?t.length+1:h?x?1:2:0,v=Qi[h+5],b=h>3&&(t[p-1]=[]),S=t[p]||(t[p]=[]),w=h&&(!g&&!x&&(n=n.prototype),h<5&&(h>3||!g)&&Hi(h<4?n:{get[s](){return D(this,i)},set[s](_){return K(this,i,_)}},s));h?g&&h<4&&mr(i,(h>2?"set ":h>1?"get ":"")+s):mr(n,s);for(var C=r.length-1;C>=0;C--)d=Za(h,s,u={},t[3],S),h&&(d.static=x,d.private=g,o=d.access={has:g?_=>el(n,_):_=>s in _},h^3&&(o.get=g?_=>(h^1?D:js)(_,n,h^4?i:w.get):_=>_[s]),h>2&&(o.set=g?(_,N)=>K(_,n,N,h^4?i:w.set):(_,N)=>_[s]=N)),l=(0,r[C])(h?h<4?g?i:w[v]:h>4?void 0:{get:w.get,set:w.set}:n,d),u._=1,h^4||l===void 0?Kt(l)&&(h>4?b.unshift(l):h?g?i=l:w[v]=l:n=l):typeof l!="object"||l===null?Mt("Object expected"):(Kt(a=l.get)&&(w.get=a),Kt(a=l.set)&&(w.set=a),Kt(a=l.init)&&b.unshift(a));return h||Gs(t,n),w&&Wt(n,s,w),g?h^4?i:w:n},tl=(t,e,s)=>Vi(t,typeof e!="symbol"?e+"":e,s),Vs=(t,e,s)=>e.has(t)||Mt("Cannot "+s),el=(t,e)=>Object(e)!==e?Mt('Cannot use the "in" operator on this value'):t.has(e),D=(t,e,s)=>(Vs(t,e,"read from private field"),s?s.call(t):e.get(t)),gt=(t,e,s)=>e.has(t)?Mt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),K=(t,e,s,r)=>(Vs(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),js=(t,e,s)=>(Vs(t,e,"access private method"),s),sl=(t,e,s,r)=>({set _(n){K(t,e,n,s)},get _(){return D(t,e,r)}});function Y(t,e,s){return s===1?t.replace(/\0(\d+)g\x7F/gu,(r,n)=>Y(String(e[n]),e,2)):s===2?t.replace(/\0(\d+)n\x7F/gu,(r,n)=>String(e[n])):t.replace(/\0(\d+)\x7F/gu,(r,n)=>e[n])}var yt,He,ue,he,Bt,Ft,Xi,X,Tt,vr,br,Rs,Ji,wr,_r,de,qt,H=m({"util/string.ts"(){"use strict";yt=String.raw` \xA0\u1680\u2000-\u200A\u202F\u205F\u3000`,He=String.raw`[^[\]<>"\0-\x1F\x7F${yt}\uFFFD]`,ue=String.raw`(?:\[[\da-f:.]+\]|${He})`,he=String.raw`(?:${He}|\0\d+[cn!~]\x7F)*`,Bt=t=>t.trim().toLowerCase(),Ft=(t,e)=>s=>s.replace(t,e),Xi=Ft(/[\0\x7F]|\r$/gmu,""),X=Ft(/\0\d+[cn]\x7F/gu,""),Tt=(t,e="")=>t.map(s=>typeof s=="string"?s:s.text()).join(e),vr={lt:"<",gt:">",lbrack:"[",rbrack:"]",lbrace:"{",rbrace:"}",nbsp:" ",amp:"&",quot:'"'},br=Ft(/&(?:#(\d+|[Xx][\da-fA-F]+)|([lg]t|[LG]T|[lr]brac[ke]|nbsp|amp|AMP|quot|QUOT));/gu,(t,e,s)=>e?String.fromCodePoint(+((/^x/iu.test(e)?"0":"")+e)):vr[s.toLowerCase()]),Rs=t=>br(t),Ji=Ft(/&#(\d+|x[\da-f]+);/giu,(t,e)=>String.fromCodePoint(+((/^x/iu.test(e)?"0":"")+e))),wr={"&":"amp","<":"lt",">":"gt",'"':"quot","\n":"#10"},_r=t=>Ft(t,e=>`&${wr[e]};`),de=_r(/[&<>]/gu),qt=(t,e={})=>{const{pre:s="",post:r="",sep:n=""}=e;return s+t.map(i=>i.print()).join(n)+r}}}),rl=Ka({"config/minimum.json"(t,e){e.exports={ext:[],html:[["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","tr","td","th","q","bdo"],["li","dt","dd"],["br","wbr","hr","meta","link"]],namespaces:{0:"",6:"File",10:"Template",14:"Category",828:"Module"},nsid:{"":0,file:6,template:10,category:14,module:828},functionHook:["msgnw"],variable:["!","=","pageid","articlepath","server","servername","scriptpath","stylepath"],parserFunction:[{msgnw:"msgnw",pageid:"pageid",articlepath:"articlepath",server:"server",servername:"servername",scriptpath:"scriptpath",stylepath:"stylepath","#language":"language","#special":"special","#speciale":"speciale","#tag":"tag","#formatdate":"formatdate","#dateformat":"formatdate","#invoke":"invoke","#while":"while","#dowhile":"dowhile","#loop":"loop","#forargs":"forargs","#fornumargs":"fornumargs","#if":"if","#ifeq":"ifeq","#switch":"switch","#ifexist":"ifexist","#ifexpr":"ifexpr","#iferror":"iferror","#time":"time","#timel":"timel","#expr":"expr","#rel2abs":"rel2abs","#titleparts":"titleparts","#categorytree":"categorytree","#urldecode":"urldecode","#choose":"choose","#var":"var","#varexists":"varexists","#var_final":"var_final","#vardefine":"vardefine","#vardefineecho":"vardefineecho","#widget":"widget","#related":"related","#regex":"regex","#regex_var":"regex_var","#regexquote":"regexquote","#regexall":"regexall","#len":"len","#pos":"pos","#rpos":"rpos","#sub":"sub","#count":"count","#rmatch":"rmatch","#rreplace":"rreplace","#replace":"replace","#rsplit":"rsplit","#explode":"explode","#tab":"tab","#seo":"seo","#babel":"babel","#translation":"translation","#commaseparatedlist":"commaseparatedlist","#coordinates":"coordinates","#lst":"lst","#lsth":"lsth","#lstx":"lstx","#assessment":"assessment","#mentor":"mentor","#property":"property","#target":"target","#section":"lst","#section-x":"lstx","#section-h":"lsth","#statements":"statements","#useliquidthreads":"useliquidthreads","#lqtpagelimit":"lqtpagelimit","#avatar":"avatar","#img":"img","#chart":"chart"},{"!":"!","=":"=","#FORMAL":"formal","#bcp47":"bcp47","#dir":"dir","#interwikilink":"interwikilink","#interlanguagelink":"interlanguagelink","#contentmodel":"contentmodel","#timef":"timef","#timefl":"timefl"},["msg","raw"],["subst","safesubst"]],doubleUnderscore:[[],[]],protocol:"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|matrix:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|wikipedia://|worldwind://|xmpp:",interwiki:[],img:{},redirection:["#redirect"],variants:[]}}}),Z,Os,mt=m({"util/constants.ts"(){"use strict";Z=11,Os=rl()}});function oe(t){const e=new Map,s=new WeakMap;return r=>{const n=typeof r=="string"?e:s;if(n.has(r)){const a=n.get(r);return a.lastIndex=0,a}const i=t(r);return n.set(r,i),i}}var Ne,Ki,pe=m({"../common/dist/index.mjs"(){"use strict";Ne=t=>decodeURIComponent(t.replace(/%(?![\da-f]{2})/giu,"%25")),Ki=oe}}),Ar,yr,Te,St,Yi,ge=m({"util/lint.ts"(){"use strict";ht(),G(),Ar=new Set(["tr","td","th","caption"]),yr=new Set(["Template:!!","Template:!-"]),Te=t=>{const e=t.childNodes.find(s=>s.text().trim());if(!e||e.type==="text"&&e.data.trim().startsWith("!")||e.is("magic-word")&&e.name==="!"||e.is("template")&&yr.has(e.name)||e.is("html")&&Ar.has(e.name))return!1;if(e.is("arg"))return e.length>1&&Te(e.childNodes[1]);if(e.is("magic-word"))try{const s=e.getPossibleValues().map(Te);return s.includes(2)?2:s.includes(1)&&1}catch{}return e.is("template")||e.is("magic-word")&&e.name==="invoke"?1:2},St=(t,e,s,r)=>{if(t&&(r||U.viewOnly&&t[0]===et.rev))return t[1];const n=e();return(r||U.viewOnly)&&s([et.rev,n]),n},Yi=(t,e)=>t==="ol"&&e==="type"?["1","a","A","i","I"]:t==="th"&&e==="scope"?["row","col","rowgroup","colgroup"]:e==="dir"?["ltr","rtl","auto"]:e==="aria-hidden"?["true","false"]:[]}}),Sr,Qs,Zi=m({"parser/selector.ts"(){"use strict";Sr=(t,e,s)=>{if(t.includes("#")){const r=t.indexOf("#");return(r===0||t.slice(0,r)===e)&&t.slice(r+1)===s}return!t||t===e},Qs=(t,e,s)=>{const r=t.split(",");return(({type:n,name:i})=>r.some(a=>Sr(a.trim(),n,i)))}}}),Pe,Xs=m({"mixin/cached.ts"(){"use strict";ge(),Pe=(t=!0)=>e=>{const s=new WeakMap;return function(...r){return St(s.get(this),()=>e.apply(this,r),n=>{s.set(this,n)},t)}}}}),tn,il=m({"mixin/nodeLike.ts"(){"use strict";tn=t=>{class e extends t{get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes[this.childNodes.length-1]}get offsetHeight(){return this.getDimension().height}get offsetWidth(){return this.getDimension().width}}return e}}}),Tr,$r,me,Dt,zt,ve,Ht,Gt,Vt,_t,en=m({"lib/node.ts"(){"use strict";ge(),ht(),Xs(),il(),G(),$r=[tn],Tr=[Pe(!1)],_t=class{constructor(){B(Vt,5,this),tl(this,"childNodes",[]),gt(this,me),gt(this,Dt),gt(this,zt),gt(this,ve),gt(this,Ht),gt(this,Gt,{})}get parentNode(){return D(this,me)}get nextSibling(){return D(this,Dt)}get previousSibling(){return D(this,zt)}getChildNodes(){const{childNodes:t}=this;return Object.isFrozen(t)?[...t]:t}getAttribute(t){return t==="padding"?0:this[t]}setAttribute(t,e){switch(t){case"parentNode":K(this,me,e),e||(K(this,Dt,void 0),K(this,zt,void 0));break;case"nextSibling":K(this,Dt,e);break;case"previousSibling":K(this,zt,e);break;case"aIndex":U.viewOnly&&K(this,Ht,[et.rev,e]);break;default:this[t]=e}}getRootNode(){return St(D(this,ve),()=>{var t,e;return(e=(t=this.parentNode)==null?void 0:t.getRootNode())!=null?e:this},t=>{const[,e]=t;e.type==="root"&&K(this,ve,t)})}indexFromPos(t,e){this.lspError("AstNode.indexFromPos")}posFromIndex(t){const{length:e}=String(this);if(t+=t<0?e:0,t>=0&&t<=e){const s=this.getLines(),r=s.findIndex(([,,n])=>t<=n);return{top:r,left:t-s[r][1]}}}getDimension(){const t=this.getLines(),e=t[t.length-1];return{height:t.length,width:e[2]-e[1]}}getGaps(t){return 0}getRelativeIndex(t){if(t===void 0){const{parentNode:e}=this;return e?e.getRelativeIndex(e.childNodes.indexOf(this)):0}return St(D(this,Gt)[t],()=>{const{childNodes:e}=this,s=t+(t<0?e.length:0);let r=this.getAttribute("padding");for(let n=0;n<s;n++)U.viewOnly&&(D(this,Gt)[n]=[et.rev,r]),r+=e[n].toString().length+this.getGaps(n);return r},e=>{D(this,Gt)[t]=e})}getAbsoluteIndex(){return St(D(this,Ht),()=>{const{parentNode:t}=this;return t?t.getAbsoluteIndex()+this.getRelativeIndex():0},t=>{K(this,Ht,t)})}getBoundingClientRect(){this.lspError("AstNode.getBoundingClientRect")}is(t){return this.type===t}getLines(){const t=[];let e=0;for(const s of String(this).split(`
`)){const r=e+s.length;t.push([s,e,r]),e=r+1}return t}seal(t,e){const s=!e&&!!this[t];Object.defineProperty(this,t,{enumerable:s,configurable:!0})}lspError(t){throw new Error(`${t} method is only available in the LSP version!`)}},Vt=W(null),me=new WeakMap,Dt=new WeakMap,zt=new WeakMap,ve=new WeakMap,Ht=new WeakMap,Gt=new WeakMap,q(Vt,1,"getLines",Tr,_t),_t=q(Vt,0,"AstNode",$r,_t),B(Vt,1,_t)}}),sn,nl=m({"mixin/elementLike.ts"(){"use strict";Zi(),sn=t=>{var s,Bs;class e extends t{constructor(){super(...arguments);$(this,s)}getElementBy(a){for(const l of this.childNodes){if(l.type==="text")continue;if(a(l))return l;const u=l.getElementBy(a);if(u)return u}}querySelector(a){return this.getElementBy(E(this,s,Bs).call(this,a))}getElementsBy(a,l=[]){for(const u of this.childNodes)u.type!=="text"&&(a(u)&&l.push(u),u.getElementsBy(a,l));return l}querySelectorAll(a){return this.getElementsBy(E(this,s,Bs).call(this,a))}escape(){}}return s=new WeakSet,Bs=function(a){return Qs(a,this)},e}}}),kr,Ge,Cr,Yt,al=m({"lib/element.ts"(){"use strict";H(),ht(),Zi(),en(),nl(),kr=[sn],Yt=class extends(Cr=_t){get length(){return this.childNodes.length}text(t){return Tt(this.childNodes,t)}normalize(){const t=this.getChildNodes(),e=s=>{var r,n;t.splice(s,1),(r=t[s-1])==null||r.setAttribute("nextSibling",t[s]),(n=t[s])==null||n.setAttribute("previousSibling",t[s-1])};for(let s=t.length-1;s>=0;s--){const{type:r,data:n}=t[s];r!=="text"||t.length===1||this.getGaps(s-(s&&1))||n===""&&e(s)}this.setAttribute("childNodes",t)}removeAt(t){this.lspError("AstElement.removeAt")}insertAt(t,e=this.length){return pr(this,e,0,[t]),t}closest(t){const e=Qs(t,this);let{parentNode:s}=this;for(;s;){if(e(s))return s;({parentNode:s}=s)}}append(...t){this.safeAppend(t)}safeAppend(t){for(const e of t)this.insertAt(e)}safeReplaceChildren(t){}setText(t,e=0){e+=e<0?this.length:0;const s=this.childNodes[e],{data:r}=s;return s.replaceData(t),r}toString(t,e=""){return this.childNodes.map(s=>s.toString(t)).join(e)}caretPositionFromIndex(t){this.lspError("AstElement.caretPositionFromIndex")}elementFromIndex(t){this.lspError("AstElement.elementFromIndex")}elementFromPoint(t,e){this.lspError("AstElement.elementFromPoint")}lint(t=this.getAbsoluteIndex(),e){}print(t={}){const e=t.class;return this.toString()?(e===""?"":`<span class="wpb-${e!=null?e:this.type}${this.getAttribute("invalid")?" wpb-invalid":""}">`)+qt(this.childNodes,t)+(e===""?"":"</span>"):""}json(t,e=this.getAbsoluteIndex()){this.lspError("AstElement.json")}},Ge=W(Cr),Yt=q(Ge,0,"AstElement",kr,Yt),B(Ge,1,Yt)}}),qs,ll=m({"lib/text.ts"(){"use strict";var t,rn,s;H(),en(),qs=(s=class extends _t{constructor(n){super();$(this,t);lt(this,"data","");this.data=n}get type(){return"text"}toString(n){var i;return n&&!((i=this.parentNode)!=null&&i.getAttribute("built"))?X(this.data):this.data}text(){return this.data}lint(n=this.getAbsoluteIndex(),i){}replaceData(n){E(this,t,rn).call(this,n)}splitText(n){this.lspError("AstText.splitText")}escape(){}print(){return de(this.data)}},t=new WeakSet,rn=function(n){this.setAttribute("data",n)},s)}}),vt,$t=m({"mixin/hidden.ts"(){"use strict";vt=(t=!0,e=!0)=>s=>{class r extends s{text(){return""}lint(i){}}return r}}}),at,ot=m({"mixin/noEscape.ts"(){"use strict";at=t=>{}}}),bt,kt=m({"src/syntax.ts"(){"use strict";var t,e;F(),bt=(e=class extends I{constructor(r,n,i,a,l){super(r,i,a,l);$(this,t);k(this,t,n)}get type(){return c(this,t)}lint(r=this.getAbsoluteIndex()){}},t=new WeakMap,e)}}),ut,wt=m({"mixin/padded.ts"(){"use strict";ut=({length:t})=>e=>{class s extends e{getAttribute(n){return n==="padding"?t:super.getAttribute(n)}}return s}}}),Q,Ct=m({"src/atom.ts"(){"use strict";var t,e;F(),Q=(e=class extends I{constructor(r,n,i,a,l){super(r,i,a,l);$(this,t);k(this,t,n)}get type(){return c(this,t)}set type(r){k(this,t,r)}getAttribute(r){var n;return r==="invalid"?this.type==="converter-flag"&&!!((n=this.parentNode)!=null&&n.isInvalidFlag(this)):super.getAttribute(r)}},t=new WeakMap,e)}}),Ir,Ve,Nr,xt,je=m({"src/link/base.ts"(){"use strict";var t,e,s,r;mt(),wt(),ot(),F(),Ct(),Ir=[at,ut("[[")],xt=(r=class extends(Nr=I){constructor(i,a,l,u=[],d="|"){super(void 0,l,u,{});$(this,t,!0);$(this,e);$(this,s);if(this.insertAt(new Q(i,"link-target",l,u,{})),a!==void 0){const o=new I(a,l,u,{});o.type="link-text",o.setAttribute("stage",Z-1),this.insertAt(o)}k(this,e,d)}get link(){}get fragment(){}afterBuild(){k(this,s,this.getTitle()),c(this,e).includes("\0")&&k(this,e,this.buildFromStr(c(this,e),0)),this.setAttribute("name",c(this,s).title),super.afterBuild()}setAttribute(i,a){i==="bracket"?k(this,t,a):i==="title"?k(this,s,a):super.setAttribute(i,a)}toString(i){const a=super.toString(i,c(this,e));return c(this,t)?`[[${a}]]`:a}text(){const i=super.text("|");return c(this,t)?`[[${i}]]`:i}getAttribute(i){return i==="title"?c(this,s):super.getAttribute(i)}getGaps(i){return i===0?c(this,e).length:1}lint(i=this.getAbsoluteIndex(),a){}getTitle(i,a){return this.normalizeTitle(this.firstChild.text(),0,{halfParsed:a,temporary:i,decode:!0,selfLink:!0})}print(){return super.print(c(this,t)?{pre:"[[",post:"]]",sep:c(this,e)}:{sep:c(this,e)})}json(i,a=this.getAbsoluteIndex()){const l=super.json(void 0,a)}},t=new WeakMap,e=new WeakMap,s=new WeakMap,r),Ve=W(Nr),xt=q(Ve,0,"LinkBaseToken",Ir,xt),B(Ve,1,xt)}}),Fr,Qe,Lr,nt,It=m({"src/nowiki/base.ts"(){"use strict";ot(),F(),Fr=[at],nt=class extends(Lr=I){get innerText(){return this.firstChild.data}constructor(t="",e,s){super(t,e,s)}},Qe=W(Lr),nt=q(Qe,0,"NowikiBaseToken",Fr,nt),B(Qe,1,nt)}}),Er,Xe,Pr,tt,Ut=m({"src/nowiki/noinclude.ts"(){"use strict";$t(),It(),Er=[vt()],tt=class extends(Pr=nt){get type(){return"noinclude"}toString(t){return t?"":super.toString()}},Xe=W(Pr),tt=q(Xe,0,"NoincludeToken",Er,tt),B(Xe,1,tt)}}),nn,ol=m({"src/link/redirectTarget.ts"(){"use strict";je(),Ut(),nn=class extends xt{get type(){return"redirect-target"}constructor(t,e,s,r){super(t,void 0,s,r),e!==void 0&&this.insertAt(new tt(e,s,r))}getTitle(){return this.normalizeTitle(this.firstChild.toString(),0,{halfParsed:!0,decode:!0})}lint(t=this.getAbsoluteIndex()){}}}}),jr,Je,Rr,Zt,ul=m({"src/redirect.ts"(){"use strict";var t,e,s;$t(),ot(),F(),kt(),ol(),jr=[vt(!1,!1),at],Zt=(s=class extends(Rr=I){constructor(n,i,a,l,u,d,o=[]){super(void 0,d,o);$(this,t);$(this,e);k(this,t,n),k(this,e,u),this.append(new bt(i,"redirect-syntax",d,o),new nn(a,l==null?void 0:l.slice(1),d,o))}get type(){return"redirect"}getAttribute(n){return n==="padding"?c(this,t).length:super.getAttribute(n)}toString(n){return c(this,t)+super.toString(n)+c(this,e)}lint(n=this.getAbsoluteIndex()){}print(){return super.print({pre:c(this,t),post:c(this,e)})}},t=new WeakMap,e=new WeakMap,s),Je=W(Rr),Zt=q(Je,0,"RedirectToken",jr,Zt),B(Je,1,Zt)}}),an={};M(an,{parseRedirect:()=>ln});var ln,hl=m({"parser/redirect.ts"(){"use strict";G(),ul(),ln=(t,e,s)=>{var n;(n=e.regexRedirect)!=null||(e.regexRedirect=new RegExp(String.raw`^(\s*)((?:${e.redirection.join("|")})\s*(?::\s*)?)\[\[([^\n|\]]+)(\|.*?)?\]\](\s*)`,"iu"));const r=e.regexRedirect.exec(t);return r&&U.normalizeTitle(r[3],0,!1,e,{halfParsed:!0,temporary:!0,decode:!0}).valid?(t=`\0${s.length}o${t.slice(r[0].length)}`,new Zt(...r.slice(1),e,s),t):!1}}}),Or,Ke,Br,te,dl=m({"src/onlyinclude.ts"(){"use strict";wt(),ot(),F(),Or=[at,ut("<onlyinclude>")],te=class extends(Br=I){get type(){return"onlyinclude"}toString(t){return`<onlyinclude>${super.toString(t)}</onlyinclude>`}isPlain(){return!0}print(){return super.print({pre:'<span class="wpb-ext">&lt;onlyinclude&gt;</span>',post:'<span class="wpb-ext">&lt;/onlyinclude&gt;</span>'})}},Ke=W(Br),te=q(Ke,0,"OnlyincludeToken",Or,te),B(Ke,1,te)}}),xe,Re=m({"mixin/gapped.ts"(){"use strict";xe=(t=1)=>e=>{class s extends e{getGaps(){return t}}return s}}}),qr,Ye,Wr,At,Js=m({"src/tagPair/index.ts"(){"use strict";var t,e;Re(),ot(),F(),qr=[xe(),at],At=(e=class extends(Wr=I){constructor(r,n,i,a,l,u=[]){super(void 0,l);$(this,t);lt(this,"closed");lt(this,"selfClosing");this.setAttribute("name",r.toLowerCase()),k(this,t,[r,a||r]),this.closed=a!=="",this.selfClosing=a===void 0,this.append(n,i);const d=typeof n=="string"?-1:u.indexOf(n);u.splice(d===-1?1/0:d,0,this)}get innerText(){return this.selfClosing?void 0:this.lastChild.text()}toString(r){const{selfClosing:n,firstChild:i,lastChild:a}=this,[l,u]=c(this,t);return n?`<${l}${i.toString(r)}/>`:`<${l}${i.toString(r)}>${a.toString(r)}${this.closed?`</${u}>`:""}`}text(){const[r,n]=c(this,t);return this.selfClosing?`<${r}${this.firstChild.text()}/>`:`<${r}${super.text(">")}${this.closed?`</${n}>`:""}`}getAttribute(r){return r==="padding"?c(this,t)[0].length+1:super.getAttribute(r)}print(){const[r,n]=c(this,t);return super.print(this.selfClosing?{pre:`&lt;${r}`,post:"/&gt;"}:{pre:`&lt;${r}`,sep:"&gt;",post:this.closed?`&lt;/${n}&gt;`:""})}},t=new WeakMap,e),Ye=W(Wr),At=q(Ye,0,"TagPairToken",qr,At),B(Ye,1,At)}}),Ks,on=m({"src/tag/index.ts"(){"use strict";var t,e,s,r;ge(),ht(),G(),F(),Ks=(r=class extends I{constructor(i,a,l,u,d){super(void 0,u,d);$(this,t);$(this,e);$(this,s);this.insertAt(a),k(this,t,l),k(this,e,i)}get closing(){return c(this,t)}toString(i){return`<${c(this,t)?"/":""}${c(this,e)}${super.toString(i)}${this.selfClosing?"/":""}>`}text(i=""){const{closing:a}=this;return`<${a&&!i?"/":""}${c(this,e)}${a?"":super.text()}${i}>`}getAttribute(i){return i==="padding"?c(this,e).length+(c(this,t)?2:1):super.getAttribute(i)}findMatchingTag(){return St(c(this,s),()=>{const{type:i,name:a,parentNode:l,closing:u,selfClosing:d}=this;let o=!1,h=!1;if(i==="html"){const{html:[,S,w]}=this.getAttribute("config");o=w.includes(a),h=S.includes(a)}if(o||h&&d)return this;if(!l)return;const{childNodes:x}=l,g=x.indexOf(this),p=u?x.slice(0,g).reverse():x.slice(g+1),v=[this],{rev:b}=et;for(const S of p)if(!(!S.is(i)||i==="html"&&(S.name!==a||h&&S.selfClosing)))if(c(S,t)===u){if(i==="tvar")return;v.push(S)}else{const w=v.pop();if(w===this)return S;U.viewOnly&&(k(w,s,[b,S]),k(S,s,[b,w]))}if(U.viewOnly)for(const S of v)k(S,s,[b,void 0])},i=>{k(this,s,i),i[1]&&i[1]!==this&&k(i[1],s,[et.rev,this])})}print(i){return super.print({pre:`&lt;${c(this,t)?"/":""}${c(this,e)}`,post:"&gt;",...i})}},t=new WeakMap,e=new WeakMap,s=new WeakMap,r)}}),Mr,Ze,Ur,ft,cl=m({"src/tag/tvar.ts"(){"use strict";$t(),on(),kt(),Mr=[vt()],ft=class extends(Ur=Ks){get type(){return"tvar"}get closing(){return super.closing}constructor(t,e,s,r,n){const i=new bt(e,"tvar-name",r,n);super(t,i,s,r,n)}print(){return super.print({class:"noinclude"})}},Ze=W(Ur),ft=q(Ze,0,"TvarToken",Mr,ft),B(Ze,1,ft)}}),un,pl=m({"src/tagPair/translate.ts"(){"use strict";var t,hn,s;F(),Js(),kt(),cl(),un=(s=class extends At{constructor(n,i,a,l=[]){const u=new bt(n,"translate-attr",a,l);i=i==null?void 0:i.replace(/<tvar(\|[^>]+)>([\s\S]*?)<\/>/gu,(o,h,x)=>(new ft("tvar",h,!1,a,l),new ft("","",!0,a,l),`\0${l.length-2}n${x}\0${l.length}n`)).replace(/<(tvar)(\s+name\s*=(?:\s*(?:(["'])[\s\S]*?\3|[^"'\s>]+))?\s*)>([\s\S]*?)<\/(tvar)(\s*)>/giu,(o,h,x,g,p,v,b)=>(new ft(h,x,!1,a,l),new ft(v,b,!0,a,l),`\0${l.length-2}n${p}\0${l.length}n`));const d=new I(i,a,l);d.type="translate-inner";super("translate",u,d,"translate",a,l);$(this,t);this.seal("closed",!0),this.seal("selfClosing",!0)}get type(){return"translate"}toString(n){return n?this.lastChild.toString(!0):super.toString()}text(){return this.lastChild.text()}print(){return`<span class="wpb-ext">&lt;translate${E(this,t,hn).call(this)?'<span class="wpb-ext-attrs"> <span class="wpb-ext-attr"><span class="wpb-attr-key">nowrap</span></span></span>':""}&gt;${this.lastChild.print({class:"ext-inner"})}&lt;/translate&gt;</span>`}},t=new WeakSet,hn=function(){return this.firstChild.toString()===" nowrap"},s)}}),Dr,ts,zr,ee,gl=m({"src/tagPair/include.ts"(){"use strict";$t(),Js(),Dr=[vt(!1)],ee=class extends(zr=At){get type(){return"include"}constructor(t,e="",s,r,n,i){super(t,e,s!=null?s:"",s===void 0||r!=null?r:"",n,i)}toString(t){return t?"":super.toString()}lint(t=this.getAbsoluteIndex()){}},ts=W(zr),ee=q(ts,0,"IncludeToken",Dr,ee),B(ts,1,ee)}}),Oe,Ys=m({"mixin/attributesParent.ts"(){"use strict";Oe=(t=0)=>e=>{var r,dn;class s extends e{constructor(){super(...arguments);$(this,r)}hasAttr(l){this.lspError("AttributesParent.hasAttr")}getAttr(l){return E(this,r,dn).call(this).getAttr(l)}}return r=new WeakSet,dn=function(){return this.childNodes[t]},s}}}),J,es,ss,rs,Hr,is,Qt,Gr,Vr,Qr,be,ns,rt,cn,pn,gn,xl=m({"util/sharable.ts"(){"use strict";J=new Set(["align"]),es=new Set(["cite"]),ss=new Set(["cite","datetime"]),rs=new Set(["width"]),Hr=new Set(["axis","align","bgcolor","height","width","valign"]),is=new Set([...Hr,"abbr","headers","scope","rowspan","colspan"]),Qt=new Set(["type"]),Gr=new Set(["summary","align","bgcolor","cellpadding","cellspacing","frame","rules","width"]),Vr=new Set(["clear"]),Qr=new Set(["bgcolor","align","valign"]),be=new Set(["qid","forcemathmode","type","display"]),ns=new Set(["enclose","inline","lang","line","linelinks","style","class","id","dir","copy","highlight","start"]),rt=new Set,cn=new Set(["id","class","style","lang","dir","title","tabindex","aria-describedby","aria-flowto","aria-hidden","aria-label","aria-labelledby","aria-level","aria-owns","role","about","property","resource","datatype","typeof","itemid","itemprop","itemref","itemscope","itemtype"]),pn={div:J,h1:J,h2:J,h3:J,h4:J,h5:J,h6:J,blockquote:es,q:es,p:J,br:Vr,pre:rs,ins:ss,del:ss,ul:Qt,ol:new Set(["type","start","reversed"]),li:new Set(["type","value"]),table:new Set([...Gr,"border"]),caption:J,tr:Qr,td:is,th:is,font:new Set(["size","color","face"]),hr:rs,data:new Set(["value"]),time:new Set(["datetime"]),meta:new Set(["itemprop","content"]),link:new Set(["itemprop","href","title"]),gallery:Qt,poem:J,categorytree:J,combooption:J,math:rt,chem:rt,ce:rt,img:new Set(["alt","src","width","height","loading","srcset"])},gn={gallery:new Set(["mode","showfilename","caption","perrow","widths","heights","showthumbnails"]),poem:new Set(["compact"]),categorytree:new Set(["hideroot","onlyroot","depth","mode","hideprefix","namespaces","showcount","notranslations"]),combooption:new Set(["name","for","inline"]),nowiki:rt,indicator:new Set(["name"]),langconvert:new Set(["from","to"]),ref:new Set(["group","name","follow","dir","details"]),references:new Set(["group","responsive"]),charinsert:new Set(["label"]),choose:new Set(["uncached","before","after"]),option:new Set(["weight"]),imagemap:rt,inputbox:rt,templatestyles:new Set(["src","wrapper"]),dynamicpagelist:rt,poll:new Set(["id","show-results-before-voting"]),sm2:Qt,flashmp3:Qt,score:new Set(["line_width_inches","lang","override_midi","raw","note-language","override_audio","override_ogg","sound","vorbis"]),seo:new Set(["title","title_mode","title_separator","keywords","description","robots","google_bot","image","image_width","image_height","image_alt","type","site_name","locale","section","author","published_time","twitter_site"]),tab:new Set(["nested","name","index","class","block","inline","openname","closename","collapsed","dropdown","style","bgcolor","container","id","title"]),tabs:new Set(["plain","class","container","id","title","style"]),combobox:new Set(["placeholder","value","id","class","text","dropdown","style"]),math:new Set([...be,"chem"]),chem:be,ce:be,hiero:rt,phonos:new Set(["ipa","class","text","lang","wikibase","file"]),section:new Set(["begin","end"]),source:ns,syntaxhighlight:ns,templatedata:rt,timeline:new Set(["method","font"]),quiz:new Set(["display","shuffleanswers","points","shuffle","case"]),languages:rt}}}),Xr,Jr,Kr,Yr,Ws,fl=m({"src/attribute.ts"(){"use strict";var t,e,s,r,n,xn,fn,l;ge(),H(),mt(),xl(),G(),F(),Ct(),Xr=/expression|(?:accelerator|-o-link(?:-source)?|-o-replace)\s*:|(?:url|src|image(?:-set)?)\s*\(|attr\s*\([^)]+[\s,]url/u,Jr=/(?:^|\s|\*\/)(?:javascript|vbscript)(?:\W|$)/iu,Kr=new Set(["ext","arg","magic-word","template"]),Yr=new Set(["about","property","resource","datatype","typeof","itemid","itemprop","itemref","itemscope","itemtype"]),Ws=(l=class extends I{constructor(d,o,h,x="",g,p=[],v=U.getConfig(),b=[]){const S=new Q(h,"attr-key",v,b);let w;if(h==="title"||o==="img"&&h==="alt")w=new I(g,v,b,{}),w.type="attr-value",w.setAttribute("stage",Z-1);else if(o==="gallery"&&h==="caption"||o==="choose"&&(h==="before"||h==="after")){const C={...v,excludes:[...v.excludes,"heading","html","table","hr","list"]};w=new I(g,C,b,{}),w.type="attr-value",w.setAttribute("stage",1)}else w=new Q(g,"attr-value",v,b,{});super(void 0,v,b);$(this,n);$(this,t);$(this,e);$(this,s);$(this,r);k(this,t,d),this.append(S,w),k(this,s,x),k(this,r,[...p]),k(this,e,o),this.setAttribute("name",Bt(X(h)))}get type(){return c(this,t)}get tag(){return c(this,e)}get balanced(){return!c(this,s)||c(this,r)[0]===c(this,r)[1]}afterBuild(){c(this,s).includes("\0")&&k(this,s,this.buildFromStr(c(this,s),0)),this.parentNode&&k(this,e,this.parentNode.name),E(this,n,xn).call(this),super.afterBuild()}toString(d){const[o="",h=""]=c(this,r);return c(this,s)?super.toString(d,c(this,s)+o)+h:this.firstChild.toString(d)}text(){return c(this,s)?`${super.text(`${c(this,s).trim()}"`)}"`:this.firstChild.text()}getGaps(){var d,o;return c(this,s)?c(this,s).length+((o=(d=c(this,r)[0])==null?void 0:d.length)!=null?o:0):0}lint(d=this.getAbsoluteIndex(),o){}getValue(){return c(this,s)?this.lastChild.text().trim():this.type==="ext-attr"||""}escape(){}getAttribute(d){return d==="invalid"?E(this,n,fn).call(this):super.getAttribute(d)}print(){const[d="",o=""]=c(this,r);return c(this,s)?super.print({sep:de(c(this,s))+d,post:o}):super.print()}json(d,o=this.getAbsoluteIndex()){const h=super.json(void 0,o)}},t=new WeakMap,e=new WeakMap,s=new WeakMap,r=new WeakMap,n=new WeakSet,xn=function(){this.setAttribute("name",Bt(this.firstChild.text()))},fn=function(d,o){const{firstChild:h,lastChild:x,type:g,name:p,tag:v,parentNode:b}=this,S=!x.childNodes.some(({type:y})=>Kr.has(y)),w=this.getValue(),C=gn[v],_=pn[v],{length:N}=this.toString();let j="illegal-attr",f,A;if(!(C!=null&&C.has(p))&&!(_!=null&&_.has(p))&&(g==="ext-attr"?C||_:!/\{\{[^{]+\}\}/u.test(p))&&(g==="ext-attr"&&!_||!/^(?:xmlns:[\w:.-]+|data-(?!ooui|mw|parsoid)[^:]*)$/u.test(p)&&(v==="meta"||v==="link"||!cn.has(p)))||(p==="itemtype"||p==="itemid"||p==="itemref")&&!(b!=null&&b.hasAttr("itemscope"))){if(d===void 0)return!0}else if(p==="style"&&typeof w=="string"&&Xr.test(w)){if(d===void 0)return!0}else if(p==="tabindex"&&typeof w=="string"&&w!=="0"){if(d===void 0)return!0}else if(typeof w=="string"&&((/^xmlns:[\w:.-]+$/u.test(p)||Yr.has(p))&&Jr.test(w)||S&&(p==="href"||v==="img"&&p==="src")&&!new RegExp(String.raw`^(?:${this.getAttribute("config").protocol}|//)\S+$`,"iu").test(w))){if(d===void 0)return!0}else if(S&&g!=="ext-attr"){const y=Yi(v,p),T=String(w).toLowerCase();if(y.length>0&&y.every(O=>O!==T)&&d===void 0)return!0}return!1},l)}}),as,Zr,Be,Zs=m({"src/attributes.ts"(){"use strict";var t,e,Ms,r;H(),F(),Ct(),fl(),as=n=>n.slice(0,-1),Zr=n=>`${as(n)}-dirty`,Be=(r=class extends I{constructor(i,a,l,u,d=[]){super(void 0,u,d,{});$(this,e);$(this,t);if(k(this,t,a),this.setAttribute("name",l),i){const o=/([^\s/](?:(?!\0\d+~\x7F)[^\s/=])*)(?:((?:\s(?:\s|\0\d+[cn]\x7F)*)?(?:=|\0\d+~\x7F)(?:\s|\0\d+[cn]\x7F)*)(?:(["'])([\s\S]*?)(\3|$)|(\S*)))?/gu;let h="",x=o.exec(i),g=0;const p=(()=>{h&&(super.insertAt(new Q(h,Zr(a),u,d,{})),h="")});for(;x;){const{index:v,0:b,1:S,2:w,3:C,4:_,5:N,6:j}=x;if(h+=i.slice(g,v),/^(?:[\w:]|\0\d+t\x7F)(?:[\w:.-]|\0\d+t\x7F)*$/u.test(X(S).trim())){const f=_!=null?_:j,A=[C,N],y=new Ws(as(a),l,S,w,f,A,u,d);p(),super.insertAt(y)}else h+=b;({lastIndex:g}=o),x=o.exec(i)}h+=i.slice(g),p()}}get type(){return c(this,t)}afterBuild(){const{parentNode:i}=this;i!=null&&i.is("td")&&this.setAttribute("name",i.subtype),super.afterBuild()}getAttrTokens(i){return this.childNodes.filter(a=>a instanceof Ws&&(!i||a.name===Bt(i)))}hasAttr(i){return this.getAttrTokens(i).length>0}getAttrToken(i){const a=this.getAttrTokens(i);return a[a.length-1]}getAttr(i){var a;return(a=this.getAttrToken(i))==null?void 0:a.getValue()}lint(i=this.getAbsoluteIndex(),a){}getAttribute(i){return i==="invalid"?E(this,e,Ms).call(this):super.getAttribute(i)}print(){return this.toString()?`<span class="wpb-${this.type}${E(this,e,Ms).call(this)?" wpb-invalid":""}">${this.childNodes.map(i=>i.print(i instanceof Q?{class:i.toString().trim()&&"attr-dirty"}:void 0)).join("")}</span>`:""}},t=new WeakMap,e=new WeakSet,Ms=function(){const{parentNode:i}=this;return(i==null?void 0:i.type)==="html"&&i.closing&&this.text().trim()!==""},r)}}),mn={};M(mn,{PreToken:()=>vn});var vn,ml=m({"src/pre.ts"(){"use strict";mt(),F(),Ut(),vn=class extends I{get type(){return"ext-inner"}constructor(t,e,s=[]){if(t){const r=/<nowiki>/giu,n=/<\/nowiki>/giu,{length:i}=r.source;let a=r.exec(t);a&&(n.lastIndex=a.index+i);let l=n.exec(t),u=0,d="";for(;a&&l;)new tt(a[0],e,s,!0),new tt(l[0],e,s,!0),d+=`${t.slice(u,a.index)}\0${s.length-1}n${t.slice(a.index+i,l.index)}\0${s.length}n`,u=l.index+i+1,r.lastIndex=u,a=r.exec(t),a&&(n.lastIndex=a.index+i),l=n.exec(t);t=d+t.slice(u)}super(t,e,s,{}),this.setAttribute("stage",Z-1)}isPlain(){return!0}lint(t=this.getAbsoluteIndex()){}}}}),qe,tr=m({"src/multiLine/index.ts"(){"use strict";F(),qe=class extends I{get type(){return"ext-inner"}toString(t){return super.toString(t,`
`)}text(){return super.text(`
`).replace(/\n\s*\n/gu,`
`)}getGaps(){return 1}print(){return super.print({sep:`
`})}}}}),bn,vl=m({"src/paramLine.ts"(){"use strict";F(),bn=class extends I{get type(){return"param-line"}}}}),wn={};M(wn,{ParamTagToken:()=>er});var er,_n=m({"src/multiLine/paramTag.ts"(){"use strict";Me(),G(),tr(),vl(),er=class extends qe{constructor(t,e,s=U.getConfig(),r=[],n){super(void 0,s,r,{}),e&&this.append(...e.split(`
`).map(i=>n?i:fe(i,s,r,t)).map(i=>new bn(i,s,r,{}))),r.splice(r.indexOf(this),1),r.push(this)}lint(t=this.getAbsoluteIndex()){}}}}),ti,ls,ei,Lt,An=m({"src/heading.ts"(){"use strict";var t,e,$e,r;ot(),F(),kt(),ti=[at],Lt=(r=class extends(ei=I){constructor(i,a,l,u=[]){super(void 0,l,u);$(this,e);$(this,t);k(this,t,i);const d=new I(a[0],l,u);d.type="heading-title",d.setAttribute("stage",2);const o=new bt(a[1],"heading-trail",l,u);this.append(d,o)}get type(){return"heading"}get level(){return c(this,t)}toString(i){const a=E(this,e,$e).call(this);return a+this.firstChild.toString(i)+a+this.lastChild.toString(i)}text(){const i=E(this,e,$e).call(this);return i+this.firstChild.text()+i}getAttribute(i){return i==="invalid"?this.inHtmlAttrs()===2:i==="padding"?this.level:super.getAttribute(i)}getGaps(){return this.level}lint(i=this.getAbsoluteIndex(),a){}print(){const i=E(this,e,$e).call(this);return super.print({pre:i,sep:i})}json(i,a=this.getAbsoluteIndex()){const l=super.json(void 0,a)}},t=new WeakMap,e=new WeakSet,$e=function(){return"=".repeat(this.level)},r),ls=W(ei),Lt=q(ls,0,"HeadingToken",ti,Lt),B(ls,1,Lt)}}),yn,bl=m({"src/parameter.ts"(){"use strict";F(),yn=class extends I{get type(){return"parameter"}get anon(){return this.firstChild.length===0}get duplicated(){}constructor(t,e,s,r=[]){super(void 0,s,r);const n=new I(typeof t=="number"?void 0:t,s,r,{}),i=new I(e,s,r);n.type="parameter-key",n.setAttribute("stage",2),i.type="parameter-value",i.setAttribute("stage",2),this.append(n,i)}trimName(t,e=!0){const s=(typeof t=="string"?t:t.toString(!0)).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1");return this.setAttribute("name",s),s}afterBuild(){if(!this.anon){const{parentNode:t,firstChild:e}=this,s=this.trimName(e);t&&t.getArgs(s,!1,!1).add(this)}super.afterBuild()}toString(t){return this.anon?this.lastChild.toString(t):super.toString(t,"=")}text(){return this.anon?this.lastChild.text():super.text("=")}getGaps(){return this.anon?0:1}lint(t=this.getAbsoluteIndex(),e){}print(){return super.print({sep:this.anon?"":"="})}json(t,e=this.getAbsoluteIndex()){const s=super.json(void 0,e)}}}}),si,os,ri,Et,wl=m({"src/transclude.ts"(){"use strict";var t,e,s,r,n,i,Us,Sn,u;H(),ht(),Re(),ot(),F(),bl(),Ct(),kt(),si=[at,xe()],Et=(u=class extends(ri=I){constructor(o,h,x,g=[]){var T,O;let p;const v=/^(?:\s|\0\d+[cn]\x7F)*\0(\d+)h\x7F(?:\s|\0\d+[cn]\x7F)*/u.exec(o);v&&(p=Number(v[1]),o=o.replace(`\0${p}h`,g[p].toString().replace(/^\n/u,"")));super(void 0,x,g,{});$(this,i);lt(this,"modifier","");$(this,t,"template");$(this,e,":");$(this,s,!1);$(this,r,new Map);$(this,n);const{parserFunction:[b,S],variable:w,functionHook:C}=x,_=(T=/^(?:\s|\0\d+[cn]\x7F)*\0\d+s\x7F/u.exec(o))==null?void 0:T[0];if(_)this.setAttribute("modifier",_),o=o.slice(_.length);else if(o.includes(":")){const[P,...L]=o.split(":"),[z]=/^(?:\s|\0\d+[cn]\x7F)*/u.exec((O=L[0])!=null?O:"");this.setModifier(`${P}:${z}`)&&(o=L.join(":").slice(z.length))}const N=o.search(/[:：]/u),j=o[N]==="：",f=N!==-1;if(f||h.length===0&&!c(this,s)){const P=f?o.slice(0,N):o,L=f&&o.slice(N+1),z=X(P),V=f?z.slice(z.search(/\S/u))+(j?"：":""):z.trim(),Nt=V.toLowerCase(),dt=Array.isArray(S),st=dt?S.includes(V):Object.prototype.hasOwnProperty.call(S,V),ct=!dt&&st?S[V]:Object.prototype.hasOwnProperty.call(b,Nt)&&b[Nt],Ue=dt&&st||!("functionHook"in x)||C.includes(ct),Da=dt&&st||w.includes(ct);if(f?ct&&Ue:Da){this.setAttribute("name",ct||Nt.replace(/^#|：$/u,"")),k(this,t,"magic-word"),j&&k(this,e,"：");const za=new bt(P,"magic-word-name",x,g);if(super.insertAt(za),L!==!1&&h.unshift([L]),this.name==="invoke")for(let De=0;De<2;De++){const gr=h.shift();if(!gr)break;const Ha=new Q(gr.join("="),`invoke-${De?"function":"module"}`,x,g);super.insertAt(Ha)}}}if(this.type==="template"){const P=X(o).trim();if(!this.normalizeTitle(P,10,{halfParsed:!0,temporary:!0}).valid)throw g.pop(),new SyntaxError("Invalid template name");const L=new Q(o,"template-name",x,g,{});super.insertAt(L)}typeof p=="number"&&(g[p]=void 0);const A=this.isTemplate();let y=1;for(let P=0;P<h.length;P++){const L=h[P];A||this.name==="switch"&&P>0||this.name==="tag"&&P>1||(L[0]=L.join("="),L.length=1),L.length===1&&(L.unshift(y),y++),this.insertAt(new yn(...L,x,g))}this.seal("modifier")}get type(){return c(this,t)}get module(){}get function(){}setModifier(o){const{parserFunction:[,,h,x]}=this.getAttribute("config"),g=X(o).trim();if(o&&!g.endsWith(":"))return!1;const p=g.slice(0,-1).toLowerCase(),v=h.includes(p),b=x.includes(p);return c(this,s)&&v||!c(this,s)&&(b||!o)||(et.running||this.length>1)&&(v||b||!o)?(this.setAttribute("modifier",o),k(this,s,v),!!o):!1}isTemplate(){return this.type==="template"||this.name==="invoke"}afterBuild(){this.modifier.includes("\0")&&this.setAttribute("modifier",this.buildFromStr(this.modifier,0)),super.afterBuild(),this.isTemplate()&&this.type==="template"&&(k(this,n,E(this,i,Us).call(this)),this.setAttribute("name",c(this,n).title))}toString(o){const{childNodes:h,length:x,firstChild:g,modifier:p,type:v}=this;return`{{${p}${v==="magic-word"?g.toString(o)+(x===1?"":c(this,e))+h.slice(1).map(b=>b.toString(o)).join("|"):super.toString(o,"|")}}}`}text(){const{childNodes:o,length:h,firstChild:x,modifier:g,type:p,name:v}=this;return p==="magic-word"&&v==="vardefine"?"":`{{${g}${p==="magic-word"?x.text()+(h===1?"":c(this,e))+Tt(o.slice(1),"|"):super.text("|")}}}`}getAttribute(o){switch(o){case"padding":return this.modifier.length+2;case"title":return c(this,n);case"colon":return c(this,e);case"invalid":return this.type==="magic-word"&&this.name==="invoke"&&(this.length===2||!E(this,i,Us).call(this).valid);default:return super.getAttribute(o)}}lint(o=this.getAbsoluteIndex(),h){}insertAt(o,h=this.length){return super.insertAt(o,h),o.anon?E(this,i,Sn).call(this,o):o.name&&this.getArgs(o.name,!1,!1).add(o),o}getAllArgs(){return this.childNodes.filter(cr("parameter"))}getAnonArgs(){return this.getAllArgs().filter(({anon:o})=>o)}getArgs(o,h,x=!0){const g=String(o).replace(/^[ \t\n\0\v]+|([^ \t\n\0\v])[ \t\n\0\v]+$/gu,"$1");let p;return c(this,r).has(g)?p=c(this,r).get(g):(p=new Set(this.getAllArgs().filter(({name:v})=>g===v)),c(this,r).set(g,p)),p}getDuplicatedArgs(){return[...c(this,r)].filter(([,{size:o}])=>o>1).map(([o,h])=>[o,[...h]])}getPossibleValues(){const{type:o,name:h,childNodes:x}=this;if(o==="template")throw new Error("TranscludeToken.getPossibleValues method is only for specific magic words!");let g,p;switch(h){case"if":case"ifexist":case"ifexpr":case"iferror":g=2;break;case"ifeq":g=3;break;case"switch":{const v=x.slice(2),b=v[v.length-1];p=[...v.filter(({anon:S})=>!S),...b!=null&&b.anon?[b]:[]].map(({lastChild:S})=>S);break}default:throw new Error("TranscludeToken.getPossibleValues method is only for specific magic words!")}p!=null||(p=x.slice(g,g+2).map(({lastChild:v})=>v));for(let v=0;v<p.length;){const{length:b,0:S}=p[v].childNodes.filter(w=>w.text().trim());if(b===0)p.splice(v,1);else if(b>1||S.type!=="magic-word")v++;else try{const w=S.getPossibleValues();p.splice(v,1,...w),v+=w.length}catch{v++}}return p}print(){const{childNodes:o,length:h,firstChild:x,modifier:g,type:p}=this;return`<span class="wpb-${p}${this.getAttribute("invalid")?" wpb-invalid":""}">{{${p==="magic-word"?de(g)+x.print()+(h===1?"":c(this,e))+qt(o.slice(1),{sep:"|"}):(g?`<span class="wpb-magic-word">${de(g)}</span>`:"")+qt(o,{sep:"|"})}}}</span>`}},t=new WeakMap,e=new WeakMap,s=new WeakMap,r=new WeakMap,n=new WeakMap,i=new WeakSet,Us=function(){const o=this.type==="template";return this.normalizeTitle(this.childNodes[o?0:1].text(),o?10:828,{temporary:!0})},Sn=function(o){const h=this.getAnonArgs(),x=typeof o!="number";for(let g=x?h.indexOf(o):o-1;g<h.length;g++){const p=h[g],{name:v}=p,b=String(g+1);(v!==b||p===o)&&(p.setAttribute("name",b),this.getArgs(b,!1,!1).add(p))}},u),os=W(ri),Et=q(os,0,"TranscludeToken",si,Et),B(os,1,Et)}}),ii,us,ni,se,_l=m({"src/hidden.ts"(){"use strict";$t(),F(),ii=[vt()],se=class extends(ni=I){get type(){return"hidden"}getAttribute(t){return t==="invalid"||super.getAttribute(t)}},us=W(ni),se=q(us,0,"HiddenToken",ii,se),B(us,1,se)}}),ai,hs,li,re,Al=m({"src/arg.ts"(){"use strict";var t,yl,s;H(),wt(),Re(),ot(),F(),Ct(),_l(),ai=[at,ut("{{{"),xe()],re=(s=class extends(li=I){constructor(n,i,a=[]){super(void 0,i,a,{});$(this,t);for(let l=0;l<n.length;l++){const u=n[l];if(l===0){const d=new Q(u,"arg-name",i,a,{});super.insertAt(d)}else if(l>1){const d=new se(u,i,a);super.insertAt(d)}else{const d=new I(u,i,a);d.type="arg-default",d.setAttribute("stage",2),super.insertAt(d)}}}get type(){return"arg"}get default(){}toString(n){return`{{{${super.toString(n,"|")}}}}`}text(){return`{{{${Tt(this.childNodes.slice(0,2),"|")}}}}`}afterBuild(){super.afterBuild()}lint(n=this.getAbsoluteIndex(),i){}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}json(n,i=this.getAbsoluteIndex()){const a=super.json(void 0,i)}},t=new WeakSet,yl=function(){},s),hs=W(li),re=q(hs,0,"ArgToken",ai,re),B(hs,1,re)}}),Tn={};M(Tn,{parseBraces:()=>We});var oi,ds,we,cs,ps,gs,ui,xs,We,sr=m({"parser/braces.ts"(){"use strict";pe(),H(),An(),wl(),Al(),oi={"=":String.raw`\n(?!(?:[^\S\n]|\0\d+[cn]\x7F)*\n)`,"{":String.raw`\}{2,}|\|`,"-":String.raw`\}-`,"[":String.raw`\]\]`},ds=String.raw`\[(?!\[)`,we=String.raw`\n(?![=\0])`,cs=String.raw`|\{{2,}`,ps=new Map([["!","!"],["!!","+"],["(!","{"],["!)","}"],["!-","-"],["=","~"],["server","m"]]),gs=oe(t=>new RegExp(t,"gmu")),ui=new RegExp(String.raw`\{\{((?:[^\n{}[]|${ds}|${we})*)\}\}(?!\})`+"|"+String.raw`\[\[(?:[^\n[\]{]|${we})*\]\]`+"|"+String.raw`-\{(?:[^\n{}[]|${ds}|${we})*\}-`,"gu"),xs=t=>{const e=Bt(X(t));return ps.has(e)?ps.get(e):/^(?:filepath|(?:full|canonical)urle?):./u.test(e)?"m":/^#vardefine:./u.test(e)?"n":"t"},We=(t,e,s)=>{var p,v,b,S,w;const r=String.raw`${e.excludes.includes("heading")?"":String.raw`^((?:\0\d+[cno]\x7F)*)={1,6}|`}\[\[|-\{(?!\{)`,{parserFunction:[,,,n]}=e,i=[],a=[],l=(C,_,N,j)=>{_[_.length-1].push(Y(C.slice(N,j),a))};let u;do u!==void 0&&(t=u),u=t.replace(ui,(C,_,N)=>{if(_!==void 0||typeof N=="string")try{const{length:j}=s,f=(_!=null?_:N).split("|");return new Et(Y(f[0],a),f.slice(1).map(A=>{const y=A.indexOf("=");return(y===-1?[A]:[A.slice(0,y),A.slice(y+1)]).map(T=>Y(T,a))}),e,s),`\0${j}${xs(f[0])}`}catch(j){if(!(j instanceof SyntaxError)||j.message!=="Invalid template name")throw j}return a.push(Y(C,a)),`\0${a.length-1}`});while(u!==t);t=u;const d=t.lastIndexOf("}}")-t.length;let o=d+t.length!==-1,h=gs(r+(o?cs:"")),x=h.exec(t),g;for(;x||g!==void 0&&g<=t.length&&((v=(p=i[i.length-1])==null?void 0:p[0])!=null&&v.startsWith("="));){if(x!=null&&x[1]){const[,{length:L}]=x;x[0]=x[0].slice(L),x.index+=L}const{0:C,index:_}=x!=null?x:{0:`
`,index:t.length},N=(b=i.pop())!=null?b:{},{0:j,index:f,parts:A,findEqual:y,pos:T}=N,O=C==="="&&y;if(C==="]]"||C==="}-")g=_+2;else if(C===`
`){g=_+1;const{pos:L,findEqual:z}=(S=i[i.length-1])!=null?S:{};if(L===void 0||z||X(t.slice(L,f))!==""){const V=/^(={1,6})(.+)\1((?:\s|\0\d+[cn]\x7F)*)$/u.exec(t.slice(f,_));V&&(V[2]=Y(V[2],a),V[2].includes(`
`)||(t=`${t.slice(0,f)}\0${s.length}h${t.slice(_)}`,g=f+4+String(s.length).length,new Lt(V[1].length,V.slice(2),e,s)))}}else if(C==="|"||O)g=_+1,l(t,A,T,_),C==="|"&&A.push([]),N.pos=g,N.findEqual=C==="|",i.push(N);else if(C.startsWith("}}")){const L=C.slice(0,Math.min(j.length,3)),z=j.length-L.length,{length:V}=s;g=_+L.length,l(t,A,T,_);let Nt=!1,dt="t";if(L.length===3){const st=A.map(Ue=>Ue.join("=")),ct=st.length>1&&X(st[1]).trim();new re(st,e,s),ct&&ct.endsWith(":")&&n.includes(ct.slice(0,-1).toLowerCase())&&(dt="s")}else try{new Et(A[0][0],A.slice(1),e,s),dt=xs(A[0][0])}catch(st){if(st instanceof SyntaxError&&st.message==="Invalid template name")Nt=!0;else throw st}Nt||(t=`${t.slice(0,f+z)}\0${V}${dt}${t.slice(g)}`,g=f+z+3+String(V).length,z>1?i.push({0:j.slice(0,z),index:f,pos:f+z,parts:[[]]}):z===1&&t[f-1]==="-"&&i.push({0:"-{",index:f-1,pos:f+1,parts:[[]]}))}else g=_+C.length,C.startsWith("{")&&(x.pos=g,x.parts=[[]]),i.push(..."0"in N?[N]:[],x);let P=i[i.length-1];if(o&&d+t.length<g)for(o=!1;(w=P==null?void 0:P[0])!=null&&w.startsWith("{");)i.pop(),P=i[i.length-1];h=gs(r+(o?cs:"")+(P?`|${oi[P[0][0]]}${P.findEqual?"|=":""}`:"")),h.lastIndex=g,x=h.exec(t)}return Y(t,a)}}}),$n={};M($n,{InputboxToken:()=>kn});var kn,Sl=m({"src/multiLine/inputbox.ts"(){"use strict";Me(),sr(),G(),_n(),kn=class extends er{constructor(t,e,s=U.getConfig(),r=[]){const n=Symbol("InputboxToken"),i=s.excludes.includes("heading")?s:{...s,excludes:[...s.excludes,"heading"]},{length:a}=r;r.push(n),e&&(e=fe(e,i,r,t)),e&&(e=We(e,i,r)),r.splice(a,1),super(t,e,i,r,{})}}}}),ke={};M(ke,{NestedToken:()=>Cn});var Cn,fs=m({"src/nested.ts"(){"use strict";var t,e,s;Me(),sr(),F(),Kn(),Ut(),Cn=(s=class extends I{constructor(n,i,a,l,u=[]){if(typeof i=="boolean"){const d=Symbol("NestedToken"),{length:o}=u;u.push(d),n&&(n=fe(n,l,u,i)),n&&(n=We(n,l,u)),u.splice(o,1)}else n&&(n=n.replace(i,(d,o,h,x,g)=>{const p=`\0${u.length+1}e`;return new Ot(o,h,x,g,l,!1,u),p}));n&&(n=n.replace(/(^|\0\d+.\x7F)([^\0]+)(?=$|\0\d+.\x7F)/gu,(d,o,h)=>(new tt(h,l,u),`${o}\0${u.length}n`)));super(n,l,u);$(this,t);$(this,e);k(this,t,[...a]),k(this,e,i)}get type(){return"ext-inner"}lint(n=this.getAbsoluteIndex(),i){}},t=new WeakMap,e=new WeakMap,s)}});function hi(t,e,s,r,n){e=X(e).trim();let i=e.replace(t==="link"?/\0\d+[tq]\x7F/gu:/\0\d+t\x7F/gu,"").trim();switch(t){case"width":return!i&&!!e||/^(?:\d+x?|\d*x\d+)(?:\s*px)?$/u.test(i);case"link":{if(i){if(In(s.protocol).test(i))return Nn(s.protocol).test(i)&&e;i.startsWith("[[")&&i.endsWith("]]")&&(i=i.slice(2,-2))}else return e;const a=U.normalizeTitle(i,0,!1,s,{halfParsed:r,decode:!0,selfLink:!0});return a.valid&&a}case"lang":return(n==="svg"||n==="svgz")&&!/[^a-z\d-]/u.test(i);case"alt":case"class":case"manualthumb":return!0;case"page":return(n==="djvu"||n==="djv"||n==="pdf")&&Number(i)>0;default:return!!i&&!isNaN(i)}}var In,Nn,di,ci,Fn,Tl=m({"src/imageParameter.ts"(){"use strict";var t,e,Ln,n;pe(),H(),mt(),G(),F(),In=oe(i=>new RegExp(String.raw`^(?:${i}|//|\0\d+m\x7F)`,"iu")),Nn=oe(i=>new RegExp(String.raw`^(?:(?:${i}|//)${ue}|\0\d+m\x7F)${he}$`,"iu")),di=oe(i=>new RegExp(String.raw`^(\s*(?!\s))${i.replace("$1","(.*)")}${i.endsWith("$1")?`(?=$|
)`:""}(\s*)$`,"u")),ci=new Set(["alt","link","lang","page","caption"]),Fn=(n=class extends I{constructor(a,l,u,d){var i=(...r)=>(super(...r),$(this,e),$(this,t,""),this);let o;const h=Object.entries(u.img).map(([g,p])=>[g,p,di(g)]),x=h.find(([,g,p])=>(o=p.exec(a),o&&(o.length!==4||hi(g,o[2],u,!0,l)!==!1)));if(x&&o){o.length===3?(i(void 0,u,d),k(this,t,a)):(i(o[2],u,d,{}),k(this,t,o[1]+x[0]+o[3])),this.setAttribute("name",x[1]),x[1]==="alt"&&this.setAttribute("stage",Z-1);return}i(a,u.excludes.includes("list")?u:{...u,excludes:[...u.excludes,"list"]},d),this.setAttribute("name","caption"),this.setAttribute("stage",7)}get type(){return"image-parameter"}get link(){return this.name==="link"?hi("link",super.text(),this.getAttribute("config")):void 0}afterBuild(){var a;(a=this.parentNode)!=null&&a.is("gallery-image")&&!ci.has(this.name)&&this.setAttribute("name","invalid"),super.afterBuild()}toString(a){return c(this,t)?c(this,t).replace("$1",super.toString(a)):super.toString(a)}text(){return c(this,t)?c(this,t).replace("$1",super.text()).trim():super.text().trim()}isPlain(){return this.name==="caption"||this.name==="alt"}getAttribute(a){return a==="invalid"?this.name==="invalid":a==="padding"?Math.max(0,c(this,t).indexOf("$1")):super.getAttribute(a)}lint(a=this.getAbsoluteIndex(),l){}getValue(){return this.name==="invalid"?this.text():E(this,e,Ln).call(this)||super.text()}print(){return c(this,t)?`<span class="wpb-image-parameter${this.name==="invalid"?" wpb-invalid":""}">${c(this,t).replace("$1",`<span class="wpb-image-caption">${qt(this.childNodes)}</span>`)}</span>`:super.print({class:"image-caption"})}},t=new WeakMap,e=new WeakSet,Ln=function(){return c(this,t)&&!c(this,t).includes("$1")},n)}}),pi,rr,En=m({"src/link/file.ts"(){"use strict";je(),Tl(),pi=t=>{if(t===void 0)return[];const e=/-\{|\}-|\|/gu,s=[];let r=e.exec(t),n=0,i=0;for(;r;){const{0:a,index:l}=r;a!=="|"?n+=a==="-{"?1:-1:n===0&&(s.push(t.slice(i,l)),{lastIndex:i}=e),r=e.exec(t)}return s.push(t.slice(i)),s},rr=class extends xt{get type(){return"file"}get extension(){}constructor(t,e,s,r=[],n="|"){super(t,void 0,s,r,n);const{extension:i}=this.getTitle(!0,!0);this.safeAppend(pi(e).map(a=>new Fn(a,i,s,r)))}lint(t=this.getAbsoluteIndex(),e){}getAllArgs(){return this.childNodes.slice(1)}getArgs(t){return this.getAllArgs().filter(({name:e})=>t===e)}getArg(t){const e=this.getArgs(t);return e[t==="manualthumb"?0:e.length-1]}getValue(t){var e;return(e=this.getArg(t))==null?void 0:e.getValue()}json(t,e=this.getAbsoluteIndex()){const s=super.json(void 0,e)}}}}),gi,ms,xi,Pt,Pn=m({"src/link/galleryImage.ts"(){"use strict";var t,jn,s;mt(),wt(),F(),En(),gi=[ut("")],Pt=(s=class extends(xi=rr){constructor(n,i,a,l,u=[]){let d;if(a!==void 0){const{length:o}=u;d=new I(a,l,u);for(let h=0;h<Z-1;h++)d.parseOnce();u.splice(o,1)}super(i,d==null?void 0:d.toString(),l,u);$(this,t);lt(this,"privateType","imagemap-image");this.setAttribute("bracket",!1),this.privateType=`${n}-image`,this.seal("privateType",!0)}get type(){return this.privateType}getTitle(n){const i=this.type==="imagemap-image";return this.normalizeTitle(this.firstChild.toString(),i?0:6,{halfParsed:!0,temporary:n,decode:!i})}lint(n=this.getAbsoluteIndex(),i){}getAttribute(n){return n==="invalid"?E(this,t,jn).call(this):super.getAttribute(n)}},t=new WeakSet,jn=function(){const{ns:n}=this.getAttribute("title");return n!==6},s),ms=W(xi),Pt=q(ms,0,"GalleryImageToken",gi,Pt),B(ms,1,Pt)}}),Fe,Rn=m({"src/nowiki/commentLine.ts"(){"use strict";Ut(),Fe=class extends tt{}}}),On={};M(On,{GalleryToken:()=>Bn});var Bn,$l=m({"src/multiLine/gallery.ts"(){"use strict";var t,qn,kl,r;tr(),Pn(),Rn(),Bn=(r=class extends qe{constructor(i,a,l=[]){var u;super(void 0,a,l,{});$(this,t);for(const d of(u=i==null?void 0:i.split(`
`))!=null?u:[]){const o=/^([^|]+)(?:\|(.*))?/u.exec(d);if(!o){super.insertAt(d.trim()?new Fe(d,a,l):d);continue}const[,h,x]=o;E(this,t,qn).call(this,h)?super.insertAt(new Pt("gallery",h,x,a,l)):super.insertAt(new Fe(d,a,l))}}get widths(){}get heights(){}lint(i=this.getAbsoluteIndex(),a){}json(i,a=this.getAbsoluteIndex()){const l=super.json(void 0,a)}},t=new WeakSet,qn=function(i){return this.normalizeTitle(i,6,{halfParsed:!0,temporary:!0,decode:!0}).valid},kl=function(i){},r)}}),ir,Wn=m({"src/link/index.ts"(){"use strict";pe(),je(),ir=class extends xt{get type(){return"link"}get innerText(){return this.length>1?this.lastChild.text():Ne(this.firstChild.text().replace(/^\s*:?/u,""))}lint(t=this.getAbsoluteIndex(),e){}}}}),fi,mi,ce,nr=m({"src/magicLink.ts"(){"use strict";var t,e,Mn,r;H(),G(),F(),fi=String.raw`(?:[${yt}\t]|&nbsp;|&#0*160;|&#[xX]0*[aA]0;)`,mi=new RegExp(`${fi}+`,"gu"),ce=(r=class extends I{constructor(i,a="free-ext-link",l=U.getConfig(),u){super(i,l,u,{});$(this,e);$(this,t);k(this,t,a)}get type(){return c(this,t)}get innerText(){const i=new Map([["!","|"],["=","="]]);let a=Tt(this.childNodes.map(l=>{const{type:u}=l,d=String(l.name);return u==="magic-word"&&i.has(d)?i.get(d):l}));return this.type==="magic-link"&&(a=a.replace(mi," ")),a}get link(){const{innerText:i}=this;return this.type==="magic-link"?i.startsWith("ISBN")?`ISBN ${i.slice(5).replace(/[- ]/gu,"").replace(/x$/u,"X")}`:i:Ji(i).replace(/\n/gu,"%0A")}lint(i=this.getAbsoluteIndex(),a){}getUrl(i){this.lspError("MagicLinkToken.getUrl")}getAttribute(i){return i==="invalid"?E(this,e,Mn).call(this):super.getAttribute(i)}},t=new WeakMap,e=new WeakSet,Mn=function(){if(this.type==="magic-link"){const{link:i}=this;if(i.startsWith("ISBN")){const a=[...i.slice(5)].map(l=>l==="X"?10:Number(l));return a.length===10?a.reduce((l,u,d)=>l+u*(10-d),0)%11!==0:a.length===13&&(a[12]===10||a.reduce((l,u,d)=>l+u*(d%2?3:1),0)%10!==0)}}return!1},r)}}),vi,vs,bi,jt,Un=m({"src/extLink.ts"(){"use strict";var t,e;mt(),wt(),F(),nr(),vi=[ut("[")],jt=(e=class extends(bi=I){constructor(r,n="",i="",a,l=[]){super(void 0,a,l,{});$(this,t);const u=r&&/^\0\d+f\x7F$/u.test(r)?l[Number(r.slice(1,-2))]:new ce(r,"ext-link-url",a,l);if(this.insertAt(u),k(this,t,n),i){const d=new I(i,a,l,{});d.type="ext-link-text",d.setAttribute("stage",Z-1),this.insertAt(d)}}get type(){return"ext-link"}toString(r){return this.length===1?`[${super.toString(r)}${c(this,t)}]`:`[${super.toString(r,c(this,t))}]`}text(){return`[${super.text(" ")}]`}getGaps(){return c(this,t).length}lint(r=this.getAbsoluteIndex(),n){}print(){return super.print(this.length===1?{pre:"[",post:`${c(this,t)}]`}:{pre:"[",sep:c(this,t),post:"]"})}},t=new WeakMap,e),vs=W(bi),jt=q(vs,0,"ExtLinkToken",vi,jt),B(vs,1,jt)}}),Ds,Cl=m({"src/imagemapLink.ts"(){"use strict";F(),Ut(),Wn(),Un(),Ds=class extends I{get type(){return"imagemap-link"}constructor(t,e,s,r,n=[]){super(void 0,r,n),this.append(t,e.length===2?new ir(...e,r,n):new jt(...e,r,n),new tt(s,r,n))}}}}),Dn={};M(Dn,{ImagemapToken:()=>zn});var zn,Il=m({"src/multiLine/imagemap.ts"(){"use strict";ht(),G(),tr(),Rn(),Pn(),Cl(),zn=class extends qe{get image(){return this.childNodes.find(cr("imagemap-image"))}constructor(t,e=U.getConfig(),s=[]){if(super(void 0,e,s,{}),!t)return;const r=t.split(`
`),n=new Set(e.protocol.split("|"));let i=!0,a=!1;for(const l of r){const u=l.trim();if(!(a||!u||u.startsWith("#"))){if(i){const d=l.indexOf("|"),o=d===-1?l:l.slice(0,d),{valid:h,ns:x}=this.normalizeTitle(o,0,{halfParsed:!0,temporary:!0});if(h&&x===6){const g=new Pt("imagemap",o,d===-1?void 0:l.slice(d+1),e,s);super.insertAt(g),i=!1;continue}else a=!0}else if(l.trim().split(/[\t ]/u,1)[0]==="desc"){super.insertAt(l);continue}else if(l.includes("[")){const d=l.indexOf("["),o=l.slice(d),h=/^\[\[([^|]+)(?:\|([^\]]*))?\]\][\w\s]*$/u.exec(o);if(h){if(this.normalizeTitle(h[1],0,{halfParsed:!0,temporary:!0,selfLink:!0}).valid){super.insertAt(new Ds(l.slice(0,d),h.slice(1),o.slice(o.indexOf("]]")+2),e,s));continue}}else if(o.startsWith("[//")||n.has(o.slice(1,o.indexOf(":")+1))||n.has(o.slice(1,o.indexOf("//")+2))){const x=/^\[([^\]\s]+)(?:(\s+(?!\s))([^\]]*))?\][\w\s]*$/u.exec(o);if(x){super.insertAt(new Ds(l.slice(0,d),x.slice(1),o.slice(o.indexOf("]")+1),e,s));continue}}}}super.insertAt(new Fe(l,e,s))}}lint(t=this.getAbsoluteIndex(),e){}getAttribute(t){return t==="invalid"?!this.image:super.getAttribute(t)}}}}),wi,bs,_i,Rt,Hn=m({"src/nowiki/comment.ts"(){"use strict";$t(),wt(),It(),wi=[vt(!1),ut("<!--")],Rt=class extends(_i=nt){constructor(e,s,r,n){super(e,r,n);lt(this,"closed");this.closed=s}get type(){return"comment"}lint(e=this.getAbsoluteIndex()){}toString(e){return e?"":`<!--${this.innerText}${this.closed?"-->":""}`}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}},bs=W(_i),Rt=q(bs,0,"CommentToken",wi,Rt),B(bs,1,Rt)}}),Gn={};M(Gn,{CommentedToken:()=>Vn});var Vn,Nl=m({"src/commented.ts"(){"use strict";F(),Hn(),Vn=class extends I{get type(){return"ext-inner"}constructor(t,e,s=[]){if(super(void 0,e,s,{AstText:":",CommentToken:":"}),t){let r=t.indexOf("<!--"),n=r!==-1&&t.indexOf("-->",r+4),i=0;for(;n!==!1&&n!==-1;)r>i&&this.insertAt(t.slice(i,r)),this.insertAt(new Rt(t.slice(r+4,n),!0,e,s)),i=n+3,r=t.indexOf("<!--",i),n=r!==-1&&t.indexOf("-->",r+4);i<t.length&&this.insertAt(t.slice(i))}}lint(t=this.getAbsoluteIndex()){}}}}),Qn={};M(Qn,{NowikiToken:()=>Xn});var Ai,Xn,Fl=m({"src/nowiki/index.ts"(){"use strict";var t,Jn,s;It(),Ai=new Set(["languages","section","templatestyles"]),Xn=(s=class extends nt{constructor(){super(...arguments);$(this,t)}get type(){return"ext-inner"}lint(n=this.getAbsoluteIndex()){}getAttribute(n){return n==="invalid"?E(this,t,Jn).call(this):super.getAttribute(n)}},t=new WeakSet,Jn=function(){const{name:n,firstChild:{data:i}}=this;return Ai.has(n)&&!!i},s)}}),yi,ws,Si,Ot,Kn=m({"src/tagPair/ext.ts"(){"use strict";G(),Ys(),F(),Js(),Zs(),yi=[Oe()],Ot=class extends(Si=At){get type(){return"ext"}constructor(t,e,s,r,n=U.getConfig(),i=!1,a=[]){const l=t.toLowerCase(),u=new Be(!e||/^\s/u.test(e)?e:` ${e}`,"ext-attrs",l,n,a),d={...n,ext:n.ext.filter(h=>h!==l),excludes:[...n.excludes],inExt:!0};let o;switch(l){case"tab":d.ext=d.ext.filter(h=>h!=="tabs");case"indicator":case"poem":case"ref":case"option":case"combooption":case"tabs":case"poll":case"seo":case"langconvert":case"phonos":l==="poem"&&d.excludes.push("heading"),o=new I(s,d,a);break;case"pre":{const{PreToken:h}=(ml(),R(mn));o=new h(s,d,a);break}case"dynamicpagelist":{const{ParamTagToken:h}=(_n(),R(wn));o=new h(i,s,d,a);break}case"inputbox":{const{InputboxToken:h}=(Sl(),R($n));o=new h(i,s,d,a);break}case"references":{const{NestedToken:h}=(fs(),R(ke));d.excludes.push("heading"),o=new h(s,i,["ref"],d,a);break}case"choose":{const{NestedToken:h}=(fs(),R(ke));o=new h(s,/<(option|choicetemplate)(\s[^>]*?)?(?:\/>|>([\s\S]*?)<\/(\1)>)/gu,["option","choicetemplate"],d,a);break}case"combobox":{const{NestedToken:h}=(fs(),R(ke));o=new h(s,/<(combooption)(\s[^>]*?)?(?:\/>|>([\s\S]*?)<\/(combooption\s*)>)/giu,["combooption"],d,a);break}case"gallery":{const{GalleryToken:h}=($l(),R(On));o=new h(s,d,a);break}case"imagemap":{const{ImagemapToken:h}=(Il(),R(Dn));o=new h(s,d,a);break}case"hiero":{const{CommentedToken:h}=(Nl(),R(Gn));o=new h(s,d,a);break}default:{const{NowikiToken:h}=(Fl(),R(Qn));o=new h(s,d,a)}}o.setAttribute("name",l),o.type==="plain"&&(o.type="ext-inner"),super(t,u,o,r,n,a),this.seal("closed",!0)}lint(t=this.getAbsoluteIndex(),e){}},ws=W(Si),Ot=q(ws,0,"ExtToken",yi,Ot),B(ws,1,Ot)}}),Yn={};M(Yn,{parseCommentAndExt:()=>fe});var _s,Ti,_e,$i,As,fe,Me=m({"parser/commentAndExt.ts"(){"use strict";pe(),H(),dl(),Ut(),pl(),gl(),Kn(),Hn(),_s="<onlyinclude>",Ti="</onlyinclude>",{length:_e}=_s,$i=[!1,!0].map(t=>{const e=t?"includeonly":"(?:no|only)include",s=t?"noinclude":"includeonly";return Ki(r=>new RegExp(String.raw`<!--[\s\S]*?(?:-->|$)|<${e}(?:\s[^>]*)?/?>|</${e}\s*>|<(${r.join("|")})(\s[^>]*?)?(?:/>|>([\s\S]*?)</(${"\\1"}\s*)>)|<(${s})(\s[^>]*?)?(?:/>|>([\s\S]*?)(?:</(${s}\s*)>|$))`,"giu"))}),As=t=>{const e=t.indexOf(_s);return{i:e,j:t.indexOf(Ti,e+_e)}},fe=(t,e,s,r)=>{if(r){let{i:l,j:u}=As(t);if(l!==-1&&u!==-1){let d="";const o=h=>{new tt(h,e,s),d+=`\0${s.length-1}n`};for(;l!==-1&&u!==-1;){const h=`\0${s.length}e`;new te(t.slice(l+_e,u),e,s),l>0&&o(t.slice(0,l)),d+=h,t=t.slice(u+_e+1),{i:l,j:u}=As(t)}return t&&o(t),d}}const{ext:n}=e,i=n.filter(l=>l!=="translate"&&l!=="tvar"),a={...e,ext:i};if(n.includes("translate")){const l=[];t=t.replace(/<nowiki>[\s\S]*?<\/nowiki>/giu,u=>(l.push(u),`\0${l.length-1}`)).replace(/<translate( nowrap)?>([\s\S]+?)?<\/translate>/gu,(u,d,o)=>{const h=s.length;return new un(d,o&&Y(o,l),a,s),`\0${h}g`}),t=Y(t,l)}return t.replace($i[r?1:0](i),(l,u,d,o,h,x,g,p,v)=>{const b=s.length;let S="n";if(u)S="e",new Ot(u,d,o,h,a,x,s);else if(l.startsWith("<!--")){S="c";const w=l.endsWith("-->");new Rt(Y(l,s,1).slice(4,w?-3:void 0),w,e,s)}else x?new ee(x,g&&Y(g,s,1),p&&Y(p,s,1),v,e,s):new tt(l,e,s,!0);return`\0${b}${S}`})}}}),ki,ys,Ci,ie,Ll=m({"src/tag/html.ts"(){"use strict";var t,e;Ys(),on(),ki=[Oe()],ie=(e=class extends(Ci=Ks){constructor(r,n,i,a,l,u){super(r,n,i,l,u);$(this,t);this.setAttribute("name",r.toLowerCase()),k(this,t,a)}get type(){return"html"}get selfClosing(){return c(this,t)}get closing(){return super.closing}text(){const{closing:r,selfClosing:n,name:i}=this,{html:[,,a]}=this.getAttribute("config");return a.includes(i)?r&&i!=="br"?"":super.text("/"):super.text(n&&!r?"/":"")}lint(r=this.getAbsoluteIndex(),n){}getAttribute(r){return r==="invalid"?this.inTableAttrs()===2:super.getAttribute(r)}print(){return super.print({post:`${c(this,t)?"/":""}&gt;`})}json(r,n=this.getAbsoluteIndex()){const i=super.json(void 0,n)}},t=new WeakMap,e),ys=W(Ci),ie=q(ys,0,"HtmlToken",ki,ie),B(ys,1,ie)}}),Zn={};M(Zn,{parseHtml:()=>ta});var Ii,ta,El=m({"parser/html.ts"(){"use strict";Zs(),Ll(),Ii=/^(\/?)([a-z][^\s/>]*)((?:\s|\/(?!>))[^>]*?)?(\/?>)([^<]*)$/iu,ta=(t,e,s)=>{var a;const{html:r}=e;(a=e.htmlElements)!=null||(e.htmlElements=new Set([...r[0],...r[1],...r[2]]));const n=t.split("<");let i=n.shift();for(const l of n){const u=Ii.exec(l),d=u==null?void 0:u[2],o=d==null?void 0:d.toLowerCase();if(!u||!e.htmlElements.has(o)){i+=`<${l}`;continue}const[,h,,x="",g,p]=u,{length:v}=s,b=new Be(x,"html-attrs",o,e,s),S=b.hasAttr("itemprop");if(o==="meta"&&!(S&&b.hasAttr("content"))||o==="link"&&!(S&&b.hasAttr("href"))){i+=`<${l}`,s.length=v;continue}i+=`\0${s.length}x${p}`,new ie(d,b,h==="/",g==="/>",e,s)}return i}}}),ar,ea=m({"src/table/base.ts"(){"use strict";Ys(),F(),kt(),Zs(),ar=class extends Oe(1)(I){constructor(t,e,s,r,n,i=[],a){super(void 0,n,i,a),this.append(new bt(e,"table-syntax",n,i),new Be(r,"table-attrs",s,n,i))}escape(){}}}}),Ni,Ss,it,Ae,Xt,Jt,Le,sa=m({"src/table/td.ts"(){"use strict";Xs(),F(),ea(),Le=class extends(Ss=ar,Ni=[Pe(!1)],Ss){constructor(t,e,s,r=[]){var l;let n=/\||\0\d+!\x7F/u.exec(e!=null?e:""),i=n?e.slice(0,n.index):"";/\[\[|-\{/u.test(i)&&(n=null,i=""),super(/^(?:\n[^\S\n]*(?:[|!]|\|\+|\{\{\s*!\s*\}\}\+?)|(?:\||\{\{\s*!\s*\}\}){2}|!!|\{\{\s*!!\s*\}\})$/u,t,"td",i,s,r),B(Ae,5,this),gt(this,Xt),gt(this,it,""),n&&([sl(this,it)._]=n);const a=new I(e==null?void 0:e.slice(((l=n==null?void 0:n.index)!=null?l:NaN)+D(this,it).length),s,r);a.type="td-inner",a.setAttribute("stage",4),this.insertAt(a)}get type(){return"td"}get rowspan(){return this.getAttr("rowspan")}get colspan(){return this.getAttr("colspan")}get subtype(){return js(this,Xt,Jt).call(this).subtype}afterBuild(){D(this,it).includes("\0")&&K(this,it,this.buildFromStr(D(this,it),0)),super.afterBuild()}toString(t){const{childNodes:[e,s,r]}=this;return e.toString(t)+s.toString(t)+D(this,it)+r.toString(t)}text(){const{childNodes:[t,e,s]}=this;return t.text()+e.text()+D(this,it)+s.text()}getGaps(t){return t===1?D(this,it).length:0}lint(t=this.getAbsoluteIndex(),e){}isIndependent(){return this.firstChild.text().startsWith(`
`)}getAttr(t){const e=super.getAttr(t);return t==="rowspan"||t==="colspan"?parseInt(e)||1:e}escape(){}print(){const{childNodes:[t,e,s]}=this;return`<span class="wpb-td">${t.print()}${e.print()}${D(this,it)}${s.print()}</span>`}json(t,e=this.getAbsoluteIndex()){const s=super.json(void 0,e)}},Ae=W(Ss),it=new WeakMap,Xt=new WeakSet,Jt=function(){var t;const e=this.firstChild.text(),s=e.slice(-1);let r="td";if(s==="!"?r="th":s==="+"&&(r="caption"),this.isIndependent())return{subtype:r};const{previousSibling:n}=this;return{...js(t=n,Xt,Jt).call(t)}},Jt=q(Ae,17,"#getSyntax",Ni,Xt,Jt),Gs(Ae,Le)}}),lr,ra=m({"src/table/trBase.ts"(){"use strict";ea(),sa(),lr=class extends ar{lint(t=this.getAbsoluteIndex(),e){}getRowCount(){return Number(this.childNodes.some(t=>t instanceof Le&&t.isIndependent()&&!t.firstChild.text().endsWith("+")))}}}}),Fi,Li,Ei,Pi,Ts,ye,Ce,Pl=m({"src/table/index.ts"(){"use strict";ht(),Xs(),ra(),kt(),Fi=(t,e)=>new Array(t).fill(void 0).map((s,r)=>e(r)),Li=({type:t})=>t==="tr"||t==="table-syntax",Ei=class extends Array{},Ce=class extends(Ts=lr,Pi=[Pe(!1)],Ts){constructor(t,e,s,r){super(/^(?:\{\||\{\{\{\s*!\s*\}\}|\{\{\s*\(!\s*\}\})$/u,t,"table",e,s,r,{}),B(ye,5,this)}get type(){return"table"}get closed(){return this.lastChild.is("table-syntax")}lint(t=this.getAbsoluteIndex(),e){}close(t=`
|}`,e){const s=this.getAttribute("config"),r=this.getAttribute("accum");et.run(()=>{const n=new bt(e?t:void 0,"table-syntax",s,r);super.insertAt(n)})}getLayout(t){const e=this.getAllRows(),{length:s}=e,r=Ei.from(Fi(s,()=>[]));for(let n=0;n<r.length;n++){const i=r[n];let a=0,l=0,u;for(const d of e[n].childNodes.slice(2))if(d.is("td")){if(d.isIndependent()&&(u=d.subtype!=="caption"),u){const o={row:n,column:a},{rowspan:h,colspan:x}=d;for(a++;i[l];)l++;for(let g=n;g<Math.min(n+h,s);g++)for(let p=l;p<l+x;p++)r[g][p]=o;l+=x}}else if(Li(d))break}return r}getAllRows(){return[...super.getRowCount()?[this]:[],...this.childNodes.slice(1).filter(t=>t.is("tr")&&t.getRowCount()>0)]}getNthRow(t,e,s){const r=super.getRowCount();if(t===0&&r)return this;r&&t--;for(const n of this.childNodes.slice(2)){const{type:i}=n;if(i==="tr"&&n.getRowCount()&&(t--,t<0))return n}}json(t,e=this.getAbsoluteIndex()){const s=super.json(void 0,e)}},ye=W(Ts),q(ye,1,"getLayout",Pi,Ce),Gs(ye,Ce)}}),ia,jl=m({"src/table/tr.ts"(){"use strict";ra(),ia=class extends lr{get type(){return"tr"}constructor(t,e,s,r){super(/^\n[^\S\n]*(?:\|-+|\{\{\s*!\s*\}\}-+|\{\{\s*!-\s*\}\}-*)$/u,t,"tr",e,s,r)}}}}),or,na=m({"src/nowiki/listBase.ts"(){"use strict";It(),or=class extends nt{get indent(){}json(t,e=this.getAbsoluteIndex()){const s=super.json(void 0,e)}}}}),ur,aa=m({"src/nowiki/dd.ts"(){"use strict";na(),ur=class extends or{get type(){return"dd"}}}}),la={};M(la,{parseTable:()=>oa});var ji,$s,oa,Rl=m({"parser/table.ts"(){"use strict";F(),Pl(),jl(),sa(),aa(),ji=t=>t.lastChild.constructor!==I,$s=(t,e)=>t.is("td")?e.pop():t,oa=({firstChild:{data:t},type:e,name:s},r,n)=>{const i=[],a=t.split(`
`);let l=e==="root"||e==="parameter-value"||e==="ext-inner"&&s==="poem"?"":`
${a.shift()}`,u;const d=(o,h)=>{if(!h){l+=o;return}const{lastChild:x}=h;if(ji(h)){const g=new I(o,r,n);g.type="table-inter",g.setAttribute("stage",3),h.insertAt(g)}else x.setText(x.toString()+o)};for(const o of a){u=i.pop();const[h]=/^(?:\s|\0\d+[cno]\x7F)*/u.exec(o),x=o.slice(h.length),g=/^(:*)((?:\s|\0\d+[cn]\x7F)*)(\{\||\{(?:\0\d+[cn]\x7F)*\0\d+!\x7F|\0\d+\{\x7F)(.*)$/u.exec(x);if(g){for(;u&&!u.is("td");)u=i.pop();const[,C,_,N,j]=g;C&&new ur(C,r,n),d(`
${h}${C&&`\0${n.length-1}d`}${_}\0${n.length}b`,u),i.push(...u?[u]:[],new Ce(N,j,r,n));continue}else if(!u){l+=`
${o}`;continue}const p=/^(?:(\|\}|\0\d+!\x7F\}|\0\d+\}\x7F)|(\|-+|\0\d+!\x7F-+|\0\d+-\x7F-*)(?!-)|(!|(?:\||\0\d+!\x7F)\+?))(.*)$/u.exec(x);if(!p){d(`
${o}`,u),i.push(u);continue}const[,v,b,S,w]=p;if(v){for(;!u.is("table");)u=i.pop();u.close(`
${h}${v}`,!0),d(w,i[i.length-1])}else if(b){u=$s(u,i),u.is("tr")&&(u=i.pop());const C=new ia(`
${h}${b}`,w,r,n);i.push(u,C),u.insertAt(C)}else{u=$s(u,i);const C=S==="!"?/!!|(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu:/(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu;let _=C.exec(w),N=0,j=`
${h}${S}`;const f=A=>{const y=new Le(j,w.slice(N,_==null?void 0:_.index),r,n);return A.insertAt(y),y};for(;_;)f(u),{lastIndex:N}=C,[j]=_,_=C.exec(w);i.push(u,f(u))}}return l.slice(1)}}}),ua,Ol=m({"src/nowiki/hr.ts"(){"use strict";It(),ua=class extends nt{get type(){return"hr"}}}}),Ri,ks,Oi,ne,Bl=m({"src/nowiki/doubleUnderscore.ts"(){"use strict";$t(),wt(),It(),Ri=[vt(),ut("__")],ne=class extends(Oi=nt){get type(){return"double-underscore"}constructor(t,e,s,r){var l,u;super(t,s,r);const n=t.toLowerCase(),{doubleUnderscore:[,,i,a]}=s;this.setAttribute("name",(u=e?(l=a==null?void 0:a[t])==null?void 0:l.toLowerCase():i==null?void 0:i[n])!=null?u:n)}toString(){return`__${this.innerText}__`}print(){return super.print({pre:"__",post:"__"})}},ks=W(Oi),ne=q(ks,0,"DoubleUnderscoreToken",Ri,ne),B(ks,1,ne)}}),ha={};M(ha,{parseHrAndDoubleUnderscore:()=>da});var da,ql=m({"parser/hrAndDoubleUnderscore.ts"(){"use strict";Ol(),Bl(),An(),da=({firstChild:{data:t},type:e,name:s},r,n)=>{var u,d,o;const{doubleUnderscore:[i,a,l]}=r;return(u=r.insensitiveDoubleUnderscore)!=null||(r.insensitiveDoubleUnderscore=new Set(i)),(d=r.sensitiveDoubleUnderscore)!=null||(r.sensitiveDoubleUnderscore=new Set(a)),(o=r.regexHrAndDoubleUnderscore)!=null||(r.regexHrAndDoubleUnderscore=new RegExp(`__(${[...i,...a].join("|")})__`,"giu")),e!=="root"&&(e!=="ext-inner"||s!=="poem")&&(t=`\0${t}`),t=t.replace(/^((?:\0\d+[cno]\x7F)*)(-{4,})/gmu,(h,x,g)=>(new ua(g,r,n),`${x}\0${n.length-1}r`)).replace(r.regexHrAndDoubleUnderscore,(h,x)=>{var b;const g=r.sensitiveDoubleUnderscore.has(x),p=x.toLowerCase(),v=r.insensitiveDoubleUnderscore.has(p);return g||v?(new ne(x,g,r,n),`\0${n.length-1}${v&&((b=l==null?void 0:l[p])!=null?b:p)==="toc"?"u":"n"}`):h}),r.excludes.includes("heading")||(t=t.replace(/^((?:\0\d+[cn]\x7F)*)(={1,6})(.+)\2((?:\s|\0\d+[cn]\x7F)*)$/gmu,(h,x,g,p,v)=>{const b=`${x}\0${n.length}h`;return new Lt(g.length,[p,v],r,n),b})),e==="root"||e==="ext-inner"&&s==="poem"?t:t.slice(1)}}}),ca,Wl=m({"src/nowiki/quote.ts"(){"use strict";var t,e;It(),ca=(e=class extends nt{constructor(r,n,i,a){super(r,i,a);$(this,t);k(this,t,n)}get type(){return"quote"}get bold(){return this.innerText.length!==2}get italic(){return this.innerText.length!==3}get closing(){return{...this.bold?{bold:c(this,t).bold}:void 0,...this.italic?{italic:c(this,t).italic}:void 0}}text(){const{parentNode:r,innerText:n}=this;return r!=null&&r.is("image-parameter")&&r.name!=="caption"?"":n}lint(r=this.getAbsoluteIndex()){}json(r,n=this.getAbsoluteIndex()){const i=super.json(void 0,n)}},t=new WeakMap,e)}}),pa={};M(pa,{parseQuotes:()=>hr});var hr,ga=m({"parser/quotes.ts"(){"use strict";Wl(),hr=(t,e,s,r)=>{var g;const n=t.split(/('{2,})/u),{length:i}=n;if(i===1)return t;let a=0,l=0,u,d,o;for(let p=1;p<i;p+=2){const v=n[p].length;switch(v){case 2:l++;break;case 4:n[p-1]+="'",n[p]="'''";case 3:if(a++,u!==void 0)break;n[p-1].endsWith(" ")?d===void 0&&o===void 0&&(o=p):n[p-1].slice(-2,-1)===" "?u=p:d!=null||(d=p);break;default:n[p-1]+="'".repeat(v-5),n[p]="'''''",l++,a++}}if(l%2===1&&a%2===1){const p=(g=u!=null?u:d)!=null?g:o;p!==void 0&&(n[p]="''",n[p-1]+="'")}let h=!0,x=!0;for(let p=1;p<i;p+=2){const v=n[p].length,b=v!==2,S=v!==3;b&&(h=!h),S&&(x=!x),new ca(n[p],{bold:b&&h,italic:S&&x},e,s),n[p]=`\0${s.length-1}q`}return n.join("")}}}),xa={};M(xa,{parseExternalLinks:()=>dr});var dr,fa=m({"parser/externalLinks.ts"(){"use strict";H(),Un(),nr(),dr=(t,e,s,r)=>{var n;return(n=e.regexExternalLinks)!=null||(e.regexExternalLinks=new RegExp(String.raw`\[((?:\0\d+[cn]\x7F)*(?:\0\d+f\x7F|(?:(?:${e.protocol}|//)${ue}|\0\d+m\x7F)${he}(?=[[\]<>"\t${yt}]|\0\d)))([${yt}]*(?![${yt}]))([^\]\x01-\x08\x0A-\x1F\uFFFD]*)\]`,"giu")),t.replace(e.regexExternalLinks,(i,a,l,u)=>{const{length:d}=s,o=/&[lg]t;/u.exec(a);return o&&(l="",u=a.slice(o.index)+l+u,a=a.slice(0,o.index)),r?(new ce(a,"ext-link-url",e,s),`[\0${d}f${l}${u}]`):(new jt(a,l,u,e,s),`\0${d}w`)})}}}),ma,Ml=m({"src/link/category.ts"(){"use strict";je(),ma=class extends xt{get type(){return"category"}get sortkey(){}json(t,e=this.getAbsoluteIndex()){const s=super.json(void 0,e)}}}}),va={};M(va,{parseLinks:()=>zs});var Bi,zs,Ul=m({"parser/links.ts"(){"use strict";H(),G(),ga(),fa(),Wn(),En(),Ml(),Bi=/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(\||\0\d+!\x7F)([\s\S]*)$/u,zs=(t,e,s,r)=>{var l;(l=e.regexLinks)!=null||(e.regexLinks=new RegExp(String.raw`^\s*(?:${e.protocol}|//)`,"iu"));const n=e.inExt?/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])+)(?:(\||\0\d+!\x7F)([\s\S]*?[^\]]))?\]\]([\s\S]*)$/u:/^((?:(?!\0\d+!\x7F)[^\n[\]{}|])*)(?:(\||\0\d+!\x7F)([\s\S]*?[^\]])?)?\]\]([\s\S]*)$/u,i=t.split("[[");let a=i.shift();for(let u=0;u<i.length;u++){let d=!1,o,h,x,g;const p=i[u],v=n.exec(p);if(v)[,o,h,x,g]=v,g.startsWith("]")&&(x!=null&&x.includes("["))&&(x+="]",g=g.slice(1));else{const N=Bi.exec(p);N&&(d=!0,[,o,h,x]=N)}if(o===void 0||e.regexLinks.test(o)||/\0\d+[exhbru]\x7F/u.test(o)){a+=`[[${p}`;continue}let b=X(o).trim();const S=b.startsWith(":");if(S&&d){a+=`[[${p}`;continue}else!b&&x&&!x.includes(`
`)&&(b=X(x).trim());const{ns:w,valid:C}=U.normalizeTitle(b,0,!1,e,{halfParsed:!0,temporary:!0,decode:!0,selfLink:!0});if(C){if(d){if(w!==6){a+=`[[${p}`;continue}let N=!1;for(u++;u<i.length;u++){const j=i[u],f=j.split("]]");if(f.length>2){N=!0,x+=`[[${f[0]}]]${f[1]}`,g=f.slice(2).join("]]");break}else if(f.length===2)x+=`[[${f[0]}]]${f[1]}`;else{x+=`[[${j}`;break}}if(x=zs(x,e,s,r),!N){a+=`[[${o}${h}${x}`;continue}}}else{a+=`[[${p}`;continue}x&&(x=hr(x,e,s,r));let _=ir;S||(w===6?(x&&(x=dr(x,e,s,!0)),_=rr):w===14&&(_=ma)),x===void 0&&h&&(x=""),a+=`\0${s.length}l${g}`,new _(o,x,e,s,h)}return a}}}),ba={};M(ba,{parseMagicLinks:()=>wa});var Cs,Is,Ns,Fs,wa,Dl=m({"parser/magicLinks.ts"(){"use strict";H(),nr(),Cs=String.raw`[${yt}\t]|&nbsp;|&#0*160;|&#x0*a0;`,Is=`(?:${Cs})+`,Ns=`(?:${Cs}|-)`,Fs=String.raw`(?:RFC|PMID)${Is}\d+\b|ISBN${Is}(?:97[89]${Ns}?)?(?:\d${Ns}?){9}[\dx]\b`,wa=(t,e,s)=>{if(!e.regexMagicLinks)try{e.regexMagicLinks=new RegExp(String.raw`(^|[^\p{L}\p{N}_])(?:(?:${e.protocol})(${ue}${he})|${Fs})`,"giu")}catch{e.regexMagicLinks=new RegExp(String.raw`(^|\W)(?:(?:${e.protocol})(${ue}${he})|${Fs})`,"giu")}return t.replace(e.regexMagicLinks,(r,n,i)=>{let a=n?r.slice(n.length):r;if(i){let l="";const u=/&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(a);u&&(l=a.slice(u.index),a=a.slice(0,u.index));const d=a.includes("(")?/[^,;\\.:!?][,;\\.:!?]+$/u:/[^,;\\.:!?)][,;\\.:!?)]+$/u,o=d.exec(a);if(o){let h=1;o[0][1]===";"&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/iu.test(a.slice(0,o.index))&&(h=2),l=a.slice(o.index+h)+l,a=a.slice(0,o.index+h)}return l.length>=i.length?r:(new ce(a,void 0,e,s),`${n}\0${s.length-1}w${l}`)}else if(!/^(?:RFC|PMID|ISBN)/u.test(a))return r;return new ce(a,"magic-link",e,s),`${n}\0${s.length-1}i`})}}}),_a,zl=m({"util/html.ts"(){"use strict";_a=(t,e)=>t.startsWith(e)?e.length:[...e].findIndex((s,r)=>s!==t[r])}}),Aa,Hl=m({"src/nowiki/list.ts"(){"use strict";na(),Aa=class extends or{get type(){return"list"}}}}),ya={};M(ya,{parseList:()=>Sa});var Sa,Gl=m({"parser/list.ts"(){"use strict";zl(),Hl(),aa(),Sa=(t,e,s,r)=>{const n=/^((?:\0\d+[cno]\x7F)*)([;:*#]+)(\s*)/u.exec(t);if(!n)return e.lastPrefix="",t;const[i,a,l,u]=n,d=l.replace(/;/gu,":"),o=_a(d,e.lastPrefix),h=((o>1?l.slice(o-1):l)+u).split(/(?=;)/u),x=h[0].startsWith(";");let g=h.length-(x?0:1);if(o>1){const T=l.slice(0,o-1);if(x){const O=T.split(/(?=;)/u);h.unshift(...O),g+=T.includes(";")?O.length:0}else h[0]=T+h[0]}e.lastPrefix=d;let p=a+h.map((T,O)=>`\0${r.length+O}d`).join("")+t.slice(i.length);for(const T of h)new Aa(T,s,r);if(!g)return p;const{html:[v,,b]}=s,S=/:+|-\{|\0\d+[xq]\x7F/gu;let w=S,C=w.exec(p),_=0,N=!1,j=!1,f=0;const A=(T,O)=>(new ur(T,s,r),`${p.slice(0,O)}\0${r.length-1}d${p.slice(O+T.length)}`),y=T=>{T?_&&_--:_++};for(;C&&g;){const{0:T,index:O}=C;if(T==="-{"){if(!f){const{lastIndex:P}=w;w=/-\{|\}-/gu,w.lastIndex=P}f++}else if(T==="}-"){if(f--,!f){const{lastIndex:P}=w;w=S,w.lastIndex=P}}else if(T.endsWith("x")){const{name:P,closing:L,selfClosing:z}=r[Number(T.slice(1,-2))];(v.includes(P)||!z&&!b.includes(P))&&y(L)}else if(T.endsWith("q")){const{bold:P,italic:L}=r[Number(T.slice(1,-2))];P&&(y(N),N=!N),L&&(y(j),j=!j)}else if(_===0){if(T.length>=g)return A(T.slice(0,g),O);g-=T.length,w.lastIndex=O+4+String(r.length).length,p=A(T,O)}C=w.exec(p)}return p}}}),qi,Wi,Ls,Mi,ae,Vl=m({"src/converterFlags.ts"(){"use strict";var t,e;Re(),F(),Ct(),qi=new Set(["A","T","R","D","-","H","N"]),Wi=[xe()],ae=(e=class extends(Mi=I){constructor(r,n,i=[]){super(void 0,n,i,{});$(this,t);this.safeAppend(r.map(a=>new Q(a,"converter-flag",n,i)))}get type(){return"converter-flags"}afterBuild(){k(this,t,this.childNodes.map(r=>r.text().trim())),super.afterBuild()}toString(r){return super.toString(r,";")}text(){return super.text(";")}getUnknownFlags(){return new Set(c(this,t).filter(r=>/\{{3}[^{}]+\}{3}/u.test(r)))}getVariantFlags(){const r=new Set(this.getAttribute("config").variants);return new Set(c(this,t).filter(n=>r.has(n)))}isInvalidFlag(r,n,i,a){return typeof r=="object"&&(r=r.text().trim(),n=this.getVariantFlags(),i=this.getUnknownFlags(),a=new Set(c(this,t).filter(l=>qi.has(l)))),!!r&&!n.has(r)&&!i.has(r)&&(n.size>0||!a.has(r))}lint(r=this.getAbsoluteIndex(),n){}print(){return super.print({sep:";"})}},t=new WeakMap,e),Ls=W(Mi),ae=q(Ls,0,"ConverterFlagsToken",Wi,ae),B(Ls,1,ae)}}),Ie,Ql=m({"src/converterRule.ts"(){"use strict";G(),F(),Ct(),Ie=class extends I{get type(){return"converter-rule"}get variant(){}constructor(t,e=!0,s=U.getConfig(),r=[]){super(void 0,s,r);const n=t.indexOf(":"),i=t.slice(0,n).indexOf("=>"),a=i===-1?t.slice(0,n):t.slice(i+2,n);e&&s.variants.includes(a.trim().toLowerCase())?(super.insertAt(new Q(a,"converter-rule-variant",s,r)),super.insertAt(new Q(t.slice(n+1),"converter-rule-to",s,r)),i!==-1&&super.insertAt(new Q(t.slice(0,i),"converter-rule-from",s,r),0)):super.insertAt(new Q(t,"converter-rule-to",s,r))}toString(t){const{childNodes:e,firstChild:s,lastChild:r}=this;return e.length===3?`${s.toString(t)}=>${e[1].toString(t)}:${r.toString(t)}`:super.toString(t,":")}text(){const{childNodes:t,firstChild:e,lastChild:s}=this;return t.length===3?`${e.text()}=>${t[1].text()}:${s.text()}`:super.text(":")}getGaps(t){return t===0&&this.length===3?2:1}print(){const{childNodes:t}=this;if(t.length===3){const[e,s,r]=t;return`<span class="wpb-converter-rule">${e.print()}=>${s.print()}:${r.print()}</span>`}return super.print({sep:":"})}json(t,e=this.getAbsoluteIndex()){const s=super.json(void 0,e)}}}}),Ui,Es,Di,le,Xl=m({"src/converter.ts"(){"use strict";H(),wt(),ot(),F(),Vl(),Ql(),Ui=[at,ut("-{")],le=class extends(Di=I){get type(){return"converter"}constructor(t,e,s,r=[]){super(void 0,s,r),this.insertAt(new ae(t,s,r));const[n]=e,i=n.includes(":"),a=new Ie(n,i,s,r);i&&a.length===1||!i&&e.length===2&&!X(e[1]).trim()?this.insertAt(new Ie(e.join(";"),!1,s,r)):this.append(a,...e.slice(1).map(l=>new Ie(l,!0,s,r)))}toString(t){const{childNodes:[e,...s]}=this;return`-{${e.toString(t)}${e.length>0?"|":""}${s.map(r=>r.toString(t)).join(";")}}-`}text(){const{childNodes:[t,...e]}=this;return`-{${t.text()}|${Tt(e,";")}}-`}getGaps(t){return t||this.firstChild.length>0?1:0}print(){const{childNodes:[t,...e]}=this;return`<span class="wpb-converter">-{${t.print()}${t.length>0?"|":""}${qt(e,{sep:";"})}}-</span>`}},Es=W(Di),le=q(Es,0,"ConverterToken",Ui,le),B(Es,1,le)}}),Ta={};M(Ta,{parseConverter:()=>$a});var $a,Jl=m({"parser/converter.ts"(){"use strict";Xl(),$a=(t,e,s)=>{var u;(u=e.regexConverter)!=null||(e.regexConverter=new RegExp(String.raw`;(?=(?:[^;]*?=>)?\s*(?:${e.variants.join("|")})\s*:|(?:\s|\0\d+[cn]\x7F)*$)`,"iu"));const r=/-\{/gu,n=/-\{|\}-/gu,i=[];let a=r,l=a.exec(t);for(;l;){const{0:d,index:o}=l;if(d==="}-"){const h=i.pop(),{length:x}=s,g=t.slice(h.index+2,o),p=g.indexOf("|"),[v,b]=p===-1?[[],g]:[g.slice(0,p).split(";"),g.slice(p+1)],S=b.replace(/(&[#a-z\d]+);/giu,"$1"),w=S.split(e.regexConverter).map(C=>C.replace(/\x01/gu,";"));new le(v,w,e,s),t=`${t.slice(0,h.index)}\0${x}v${t.slice(o+2)}`,i.length===0&&(a=r),a.lastIndex=h.index+3+String(x).length}else i.push(l),a=n,a.lastIndex=o+2;l=a.exec(t)}return t}}}),Ee={};M(Ee,{Token:()=>I});var I,F=m({"src/index.ts"(){"use strict";var t,e,s,r,n,i,a,l,ka,Ca,Ia,Na,Fa,La,Ea,Pa,ja,Ra,Oa,Ba,_;H(),mt(),ge(),ht(),G(),al(),ll(),I=(_=class extends Yt{constructor(f,A=U.getConfig(),y=[],T){super();$(this,l);$(this,t,"plain");$(this,e,0);$(this,s);$(this,r);$(this,n);$(this,i,!1);$(this,a);typeof f=="string"&&this.insertAt(f),k(this,s,A),k(this,r,y),y.push(this)}get type(){return c(this,t)}set type(f){k(this,t,f)}parseOnce(f=c(this,e),A=!1,y){if(f<c(this,e)||this.length===0||!this.isPlain())return this;if(c(this,e)>=Z)return this;switch(f){case 0:if(this.type==="root"){c(this,r).pop();const T=E(this,l,ka).call(this);A&&(A=!T)}k(this,n,A),E(this,l,Ca).call(this,A);break;case 1:E(this,l,Ia).call(this);break;case 2:E(this,l,Na).call(this);break;case 3:E(this,l,Fa).call(this);break;case 4:E(this,l,La).call(this);break;case 5:E(this,l,Ea).call(this,y);break;case 6:E(this,l,Pa).call(this,y);break;case 7:E(this,l,ja).call(this);break;case 8:E(this,l,Ra).call(this);break;case 9:E(this,l,Oa).call(this);break;case 10:E(this,l,Ba).call(this)}if(this.type==="root")for(const T of c(this,r))T==null||T.parseOnce(f,A,y);return fr(this,e)._++,this}buildFromStr(f,A){const y=f.split(/[\0\x7F]/u).map((T,O)=>{if(O%2===0)return new qs(T);if(isNaN(T.slice(-1)))return c(this,r)[Number(T.slice(0,-1))];throw new Error(`Failed to build! Unrecognized token: ${T}`)});return A===0?y.map(String).join(""):A===1?Tt(y):y}build(){k(this,e,Z);const{length:f,firstChild:A}=this,y=A==null?void 0:A.toString();if(f===1&&A.type==="text"&&y.includes("\0")&&(pr(this,0,1,this.buildFromStr(y)),this.normalize(),this.type==="root"))for(const T of c(this,r))T==null||T.build()}afterBuild(){if(this.type==="root")for(const f of c(this,r))f==null||f.afterBuild();k(this,i,!0)}parse(f=Z,A,y){for(f=Math.min(f,Z);c(this,e)<f;)this.parseOnce(c(this,e),A,y);return f&&(this.build(),this.afterBuild()),this}isPlain(){return this.constructor===_}getAttribute(f){var A;switch(f){case"config":return c(this,s);case"include":return(A=c(this,n))!=null?A:!!c(this.getRootNode(),n);case"accum":return c(this,r);case"built":return c(this,i);case"stage":return c(this,e);case"invalid":return this.type==="table-inter"&&Te(this)===2;default:return super.getAttribute(f)}}setAttribute(f,A){switch(f){case"stage":c(this,e)===0&&this.type==="root"&&c(this,r).shift(),k(this,e,A);break;default:super.setAttribute(f,A)}}insertAt(f,A=this.length){const y=typeof f=="string"?new qs(f):f;super.insertAt(y,A);const{type:T}=y;return T==="root"&&(y.type="plain"),y}normalizeTitle(f,A=0,y){return U.normalizeTitle(f,A,c(this,n),c(this,s),y)}inTableAttrs(){var f,A;return((f=this.closest("table-attrs,ext"))==null?void 0:f.type)==="table-attrs"&&((A=this.closest("table-attrs,arg,magic-word,template"))!=null&&A.is("table-attrs")?2:1)}inHtmlAttrs(){var f;return(f=this.closest("html-attrs,ext"))!=null&&f.is("html-attrs")?2:this.inTableAttrs()}lint(f=this.getAbsoluteIndex(),A){}toString(f,A){return f?super.toString(!0,A):St(c(this,a),()=>super.toString(!1,A),y=>{const T=this.getRootNode();T.type==="root"&&c(T,i)&&k(this,a,y)})}},t=new WeakMap,e=new WeakMap,s=new WeakMap,r=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakSet,ka=function(){const{parseRedirect:f}=(hl(),R(an)),A=this.firstChild.toString(),y=f(A,c(this,s),c(this,r));return y&&this.setText(y),!!y},Ca=function(f){const{parseCommentAndExt:A}=(Me(),R(Yn));this.setText(A(this.firstChild.toString(),c(this,s),c(this,r),f))},Ia=function(){const{parseBraces:f}=(sr(),R(Tn)),A=this.type==="root"?this.firstChild.toString():`\0${this.firstChild.toString()}`,y=f(A,c(this,s),c(this,r));this.setText(this.type==="root"?y:y.slice(1))},Na=function(){if(c(this,s).excludes.includes("html"))return;const{parseHtml:f}=(El(),R(Zn));this.setText(f(this.firstChild.toString(),c(this,s),c(this,r)))},Fa=function(){if(c(this,s).excludes.includes("table"))return;const{parseTable:f}=(Rl(),R(la));this.setText(f(this,c(this,s),c(this,r)))},La=function(){if(c(this,s).excludes.includes("hr"))return;const{parseHrAndDoubleUnderscore:f}=(ql(),R(ha));this.setText(f(this,c(this,s),c(this,r)))},Ea=function(f){const{parseLinks:A}=(Ul(),R(va));this.setText(A(this.firstChild.toString(),c(this,s),c(this,r),f))},Pa=function(f){if(c(this,s).excludes.includes("quote"))return;const{parseQuotes:A}=(ga(),R(pa)),y=this.firstChild.toString().split(`
`);for(let T=0;T<y.length;T++)y[T]=A(y[T],c(this,s),c(this,r),f);this.setText(y.join(`
`))},ja=function(){if(c(this,s).excludes.includes("extLink"))return;const{parseExternalLinks:f}=(fa(),R(xa));this.setText(f(this.firstChild.toString(),c(this,s),c(this,r)))},Ra=function(){if(c(this,s).excludes.includes("magicLink"))return;const{parseMagicLinks:f}=(Dl(),R(ba));this.setText(f(this.firstChild.toString(),c(this,s),c(this,r)))},Oa=function(){if(c(this,s).excludes.includes("list"))return;const{parseList:f}=(Gl(),R(ya)),{firstChild:A,type:y,name:T}=this,O=A.toString().split(`
`),P={lastPrefix:""};let L=y==="root"||y==="ext-inner"&&T==="poem"?0:1;for(;L<O.length;L++)O[L]=f(O[L],P,c(this,s),c(this,r));this.setText(O.join(`
`))},Ba=function(){if(c(this,s).variants.length>0){const{parseConverter:f}=(Jl(),R(Ta));this.setText(f(this.firstChild.toString(),c(this,s),c(this,r)))}},_)}}),et,cr,pr,ht=m({"util/debug.ts"(){"use strict";et={running:!1,run(t){const{running:e}=this;this.running=!0;try{const{Token:s}=(F(),R(Ee)),r=t();return r instanceof s&&!r.getAttribute("built")&&r.afterBuild(),this.running=e,r}catch(s){throw this.running=e,s}},rev:0},cr=t=>e=>e.type===t,pr=(t,e,s,r=[])=>{var a,l;let n=t.getChildNodes(),i;n.length===s?(i=n,n=r):i=n.splice(e,s,...r);for(let u=0;u<r.length;u++){const d=r[u];d.setAttribute("parentNode",t),d.setAttribute("nextSibling",n[e+u+1]),d.setAttribute("previousSibling",n[e+u-1])}return(a=n[e-1])==null||a.setAttribute("nextSibling",n[e]),(l=n[e+r.length])==null||l.setAttribute("previousSibling",n[e+r.length-1]),n===r&&t.setAttribute("childNodes",n),i}}}),qa={};M(qa,{Title:()=>Wa});var Wa,Kl=m({"lib/title.ts"(){"use strict";var t,e,s,r,n,i;pe(),H(),Wa=(i=class{constructor(a,l,u,{temporary:d,decode:o,selfLink:h}={}){$(this,t);$(this,e);$(this,s);$(this,r);$(this,n);lt(this,"valid");lt(this,"encoded",!1);const x=a.trim().startsWith("../");if(o&&a.includes("%"))try{const p=/%(?!21|3[ce]|5[bd]|7[b-d])[\da-f]{2}/iu.test(a);a=Ne(a),this.encoded=p}catch{}if(a=Rs(a).replace(/[_ ]+/gu," ").trim(),x)k(this,r,0);else{let p=l;a.startsWith(":")&&(p=0,a=a.slice(1).trim());const v=a.split(":");if(v.length>1){const b=Bt(v[0]),S=Object.prototype.hasOwnProperty.call(u.nsid,b)&&u.nsid[b];S&&(p=S,a=v.slice(1).join(":").trim())}k(this,r,p)}const g=a.indexOf("#");if(g!==-1){let p=a.slice(g).trim().slice(1);if(p.includes("%"))try{p=Ne(p)}catch{}k(this,n,p.replace(/ /gu,"_")),a=a.slice(0,g).trim()}this.valid=!!(a||h&&this.ns===0&&c(this,n)!==void 0)&&Rs(a)===a&&!/^:|\0\d+[eh!+-]\x7F|[<>[\]{}|\n]|%[\da-f]{2}|(?:^|\/)\.{1,2}(?:$|\/)/iu.test(x?/^(?:\.\.\/)+(.*)/u.exec(a)[1]:a),this.main=a,k(this,e,u.namespaces),k(this,s,u.articlePath||"/wiki/$1"),c(this,s).includes("$1")||k(this,s,c(this,s)+`${c(this,s).endsWith("/")?"":"/"}$1`),d||Object.defineProperties(this,{encoded:{enumerable:!1,writable:!1}})}get ns(){return c(this,r)}get fragment(){return c(this,n)}get main(){return c(this,t)}set main(a){a=a.replace(/_/gu," ").trim(),k(this,t,a&&a[0].toUpperCase()+a.slice(1))}get prefix(){const a=c(this,e)[this.ns];return a+(a&&":")}get title(){return this.getRedirection()[1]}get extension(){const{main:a}=this,l=a.lastIndexOf(".");return l===-1?void 0:a.slice(l+1).toLowerCase()}getRedirection(){return[!1,(this.prefix+this.main).replace(/ /gu,"_")]}setFragment(a){k(this,n,a)}getUrl(a){throw new Error("Title.getUrl method is only available in the LSP version!")}},t=new WeakMap,e=new WeakMap,s=new WeakMap,r=new WeakMap,n=new WeakMap,i)}}),Ma={};M(Ma,{default:()=>U});Ua.exports=R(Ma);var Se,pt,Ps,zi,U,G=m({"index.ts"(){ht(),mt(),H(),Se=!0,pt={config:Os,get rules(){},get i18n(){},set i18n(t){},get lintConfig(){},set lintConfig(t){},get viewOnly(){return Se},set viewOnly(t){Se&&!t&&et.rev++,Se=t},getConfig(t){const e=t!=null?t:this.config,{doubleUnderscore:s,ext:r,parserFunction:n,variable:i}=e;for(let a=0;a<2;a++)s.length>a+2&&s[a].length===0&&(s[a]=Object.keys(s[a+2]));return r.includes("translate")&&!i.includes("translationlanguage")&&(i.push("translationlanguage"),Array.isArray(n[1])?n[1].push("TRANSLATIONLANGUAGE"):n[1].TRANSLATIONLANGUAGE="translationlanguage"),{...Os,...e,excludes:[]}},msg(t,e=""){},normalizeTitle(t,e=0,s,r=pt.getConfig(),n){const{Title:i}=(Kl(),R(qa));let a;if(n!=null&&n.halfParsed)a=new i(t,e,r,n);else{const{Token:l}=(F(),R(Ee));a=et.run(()=>{const u=new l(t,r);u.type="root",u.parseOnce(0,s).parseOnce();const d=new i(u.toString(),e,r,n);u.build();for(const o of["main","fragment"]){const h=d[o];if(h!=null&&h.includes("\0")){const x=u.buildFromStr(h,1);o==="main"?d.main=x:d.setFragment(x)}}return d})}return a},parse(t,e,s=Z,r=pt.getConfig()){t=Xi(t);let n;const{Token:i}=(F(),R(Ee));return et.run(()=>{const l=new i(t,r);return l.type="root",l.parse(s,e)})},async partialParse(t,e,s,r=pt.getConfig()){},createLanguageService(t={}){throw new Error("Parser.createLanguageService method is only available in the LSP version!")}},Ps={},zi=new Set(["lintConfig","normalizeTitle","parse","createLanguageService"]);for(const t in pt)zi.has(t)||(Ps[t]={enumerable:!1});Object.defineProperties(pt,Ps),Object.assign(typeof globalThis=="object"?globalThis:self,{Parser:pt}),U=pt}});G()});Yl();})();
//# sourceMappingURL=bundle.min.js.map
