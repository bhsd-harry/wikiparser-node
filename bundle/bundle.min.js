(()=>{var Tt=Object.defineProperty;var $t=(O,R,G)=>R in O?Tt(O,R,{enumerable:!0,configurable:!0,writable:!0,value:G}):O[R]=G;var C=(O,R,G)=>($t(O,typeof R!="symbol"?R+"":R,G),G),tt=(O,R,G)=>{if(!R.has(O))throw TypeError("Cannot "+G)};var T=(O,R,G)=>(tt(O,R,"read from private field"),G?G.call(O):R.get(O)),b=(O,R,G)=>{if(R.has(O))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(O):R.set(O,G)},H=(O,R,G,J)=>(tt(O,R,"write to private field"),J?J.call(O,G):R.set(O,G),G),et=(O,R,G,J)=>({set _(m){H(O,R,m,G)},get _(){return T(O,R,J)}}),U=(O,R,G)=>(tt(O,R,"access private method"),G);(()=>{var O={6010:(m,y,t)=>{"use strict";const g={config:void 0,minConfig:t(8166),MAX_STAGE:11,getConfig(){return{...this.minConfig,...this.config}},normalizeTitle(u,d=0,h=!1,c=g.getConfig(),a=!1){let e;if(!a){const o=t(8138);e=this.run(()=>{const r=new o(String(u),c),l=r.getAttribute("parseOnce");return l(0,h),l()}),u=e.firstChild}const s=t(6986);return new s(String(u),d,c)},parse(u,d,h=g.MAX_STAGE,c=g.getConfig()){const a=t(8138);let e;return this.run(()=>{typeof u=="string"?e=new a(u,c):u instanceof a&&(e=u,u=String(e)),e.parse(h,d)}),e},run(u){return u()},print(u,d=!1,h=g.getConfig()){return`<div class="wikiparser">${this.parse(u,d,this.MAX_STAGE,h).print()} </div>`},lint(u,d=!1,h=g.getConfig()){return this.parse(u,d,this.MAX_STAGE,h).lint()}},x={};for(const u in g)["MAX_STAGE","minConfig"].includes(u)?x[u]={enumerable:!1,writable:!1}:["config","normalizeTitle","parse","print","lint"].includes(u)||(x[u]={enumerable:!1});Object.defineProperties(g,x),typeof window=="object"&&(window.Parser=g),m.exports=g},9205:(m,y,t)=>{"use strict";const{print:g}=t(231),x=t(3853),u=t(7507),h=class extends x{constructor(){super(...arguments);C(this,"name")}get length(){return this.childNodes.length}get children(){return this.childNodes.filter(({type:s})=>s!=="text")}get firstElementChild(){return this.childNodes.find(({type:e})=>e!=="text")}get lastElementChild(){return this.children.at(-1)}append(...e){for(const s of e)this.insertAt(s)}replaceChildren(...e){for(let s=this.childNodes.length-1;s>=0;s--)this.removeAt(s);this.append(...e)}setText(e,s=0){const n=this.childNodes.at(s),{type:o,data:r}=n;if(o==="text")return n.replaceData(e),r}toString(e,s=""){return this.childNodes.map(n=>n.toString()).join(s)}lint(e=0){const s=t(8058);if(this instanceof s||this.constructor.hidden||this.type==="ext-inner"&&h.lintIgnoredExt.has(this.name))return[];const n=[];for(let o=0,r=e+this.getPadding();o<this.childNodes.length;o++){const l=this.childNodes[o];n.push(...l.lint(r)),r+=String(l).length+this.getGaps(o)}return n}print(e={}){var s;return String(this)?`<span class="wpb-${(s=e.class)!=null?s:this.type}">${g(this.childNodes,e)}</span>`:""}};let d=h;C(d,"lintIgnoredExt",new Set(["nowiki","pre","charinsert","score","syntaxhighlight","source","math","chem","ce","graph","mapframe","maplink","quiz","templatedata","timeline"])),m.exports=d},3853:(m,y,t)=>{var u,d,q,c,st;"use strict";const{text:g}=t(231);class x{constructor(){b(this,d);b(this,c);C(this,"type");C(this,"childNodes",[]);b(this,u,void 0)}get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes.at(-1)}get parentNode(){return T(this,u)}get nextSibling(){var n;const s=(n=T(this,u))==null?void 0:n.childNodes;return s&&s[s.indexOf(this)+1]}get previousSibling(){var n;const s=(n=T(this,u))==null?void 0:n.childNodes;return s&&s[s.indexOf(this)-1]}hasAttribute(s){return s in this}getAttribute(s){return this.hasAttribute(s)?String(this[s]):void 0}setAttribute(s,n){return s==="parentNode"?H(this,u,n):this[s]=n,this}text(s=""){return g(this.childNodes,s)}removeAt(s){const n=[...this.childNodes],[o]=n.splice(s,1);return o.setAttribute("parentNode"),this.setAttribute("childNodes",n),o}insertAt(s,n=this.childNodes.length){const o=[...this.childNodes];return-1===-1&&s.setAttribute("parentNode",this),o.splice(n,0,s),this.setAttribute("childNodes",o),s}normalize(){var o;const s=t(7507),n=[...this.childNodes];for(let r=n.length-1;r>=0;r--){const{type:l,data:i}=n[r];this.getGaps(r-1)||(i===""?n.splice(r,1):l==="text"&&((o=n[r-1])==null?void 0:o.type)==="text"&&(n[r-1].setAttribute("data",n[r-1].data+i),n.splice(r,1)))}this.setAttribute("childNodes",n)}getRootNode(){let{parentNode:s}=this;for(;s!=null&&s.parentNode;)({parentNode:s}=s);return s!=null?s:this}posFromIndex(s){const n=String(this);if(s>=-n.length&&s<=n.length){const o=n.slice(0,s).split(`
`);return{top:o.length-1,left:o.at(-1).length}}}getPadding(){return 0}getGaps(){return 0}getRelativeIndex(s){let n;const o=(r,l)=>n.slice(0,r).reduce((i,p,f)=>i+String(p).length+l.getGaps(f),0)+l.getPadding();if(s===void 0){const{parentNode:r}=this;return r?({childNodes:n}=r,o(n.indexOf(this),r)):0}return{childNodes:n}=this,o(s,this)}getAbsoluteIndex(){const{parentNode:s}=this;return s?s.getAbsoluteIndex()+this.getRelativeIndex():0}getBoundingClientRect(){return{...U(this,d,q).call(this),...this.getRootNode().posFromIndex(this.getAbsoluteIndex())}}get offsetHeight(){return U(this,d,q).call(this).height}get offsetWidth(){return U(this,d,q).call(this).width}get style(){return{...U(this,c,st).call(this),...U(this,d,q).call(this),padding:this.getPadding()}}}u=new WeakMap,d=new WeakSet,q=function(){const s=String(this).split(`
`);return{height:s.length,width:s.at(-1).length}},c=new WeakSet,st=function(s){var n,o;return s===void 0?(o=(n=this.parentNode)==null?void 0:n.posFromIndex(this.getRelativeIndex()))!=null?o:{top:0,left:0}:this.posFromIndex(this.getRelativeIndex(s))},m.exports=x},7507:(m,y,t)=>{var u,nt;"use strict";const g=t(3853),h=class extends g{constructor(e=""){super();b(this,u);C(this,"type","text");C(this,"data");this.data=e}toString(){return this.data}text(){return this.data}replaceData(e=""){U(this,u,nt).call(this,e)}lint(e=0){const{data:s}=this,n=[...s.matchAll(h.errorSyntax)];if(n.length>0){const{top:o,left:r}=this.getRootNode().posFromIndex(e);return n.map(({0:l,1:i,index:p})=>{i&&(p+=i.length,l=l.slice(i.length));const f=s.slice(0,p).split(`
`),A=f.length+o-1,{length:$}=f.at(-1),k=f.length>1?$:r+$;return{message:`\u5B64\u7ACB\u7684"${l[0]}"`,severity:l[0]==="{"||l[0]==="}"?"error":"warning",startLine:A,endLine:A,startCol:k,endCol:k+l.length}})}return[]}};let x=h;u=new WeakSet,nt=function(e){return e=String(e),this.setAttribute("data",e),this},C(x,"errorSyntax",/[{}]+|\[{2,}|\[(?!(?:(?!https?\b)[^[])*\])|((?:^|\])[^[]*?)\]+|<(?=\s*\/?\w+[\s/>])/giu),m.exports=x},6986:(m,y,t)=>{"use strict";const g=t(6010);class x{constructor(d,h=0,c=g.getConfig()){C(this,"valid",!0);C(this,"ns",0);const{namespaces:a,nsid:e}=c;let s=a[h];d=d.replaceAll("_"," ").trim(),d[0]===":"&&(s="",d=d.slice(1).trim());const n=d.split(":");if(n.length>1){const l=a[e[n[0].trim().toLowerCase()]];l!==void 0&&(s=l,d=n.slice(1).join(":").trim())}this.ns=e[s.toLowerCase()];const o=d.indexOf("#");let r="";o!==-1&&(r=d.slice(o+1).trimEnd(),d=d.slice(0,o).trim()),this.valid=Boolean(d||r)&&!/\0\d+[eh!+-]\x7F|[<>[\]{}|]/u.test(d)}}m.exports=x},2308:m=>{"use strict";const y=t=>{var g;return g=class extends t{text(){return""}},C(g,"hidden",!0),g};m.exports=y},8275:(m,y,t)=>{"use strict";const{removeComment:g}=t(231),x=t(6010),u=(d,h=x.getConfig(),c=[])=>{var p,f,A,$,k;const a="^(\0\\d+c\x7F)*={1,6}|\\[\\[|\\{{2,}|-\\{(?!\\{)",e=[],s={"=":`
`,"{":"\\}{2,}|\\|","-":"\\}-","[":"\\]\\]"},n={"!":"!","!!":"+","(!":"{","!)":"}","!-":"-","=":"~"};let o=new RegExp(a,"gmu"),r=o.exec(d),l=d.includes("}}"),i;for(;r||i<=d.length&&((f=(p=e.at(-1))==null?void 0:p[0])==null?void 0:f[0])==="=";){if(r!=null&&r[1]){const[,{length:M}]=r;r[0]=r[0].slice(M),r.index+=M}const{0:S,index:w}=r!=null?r:{0:`
`,index:d.length},F=(A=e.pop())!=null?A:{},{0:v,index:E,parts:I,findEqual:j,pos:D}=F,z=S==="="&&j;if(S==="]]"||S==="}-")i=w+2;else if(S===`
`){i=w+1;const{pos:M,findEqual:X}=($=e.at(-1))!=null?$:{};if(!M||X||g(d.slice(M,E))!==""){const B=/^(={1,6})(.+)\1((?:\s|\0\d+c\x7F)*)$/u.exec(d.slice(E,w));if(B){d=`${d.slice(0,E)}\0${c.length}h\x7F${d.slice(w)}`,i=E+4+String(c.length).length;const K=t(9450);new K(B[1].length,B.slice(2),h,c)}}}else if(S==="|"||z)i=w+1,I.at(-1).push(d.slice(D,w)),S==="|"&&I.push([]),F.pos=i,F.findEqual=S==="|",e.push(F);else if(S.startsWith("}}")){const M=S.slice(0,Math.min(v.length,3)),X=v.length-M.length,{length:B}=c;i=w+M.length,I.at(-1).push(d.slice(D,w));let K=!1,W="t";if(M.length===3){const Y=t(9544);new Y(I.map(Q=>Q.join("=")),h,c)}else{const Y=g(I[0][0]);Y in n?W=n[Y]:/^(?:fullurl|canonicalurl|filepath):./iu.test(Y)&&(W="m");try{const Q=t(1782);new Q(I[0][0],I.slice(1),h,c)}catch(Q){if(Q instanceof Error&&Q.message.startsWith("\u975E\u6CD5\u7684\u6A21\u677F\u540D\u79F0\uFF1A"))i=E+v.length,K=!0;else throw Q}}K||(d=`${d.slice(0,E+X)}\0${B}${W}\x7F${d.slice(i)}`,i=E+X+3+String(B).length,X>1?e.push({0:v.slice(0,X),index:E,pos:E+X,parts:[[]]}):X===1&&d[E-1]==="-"&&e.push({0:"-{",index:E-1,pos:E+1,parts:[[]]}))}else i=w+S.length,S[0]==="{"&&(r.pos=i,r.parts=[[]]),e.push(..."0"in F?[F]:[],r);l&&(l=d.slice(i).includes("}}"));let V=e.at(-1);!l&&((k=V==null?void 0:V[0])==null?void 0:k[0])==="{"&&(e.pop(),V=e.at(-1)),o=new RegExp(a+(V?`|${s[V[0][0]]}${V.findEqual?"|=":""}`:""),"gmu"),o.lastIndex=i,r=o.exec(d)}return d};m.exports=u},4907:(m,y,t)=>{"use strict";const g=t(6010),x=(u,d=g.getConfig(),h=[],c=!1)=>{const a=/<onlyinclude>(.*?)<\/onlyinclude>/gsu;if(c&&u.search(a)!==-1)return u.replaceAll(a,(r,l)=>{const i=`\0${h.length}e\x7F`,p=t(851);return new p(l,d,h),i}).replaceAll(/(^|\0\d+e\x7F)(.*?)(?=$|\0\d+e\x7F)/gsu,(r,l,i)=>{if(i==="")return l;const p=t(3423);return new p(i,d,h),`${l}\0${h.length-1}c\x7F`});const e=d.ext.join("|"),s=c?"includeonly":"(?:no|only)include",n=c?"noinclude":"includeonly",o=new RegExp(`<!--.*?(?:-->|$)|<${s}(?:\\s[^>]*?)?>|</${s}\\s*>|<(${e})(\\s[^>]*?)?(?:/>|>(.*?)</(\\1\\s*)>)|<(${n})(\\s[^>]*?)?(?:/>|>(.*?)(?:</(\\5\\s*)>|$))`,"gisu");return u.replaceAll(o,(r,l,i,p,f,A,$,k,S)=>{const w=`\0${h.length}${l?"e":"c"}\x7F`;if(l){const F=t(7267);new F(l,i,p,f,d,h)}else if(r.startsWith("<!--")){const F=t(5749),v=r.endsWith("-->");new F(r.slice(4,v?-3:void 0),v,d,h)}else if(A){const F=t(8655);new F(A,$,k,S,d,h)}else{const F=t(3423);new F(r,d,h)}return w})};m.exports=x},3765:(m,y,t)=>{"use strict";const g=t(6010),x=(u,d=g.getConfig(),h=[])=>{const c=t(9910),a=/-\{/gu,e=/-\{|\}-/gu,s=[];let n=a,o=n.exec(u);for(;o;){const{0:r,index:l}=o;if(r==="}-"){const i=s.pop(),{length:p}=h,f=u.slice(i.index+2,l),A=f.indexOf("|"),[$,k]=A===-1?[[],f]:[f.slice(0,A).split(";"),f.slice(A+1)],S=k.replaceAll(/(&[#a-z\d]+);/giu,"$1"),w=`(?:${d.variants.join("|")})`,F=S.split(new RegExp(`;(?=\\s*(?:${w}|[^;]*?=>\\s*${w})\\s*:)`,"u")).map(v=>v.replaceAll("",";"));new c($,F,d,h),u=`${u.slice(0,i.index)}\0${p}v\x7F${u.slice(l+2)}`,s.length===0&&(n=a),n.lastIndex=i.index+3+String(p).length}else s.push(o),n=e;o=n.exec(u)}return u};m.exports=x},7513:(m,y,t)=>{"use strict";const{extUrlChar:g}=t(231),x=t(6010),u=(d,h=x.getConfig(),c=[])=>{const a=t(741),e=new RegExp(`\\[((?:${h.protocol}|//)${g}|\0\\d+m\x7F)(\\p{Zs}*)([^\\]-\b
-\uFFFD]*)\\]`,"giu");return d.replaceAll(e,(s,n,o,r)=>{const{length:l}=c,i=/&[lg]t;/u.exec(n);return i&&(n=n.slice(0,i.index),o="",r=`${n.slice(i.index)}${o}${r}`),new a(n,o,r,h,c),`\0${l}w\x7F`})};m.exports=u},2937:(m,y,t)=>{"use strict";const g=t(6010),x=({firstChild:{data:u},type:d,name:h},c=g.getConfig(),a=[])=>{const e=t(7507),s=t(8138),n=t(2582),o=t(7815),{doubleUnderscore:r}=c;return d!=="root"&&(d!=="ext-inner"||h!=="poem")&&(u=`\0${u}`),u=u.replaceAll(/^((?:\0\d+c\x7F)*)(-{4,})/gmu,(l,i,p)=>(new n(p.length,c,a),`${i}\0${a.length-1}r\x7F`)).replaceAll(new RegExp(`__(${r.flat().join("|")})__`,"giu"),(l,i)=>r[0].includes(i.toLowerCase())||r[1].includes(i)?(new o(i,c,a),`\0${a.length-1}u\x7F`):l),d==="root"||d==="ext-inner"&&h==="poem"?u:u.slice(1)};m.exports=x},5130:(m,y,t)=>{"use strict";const g=t(6010),x=(u,d=g.getConfig(),h=[])=>{const c=/^(\/?)([a-z][^\s/>]*)(\s[^>]*?)?(\/?>)([^<]*)$/iu,a=d.html.flat(),e=u.split("<");let s=e.shift();for(const n of e){const o=c.exec(n),r=o==null?void 0:o[2],l=r==null?void 0:r.toLowerCase();if(!o||!a.includes(l)){s+=`<${n}`;continue}const i=t(5037),[,p,,f="",A,$]=o,k=new i(f,"html-attr",l,d,h),S=k.getAttr("itemprop");if(l==="meta"&&(S===void 0||k.getAttr("content")===void 0)||l==="link"&&(S===void 0||k.getAttr("href")===void 0)){s+=`<${n}`,h.pop();continue}s+=`\0${h.length}x\x7F${$}`;const w=t(2350);new w(r,k,p==="/",A==="/>",d,h)}return s};m.exports=x},1452:(m,y,t)=>{"use strict";const g=t(6010),x=(u,d=g.getConfig(),h=[])=>{const c=t(3360),a=/^((?:(?!\0\d+!\x7F)[^\n<>[\]{}|])+)(?:(\||\0\d+!\x7F)(.*?[^\]]))?\]\](.*)$/su,e=/^((?:(?!\0\d+!\x7F)[^\n<>[\]{}|])+)(\||\0\d+!\x7F)(.*)$/su,s=new RegExp(`^\\s*(?:${d.protocol})`,"iu"),n=u.split("[[");let o=n.shift();for(let r=0;r<n.length;r++){let l,i,p,f,A;const $=n[r],k=a.exec($);if(k)[,i,p,f,A]=k,A[0]==="]"&&(f==null?void 0:f.includes("["))&&(f+="]",A=A.slice(1));else{const j=e.exec($);j&&(l=!0,[,i,p,f]=j)}if(i===void 0||s.test(i)||/\0\d+[exhbru]\x7F/u.test(i)){o+=`[[${$}`;continue}let S=i;if(i.includes("%"))try{S=decodeURIComponent(i)}catch(j){}const w=i.trim()[0]===":";if(w&&l){o+=`[[${$}`;continue}const F=g.normalizeTitle(S,0,!1,d,!0),{ns:v,valid:E}=F;if(E){if(l){if(v!==6){o+=`[[${$}`;continue}let j;for(r++;r<n.length;r++){const D=n[r],z=D.split("]]");if(z.length>2){j=!0,f+=`[[${z[0]}]]${z[1]}`,A=z.slice(2).join("]]");break}else if(z.length===2)f+=`[[${z[0]}]]${z[1]}`;else{f+=`[[${D}`;break}}if(f=x(f,d,h),!j){o+=`[[${i}${p}${f}`;continue}}}else{o+=`[[${$}`;continue}f&&(f=c(f,d,h)),o+=`\0${h.length}l\x7F${A}`;let I=t(3905);w||(v===6?I=t(7625):v===14&&(I=t(337))),new I(i,f,F,d,h,p)}return o};m.exports=x},6622:(m,y,t)=>{"use strict";const g=t(6010),x=(u,d=g.getConfig(),h=[])=>{const c=/^((?:\0\d+c\x7F)*)([;:*#]+)/u.exec(u);if(!c)return u;const a=t(962),[e,s,n]=c;u=`${s}\0${h.length}d\x7F${u.slice(e.length)}`,new a(n,d,h);let o=n.split(";").length-1;if(!o)return u;const r=t(3434);let l=/:+|-\{/gu,i=l.exec(u),p=0;for(;i&&o;){const{0:f,index:A}=i;if(f[0]===":"){if(f.length>=o)return new r(":".repeat(o),d,h),`${u.slice(0,A)}\0${h.length-1}d\x7F${u.slice(A+o)}`;u=`${u.slice(0,A)}\0${h.length}d\x7F${u.slice(l.lastIndex)}`,o-=f.length,l.lastIndex=A+4+String(h.length).length,new r(f,d,h)}else if(f==="-{"){if(!p){const{lastIndex:$}=l;l=/-\{|\}-/gu,l.lastIndex=$}p++}else if(p--,!p){const{lastIndex:$}=l;l=/:+|-\{/gu,l.lastIndex=$}i=l.exec(u)}return u};m.exports=x},4737:(m,y,t)=>{"use strict";const{extUrlChar:g}=t(231),x=t(6010),u=(d,h=x.getConfig(),c=[])=>{const a=t(8962),e=new RegExp(`\\b(?:${h.protocol})(${g})`,"giu");return d.replaceAll(e,(s,n)=>{let o="",r=s;const l=/&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(r);l&&(o=r.slice(l.index),r=r.slice(0,l.index));const i=new RegExp(`[,;.:!?${r.includes("(")?"":")"}]+$`,"u"),p=i.exec(r);if(p){let f=0;p[0][0]===";"&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/iu.test(r.slice(0,p.index))&&(f=1),o=`${r.slice(p.index+f)}${o}`,r=r.slice(0,p.index+f)}return o.length>=n.length?s:(new a(r,!1,h,c),`\0${c.length-1}w\x7F${o}`)})};m.exports=u},3360:(m,y,t)=>{"use strict";const g=t(6010),x=(u,d=g.getConfig(),h=[])=>{var i;const c=u.split(/('{2,})/u),{length:a}=c;if(a===1)return u;let e=0,s=0,n,o,r;for(let p=1;p<a;p+=2){const{length:f}=c[p];switch(f){case 2:s++;break;case 4:c[p-1]+="'",c[p]="'''";case 3:if(e++,n)break;c[p-1].at(-1)===" "?!o&&!r&&(r=p):c[p-1].at(-2)===" "?n=p:o||(o=p);break;default:c[p-1]+="'".repeat(f-5),c[p]="'''''",s++,e++}}if(s%2===1&&e%2===1){const p=(i=n!=null?n:o)!=null?i:r;c[p]="''",c[p-1]+="'"}const l=t(6714);for(let p=1;p<a;p+=2)new l(c[p].length,d,h),c[p]=`\0${h.length-1}q\x7F`;return c.join("")};m.exports=x},4624:(m,y,t)=>{"use strict";const g=t(6010),x=t(7507),u=t(8138),d=t(2840),h=t(3125),c=t(5567),a=({firstChild:{data:e},type:s,name:n},o=g.getConfig(),r=[])=>{const l=[],i=e.split(`
`);let p=s==="root"||s==="parameter-value"||s==="ext-inner"&&n==="poem"?"":`
${i.shift()}`;const f=(A,$)=>{if(!$){p+=A;return}const{lastChild:k}=$;if(k.constructor===u)k.setText(String(k)+A);else{const S=new u(A,o,!0,r);S.type="table-inter",$.insertAt(S.setAttribute("stage",3))}};for(const A of i){let $=l.pop();const[k]=/^(?:\s|\0\d+c\x7F)*/u.exec(A),S=A.slice(k.length),w=/^(:*)((?:\s|\0\d+c\x7F)*)(\{\||\{\0\d+!\x7F|\0\d+\{\x7F)(.*)$/u.exec(S);if(w){for(;$&&$.type!=="td";)$=l.pop();const[,D,z,V,M]=w;if(D){const B=t(3434);new B(D,o,r)}f(`
${k}${D&&`\0${r.length-1}d\x7F`}${z}\0${r.length}b\x7F`,$);const X=new d(V,M,o,r);l.push(...$?[$]:[],X);continue}else if(!$){p+=`
${A}`;continue}const F=/^(?:(\|\}|\0\d+!\x7F\}|\0\d+\}\x7F)|(\|-+|\0\d+!\x7F-+|\0\d+-\x7F-*)(?!-)|(!|(?:\||\0\d+!\x7F)\+?))(.*)$/u.exec(S);if(!F){f(`
${A}`,$),l.push(...$?[$]:[]);continue}const[,v,E,I,j]=F;if(v){for(;!($ instanceof d);)$=l.pop();$.close(`
${k}${v}`,!0),f(j,l.at(-1))}else if(E){$.type==="td"&&($=l.pop()),$.type==="tr"&&($=l.pop());const D=new h(`
${k}${E}`,j,o,r);l.push($,D),$.insertAt(D)}else{$.type==="td"&&($=l.pop());const D=I==="!"?/!!|(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu:/(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu;let z=D.exec(j),V=0,M=`
${k}${I}`;for(;z;){const B=new c(M,j.slice(V,z.index),o,r);$.insertAt(B),{lastIndex:V}=D,[M]=z,z=D.exec(j)}const X=new c(M,j.slice(V),o,r);l.push($,X),$.insertAt(X)}}return p.slice(1)};m.exports=a},9544:(m,y,t)=>{"use strict";const{text:g}=t(231),{generateForChild:x}=t(8277),u=t(6010),d=t(8138);class h extends d{constructor(e,s=u.getConfig(),n=[]){super(void 0,s,!0,n,{AtomToken:0,Token:1,HiddenToken:"2:"});C(this,"type","arg");for(let o=0;o<e.length;o++)if(o===0||o>1){const r=t(o===0?9237:9263),l=new r(e[o],o===0?"arg-name":void 0,s,n,{"Stage-2":":","!HeadingToken":""});super.insertAt(l)}else{const r=new d(e[o],s,!0,n);r.type="arg-default",super.insertAt(r.setAttribute("stage",2))}}toString(e){return`{{{${super.toString(e,"|")}}}}`}text(){return`{{{${g(this.childNodes.slice(0,2),"|")}}}}`}getPadding(){return 3}getGaps(){return 1}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}lint(e=0){const{childNodes:[s,n,...o]}=this,r=s.lint(e+3);if(n&&r.push(...n.lint(e+4+String(s).length)),o.length>0){const l=this.getRootNode().posFromIndex(e);r.push(...o.map(i=>x(i,l,"\u4E09\u91CD\u62EC\u53F7\u5185\u7684\u4E0D\u53EF\u89C1\u90E8\u5206")))}return r}}m.exports=h},9263:(m,y,t)=>{"use strict";const g=t(2308),x=t(9237);class u extends g(x){constructor(){super(...arguments);C(this,"type","hidden")}}m.exports=u},9237:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138);class u extends x{constructor(c,a,e=g.getConfig(),s=[],n=null){super(c,e,!0,s,n);C(this,"type","plain");a&&(this.type=a)}}m.exports=u},5037:(m,y,t)=>{var c,a,e,s,rt;"use strict";const{generateForSelf:g}=t(8277),{removeComment:x}=t(231),u=t(6010),d=t(8138);class h extends d{constructor(l,i,p,f=u.getConfig(),A=[]){super(l,f,!0,A);b(this,s);b(this,c,new Map);b(this,a,!0);b(this,e,!0);this.type=i,U(this,s,rt).call(this)}getAttr(l){return T(this,c).get(l.toLowerCase().trim())}setAttr(l,i,p){l=l.toLowerCase().trim();const f=l;if(/^(?:[\w:]|\0\d+[t!~{}+-]\x7F)(?:[\w:.-]|\0\d+[t!~{}+-]\x7F)*$/u.test(f))i===!1?T(this,c).delete(l):T(this,c).set(l,i===!0?!0:i.replaceAll(/\s/gu," ").trim());else return p,!1;return!0}lint(l=0){const i=t(2350),p=super.lint(l);let f;return this.type==="html-attr"&&this.parentNode.closing&&this.text().trim()&&(f=this.getRootNode().posFromIndex(l),p.push(g(this,f,"\u4F4D\u4E8E\u95ED\u5408\u6807\u7B7E\u7684\u5C5E\u6027"))),T(this,a)?T(this,e)||(f||(f=this.getRootNode().posFromIndex(l)),p.push(g(this,f,"\u672A\u95ED\u5408\u7684\u5F15\u53F7","warning"))):(f||(f=this.getRootNode().posFromIndex(l)),p.push(g(this,f,"\u5305\u542B\u65E0\u6548\u5C5E\u6027"))),p}}c=new WeakMap,a=new WeakMap,e=new WeakMap,s=new WeakSet,rt=function(){var i;let l=this.toString();l=x(l).replaceAll(/\0\d+~\x7F/gu,"=");for(const[,p,f,A,$,k]of l.matchAll(/([^\s/][^\s/=]*)(?:\s*=\s*(?:(["'])(.*?)(\2|$)|(\S*)))?/gsu))this.setAttr(p,(i=A!=null?A:k)!=null?i:!0,!0)?f!==$&&H(this,e,!1):H(this,a,!1)},m.exports=h},8103:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138),u=t(2158);class d extends x{constructor(a,e=g.getConfig(),s=[]){super(void 0,e,!0,s,{HasNowikiToken:":"});C(this,"type","ext-inner");C(this,"name","charinsert");this.append(...a.split(`
`).map(n=>new u(n,"charinsert-line",e,s)))}toString(a){return super.toString(a,`
`)}getGaps(){return 1}print(){return super.print({sep:`
`})}}m.exports=d},9910:(m,y,t)=>{"use strict";const{text:g,print:x}=t(231),u=t(6010),d=t(8138),h=t(6719),c=t(8683);class a extends d{constructor(n,o,r=u.getConfig(),l=[]){super(void 0,r,!0,l);C(this,"type","converter");this.append(new h(n,r,l));const[i]=o,p=i.includes(":"),f=new c(i,p,r,l);p&&f.childNodes.length===1?this.insertAt(new c(o.join(";"),!1,r,l)):this.append(f,...o.slice(1).map(A=>new c(A,!0,r,l)))}toString(n){const{childNodes:[o,...r]}=this;return`-{${o.toString()}${o.childNodes.length>0?"|":""}${r.map(String).join(";")}}-`}text(){const{childNodes:[n,...o]}=this;return`-{${n.text()}|${g(o,";")}}-`}getPadding(){return 2}getGaps(n=0){return n=n<0?n+this.childNodes.length:n,n||this.firstChild.childNodes.length>0?1:0}print(){const{children:[n,...o]}=this;return`<span class="wpb-converter">-{${n.print()}${n.childNodes.length>0?"|":""}${x(o,{sep:";"})}}-</span>`}}m.exports=a},6719:(m,y,t)=>{var c;"use strict";const{generateForChild:g}=t(8277),x=t(6010),u=t(8138),d=t(9237);class h extends u{constructor(s,n=x.getConfig(),o=[]){super(void 0,n,!0,o,{AtomToken:":"});C(this,"type","converter-flags");b(this,c,void 0);this.append(...s.map(r=>new d(r,"converter-flag",n,o)))}afterBuild(){return H(this,c,this.childNodes.map(s=>s.text().trim())),this}toString(s){return super.toString(s,";")}text(){return super.text(";")}getGaps(){return 1}print(){return super.print({sep:";"})}lint(s=0){const n=this.getVariantFlags(),o=this.getUnknownFlags(),r=T(this,c).filter(A=>!A),l=T(this,c).filter(A=>["A","T","R","D","-","H","N"].includes(A)),i=T(this,c).length-o.length-r,p=super.lint(s);if(n.length===i||l.length===i)return p;const f=this.getRootNode().posFromIndex(s);for(const A of this.childNodes){const $=A.text().trim();$&&!n.includes($)&&!o.includes($)&&(n.length>0||!l.includes($))&&p.push(g(A,f,"\u65E0\u6548\u7684\u8F6C\u6362\u6807\u8BB0"))}return p}getUnknownFlags(){return T(this,c).filter(s=>/\{\{[^{}]+\}\}/u.test(s))}getVariantFlags(){const{variants:s}=this.getAttribute("config");return T(this,c).filter(n=>s.includes(n))}}c=new WeakMap,m.exports=h},8683:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138),u=t(9237);class d extends x{constructor(a,e=!0,s=g.getConfig(),n=[]){super(void 0,s,!0,n);C(this,"type","converter-rule");if(e){const o=a.indexOf(":"),r=a.slice(0,o).indexOf("=>"),l=r===-1?a.slice(0,o):a.slice(r+2,o),{variants:i}=s;i.includes(l.trim())?(super.insertAt(new u(l,"converter-rule-variant",s,n)),super.insertAt(new u(a.slice(o+1),"converter-rule-to",s,n)),r!==-1&&super.insertAt(new u(a.slice(0,r),"converter-rule-from",s,n),0)):super.insertAt(new u(a,"converter-rule-noconvert",s,n))}else super.insertAt(new u(a,"converter-rule-noconvert",s,n))}toString(a){if(this.childNodes.length===3){const{childNodes:[e,s,n]}=this;return`${e.toString(a)}=>${s.toString(a)}:${n.toString(a)}`}return super.toString(a,":")}text(){if(this.childNodes.length===3){const{childNodes:[a,e,s]}=this;return`${a.text()}=>${e.text()}:${s.text()}`}return super.text(":")}getGaps(a=0){const{length:e}=this;return a=a<0?a+e:a,a===0&&e===3?2:1}print(){if(this.childNodes.length===3){const{childNodes:[a,e,s]}=this;return`<span class="wpb-converter-rule">${a.print()}=>${e.print()}:${s.print()}</span>`}return super.print({sep:":"})}}m.exports=d},741:(m,y,t)=>{var h;"use strict";const g=t(6010),x=t(8138),u=t(8962);class d extends x{constructor(e,s,n,o=g.getConfig(),r=[]){super(void 0,o,!0,r,{MagicLinkToken:0,Token:1});C(this,"type","ext-link");b(this,h,void 0);if(this.insertAt(new u(e,!0,o,r)),H(this,h,s),n){const l=new x(n,o,!0,r,{"Stage-7":":",ConverterToken:":"});l.type="ext-link-text",this.insertAt(l.setAttribute("stage",g.MAX_STAGE-1))}}toString(e){return this.childNodes.length===1?`[${super.toString(e)}${T(this,h)}]`:`[${super.toString(e,T(this,h))}]`}text(){return`[${super.text(" ")}]`}getPadding(){return 1}getGaps(){return T(this,h).length}print(){const{length:e}=this;return super.print(e>1?{pre:"[",sep:T(this,h),post:"]"}:{pre:"[",post:`${T(this,h)}]`})}}h=new WeakMap,m.exports=d},1891:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138),u=t(1031),d=t(9263);class h extends x{constructor(e,s=g.getConfig(),n=[]){var r;super(void 0,s,!0,n,{AstText:":",GalleryImageToken:":",HiddenToken:":"});C(this,"type","ext-inner");C(this,"name","gallery");const o=structuredClone(s);for(const[l,i]of Object.entries(s.img))i==="width"&&delete o.img[l];for(const l of(r=e==null?void 0:e.split(`
`))!=null?r:[]){const i=/^([^|]+)(?:\|(.*))?/u.exec(l);if(!i){super.insertAt(l.trim()?new d(l,void 0,s,[],{AstText:":"}):l);continue}const[,p,f]=i;let A;try{A=this.normalizeTitle(decodeURIComponent(p),6,!0)}catch($){A=this.normalizeTitle(p,6,!0)}A.valid?super.insertAt(new u(p,f,A,o,n)):super.insertAt(new d(l,void 0,s,[],{AstText:":"}))}}toString(e){return super.toString(e,`
`)}text(){return super.text(`
`).replaceAll(/\n\s*\n/gu,`
`)}getGaps(){return 1}print(){return super.print({sep:`
`})}lint(e=0){const{top:s,left:n}=this.getRootNode().posFromIndex(e),o=[];for(let r=0,l=e;r<this.childNodes.length;r++){const i=this.childNodes[r],p=String(i),f=p.trim();i.type==="hidden"&&f&&!/^<!--.*-->$/u.test(f)?o.push({message:"\u56FE\u5E93\u4E2D\u7684\u65E0\u6548\u5185\u5BB9",startLine:s+r,endLine:s+r,startCol:r?0:n,endCol:r?p.length:n+p.length}):i.type!=="hidden"&&i.type!=="text"&&o.push(...i.lint(l)),l+=p.length+1}return o}}m.exports=h},2158:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138);class u extends x{constructor(h,c,a=g.getConfig(),e=[]){const s=t(3423);h=h.replaceAll(/(<nowiki>)(.*?)(<\/nowiki>)/giu,(n,o,r,l)=>(new s(o,a,e),new s(l,a,e),`\0${e.length-1}c\x7F${r}\0${e.length}c\x7F`)),super(h,a,!0,e,{AstText:":",NoincludeToken:":"}),this.type=c}}m.exports=u},428:(m,y,t)=>{"use strict";const g=t(6010),x=t(2158);class u extends x{constructor(c,a=g.getConfig(),e=[]){super(c,"ext-inner",a,e);C(this,"name","pre");this.setAttribute("stage",g.MAX_STAGE-1)}isPlain(){return!0}}m.exports=u},9450:(m,y,t)=>{"use strict";const{generateForSelf:g}=t(8277),x=t(6010),u=t(8138);class d extends u{constructor(a,e,s=x.getConfig(),n=[]){super(void 0,s,!0,n);C(this,"type","heading");this.setAttribute("name",String(a));const o=new u(e[0],s,!0,n);o.type="heading-title",o.setAttribute("stage",2);const r=t(8058),l=new r(e[1],/^[^\S\n]*$/u,"heading-trail",s,n,{"Stage-1":":","!ExtToken":""});this.append(o,l)}toString(a){const e="=".repeat(Number(this.name));return`${e}${this.firstChild.toString()}${e}${this.lastChild.toString()}`}text(){const a="=".repeat(Number(this.name));return`${a}${this.firstChild.text()}${a}`}getPadding(){return super.getPadding()+Number(this.name)}getGaps(){return Number(this.name)}print(){const a="=".repeat(Number(this.name));return super.print({pre:a,sep:a})}lint(a=0){const e=super.lint(a);return this.name==="1"&&e.push(g(this,this.getRootNode().posFromIndex(a),"<h1>")),e}}m.exports=d},2350:(m,y,t)=>{var h,c,a;"use strict";const{generateForSelf:g}=t(8277),x=t(6010),u=t(8138);class d extends u{constructor(n,o,r,l,i=x.getConfig(),p=[]){super(void 0,i,!0,p);C(this,"type","html");b(this,h,void 0);b(this,c,void 0);b(this,a,void 0);this.insertAt(o),this.setAttribute("name",n.toLowerCase()),H(this,h,r),H(this,c,l),H(this,a,n)}get closing(){return T(this,h)}toString(n){return`<${T(this,h)?"/":""}${T(this,a)}${super.toString()}${T(this,c)?"/":""}>`}text(){return`<${T(this,h)?"/":""}${T(this,a)}${T(this,h)?"":super.text()}${T(this,c)?"/":""}>`}getPadding(){return T(this,a).length+(T(this,h)?2:1)}print(){return super.print({pre:`&lt;${T(this,h)?"/":""}${T(this,a)}`,post:`${T(this,c)?"/":""}&gt;`})}lint(n=0){const o=super.lint(n);let r;this.name==="h1"&&!T(this,h)&&(r=g(this,this.getRootNode().posFromIndex(n),"<h1>"),o.push(r));try{this.findMatchingTag()}catch({message:l}){const[i]=l.split("\uFF1A");r||(r=g(this,this.getRootNode().posFromIndex(n),"")),o.push({...r,message:i,severity:i==="\u672A\u95ED\u5408\u7684\u6807\u7B7E"?"warning":"error"})}return o}findMatchingTag(){const{html:n}=this.getAttribute("config"),{name:o,parentNode:r}=this,l=String(this);if(T(this,h)&&T(this,c))throw new SyntaxError(`\u540C\u65F6\u95ED\u5408\u548C\u81EA\u5C01\u95ED\u7684\u6807\u7B7E\uFF1A${l}`);if(n[2].includes(o)||T(this,c)&&n[1].includes(o))return this;if(T(this,c)&&n[0].includes(o))throw new SyntaxError(`\u65E0\u6548\u81EA\u5C01\u95ED\u6807\u7B7E\uFF1A${l}`);if(!r)return;const{childNodes:i}=r,p=i.indexOf(this),f=T(this,h)?i.slice(0,p).reverse().filter(({type:$,name:k})=>$==="html"&&k===o):i.slice(p+1).filter(({type:$,name:k})=>$==="html"&&k===o);let A=T(this,h)?-1:1;for(const $ of f)if($.closing?A--:A++,A===0)return $;throw new SyntaxError(`\u672A${T(this,h)?"\u5339\u914D\u7684\u95ED\u5408":"\u95ED\u5408\u7684"}\u6807\u7B7E\uFF1A${l}`)}}h=new WeakMap,c=new WeakMap,a=new WeakMap,m.exports=d},1874:(m,y,t)=>{var c,it,e;"use strict";const{print:g,extUrlChar:x}=t(231),u=t(6010),d=t(8138),n=class extends d{constructor(l,i=u.getConfig(),p=[]){var r=(...s)=>{super(...s);C(this,"type","image-parameter");b(this,e,"")};var $;const f=Object.entries(i.img).map(([k,S])=>[k,S,new RegExp(`^(\\s*)${k.replace("$1","(.*)")}(\\s*)$`,"u")]),A=f.find(([,,k])=>k.test(l));if(A){const k=A[2].exec(l);if(k.length!==4||U($=n,c,it).call($,A[1],k[2],i,!0)){k.length===3?(r(void 0,i,!0,p),H(this,e,l)):(r(k[2],i,!0,p,{"Stage-2":":","!HeadingToken":":"}),H(this,e,`${k[1]}${A[0]}${k[3]}`)),this.setAttribute("name",A[1]).setAttribute("stage",u.MAX_STAGE);return}}r(l,i,!0,p),this.setAttribute("name","caption").setAttribute("stage",7)}isPlain(){return!0}toString(l){return T(this,e)?T(this,e).replace("$1",super.toString(l)):super.toString(l)}text(){return T(this,e)?T(this,e).replace("$1",super.text()).trim():super.text().trim()}getPadding(){return Math.max(0,T(this,e).indexOf("$1"))}print(){return T(this,e)?`<span class="wpb-image-parameter">${T(this,e).replace("$1",g(this.childNodes))}</span>`:super.print({class:"image-caption"})}};let h=n;c=new WeakSet,it=function(l,i,p=u.getConfig(),f=!1){switch(i=i.replaceAll(/\0\d+t\x7F/gu,"").trim(),l){case"width":return/^\d*(?:x\d*)?$/u.test(i);case"link":{if(!i||new RegExp(`(?:${p.protocol}|//)${x}(?=\0\\d+t\x7F|$)`,"iu").test(i))return!0;if(i.startsWith("[[")&&i.endsWith("]]")&&(i=i.slice(2,-2)),i.includes("%"))try{i=decodeURIComponent(i)}catch(k){}return u.normalizeTitle(i,0,!1,p,f).valid}case"lang":return p.variants.includes(i);case"alt":case"class":case"manualthumb":return!0;default:return!isNaN(i)}},e=new WeakMap,b(h,c),m.exports=h},2641:(m,y,t)=>{"use strict";const{generateForSelf:g,generateForChild:x}=t(8277),u=t(6010),d=t(7507),h=t(8138),c=t(3423),a=t(1031),e=t(2571);class s extends h{constructor(r,l=u.getConfig(),i=[]){super(void 0,l,!0,i,{GalleryImageToken:":",ImagemapLinkToken:":",NoincludeToken:":",AstText:":"});C(this,"type","ext-inner");C(this,"name","imagemap");if(!r)return;const p=r.split(`
`),f=k=>{super.insertAt(new c(k,l,i))};let A=!0,$=!1;for(const k of p){const S=k.trim();if(!($||!S||S[0]==="#")){if(A){const[w,...F]=k.split("|");let v;try{v=this.normalizeTitle(decodeURIComponent(w),0,!0)}catch(E){v=this.normalizeTitle(w,0,!0)}if(v.valid&&!v.interwiki&&v.ns===6){const E=new a(w,F.length>0?F.join("|"):void 0,v,l,i);E.type="imagemap-image",super.insertAt(E),A=!1;continue}else $=!0}else if(k.trim().split(/[\t ]/u)[0]==="desc"){super.insertAt(k);continue}else if(k.includes("[")){const w=k.indexOf("["),F=k.slice(w),v=/^\[{2}([^|]+)(?:\|([^\]]+))?\]{2}[\w\s]*$/u.exec(F);if(v){const E=this.normalizeTitle(v[1],0,!0);if(E.valid){super.insertAt(new e(k.slice(0,w),[...v.slice(1),E],F.slice(F.indexOf("]]")+2),l,i));continue}}else{const E=l.protocol.split("|");if(E.includes(F.slice(1,F.indexOf(":")+1))||E.includes(F.slice(1,F.indexOf("//")+2))){const I=/^\[([^\]\s]+)(?:(\s+)(\S[^\]]*)?)?\][\w\s]*$/u.exec(F);if(I){super.insertAt(new e(k.slice(0,w),I.slice(1),F.slice(F.indexOf("]")+1),l,i));continue}}}}}f(k)}}toString(r){return super.toString(r,`
`)}text(){return super.text(`
`).replaceAll(/\n{2,}/gu,`
`)}getGaps(){return 1}print(){return super.print({sep:`
`})}lint(r=0){const l=super.lint(r),i=this.getRootNode().posFromIndex(r);return this.image?l.push(...this.childNodes.filter(p=>{const f=String(p).trim();return p.type==="noinclude"&&f&&f[0]!=="#"}).map(p=>x(p,i,"\u65E0\u6548\u7684<imagemap>\u94FE\u63A5"))):l.push(g(this,i,"\u7F3A\u5C11\u56FE\u7247\u7684<imagemap>")),l}}m.exports=s},2571:(m,y,t)=>{"use strict";const g=t(8138),x=t(3905),u=t(741);class d extends g{constructor(a,e,s,n,o){const r=t(6986),l=t(7507),i=t(3423),p=e[2]instanceof r?x:u;super(void 0,n,!0,o);C(this,"type","imagemap-link");this.append(a,new p(...e,n,o),new i(s,n,o))}}m.exports=d},8138:(m,y,t)=>{var c,a,e,s,n,o,r,ot,i,lt,f,ht,$,at,S,dt,F,ut,E,pt,j,ct,z,gt,M,ft,B,xt;"use strict";const g=t(6010),x=t(9205),u=t(7507),{MAX_STAGE:d}=g,W=class extends x{constructor(N,P=g.getConfig(),L=!1,Z=[],_=null){super();b(this,r);b(this,i);b(this,f);b(this,$);b(this,S);b(this,F);b(this,E);b(this,j);b(this,z);b(this,M);b(this,B);C(this,"type","root");b(this,c,0);b(this,a,void 0);b(this,e,void 0);b(this,s,(N=T(this,c),P=!1)=>{if(N<T(this,c)||!this.isPlain()||this.childNodes.length===0)return this;switch(N){case 0:this.type==="root"&&T(this,e).shift(),U(this,r,ot).call(this,P);break;case 1:U(this,i,lt).call(this);break;case 2:U(this,f,ht).call(this);break;case 3:U(this,$,at).call(this);break;case 4:U(this,S,dt).call(this);break;case 5:U(this,F,ut).call(this);break;case 6:U(this,E,pt).call(this);break;case 7:U(this,j,ct).call(this);break;case 8:U(this,z,gt).call(this);break;case 9:U(this,M,ft).call(this);break;case 10:U(this,B,xt).call(this)}if(this.type==="root")for(const L of T(this,e))L.getAttribute("parseOnce")(N,P);return et(this,c)._++,this});b(this,n,N=>N.split(/[\0\x7F]/u).map((P,L)=>{if(L%2===0)return new u(P);if(isNaN(P.at(-1)))return T(this,e)[Number(P.slice(0,-1))];throw new Error(`\u89E3\u6790\u9519\u8BEF\uFF01\u672A\u6B63\u786E\u6807\u8BB0\u7684 Token\uFF1A${P}`)}));b(this,o,()=>{H(this,c,d);const{length:N,firstChild:P}=this,L=String(P);if(N===1&&P.type==="text"&&L.includes("\0")&&(this.replaceChildren(...T(this,n).call(this,L)),this.normalize(),this.type==="root"))for(const Z of T(this,e))Z.getAttribute("build")()});typeof N=="string"&&this.insertAt(L?N:N.replaceAll(/[\0\x7F]/gu,"")),H(this,a,P),H(this,e,Z),Z.push(this)}getAttribute(N){switch(N){case"config":return structuredClone(T(this,a));case"accum":return T(this,e);case"parseOnce":return T(this,s);case"buildFromStr":return T(this,n);case"build":return T(this,o);default:return super.getAttribute(N)}}setAttribute(N,P){switch(N){case"stage":return T(this,c)===0&&this.type==="root"&&T(this,e).shift(),H(this,c,P),this;default:return super.setAttribute(N,P)}}isPlain(){return this.constructor===W}insertAt(N,P=this.childNodes.length){return typeof N=="string"&&(N=new u(N)),super.insertAt(N,P),N.type==="root"&&(N.type="plain"),N}normalizeTitle(N,P=0,L=!1){return g.normalizeTitle(N,P,!1,T(this,a),L)}afterBuild(){if(this.type==="root")for(const N of T(this,e))N.afterBuild();return this}parse(N=d,P=!1){for(;T(this,c)<N;)T(this,s).call(this,T(this,c),P);return N&&(T(this,o).call(this),this.afterBuild()),this}};let h=W;c=new WeakMap,a=new WeakMap,e=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakSet,ot=function(N){const P=t(4907);this.setText(P(String(this),T(this,a),T(this,e),N))},i=new WeakSet,lt=function(){const N=t(8275),P=this.type==="root"?String(this):`\0${String(this)}`,L=N(P,T(this,a),T(this,e));this.setText(this.type==="root"?L:L.slice(1))},f=new WeakSet,ht=function(){const N=t(5130);this.setText(N(String(this),T(this,a),T(this,e)))},$=new WeakSet,at=function(){const N=t(4624),P=t(2840);this.setText(N(this,T(this,a),T(this,e)));for(const L of T(this,e))if(L instanceof P&&L.type!=="td"){L.normalize();const{childNodes:[,Z]}=L;if(typeof Z=="string"&&Z.includes("\0")){L.removeAt(1);const _=new W(Z,T(this,a),!0,T(this,e));L.insertAt(_,1),_.setAttribute("stage",4)}}},S=new WeakSet,dt=function(){const N=t(2937);this.setText(N(this,T(this,a),T(this,e)))},F=new WeakSet,ut=function(){const N=t(1452);this.setText(N(String(this),T(this,a),T(this,e)))},E=new WeakSet,pt=function(){const N=t(3360),P=String(this).split(`
`);for(let L=0;L<P.length;L++)P[L]=N(P[L],T(this,a),T(this,e));this.setText(P.join(`
`))},j=new WeakSet,ct=function(){const N=t(7513);this.setText(N(String(this),T(this,a),T(this,e)))},z=new WeakSet,gt=function(){const N=t(4737);this.setText(N(String(this),T(this,a),T(this,e)))},M=new WeakSet,ft=function(){if(this.type==="image-parameter")return;const N=t(6622),P=String(this).split(`
`);let L=this.type==="root"||this.type==="ext-inner"&&this.type==="poem"?0:1;for(;L<P.length;L++)P[L]=N(P[L],T(this,a),T(this,e));this.setText(P.join(`
`))},B=new WeakSet,xt=function(){const N=t(3765);this.setText(N(String(this),T(this,a),T(this,e)))},m.exports=h},337:(m,y,t)=>{"use strict";const g=t(3905);class x extends g{constructor(){super(...arguments);C(this,"type","category")}}m.exports=x},7625:(m,y,t)=>{"use strict";const{explode:g}=t(231),{generateForChild:x}=t(8277),u=t(6010),d=t(3905),h=t(1874);class c extends d{constructor(s,n,o,r=u.getConfig(),l=[],i="|"){super(s,void 0,o,r,l,i);C(this,"type","file");this.append(...g("-{","}-","|",n).map(p=>new h(p,r,l)))}lint(s=0){const n=super.lint(s),o=this.getFrameArgs(),r=this.getHorizAlignArgs(),l=this.getVertAlignArgs(),i=this.getArgs("caption");if(o.length>1||r.length>1||l.length>1||i.size>1){const p=this.getRootNode().posFromIndex(s);o.length>1&&n.push(...o.map(f=>x(f,p,"\u91CD\u590D\u6216\u51B2\u7A81\u7684\u56FE\u7247\u6846\u67B6\u53C2\u6570"))),r.length>1&&n.push(...r.map(f=>x(f,p,"\u91CD\u590D\u6216\u51B2\u7A81\u7684\u56FE\u7247\u6C34\u5E73\u5BF9\u9F50\u53C2\u6570"))),l.length>1&&n.push(...l.map(f=>x(f,p,"\u91CD\u590D\u6216\u51B2\u7A81\u7684\u56FE\u7247\u5782\u76F4\u5BF9\u9F50\u53C2\u6570"))),i.size>1&&n.push(...[...i].map(f=>x(f,p,"\u91CD\u590D\u7684\u56FE\u7247\u8BF4\u660E")))}return n}getAllArgs(){return this.childNodes.slice(1)}getArgs(s,n=!0){const o=this.getAllArgs().filter(({name:r})=>s===r);return n?new Set(o):o}getFrameArgs(){return this.getAllArgs().filter(({name:n})=>["manualthumb","frameless","framed","thumbnail"].includes(n))}getHorizAlignArgs(){return this.getAllArgs().filter(({name:n})=>["left","right","center","none"].includes(n))}getVertAlignArgs(){return this.getAllArgs().filter(({name:n})=>["baseline","sub","super","top","text-top","middle","bottom","text-bottom"].includes(n))}}m.exports=c},1031:(m,y,t)=>{var h;"use strict";const{generateForSelf:g}=t(8277),x=t(6010),u=t(7625);class d extends u{constructor(e,s,n,o=x.getConfig(),r=[]){let l;if(s!==void 0){const i=t(8138);l=new i(s,o,!0,r),l.type="temp";for(let p=1;p<x.MAX_STAGE;p++)l.getAttribute("parseOnce")();r.splice(r.indexOf(l),1)}super(e,l==null?void 0:l.toString(),n,o,r);C(this,"type","gallery-image");b(this,h,!1);this.setAttribute("bracket",!1)}afterBuild(){const{interwiki:e,ns:s}=this.normalizeTitle(String(this.firstChild),this.type==="imagemap-image"?0:6,!0);return H(this,h,e||s!==6),this}getPadding(){return 0}lint(e=0){const s=super.lint(e);return T(this,h)&&s.push(g(this,this.getRootNode().posFromIndex(e),"\u65E0\u6548\u7684\u56FE\u5E93\u56FE\u7247")),s}}h=new WeakMap,m.exports=d},3905:(m,y,t)=>{var d,h;"use strict";const g=t(6010),x=t(8138);class u extends x{constructor(e,s,n,o=g.getConfig(),r=[],l="|"){super(void 0,o,!0,r,{AtomToken:0,Token:1});C(this,"type","link");b(this,d,!0);b(this,h,void 0);const i=t(9237);if(this.insertAt(new i(e,"link-target",o,r,{"Stage-2":":","!ExtToken":"","!HeadingToken":""})),s!==void 0){const p=new x(s,o,!0,r,{"Stage-5":":",ConverterToken:":"});p.type="link-text",this.insertAt(p.setAttribute("stage",g.MAX_STAGE-1))}H(this,h,l)}afterBuild(){var e;return(e=T(this,h))!=null&&e.includes("\0")&&H(this,h,this.getAttribute("buildFromStr")(T(this,h)).map(String).join("")),this}setAttribute(e,s){return e==="bracket"?(H(this,d,Boolean(s)),this):super.setAttribute(e,s)}toString(e){const s=super.toString(e,T(this,h));return T(this,d)?`[[${s}]]`:s}text(){const e=super.text("|");return T(this,d)?`[[${e}]]`:e}getPadding(){return 2}getGaps(){return T(this,h).length}print(){return super.print(T(this,d)?{pre:"[[",post:"]]",sep:T(this,h)}:{sep:T(this,h)})}}d=new WeakMap,h=new WeakMap,m.exports=u},8962:(m,y,t)=>{"use strict";const{generateForChild:g}=t(8277),x=t(6010),u=t(8138);class d extends u{constructor(a,e,s=x.getConfig(),n=[]){super(a,s,!0,n,{"Stage-1":":","!ExtToken":""});C(this,"type","free-ext-link");e&&(this.type="ext-link-url")}lint(a=0){const e=super.lint(a);let s;for(const n of this.childNodes){const o=String(n);if(n.type!=="text"||!/[，；。：！？（）【】]/u.test(o))continue;s||(s=this.getRootNode().posFromIndex(a));const r=g(n,s,"URL\u4E2D\u7684\u5168\u89D2\u6807\u70B9","warning");e.push(...[...o.matchAll(/[，；。：！？（）【】]/gu)].map(({index:l})=>{const i=o.slice(0,l).split(`
`),{length:p}=i,{length:f}=i.at(-1),A=r.startLine+p-1,$=p>1?f:r.startCol+f;return{...r,startLine:A,endLine:A,startCol:$,endCol:$+1}}))}return e}}m.exports=d},9389:(m,y,t)=>{"use strict";const g=t(6010),x=t(8889);class u extends x{constructor(c,a=g.getConfig(),e=[]){super(c,/<(option|choicetemplate)(\s[^>]*)?>(.*?)<\/(\1)>/gsu,["option","choicetemplate"],a,e);C(this,"name","choose")}}m.exports=u},9269:(m,y,t)=>{"use strict";const g=t(6010),x=t(8889);class u extends x{constructor(c,a=g.getConfig(),e=[]){super(c,/<(combooption)(\s[^>]*)?>(.*?)<\/(combooption\s*)>/gisu,["combooption"],a,e);C(this,"name","combobox")}}m.exports=u},8889:(m,y,t)=>{"use strict";const{generateForChild:g}=t(8277),x=t(6010),u=t(8138);class d extends u{constructor(a,e,s,n=x.getConfig(),o=[]){var p;const r=t(7267),l=t(3423),i=(p=a==null?void 0:a.replaceAll(e,(f,A,$,k,S)=>{const w=`\0${o.length+1}e\x7F`;return new r(A,$,k,S,n,o),w}))==null?void 0:p.replaceAll(/(^|\0\d+e\x7F)(.*?)(?=$|\0\d+e\x7F)/gsu,(f,A,$)=>$===""?A:(new l($,n,o),`${A}\0${o.length}c\x7F`));super(i,n,!0,o,{NoincludeToken:":",ExtToken:":"});C(this,"type","ext-inner")}lint(a=0){let e;return[...super.lint(a),...this.childNodes.filter(s=>{if(s.type==="ext")return!1;const n=String(s).trim();return n&&!/^<!--.*-->$/u.test(n)}).map(s=>(e||(e=this.getRootNode().posFromIndex(a)),g(s,e,`<${this.name}>\u5185\u7684\u65E0\u6548\u5185\u5BB9`)))]}}m.exports=d},5937:(m,y,t)=>{"use strict";const g=t(6010),x=t(8889);class u extends x{constructor(c,a=g.getConfig(),e=[]){super(c,/<(ref)(\s[^>]*)?>(.*?)<\/(ref\s*)>/gisu,["ref"],a,e);C(this,"name","references")}}m.exports=u},7033:(m,y,t)=>{var g={"./":8889,"./choose":9389,"./choose.js":9389,"./combobox":9269,"./combobox.js":9269,"./index":8889,"./index.js":8889,"./references":5937,"./references.js":5937};function x(d){var h=u(d);return t(h)}function u(d){if(!t.o(g,d)){var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}return g[d]}x.keys=function(){return Object.keys(g)},x.resolve=u,m.exports=x,x.id=7033},5749:(m,y,t)=>{"use strict";const g=t(2308),{generateForSelf:x}=t(8277),u=t(6010),d=t(6935);class h extends g(d){constructor(e,s=!0,n=u.getConfig(),o=[]){super(e,n,o);C(this,"type","comment");C(this,"closed");this.closed=s}getPadding(){return 4}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}lint(e=0){return this.closed?[]:[x(this,this.getRootNode().posFromIndex(e),"\u672A\u95ED\u5408\u7684HTML\u6CE8\u91CA")]}toString(e){return`<!--${String(this.firstChild)}${this.closed?"-->":""}`}}m.exports=h},3434:(m,y,t)=>{"use strict";const g=t(6935);class x extends g{constructor(){super(...arguments);C(this,"type","dd")}}m.exports=x},7815:(m,y,t)=>{"use strict";const g=t(2308),x=t(6935);class u extends g(x){constructor(){super(...arguments);C(this,"type","double-underscore")}getPadding(){return 2}print(){return super.print({pre:"__",post:"__"})}toString(c){return`__${String(this.firstChild)}__`}}m.exports=u},2582:(m,y,t)=>{"use strict";const g=t(6010),x=t(6935);class u extends x{constructor(c,a=g.getConfig(),e=[]){super("-".repeat(c),a,e);C(this,"type","hr")}}m.exports=u},6935:(m,y,t)=>{"use strict";const{generateForSelf:g}=t(8277),x=t(6010),u=t(8138);class d extends u{constructor(a,e=x.getConfig(),s=[]){super(a,e,!0,s);C(this,"type","ext-inner")}lint(a=0){const{type:e,name:s}=this;return e==="ext-inner"&&(s==="templatestyles"||s==="section")&&String(this)?[g(this,this.getRootNode().posFromIndex(a),`<${s}>\u6807\u7B7E\u5185\u4E0D\u5E94\u6709\u4EFB\u4F55\u5185\u5BB9`)]:super.lint(a)}}m.exports=d},962:(m,y,t)=>{"use strict";const g=t(3434);class x extends g{constructor(){super(...arguments);C(this,"type","list")}}m.exports=x},3423:(m,y,t)=>{"use strict";const g=t(2308),x=t(6935);class u extends g(x){constructor(){super(...arguments);C(this,"type","noinclude")}}m.exports=u},6714:(m,y,t)=>{"use strict";const{generateForSelf:g}=t(8277),x=t(6010),u=t(7507),d=t(6935);class h extends d{constructor(e,s=x.getConfig(),n=[]){super("'".repeat(e),s,n);C(this,"type","quote")}lint(e=0){const{previousSibling:s,nextSibling:n}=this,o=`\u5B64\u7ACB\u7684"'"`,r=[];let l;if((s==null?void 0:s.type)==="text"&&s.data.at(-1)==="'"){l=g(this,this.getRootNode().posFromIndex(e),"");const{startLine:i,startCol:p}=l,[,{length:f}]=s.data.match(/(?:^|[^'])('+)$/u);r.push({message:o,startLine:i,startCol:p-f,endLine:i,endCol:p})}if((n==null?void 0:n.type)==="text"&&n.data[0]==="'"){l||(l=g(this,this.getRootNode().posFromIndex(e),""));const{endLine:i,endCol:p}=l,[{length:f}]=n.data.match(/^'+/u);r.push({message:o,startLine:i,startCol:p,endLine:i,endCol:p+f})}return r}}m.exports=h},851:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138);class u extends x{constructor(c,a=g.getConfig(),e=[]){super(c,a,!0,e);C(this,"type","onlyinclude")}toString(c){return`<onlyinclude>${super.toString()}</onlyinclude>`}getPadding(){return 13}print(){return super.print({pre:"&lt;onlyinclude&gt;",post:"&lt;/onlyinclude&gt;"})}isPlain(){return!0}}m.exports=u},9380:(m,y,t)=>{"use strict";const{generateForChild:g}=t(8277),x=t(6010),u=t(8138),d=t(9237);class h extends u{constructor(e,s=x.getConfig(),n=[]){super(void 0,s,!0,n,{AtomToken:":"});C(this,"type","ext-inner");e&&this.append(...e.split(`
`).map(o=>new d(o,"param-line",s,n,{AstText:":"})))}toString(e){return super.toString(e,`
`)}text(){return super.text(`
`)}getGaps(){return 1}print(){return super.print({sep:`
`})}lint(e=0){let s;return this.childNodes.filter(n=>{const{childNodes:o}=n,r=o.findIndex(({type:i})=>i!=="text"),l=(r>=0?o.slice(0,r).map(String).join(""):String(n)).trim();return l&&!(r>=0?/^[a-z]+\s*(?:=|$)/iu:/^[a-z]+\s*=/iu).test(l)}).map(n=>(s||(s=this.getRootNode().posFromIndex(e)),g(n,s,`${this.name}\u7684\u65E0\u6548\u53C2\u6570`)))}}m.exports=h},9799:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138);class u extends x{constructor(c,a,e=g.getConfig(),s=[]){super(void 0,e,!0,s);C(this,"type","parameter");const n=t(9237),o=new n(typeof c=="number"?void 0:c,"parameter-key",e,s,{"Stage-2":":","!HeadingToken":""}),r=new x(a,e,!0,s);r.type="parameter-value",this.append(o,r.setAttribute("stage",2))}get anon(){return this.firstChild.childNodes.length===0}afterBuild(){if(!this.anon){const c=t(1782),a=this.firstChild.text().trim(),{parentNode:e}=this;this.setAttribute("name",a),e&&e instanceof c&&e.getArgs(a,!1,!1).add(this)}return this}toString(c){return this.anon?this.lastChild.toString(c):super.toString(c,"=")}text(){return this.anon?this.lastChild.text():super.text("=")}getGaps(){return this.anon?0:1}print(){return super.print({sep:this.anon?"":"="})}}m.exports=u},8058:(m,y,t)=>{"use strict";const g=t(6010),x=t(8138);class u extends x{constructor(h,c,a="plain",e=g.getConfig(),s=[],n=null){super(h,e,!0,s,n),this.type=a}}m.exports=u},2840:(m,y,t)=>{"use strict";const{generateForChild:g}=t(8277),x=t(3125),u=t(8058);class d extends x{constructor(){super(...arguments);C(this,"type","table")}get closed(){return this.lastChild.type==="table-syntax"}lint(a=0){const e=super.lint(a);return this.closed||e.push(g(this.firstChild,this.getRootNode().posFromIndex(a),"\u672A\u95ED\u5408\u7684\u8868\u683C")),e}close(a=`
|}`,e=!1){const s=this.getAttribute("config"),n=this.getAttribute("accum");super.insertAt(new u(a,null,"table-syntax",s,n))}}m.exports=d},5567:(m,y,t)=>{var h;"use strict";const g=t(6010),x=t(8138),u=t(3125);class d extends u{constructor(e,s,n=g.getConfig(),o=[]){let r=s==null?void 0:s.match(/\||\0\d+!\x7F/u),l=r?s.slice(0,r.index):"";/\[\[|-\{/u.test(l)&&(r=null,l="");super(e,l,n,o);C(this,"type","td");b(this,h,"");r&&([et(this,h)._]=r);const i=new x(s==null?void 0:s.slice((r==null?void 0:r.index)+T(this,h).length),n,!0,o);i.type="td-inner",this.insertAt(i.setAttribute("stage",4))}afterBuild(){return T(this,h).includes("\0")&&H(this,h,this.getAttribute("buildFromStr")(T(this,h)).map(String).join("")),this}toString(e){const{childNodes:[s,n,o]}=this;return`${s.toString()}${n.toString()}${T(this,h)}${o.toString()}`}text(){const{childNodes:[e,s,n]}=this;return`${e.text()}${s.text()}${T(this,h)}${n.text()}`}getGaps(e=0){return e=e<0?e+this.childNodes.length:e,e===1?T(this,h).length:0}print(){const{childNodes:[e,s,n]}=this;return`<span class="wpb-td">${e.print()}${s.print()}${T(this,h)}${n.print()}</span>`}}h=new WeakMap,m.exports=d},3125:(m,y,t)=>{"use strict";const{generateForChild:g}=t(8277),x=t(6010),u=t(8138),d=t(8058);class h extends u{constructor(e,s="",n=x.getConfig(),o=[],r=null){super(void 0,n,!0,o,{Token:2,SyntaxToken:0,AttributeToken:1,TdToken:"2:"});C(this,"type","tr");const l=t(5037);this.append(new d(e,r,"table-syntax",n,o,{"Stage-1":":","!ExtToken":"",TranscludeToken:":"}),new l(s,"table-attr","tr",n,o))}lint(e=0){const s=t(1782),n=super.lint(e),o=this.childNodes.find(({type:i})=>i==="table-inter");if(!o)return n;const r=o.childNodes.find(i=>i.text().trim());if(r){if((r==null?void 0:r.type)==="magic-word")try{if(r.getPossibleValues().every(p=>/^\s*(?:!|\{\{\s*![!-]?\s*\}\})/u.test(p.text())))return n}catch(i){}}else return n;const l=g(o,this.getRootNode().posFromIndex(e),"\u5C06\u88AB\u79FB\u51FA\u8868\u683C\u7684\u5185\u5BB9");return l.startLine++,l.startCol=0,n.push(l),n}text(){const e=super.text();return this.type==="tr"&&!e.trim().includes(`
`)?"":e}}m.exports=h},7267:(m,y,t)=>{"use strict";const g=t(6010),x=t(1074);class u extends x{constructor(c,a="",e="",s=void 0,n=g.getConfig(),o=[]){a=!a||a.trimStart()!==a?a:` ${a}`;const r=t(8138),l=t(5037),i=c.toLowerCase(),p=new l(a,"ext-attr",i,n,o),f=structuredClone(n),A=new Set(f.ext);let $;switch(A.delete(i),f.ext=[...A],i){case"tab":A.delete("tabs"),f.ext=[...A];case"indicator":case"poem":case"ref":case"option":case"combooption":case"tabs":case"poll":case"seo":case"inputbox":$=new r(e,f,!0,o);break;case"gallery":{const k=t(1891);$=new k(e,f,o);break}case"pre":{const k=t(428);$=new k(e,f,o);break}case"charinsert":{const k=t(8103);$=new k(e,f,o);break}case"references":case"choose":case"combobox":{const k=t(8889),S=t(7033)(`./${i}`);$=new S(e,f,o);break}case"imagemap":{const k=t(2641);$=new k(e,n,o);break}case"dynamicpagelist":{const k=t(9380);$=new k(e,f,o);break}default:{const k=t(6935);$=new k(e,n)}}$.setAttribute("name",i).type="ext-inner";super(c,p,$,s,n,o);C(this,"type","ext");C(this,"closed",!0)}}m.exports=u},8655:(m,y,t)=>{"use strict";const g=t(2308),{generateForSelf:x}=t(8277),u=t(6010),d=t(1074);class h extends g(d){constructor(e,s="",n=void 0,o=void 0,r=u.getConfig(),l=[]){super(e,s,n!=null?n:"",n===void 0||o!=null?o:"",r,l);C(this,"type","include")}lint(e=0){return this.closed?[]:[x(this,this.getRootNode().posFromIndex(e),"\u672A\u95ED\u5408\u7684\u6807\u7B7E")]}}m.exports=h},1074:(m,y,t)=>{var d,h,c;"use strict";const g=t(6010),x=t(8138);class u extends x{constructor(s,n,o,r,l=g.getConfig(),i=[]){super(void 0,l,!0);b(this,d,void 0);b(this,h,void 0);b(this,c,void 0);H(this,c,[s,r||s]),H(this,d,r===void 0),H(this,h,r!==""),this.append(n,o);let p=i.indexOf(n);p===-1&&(p=i.indexOf(o)),p===-1&&(p=1/0),i.splice(p,0,this)}get closed(){return T(this,h)}toString(s){const{firstChild:n,lastChild:o}=this,[r,l]=T(this,c);return T(this,d)?`<${r}${String(n)}/>`:`<${r}${String(n)}>${String(o)}${T(this,h)?`</${l}>`:""}`}text(){const[s,n]=T(this,c);return T(this,d)?`<${s}${this.firstChild.text()}/>`:`<${s}${super.text(">")}${T(this,h)?`</${n}>`:""}`}getPadding(){return T(this,c)[0].length+1}getGaps(){return 1}print(){const[s,n]=T(this,c);return super.print(T(this,d)?{pre:`&lt;${s}`,post:"/&gt;"}:{pre:`&lt;${s}`,sep:"&gt;",post:T(this,h)?`&lt;/${n}&gt;`:""})}}d=new WeakMap,h=new WeakMap,c=new WeakMap,m.exports=u},1782:(m,y,t)=>{var s,n,mt;"use strict";const{removeComment:g,print:x,text:u}=t(231),{generateForChild:d}=t(8277),h=t(6010),c=t(8138),a=t(9799);class e extends c{constructor(i,p,f=h.getConfig(),A=[]){super(void 0,f,!0,A,{AtomToken:0,SyntaxToken:0,ParameterToken:"1:"});b(this,n);C(this,"type","template");C(this,"modifier","");b(this,s,{});const $=t(9237),k=t(8058),{parserFunction:[S,w,F]}=f;if(i.includes(":")){const[I,...j]=i.split(":");this.setModifier(I)&&(i=j.join(":"))}if(i.includes(":")||p.length===0&&!F.includes(this.modifier.toLowerCase())){const[I,...j]=i.split(":"),D=g(I),z=w.includes(D),V=S[D.toLowerCase()];if(z||V){this.setAttribute("name",V||D.toLowerCase()).type="magic-word";const M=new RegExp(`^\\s*${D}\\s*$`,z?"u":"iu"),X=new k(I,M,"magic-word-name",f,A,{"Stage-1":":","!ExtToken":""});if(this.insertAt(X),j.length>0&&p.unshift([j.join(":")]),this.name==="invoke")for(let B=0;B<2;B++){const K=p.shift();if(!K)break;const W=new $(K.join("="),`invoke-${B?"function":"module"}`,f,A,{"Stage-1":":","!ExtToken":""});this.insertAt(W)}}}if(this.type==="template"){const[I]=g(i).split("#");if(/\0\d+[eh!+-]\x7F|[<>[\]{}]/u.test(I))throw A.pop(),new SyntaxError(`\u975E\u6CD5\u7684\u6A21\u677F\u540D\u79F0\uFF1A${I}`);const j=new $(i,"template-name",f,A,{"Stage-2":":","!HeadingToken":""});this.insertAt(j)}const v=this.isTemplate();let E=1;for(const I of p)v||(I[0]=I.join("="),I.length=1),I.length===1&&(I.unshift(E),E++),this.insertAt(new a(...I,f,A))}setModifier(i=""){const{parserFunction:[,,p,f]}=this.getAttribute("config"),A=i.trim().toLowerCase(),$=p.includes(A),k=f.includes(A);return $||k||i===""?(this.setAttribute("modifier",i),Boolean(i)):!1}toString(i){const{childNodes:p,firstChild:f,modifier:A}=this;return`{{${A}${A&&":"}${this.type==="magic-word"?`${String(f)}${p.length>1?":":""}${p.slice(1).map(String).join("|")}`:super.toString(i,"|")}}}`}text(){const{childNodes:i,firstChild:p,modifier:f}=this;return`{{${f}${f&&":"}${this.type==="magic-word"?`${p.text()}${i.length>1?":":""}${u(i.slice(1),"|")}`:super.text("|")}}}`}getPadding(){return this.modifier?this.modifier.length+3:2}getGaps(){return 1}print(){const{childNodes:i,firstChild:p,modifier:f}=this;return`<span class="wpb-${this.type}">{{${f}${f&&":"}${this.type==="magic-word"?`${p.print()}${i.length>1?":":""}${x(i.slice(1),{sep:"|"})}`:x(i,{sep:"|"})}}}</span>`}lint(i=0){const p=super.lint(i);if(!this.isTemplate())return p;const f=this.getDuplicatedArgs();if(f.length>0){const A=this.getRootNode().posFromIndex(i);p.push(...f.flatMap(([,$])=>[...$]).map($=>d($,A,"\u91CD\u590D\u53C2\u6570")))}return p}isTemplate(){return this.type==="template"||this.type==="magic-word"&&this.name==="invoke"}insertAt(i,p=this.childNodes.length){return super.insertAt(i,p),i.anon?U(this,n,mt).call(this,i):i.name&&this.getArgs(i.name,!1,!1).add(i),i}getAllArgs(){return this.childNodes.filter(i=>i instanceof a)}getAnonArgs(){return this.getAllArgs().filter(({anon:i})=>i)}getArgs(i,p,f=!0){const A=String(i).trim();let $;return Object.prototype.hasOwnProperty.call(T(this,s),A)?$=T(this,s)[A]:($=new Set(this.getAllArgs().filter(({name:k})=>A===k)),T(this,s)[A]=$),$}getDuplicatedArgs(){return this.isTemplate()?Object.entries(T(this,s)).filter(([,{size:i}])=>i>1).map(([i,p])=>[i,new Set(p)]):[]}getPossibleValues(){const{type:i,name:p,childNodes:f,constructor:{name:A}}=this;if(i==="template")throw new Error(`${A}.getPossibleValues \u65B9\u6CD5\u4EC5\u4F9B\u7279\u5B9A\u9B54\u672F\u5B57\u4F7F\u7528\uFF01`);let $;switch(p){case"if":case"ifexist":case"ifexpr":case"iferror":$=2;break;case"ifeq":$=3;break;default:throw new Error(`${A}.getPossibleValues \u65B9\u6CD5\u4EC5\u4F9B\u7279\u5B9A\u9B54\u672F\u5B57\u4F7F\u7528\uFF01`)}const k=f.slice($,$+2).map(({childNodes:[,S]})=>S);for(let S=0;S<k.length;){const{length:w,0:F}=k[S].childNodes.filter(v=>v.text().trim());if(w===0)k.splice(S,1);else if(w>1||F.type!=="magic-word")S++;else try{const v=F.getPossibleValues();k.splice(S,1,...v),S+=v.length}catch(v){S++}}return k}}s=new WeakMap,n=new WeakSet,mt=function(i){const p=this.getAnonArgs(),f=p.indexOf(i);for(let A=f;A<p.length;A++){const $=p[A],{name:k}=$,S=String(A+1);k!==S&&this.getArgs(S,!1,!1).add($.setAttribute("name",S))}},m.exports=e},8277:(m,y,t)=>{"use strict";const g=t(8138),x=(d,h,c,a="error")=>{const{style:{top:e,left:s,height:n,width:o}}=d,{top:r,left:l}=h,i=r+e,p=i+n-1,f=e?s:l+s,A=n>1?o:f+o;return{message:c,severity:a,startLine:i,endLine:p,startCol:f,endCol:A}},u=(d,h,c,a="error")=>({message:c,severity:a,startLine:h.top,endLine:h.top+d.offsetHeight-1,startCol:h.left,endCol:d.offsetHeight>1?d.offsetWidth:h.left+d.offsetWidth});m.exports={generateForChild:x,generateForSelf:u}},231:(m,y,t)=>{"use strict";const g='(?:\\[[\\da-f:.]+\\]|[^[\\]<>"\\0-\\x1F\\x7F\\p{Zs}\\uFFFD])(?:[^[\\]<>"\\0-\\x1F\\x7F\\p{Zs}\\uFFFD]|\\0\\d+c\\x7F)*',x=a=>a.replaceAll(/\0\d+c\x7F/gu,""),u=(a,e={})=>{const s=t(7507),n=t(9205),{pre:o="",post:r="",sep:l=""}=e,i={"&":"amp","<":"lt",">":"gt"};return`${o}${a.map(p=>p instanceof n?p.print():String(p).replaceAll(/[&<>]/gu,f=>`&${i[f]};`)).join(l)}${r}`},d=a=>a.replaceAll(/[\\{}()|.?*+^$[\]]/gu,"\\$&"),h=(a,e,s,n)=>{if(n===void 0)return[];const o=new RegExp(`${[a,e,s].map(d).join("|")}`,"gu"),r=[];let l=o.exec(n),i=0,p=0;for(;l;){const{0:f,index:A}=l;f!==s?i+=f===a?1:-1:i===0&&(r.push(n.slice(p,A)),{lastIndex:p}=o),l=o.exec(n)}return r.push(n.slice(p)),r},c=(a,e="")=>{const s=t(3853);return a.map(n=>typeof n=="string"?n:n.text()).join(e)};m.exports={extUrlChar:g,removeComment:x,print:u,escapeRegExp:d,explode:h,text:c}},8166:m=>{"use strict";m.exports=JSON.parse('{"ext":["nowiki","pre","gallery","indicator"],"html":[["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","tr","td","th","q","bdo"],["li","dt","dd"],["br","wbr","hr","meta","link","img"]],"namespaces":{"0":"","6":"File","14":"Category"},"nsid":{"":0,"file":6,"image":6,"\u56FE\u50CF":6,"\u5716\u50CF":6,"\u6587\u4EF6":6,"\u6863\u6848":6,"\u6A94\u6848":6,"category":14,"\u5206\u7C7B":14,"\u5206\u985E":14},"parserFunction":[{"#language":"language","#special":"special","#speciale":"speciale","#tag":"tag","#formatdate":"formatdate","#invoke":"invoke","#while":"while","#dowhile":"dowhile","#loop":"loop","#forargs":"forargs","#fornumargs":"fornumargs","#if":"if","#ifeq":"ifeq","#switch":"switch","#ifexist":"ifexist","#ifexpr":"ifexpr","#iferror":"iferror","#time":"time","#timel":"timel","#expr":"expr","#rel2abs":"rel2abs","#titleparts":"titleparts","#categorytree":"categorytree","#urldecode":"urldecode","#choose":"choose","#var":"var","#varexists":"varexists","#var_final":"var_final","#vardefine":"vardefine","#vardefineecho":"vardefineecho","#widget":"widget","#related":"related","#cscore":"cscore"},[],["msg","\u539F\u59CB","raw"],["\u66FF\u4EE3","subst","\u5B89\u5168\u66FF\u4EE3","safesubst"]],"doubleUnderscore":[[],[]],"protocol":"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|worldwind://|xmpp:","interwiki":[],"img":{"thumbnail":"thumbnail","thumb":"thumbnail","\u7F29\u7565\u56FE":"thumbnail","thumbnail=$1":"manualthumb","thumb=$1":"manualthumb","\u7F29\u7565\u56FE=$1":"manualthumb","left":"left","\u5DE6":"left","right":"right","\u53F3":"right","none":"none","\u65E0":"none","$1px":"width","$1\u50CF\u7D20":"width","center":"center","centre":"center","\u5C45\u4E2D":"center","framed":"framed","enframed":"framed","frame":"framed","\u6709\u6846":"framed","frameless":"frameless","\u65E0\u6846":"frameless","upright":"upright","\u53F3\u4E0A":"upright","upright=$1":"manual-upright","upright $1":"manual-upright","\u53F3\u4E0A=$1":"manual-upright","\u53F3\u4E0A$1":"manual-upright","border":"border","\u8FB9\u6846":"border","alt=$1":"alt","\u66FF\u4EE3=$1":"alt","\u66FF\u4EE3\u6587\u672C=$1":"alt","class=$1":"class","\u7C7B=$1":"class","link=$1":"link","\u94FE\u63A5=$1":"link","baseline":"baseline","\u57FA\u7EBF":"baseline","sub":"sub","\u5B50":"sub","super":"super","sup":"super","\u8D85":"super","top":"top","\u9876\u90E8":"top","text-top":"text-top","\u6587\u5B57\u9876\u90E8":"text-top","middle":"middle","\u4E2D\u95F4":"middle","bottom":"bottom","\u5E95\u90E8":"bottom","text-bottom":"text-bottom","\u6587\u5B57\u5E95\u90E8":"text-bottom","lang=$1":"lang","\u8BED\u8A00=$1":"lang","page=$1":"page","page $1":"page","\u9875\u6570=$1":"page","$1\u9875":"page"},"variants":["zh","zh-hans","zh-hant","zh-cn","zh-tw","zh-hk","zh-sg","zh-my","zh-mo"]}')}},R={};function G(m){var y=R[m];if(y!==void 0)return y.exports;var t=R[m]={exports:{}};return O[m](t,t.exports,G),t.exports}G.o=(m,y)=>Object.prototype.hasOwnProperty.call(m,y);var J=G(6010)})();})();
