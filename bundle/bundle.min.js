(()=>{"use strict";var t={6010:(t,e,s)=>{const n={running:!1,config:s(5038),MAX_STAGE:11,getConfig(){return this.config},run(t){const{running:e}=this;this.running=!0;try{const s=t();return this.running=e,s}catch(t){throw this.running=e,t}},normalizeTitle(t,e=0,i=n.getConfig(),r=!1){let o;if(!r){const e=s(8138);o=this.run((()=>{const s=new e(String(t),i).getAttribute("parseOnce");return s(),s()})),t=o.firstChild}return new(s(6986))(String(t),e,i)},parse(t,e,i=n.MAX_STAGE,r=n.getConfig()){const o=s(8138);let l;return this.run((()=>{"string"==typeof t?l=new o(t,r):t instanceof o&&(l=t,t=String(l)),l.parse(i,e)})),l},print(t,e=!1,s=n.getConfig()){return`<div class="wikiparser">${this.parse(t,e,this.MAX_STAGE,s).print()} </div>`}},i={};for(const t in n)["MAX_STAGE"].includes(t)?i[t]={enumerable:!1,writable:!1}:["config","normalizeTitle","parse","print"].includes(t)||(i[t]={enumerable:!1});Object.defineProperties(n,i),globalThis.Parser=n,t.exports=n},9205:(t,e,s)=>{const{print:n}=s(231),i=s(3853);s(7507);class r extends i{name;get children(){return this.childNodes.filter((({type:t})=>"text"!==t))}get firstElementChild(){return this.childNodes.find((({type:t})=>"text"!==t))}get lastElementChild(){return this.children.at(-1)}append(...t){for(const e of t)this.appendChild(e)}replaceChildren(...t){for(let t=this.childNodes.length-1;t>=0;t--)this.removeAt(t);this.append(...t)}setText(t,e=0){const s=this.childNodes.at(e),{data:n}=s;return s.replaceData(t),n}toString(t=""){return this.childNodes.map((t=>t.toString())).join(t)}static lintIgnoredHidden=new Set(["noinclude","include","comment","double-underscore","hidden"]);static lintIgnoredSyntax=new Set(["magic-word-name","heading-trail","table-syntax"]);static lintIgnoredExt=new Set(["nowiki","pre","syntaxhighlight","source","math","timeline"]);lint(t=0){if(r.lintIgnoredHidden.has(this.type)||r.lintIgnoredSyntax.has(this.type)||"ext-inner"===this.type&&r.lintIgnoredExt.has(this.name))return[];const e=[];for(let s=0,n=t+this.getPadding();s<this.childNodes.length;s++){const t=this.childNodes[s];e.push(...t.lint(n)),n+=String(t).length+this.getGaps(s)}return e}print(t={}){return 0===this.childNodes.length?"":`<span class="wpb-${t.class??this.type}">${n(this.childNodes,t)}</span>`}}t.exports=r},3853:(t,e,s)=>{t.exports=class{type;childNodes=[];#t;get firstChild(){return this.childNodes[0]}get lastChild(){return this.childNodes.at(-1)}get parentNode(){return this.#t}get nextSibling(){const t=this.#t?.childNodes;return t&&t[t.indexOf(this)+1]}hasAttribute(t){return t in this}getAttribute(t){return this.hasAttribute(t)?String(this[t]):void 0}setAttribute(t,e){return"parentNode"===t?this.#t=e:this[t]=e,this}removeAt(t){const e=[...this.childNodes],[s]=e.splice(t,1);return s.setAttribute("parentNode"),this.setAttribute("childNodes",e),s}insertAt(t,e=this.childNodes.length){const s=[...this.childNodes];return t.setAttribute("parentNode",this),s.splice(e,0,t),this.setAttribute("childNodes",s),t}appendChild(t){return this.insertAt(t)}normalize(){s(7507);const t=[...this.childNodes];for(let e=t.length-1;e>=0;e--){const{type:s,data:n}=t[e];this.getGaps(e-1)||(""===n?t.splice(e,1):"text"===s&&"text"===t[e-1]?.type&&(t[e-1].setAttribute("data",t[e-1].data+n),t.splice(e,1)))}this.setAttribute("childNodes",t)}getRootNode(){let{parentNode:t}=this;for(;t?.parentNode;)({parentNode:t}=t);return t??this}posFromIndex(t){const e=String(this);if(t>=-e.length&&t<=e.length&&Number.isInteger(t)){const s=e.slice(0,t).split("\n");return{top:s.length-1,left:s.at(-1).length}}}#e(){const t=String(this).split("\n");return{height:t.length,width:t.at(-1).length}}getPadding(){return 0}getGaps(){return 0}getRelativeIndex(t){let e;const s=(t,s)=>e.slice(0,t).reduce(((t,e,n)=>t+String(e).length+s.getGaps(n)),0)+s.getPadding();if(void 0===t){const{parentNode:t}=this;return t?(({childNodes:e}=t),s(e.indexOf(this),t)):0}return({childNodes:e}=this),s(t,this)}getAbsoluteIndex(){const{parentNode:t}=this;return t?t.getAbsoluteIndex()+this.getRelativeIndex():0}#s(t){return void 0===t?this.parentNode?.posFromIndex(this.getRelativeIndex())??{top:0,left:0}:this.posFromIndex(this.getRelativeIndex(t))}getBoundingClientRect(){return{...this.#e(),...this.getRootNode().posFromIndex(this.getAbsoluteIndex())}}get offsetHeight(){return this.#e().height}get offsetWidth(){return this.#e().width}get style(){return{...this.#s(),...this.#e(),padding:this.getPadding()}}}},7507:(t,e,s)=>{const n=s(3853);class i extends n{type="text";data;constructor(t=""){super(),this.data=t}toString(){return this.data}#n(t){return this.setAttribute("data",String(t))}replaceData(t=""){this.#n(t)}static errorSyntax=/[{}]|\[{2,}|\[(?!(?:(?!https?\b)[^[])*\])|((?:^|\])[^[]*?)\]+|<(?=\s*\/?\w+[\s/>])/giu;lint(t=0){const{data:e}=this,s=[...e.matchAll(i.errorSyntax)];if(s.length>0){const{top:n,left:i}=this.getRootNode().posFromIndex(t);return s.map((({0:t,1:s,index:r})=>{s&&(r+=s.length,t=t.slice(s.length));const o=e.slice(0,r).split("\n"),l=o.length+n-1,{length:a}=o.at(-1),c=o.length>1?a:i+a;return{message:`孤立的"${t[0]}"`,severity:"<"===t?"warning":"error",startLine:l,endLine:l,startCol:c,endCol:c+t.length}}))}return[]}}t.exports=i},6986:(t,e,s)=>{const n=s(6010);t.exports=class{ns=0;valid=!0;constructor(t,e=0,s=n.getConfig()){const{namespaces:i,nsid:r}=s;let o=i[e];":"===(t=t.replaceAll("_"," ").trim())[0]&&(o="",t=t.slice(1).trim());const l=t.split(":");if(l.length>1){const e=i[r[l[0].trim().toLowerCase()]];void 0!==e&&(o=e,t=l.slice(1).join(":").trim())}this.ns=r[o.toLowerCase()];const a=t.indexOf("#");let c;-1!==a&&(c=t.slice(a+1).trimEnd(),t=t.slice(0,a).trim()),this.valid=Boolean(t||c)&&!/\0\d+[eh!+-]\x7F|[<>[\]{}|]/u.test(t)}}},8275:(t,e,s)=>{const{removeComment:n}=s(231),i=s(6010);t.exports=(t,e=i.getConfig(),r=[])=>{const o="^(\0\\d+c)*={1,6}|\\[\\[|\\{{2,}|-\\{(?!\\{)",l=[],a={"=":"\n","{":"\\}{2,}|\\|","-":"\\}-","[":"\\]\\]"},c={"!":"!","!!":"+","(!":"{","!)":"}","!-":"-","=":"~"};let h,p=new RegExp(o,"gmu"),g=p.exec(t),d=t.includes("}}");for(;g||h<=t.length&&"="===l.at(-1)?.[0]?.[0];){if(g?.[1]){const[,{length:t}]=g;g[0]=g[0].slice(t),g.index+=t}const{0:i,index:u}=g??{0:"\n",index:t.length},f=l.pop()??{},{0:x,index:m,parts:A,findEqual:C,pos:$}=f,E="="===i&&C;if("]]"===i||"}-"===i)h=u+2;else if("\n"===i){h=u+1;const{pos:i,findEqual:o}=l.at(-1)??{};if(!i||o||""!==n(t.slice(i,m))){const n=/^(={1,6})(.+)\1((?:\s|\0\d+c\x7F)*)$/u.exec(t.slice(m,u));n&&(t=`${t.slice(0,m)}\0${r.length}h${t.slice(u)}`,h=m+4+String(r.length).length,new(s(9450))(n[1].length,n.slice(2),e,r))}}else if("|"===i||E)h=u+1,A.at(-1).push(t.slice($,u)),"|"===i&&A.push([]),f.pos=h,f.findEqual="|"===i,l.push(f);else if(i.startsWith("}}")){const o=i.slice(0,Math.min(x.length,3)),a=x.length-o.length,{length:p}=r;h=u+o.length,A.at(-1).push(t.slice($,u));const g=2===o.length?c[n(A[0][0])]??"t":"t";let d=!1;if(3===o.length)new(s(9544))(A.map((t=>t.join("="))),e,r);else try{new(s(1782))(A[0][0],A.slice(1),e,r)}catch(t){if(!(t instanceof Error&&t.message.startsWith("非法的模板名称：")))throw t;h=m+x.length,d=!0}d||(t=`${t.slice(0,m+a)}\0${p}${g}${t.slice(h)}`,h=m+a+3+String(p).length,a>1?l.push({0:x.slice(0,a),index:m,pos:m+a,parts:[[]]}):1===a&&"-"===t[m-1]&&l.push({0:"-{",index:m-1,pos:m+1,parts:[[]]}))}else h=u+i.length,"{"===i[0]&&(g.pos=h,g.parts=[[]]),l.push(..."0"in f?[f]:[],g);d&&=t.slice(h).includes("}}");let N=l.at(-1);d||"{"!==N?.[0]?.[0]||(l.pop(),N=l.at(-1)),p=new RegExp(o+(N?`|${a[N[0][0]]}${N.findEqual?"|=":""}`:""),"gmu"),p.lastIndex=h,g=p.exec(t)}return t}},4907:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[],r=!1)=>{const o=/<onlyinclude>(.*?)<\/onlyinclude>/gsu;if(r&&-1!==t.search(o))return t.replaceAll(o,((t,n)=>{const r=`\0${i.length}e`;return new(s(851))(n,e,i),r})).replaceAll(/(^|\0\d+e\x7F)(.*?)(?=$|\0\d+e\x7F)/gsu,((t,n,r)=>""===r?n:(new(s(3423))(r,e,i),`${n}\0${i.length-1}c`)));const l=e.ext.join("|"),a=r?"includeonly":"(?:no|only)include",c=new RegExp(`\x3c!--.*?(?:--\x3e|$)|<${a}(?:\\s[^>]*?)?>|</${a}\\s*>|<(${l})(\\s[^>]*?)?(?:/>|>(.*?)</(\\1\\s*)>)|<(${r?"noinclude":"includeonly"})(\\s[^>]*?)?(?:/>|>(.*?)(?:</(\\5\\s*)>|$))`,"gisu");return t.replaceAll(c,((t,n,r,o,l,a,c,h,p)=>{const g=`\0${i.length}${n?"e":"c"}`;if(n)new(s(7267))(n,r,o,l,e,i);else if(t.startsWith("\x3c!--")){const n=s(5749),r=t.endsWith("--\x3e");new n(t.slice(4,r?-3:void 0),r,e,i)}else a?new(s(8655))(a,c,h,p,e,i):new(s(3423))(t,e,i);return g}))}},3765:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=s(9910),o=/-\{/gu,l=/-\{|\}-/gu,a=[];let c=o,h=c.exec(t);for(;h;){const{0:s,index:n}=h;if("}-"===s){const s=a.pop(),{length:l}=i,h=t.slice(s.index+2,n),p=h.indexOf("|"),[g,d]=-1===p?[[],h]:[h.slice(0,p).split(";"),h.slice(p+1)],u=d.replaceAll(/(&[#a-z\d]+);/giu,"$1"),f=`(?:${e.variants.join("|")})`;new r(g,u.split(new RegExp(`;(?=\\s*(?:${f}|[^;]*?=>\\s*${f})\\s*:)`,"u")).map((t=>t.replaceAll("",";"))),e,i),t=`${t.slice(0,s.index)}\0${l}v${t.slice(n+2)}`,0===a.length&&(c=o),c.lastIndex=s.index+3+String(l).length}else a.push(h),c=l;h=c.exec(t)}return t}},7513:(t,e,s)=>{const{extUrlChar:n}=s(231),i=s(6010);t.exports=(t,e=i.getConfig(),r=[])=>{const o=s(741),l=new RegExp(`\\[((?:${e.protocol}|//)${n})(\\p{Zs}*)([^\\]-\b\n-�]*)\\]`,"giu");return t.replaceAll(l,((t,s,n,i)=>{const{length:l}=r,a=/&[lg]t;/u.exec(s);return a&&(n="",i=`${(s=s.slice(0,a.index)).slice(a.index)}${n}${i}`),new o(s,n,i,e,r),`\0${l}w`}))}},2937:(t,e,s)=>{const n=s(6010);s(7507),t.exports=({firstChild:{data:t},type:e},i=n.getConfig(),r=[])=>{const o=s(2582),l=s(7815),{doubleUnderscore:a}=i;return"root"!==e&&(t=`\0${t}`),t=t.replaceAll(/^((?:\0\d+c\x7F)*)(-{4,})/gmu,((t,e,s)=>(new o(s.length,i,r),`${e}\0${r.length-1}r`))).replaceAll(new RegExp(`__(${a.flat().join("|")})__`,"giu"),((t,e)=>a[0].includes(e.toLowerCase())||a[1].includes(e)?(new l(e,i,r),`\0${r.length-1}u`):t)),"root"===e?t:t.slice(1)}},5130:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=/^(\/?)([a-z][^\s/>]*)(\s[^>]*?)?(\/?>)([^<]*)$/iu,o=e.html.flat(),l=t.split("<");let a=l.shift();for(const t of l){const n=r.exec(t),l=n?.[2],c=l?.toLowerCase();if(!n||!o.includes(c)){a+=`<${t}`;continue}const h=s(5037),[,p,,g="",d,u]=n,f=new h(g,"html-attr",e,i),x=f.getAttr("itemprop");("meta"!==c||void 0!==x&&void 0!==f.getAttr("content"))&&("link"!==c||void 0!==x&&void 0!==f.getAttr("href"))?(a+=`\0${i.length}x${u}`,new(s(2350))(l,f,"/"===p,"/>"===d,e,i)):(a+=`<${t}`,i.pop())}return a}},1452:(t,e,s)=>{const n=s(6010),i=(t,e=n.getConfig(),r=[])=>{const o=s(3360),l=/^([^\n<>[\]{}|]+)(?:\|(.*?[^\]]))?\]\](.*)$/su,a=/^([^\n<>[\]{}|]+)\|(.*)$/su,c=new RegExp(`^\\s*(?:${e.protocol})`,"iu"),h=t.split("[[");let p=h.shift();for(let t=0;t<h.length;t++){let g,d,u,f;const x=h[t],m=l.exec(x);if(m)[,d,u,f]=m,"]"===f[0]&&u?.includes("[")&&(u+="]",f=f.slice(1));else{const t=a.exec(x);t&&(g=!0,[,d,u]=t)}if(void 0===d||c.test(d)||/\0\d+[exhbru]\x7F/u.test(d)){p+=`[[${x}`;continue}let A=d;if(d.includes("%"))try{A=decodeURIComponent(d)}catch{}const C=":"===d.trim()[0];if(C&&g){p+=`[[${x}`;continue}const{ns:$,valid:E}=n.normalizeTitle(A,0,e,!0);if(!E){p+=`[[${x}`;continue}if(g){if(6!==$){p+=`[[${x}`;continue}let s;for(t++;t<h.length;t++){const e=h[t],n=e.split("]]");if(n.length>2){s=!0,u+=`[[${n[0]}]]${n[1]}`,f=n.slice(2).join("]]");break}if(2!==n.length){u+=`[[${e}`;break}u+=`[[${n[0]}]]${n[1]}`}if(u=i(u,e,r),!s){p+=`[[${d}|${u}`;continue}}u&&=o(u,e,r),p+=`\0${r.length}l${f}`;let N=s(3905);C||(6===$?N=s(7625):14===$&&(N=s(337))),new N(d,u,e,r)}return p};t.exports=i},6622:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=/^((?:\0\d+c\x7F)*)([;:*#]+)/u.exec(t);if(!r)return t;const o=s(962),[l,a,c]=r;t=`${a}\0${i.length}d${t.slice(l.length)}`,new o(c,e,i);let h=c.split(";").length-1;if(!h)return t;const p=s(3434);let g=/:+|-\{/gu,d=g.exec(t),u=0;for(;d&&h;){const{0:s,index:n}=d;if(":"===s[0]){if(s.length>=h)return new p(":".repeat(h),e,i),`${t.slice(0,n)}\0${i.length-1}d${t.slice(n+h)}`;t=`${t.slice(0,n)}\0${i.length}d${t.slice(g.lastIndex)}`,h-=s.length,g.lastIndex=n+4+String(i.length).length,new p(s,e,i)}else if("-{"===s){if(!u){const{lastIndex:t}=g;g=/-\{|\}-/gu,g.lastIndex=t}u++}else if(u--,!u){const{lastIndex:t}=g;g=/:+|-\{/gu,g.lastIndex=t}d=g.exec(t)}return t}},4737:(t,e,s)=>{const{extUrlChar:n}=s(231),i=s(6010);t.exports=(t,e=i.getConfig(),r=[])=>{const o=s(8962),l=new RegExp(`\\b(?:${e.protocol})(${n})`,"giu");return t.replaceAll(l,((t,s)=>{let n="",i=t;const l=/&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/iu.exec(i);l&&(n=i.slice(l.index),i=i.slice(0,l.index));const a=new RegExp(`[,;.:!?${i.includes("(")?"":")"}]+$`,"u").exec(i);if(a){let t=0;";"===a[0][0]&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/iu.test(i.slice(0,a.index))&&(t=1),n=`${i.slice(a.index+t)}${n}`,i=i.slice(0,a.index+t)}return n.length>=s.length?t:(new o(i,!1,e,r),`\0${r.length-1}w${n}`)}))}},3360:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=t.split(/('{2,})/u),{length:o}=r;if(1===o)return t;let l,a,c,h=0,p=0;for(let t=1;t<o;t+=2){const{length:e}=r[t];switch(e){case 2:p++;break;case 4:r[t-1]+="'",r[t]="'''";case 3:if(h++,l)break;" "===r[t-1].at(-1)?a||c||(c=t):" "===r[t-1].at(-2)?l=t:a||=t;break;default:r[t-1]+="'".repeat(e-5),r[t]="'''''",p++,h++}}if(p%2==1&&h%2==1){const t=l??a??c;r[t]="''",r[t-1]+="'"}const g=s(6714);for(let t=1;t<o;t+=2)new g(r[t].length,e,i),r[t]=`\0${i.length-1}q`;return r.join("")}},4624:(t,e,s)=>{const n=s(6010);s(7507),t.exports=({firstChild:{data:t},type:e},i=n.getConfig(),r=[])=>{const o=s(8138),l=s(2840),a=s(3125),c=s(5567),h=s(3434),p=[],g=t.split("\n");let d="root"===e?"":`\n${g.shift()}`;const u=(t,e)=>{if(!e)return void(d+=t);const{lastChild:s}=e;if(s.isPlain())s.setText(String(s)+t);else{const s=new o(t,i,!0,r);s.type="table-inter",e.appendChild(s.setAttribute("stage",3))}};for(const t of g){let e=p.pop();const[s]=/^(?:\s|\0\d+c\x7F)*/u.exec(t),n=t.slice(s.length),o=/^(:*)((?:\s|\0\d+c\x7F)*)(\{\||\{\0\d+!\x7F|\0\d+\{\x7F)(.*)$/u.exec(n);if(o){for(;e&&"td"!==e.type;)e=p.pop();const[,t,n,a,c]=o;t&&new h(t,i,r),u(`\n${s}${t&&`\0${r.length-1}d`}${n}\0${r.length}b`,e);const g=new l(a,c,i,r);p.push(...e?[e]:[],g);continue}if(!e){d+=`\n${t}`;continue}const g=/^(?:(\|\}|\0\d+!\x7F\}|\0\d+\}\x7F)|(\|-+|\0\d+!\x7F-+|\0\d+-\x7F-*)(?!-)|(!|(?:\||\0\d+!\x7F)\+?))(.*)$/u.exec(n);if(!g){u(`\n${t}`,e),p.push(...e?[e]:[]);continue}const[,f,x,m,A]=g;if(f){for(;!(e instanceof l);)e=p.pop();e.close(`\n${s}${f}`,!0),u(A,p.at(-1))}else if(x){"td"===e.type&&(e=p.pop()),"tr"===e.type&&(e=p.pop());const t=new a(`\n${s}${x}`,A,i,r);p.push(e,t),e.appendChild(t)}else{"td"===e.type&&(e=p.pop());const t="!"===m?/!!|(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu:/(?:\||\0\d+!\x7F){2}|\0\d+\+\x7F/gu;let n=t.exec(A),o=0,l=`\n${s}${m}`;for(;n;){const s=new c(l,A.slice(o,n.index),i,r);e.appendChild(s),({lastIndex:o}=t),[l]=n,n=t.exec(A)}const a=new c(l,A.slice(o),i,r);p.push(e,a),e.appendChild(a)}}return d.slice(1)}},9544:(t,e,s)=>{const{generateForChild:n}=s(8277),i=s(6010),r=s(8138);t.exports=class extends r{type="arg";constructor(t,e=i.getConfig(),n=[]){super(void 0,e,!0,n);for(let i=0;i<t.length;i++)if(0===i||i>1){const r=new(s(0===i?9237:9263))(t[i],0===i?"arg-name":void 0,e,n);this.appendChild(r)}else{const s=new r(t[i],e,!0,n);s.type="arg-default",this.appendChild(s.setAttribute("stage",2))}}toString(){return`{{{${super.toString("|")}}}}`}getPadding(){return 3}getGaps(){return 1}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}lint(t=0){const{childNodes:[e,s,...i]}=this,r=e.lint(t+3);if(s&&r.push(...s.lint(t+4+String(e).length)),i.length>0){const e=this.getRootNode().posFromIndex(t);r.push(...i.map((t=>n(t,e,"三重括号内的不可见部分"))))}return r}}},9263:(t,e,s)=>{const n=s(9237);t.exports=class extends n{type="hidden"}},9237:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="plain";constructor(t,e,s=n.getConfig(),i=[]){super(t,s,!0,i),e&&(this.type=e)}}},5037:(t,e,s)=>{const{generateForSelf:n}=s(8277),{removeComment:i}=s(231),r=s(6010),o=s(8138);t.exports=class extends o{#i=new Map;#r=!0;#o(){let t=this.toString();t=i(t).replaceAll(/\0\d+~\x7F/gu,"=");for(const[,e,,s,n]of t.matchAll(/([^\s/][^\s/=]*)(?:\s*=\s*(?:(["'])(.*?)(?:\2|$)|(\S*)))?/gsu))this.setAttr(e,s??n??!0,!0)||(this.#r=!1)}constructor(t,e,s=r.getConfig(),n=[]){super(t,s,!0,n),this.type=e,this.#o()}getAttr(t){return this.#i.get(t.toLowerCase().trim())}setAttr(t,e){return t=t.toLowerCase().trim(),!!/^(?:[\w:]|\0\d+[t!~{}+-]\x7F)(?:[\w:.-]|\0\d+[t!~{}+-]\x7F)*$/u.test(t)&&(this.#i.set(t,!0===e||e.replaceAll(/\s/gu," ").trim()),!0)}lint(t=0){s(2350);const e=super.lint(t);let i;return"html-attr"===this.type&&this.parentNode.closing&&String(this).trim()&&(i=this.getRootNode().posFromIndex(t),e.push(n(this,i,"位于闭合标签的属性"))),this.#r||(i||=this.getRootNode().posFromIndex(t),e.push(n(this,i,"包含无效属性"))),e}}},9910:(t,e,s)=>{const{print:n}=s(231),i=s(6010),r=s(8138),o=s(6719),l=s(8683);t.exports=class extends r{type="converter";constructor(t,e,s=i.getConfig(),n=[]){super(void 0,s,!0,n),this.append(new o(t,s,n));const[r]=e,a=r.includes(":"),c=new l(r,a,s,n);a&&1===c.childNodes.length?this.appendChild(new l(e.join(";"),!1,s,n)):this.append(c,...e.slice(1).map((t=>new l(t,!0,s,n))))}toString(){const{childNodes:[t,...e]}=this;return`-{${t.toString()}${t.childNodes.length>0?"|":""}${e.map(String).join(";")}}-`}getPadding(){return 2}getGaps(t=0){return(t=t<0?t+this.childNodes.length:t)||this.firstChild.childNodes.length>0?1:0}print(){const{children:[t,...e]}=this;return`<span class="wpb-converter">-{${t.print()}${t.childNodes.length>0?"|":""}${n(e,{sep:";"})}}-</span>`}}},6719:(t,e,s)=>{const{generateForChild:n}=s(8277),i=s(6010),r=s(8138),o=s(9237);t.exports=class extends r{type="converter-flags";#l;constructor(t,e=i.getConfig(),s=[]){super(void 0,e,!0,s),this.append(...t.map((t=>new o(t,"converter-flag",e,s))))}afterBuild(){return this.#l=this.childNodes.map((t=>String(t).trim())),this}toString(){return super.toString(";")}getGaps(){return 1}print(){return super.print({sep:";"})}lint(t=0){const e=this.getVariantFlags(),s=this.getUnknownFlags(),i=this.#l.filter((t=>["A","T","R","D","-","H","N"].includes(t))),r=this.#l.length-s.length,o=super.lint(t);if(e.length===r||i.length===r)return o;const l=this.getRootNode().posFromIndex(t);for(const t of this.childNodes){const r=String(t).trim();e.includes(r)||s.includes(r)||!(e.length>0)&&i.includes(r)||o.push(n(t,l,"无效的转换标记"))}return o}getUnknownFlags(){return this.#l.filter((t=>/\{\{[^{}]+\}\}/u.test(t)))}getVariantFlags(){const{variants:t}=this.getAttribute("config");return this.#l.filter((e=>t.includes(e)))}}},8683:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(9237);t.exports=class extends i{type="converter-rule";constructor(t,e=!0,s=n.getConfig(),i=[]){if(super(void 0,s,!0,i),e){const e=t.indexOf(":"),n=t.slice(0,e).indexOf("=>"),o=-1===n?t.slice(0,e):t.slice(n+2,e),{variants:l}=s;l.includes(o.trim())?(super.insertAt(new r(o,"converter-rule-variant",s,i)),super.insertAt(new r(t.slice(e+1),"converter-rule-to",s,i)),-1!==n&&super.insertAt(new r(t.slice(0,n),"converter-rule-from",s,i),0)):super.insertAt(new r(t,"converter-rule-noconvert",s,i))}else super.insertAt(new r(t,"converter-rule-noconvert",s,i))}toString(){if(3===this.childNodes.length){const{childNodes:[t,e,s]}=this;return`${t.toString()}=>${e.toString()}:${s.toString()}`}return super.toString(":")}getGaps(t=0){const{childNodes:{length:e}}=this;return 0===(t=t<0?t+e:t)&&3===e?2:1}print(){if(3===this.childNodes.length){const{childNodes:[t,e,s]}=this;return`<span class="wpb-converter-rule">${t.print()}=>${e.print()}:${s.print()}</span>`}return super.print({sep:":"})}}},741:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(8962);t.exports=class extends i{type="ext-link";#a;constructor(t,e,s,o=n.getConfig(),l=[]){if(super(void 0,o,!0,l),this.appendChild(new r(t,!0,o,l)),this.#a=e,s){const t=new i(s,o,!0,l);t.type="ext-link-text",this.appendChild(t.setAttribute("stage",n.MAX_STAGE-1))}}toString(){return 1===this.childNodes.length?`[${super.toString()}${this.#a}]`:`[${super.toString(this.#a)}]`}getPadding(){return 1}getGaps(){return this.#a.length}print(){const{childNodes:{length:t}}=this;return super.print(t>1?{pre:"[",sep:this.#a,post:"]"}:{pre:"[",post:`${this.#a}]`})}}},1891:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(1031),o=s(9263);t.exports=class extends i{type="ext-inner";name="gallery";constructor(t,e=n.getConfig(),s=[]){super(void 0,e,!0,s);for(const n of t?.split("\n")??[]){const t=/^([^|]+)(?:\|(.*))?/u.exec(n);if(!t){this.appendChild(n.trim()?new o(n,void 0,e,[],{AstText:":"}):n);continue}const[,i,l]=t;let a;try{({valid:a}=this.normalizeTitle(decodeURIComponent(i),6,!0))}catch{({valid:a}=this.normalizeTitle(i,6,!0))}a?this.appendChild(new r(i,l,e,s)):this.appendChild(new o(n,void 0,e,[]))}}toString(){return super.toString("\n")}getGaps(){return 1}print(){return super.print({sep:"\n"})}lint(t=0){const{top:e,left:s}=this.getRootNode().posFromIndex(t),n=[];for(let i=0,r=t;i<this.childNodes.length;i++){const t=this.childNodes[i],o=String(t).trim();"hidden"===t.type&&o&&!/^<!--.*-->$/u.test(o)?n.push({message:"图库中的无效内容",startLine:e+i,endLine:e+i,startCol:i?0:s,endCol:i?o.length:s+o.length}):"hidden"!==t.type&&"text"!==t.type&&n.push(...t.lint(r)),r+=o.length+1}return n}}},9450:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="heading";constructor(t,e,r=n.getConfig(),o=[]){super(void 0,r,!0,o),this.setAttribute("name",String(t));const l=new i(e[0],r,!0,o);l.type="heading-title",l.setAttribute("stage",2);const a=new(s(8058))(e[1],"heading-trail",r,o);this.append(l,a)}toString(){const t="=".repeat(Number(this.name));return`${t}${this.firstChild.toString()}${t}${this.lastChild.toString()}`}getPadding(){return Number(this.name)}getGaps(){return Number(this.name)}print(){const t="=".repeat(Number(this.name));return super.print({pre:t,sep:t})}}},2350:(t,e,s)=>{const{generateForSelf:n}=s(8277),i=s(6010),r=s(8138);t.exports=class extends r{type="html";#c;#h;#p;get closing(){return this.#c}constructor(t,e,s,n,r=i.getConfig(),o=[]){super(void 0,r,!0,o),this.appendChild(e),this.setAttribute("name",t.toLowerCase()),this.#c=s,this.#h=n,this.#p=t}toString(){return`<${this.#c?"/":""}${this.#p}${super.toString()}${this.#h?"/":""}>`}getPadding(){return this.#p.length+(this.#c?2:1)}print(){return super.print({pre:`&lt;${this.#c?"/":""}${this.#p}`,post:(this.#h?"/":"")+"&gt;"})}lint(t=0){const e=super.lint(t);try{this.findMatchingTag()}catch({message:s}){const i=this.getRootNode().posFromIndex(t),[r]=s.split("：");e.push(n(this,i,r,"未"===r[0]?"warning":"error"))}return e}findMatchingTag(){const{html:t}=this.getAttribute("config"),{name:e,parentNode:s}=this,n=String(this);if(this.#c&&this.#h)throw new SyntaxError(`同时闭合和自封闭的标签：${n}`);if(t[2].includes(e)||this.#h&&t[1].includes(e))return this;if(this.#h&&t[0].includes(e))throw new SyntaxError(`无效自封闭标签：${n}`);if(!s)return;const{childNodes:i}=s,r=i.indexOf(this),o=this.#c?i.slice(0,r).reverse().filter((({type:t,name:s})=>"html"===t&&s===e)):i.slice(r+1).filter((({type:t,name:s})=>"html"===t&&s===e));let l=this.#c?-1:1;for(const t of o)if(t.closing?l--:l++,0===l)return t;throw new SyntaxError(`未${this.#c?"匹配的闭合":"闭合的"}标签：${n}`)}}},1874:(t,e,s)=>{const{print:n,extUrlChar:i}=s(231),r=s(6010),o=s(8138);class l extends o{static#g(t,e,s=r.getConfig()){if(e=e.replaceAll(/\0\d+t\x7F/gu,"").trim(),"width"===t)return/^\d*(?:x\d*)?$/u.test(e);if(["alt","class","manualthumb","frameless","framed","thumbnail"].includes(t))return!0;if("link"===t){if(!e)return!0;if(new RegExp(`(?:${s.protocol}|//)${i}(?=\0\\d+t|$)`,"iu").test(e))return!0;if(e.startsWith("[[")&&e.endsWith("]]")&&(e=e.slice(2,-2)),e.includes("%"))try{e=decodeURIComponent(e)}catch{}const{valid:t}=r.normalizeTitle(e,0,s,!0);return t}return!isNaN(e)}type="image-parameter";#d="";constructor(t,e=r.getConfig(),s=[]){const n=Object.entries(e.img).map((([t,e])=>[t,e,new RegExp(`^(\\s*)${t.replace("$1","(.*)")}(\\s*)$`,"u")])),i=n.find((([,,e])=>e.test(t)));if(i){const n=i[2].exec(t);if(4!==n.length||l.#g(i[1],n[2],e,!0))return 3===n.length?(super(void 0,e,!0,s),this.#d=t):(super(n[2],e,!0,s),this.#d=`${n[1]}${i[0]}${n[3]}`),void this.setAttribute("name",i[1]).setAttribute("stage",r.MAX_STAGE)}super(t,e,!0,s),this.setAttribute("name","caption").setAttribute("stage",7)}isPlain(){return!0}toString(){return this.#d?this.#d.replace("$1",super.toString()):super.toString()}getPadding(){return Math.max(0,this.#d.indexOf("$1"))}print(){return this.#d?`<span class="wpb-image-parameter">${this.#d.replace("$1",n(this.childNodes))}</span>`:super.print({class:"image-caption"})}}t.exports=l},8138:(t,e,s)=>{const n=s(6010),i=s(9205),r=s(7507),{MAX_STAGE:o}=n;class l extends i{type="root";#u=0;#f;#x;#m=(t=this.#u,e=!1)=>{if(t<this.#u||!this.isPlain()||0===this.childNodes.length)return this;switch(t){case 0:"root"===this.type&&this.#x.shift(),this.#A(e);break;case 1:this.#C();break;case 2:this.#$();break;case 3:this.#E();break;case 4:this.#N();break;case 5:this.#S();break;case 6:this.#b();break;case 7:this.#w();break;case 8:this.#y();break;case 9:this.#T();break;case 10:this.#R()}if("root"===this.type)for(const s of this.#x)s.getAttribute("parseOnce")(t,e);return this.#u++,this};#O=t=>t.split(/[\0\x7F]/u).map(((t,e)=>e%2==0?new r(t):this.#x[Number(t.slice(0,-1))]));constructor(t,e=n.getConfig(),s=!1,i=[]){super(),"string"==typeof t&&this.appendChild(s?t:t.replaceAll(/[\0\x7F]/gu,"")),this.#f=e,this.#x=i,i.push(this)}getAttribute(t){switch(t){case"config":return JSON.parse(JSON.stringify(this.#f));case"accum":return this.#x;case"parseOnce":return this.#m;case"buildFromStr":return this.#O;default:return super.getAttribute(t)}}setAttribute(t,e){return"stage"===t?(0===this.#u&&"root"===this.type&&this.#x.shift(),this.#u=e,this):super.setAttribute(t,e)}isPlain(){return this.constructor===l}insertAt(t,e=this.childNodes.length){return"string"==typeof t&&(t=new r(t)),super.insertAt(t,e),"root"===t.type&&(t.type="plain"),t}normalizeTitle(t,e=0,s=!1){return n.normalizeTitle(t,e,this.#f,s)}build(){this.#u=o;const{childNodes:{length:t},firstChild:e}=this,s=String(e);if(1===t&&"text"===e.type&&s.includes("\0")&&(this.replaceChildren(...this.#O(s)),this.normalize(),"root"===this.type))for(const t of this.#x)t.build();return this}afterBuild(){if("root"===this.type)for(const t of this.#x)t.afterBuild();return this}parse(t=o,e=!1){for(;this.#u<t;)this.#m(this.#u,e);return t?this.build().afterBuild():this}#A(t){const e=s(4907);this.setText(e(String(this),this.#f,this.#x,t))}#C(){const t=s(8275);this.setText(t(String(this),this.#f,this.#x))}#$(){const t=s(5130);this.setText(t(String(this),this.#f,this.#x))}#E(){const t=s(4624),e=s(2840);this.setText(t(this,this.#f,this.#x));for(const t of this.#x)if(t instanceof e&&"td"!==t.type){t.normalize();const{childNodes:[,e]}=t;if("string"==typeof e&&e.includes("\0")){t.removeAt(1);const s=new l(e,this.#f,!0,this.#x);t.insertAt(s,1),s.setAttribute("stage",4)}}}#N(){const t=s(2937);this.setText(t(this,this.#f,this.#x))}#S(){const t=s(1452);this.setText(t(String(this),this.#f,this.#x))}#b(){const t=s(3360),e=String(this).split("\n");for(let s=0;s<e.length;s++)e[s]=t(e[s],this.#f,this.#x);this.setText(e.join("\n"))}#w(){const t=s(7513);this.setText(t(String(this),this.#f,this.#x))}#y(){const t=s(4737);this.setText(t(String(this),this.#f,this.#x))}#T(){const t=s(6622),e=String(this).split("\n");for(let s="root"===this.type?0:1;s<e.length;s++)e[s]=t(e[s],this.#f,this.#x);this.setText(e.join("\n"))}#R(){const t=s(3765);this.setText(t(String(this),this.#f,this.#x))}}t.exports=l},337:(t,e,s)=>{const n=s(3905);t.exports=class extends n{type="category"}},7625:(t,e,s)=>{const{explode:n}=s(231),{generateForChild:i}=s(8277),r=s(6010),o=s(3905),l=s(1874);t.exports=class extends o{type="file";constructor(t,e,s=r.getConfig(),i=[]){super(t,void 0,s,i),this.append(...n("-{","}-","|",e).map((t=>new l(t,s,i))))}lint(t=0){const e=super.lint(t),s=this.getFrameArgs(),n=this.getArgs("caption");if(s.length>1||n.size>1){const r=this.getRootNode().posFromIndex(t);s.length>1&&e.push(...s.map((t=>i(t,r,"重复或冲突的图片框架参数")))),n.size>1&&e.push(...[...n].map((t=>i(t,r,"重复的图片说明"))))}return e}getAllArgs(){return this.childNodes.slice(1)}getFrameArgs(){return this.getAllArgs().filter((({name:t})=>["manualthumb","frameless","framed","thumbnail"].includes(t)))}getArgs(t){return new Set(this.getAllArgs().filter((({name:e})=>t===e)))}}},1031:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(7625);t.exports=class extends r{type="gallery-image";constructor(t,e,s=n.getConfig(),r=[]){let o;if(void 0!==e){o=new i(e,s,!0,r),o.type="temp";for(let t=1;t<n.MAX_STAGE;t++)o.getAttribute("parseOnce")();r.splice(r.indexOf(o),1)}const l=JSON.parse(JSON.stringify(s));l.img=Object.fromEntries(Object.entries(s.img).filter((([,t])=>"width"!==t))),super(t,o?.toString(),l,r)}getPadding(){return 0}}},3905:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="link";constructor(t,e,r=n.getConfig(),o=[]){super(void 0,r,!0,o);const l=s(9237);if(this.appendChild(new l(t,"link-target",r,o)),void 0!==e){const t=new i(e,r,!0,o);t.type="link-text",this.appendChild(t.setAttribute("stage",n.MAX_STAGE-1))}}toString(){const t=super.toString("|");return"gallery-image"===this.type?t:`[[${t}]]`}getPadding(){return 2}getGaps(){return 1}print(){return super.print("gallery-image"===this.type?{sep:"|"}:{pre:"[[",post:"]]",sep:"|"})}}},8962:(t,e,s)=>{const{generateForChild:n}=s(8277),i=s(6010),r=s(8138);t.exports=class extends r{type="free-ext-link";constructor(t,e,s=i.getConfig(),n=[]){super(t,s,!0,n),e&&(this.type="ext-link-url")}lint(t=0){const e=super.lint(t);let s;for(const i of this.childNodes){const r=String(i);if("text"!==i.type||!/[，；。：！？（）【】]/u.test(r))continue;s||=this.getRootNode().posFromIndex(t);const o=n(i,s,"URL中的全角标点","warning");e.push(...[...r.matchAll(/[，；。：！？（）【】]/gu)].map((({index:t})=>{const e=r.slice(0,t).split("\n"),{length:s}=e,{length:n}=e.at(-1),i=o.startLine+s-1,l=s>1?n:o.startCol+n;return{...o,startLine:i,endLine:i,startCol:l,endCol:l+1}})))}return e}}},5749:(t,e,s)=>{const{generateForSelf:n}=s(8277),i=s(6010),r=s(6935);t.exports=class extends r{type="comment";closed;constructor(t,e=!0,s=i.getConfig(),n=[]){super(t,s,n),this.closed=e}toString(){return`\x3c!--${String(this.firstChild)}${this.closed?"--\x3e":""}`}getPadding(){return 4}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}lint(t=0){return this.closed?[]:[n(this,this.getRootNode().posFromIndex(t),"未闭合的HTML注释")]}}},3434:(t,e,s)=>{const n=s(6935);t.exports=class extends n{type="dd"}},7815:(t,e,s)=>{const n=s(6935);t.exports=class extends n{type="double-underscore";toString(){return`__${String(this.firstChild)}__`}getPadding(){return 2}print(){return super.print({pre:"__",post:"__"})}}},2582:(t,e,s)=>{const n=s(6010),i=s(6935);t.exports=class extends i{type="hr";constructor(t,e=n.getConfig(),s=[]){super("-".repeat(t),e,s)}}},6935:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="ext-inner";constructor(t,e=n.getConfig(),s=[]){super(t,e,!0,s)}}},962:(t,e,s)=>{const n=s(3434);t.exports=class extends n{type="list"}},3423:(t,e,s)=>{const n=s(6935);t.exports=class extends n{type="noinclude"}},6714:(t,e,s)=>{const n=s(6010),i=s(6935);t.exports=class extends i{type="quote";constructor(t,e=n.getConfig(),s=[]){super("'".repeat(t),e,s)}}},851:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="onlyinclude";constructor(t,e=n.getConfig(),s=[]){super(t,e,!0,s)}toString(){return`<onlyinclude>${super.toString()}</onlyinclude>`}getPadding(){return 13}print(){return super.print({pre:"&lt;onlyinclude&gt;",post:"&lt;/onlyinclude&gt;"})}isPlain(){return!0}}},9799:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="parameter";get anon(){return 0===this.firstChild.childNodes.length}constructor(t,e,r=n.getConfig(),o=[]){super(void 0,r,!0,o);const l=new(s(9237))("number"==typeof t?void 0:t,"parameter-key",r,o),a=new i(e,r,!0,o);a.type="parameter-value",this.append(l,a.setAttribute("stage",2))}afterBuild(){if(!this.anon){const t=String(this.firstChild).trim(),{parentNode:e}=this;this.setAttribute("name",t),e&&e instanceof s(1782)&&e.getArgs(t).add(this)}return this}toString(){return this.anon?this.lastChild.toString():super.toString("=")}getGaps(){return this.anon?0:1}print(){return super.print({sep:this.anon?"":"="})}}},8058:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{constructor(t,e="plain",s=n.getConfig(),i=[]){super(t,s,!0,i),this.type=e}}},2840:(t,e,s)=>{const n=s(3125),i=s(8058);t.exports=class extends n{type="table";close(t="\n|}"){const e=this.getAttribute("config"),s=this.getAttribute("accum");this.appendChild(new i(t,"table-syntax",e,s))}}},5567:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(3125);t.exports=class extends r{type="td";#I="";constructor(t,e,s=n.getConfig(),r=[]){let o=e?.match(/\||\0\d+!\x7F/u),l=o?e.slice(0,o.index):"";/\[\[|-\{/u.test(l)&&(o=null,l=""),super(t,l,s,r),o&&([this.#I]=o);const a=new i(e?.slice(o?.index+this.#I.length),s,!0,r);a.type="td-inner",this.appendChild(a.setAttribute("stage",4))}afterBuild(){return this.#I.includes("\0")&&(this.#I=this.getAttribute("buildFromStr")(this.#I).map(String).join("")),this}toString(){const{childNodes:[t,e,s]}=this;return`${t.toString()}${e.toString()}${this.#I}${s.toString()}`}getGaps(t=0){return 1===(t=t<0?t+this.childNodes.length:t)?this.#I.length:0}print(){const{childNodes:[t,e,s]}=this;return`<span class="wpb-td">${t.print()}${e.print()}${this.#I}${s.print()}</span>`}}},3125:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(8058),o=s(5037);t.exports=class extends i{type="tr";constructor(t,e="",s=n.getConfig(),i=[]){super(void 0,s,!0,i),this.append(new r(t,"table-syntax",s,i),new o(e,"table-attr",s,i))}}},7267:(t,e,s)=>{const n=s(6010),i=s(1074);t.exports=class extends i{type="ext";closed=!0;constructor(t,e="",i="",r,o=n.getConfig(),l=[]){e=e&&e.trimStart()===e?` ${e}`:e;const a=s(5037),c=t.toLowerCase(),h=new a(e,"ext-attr",o,l),p=JSON.parse(JSON.stringify(o)),g=new Set(p.ext);let d;switch(c){case"choose":case"option":case"ref":case"poem":case"indicator":case"tab":case"tabs":case"pre":case"combobox":case"combooption":g.delete(c),p.ext=[...g,..."choose"===c?["option"]:[],..."combobox"===c?["combooption"]:[]],d=new(s(8138))(i,p,!0,l);break;case"gallery":g.delete(c),p.ext=[...g],d=new(s(1891))(i,p,l);break;default:d=new(s(6935))(i,o)}d.type="ext-inner","pre"===c&&d.setAttribute("stage",n.MAX_STAGE-1),super(t,h,d,r,o,l)}}},8655:(t,e,s)=>{const{generateForSelf:n}=s(8277),i=s(6010),r=s(1074);t.exports=class extends r{type="include";constructor(t,e="",s,n,r=i.getConfig(),o=[]){super(t,e,s??"",void 0===s?n:n??"",r,o)}lint(t=0){return this.closed?[]:[n(this,this.getRootNode().posFromIndex(t),"未闭合的标签")]}}},1074:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{#h;#v;#F;get closed(){return this.#v}constructor(t,e,s,i,r=n.getConfig(),o=[]){super(void 0,r,!0),this.#F=[t,i||t],this.#h=void 0===i,this.#v=""!==i,this.append(e,s);let l=o.indexOf(e);-1===l&&(l=o.indexOf(s)),-1===l&&(l=1/0),o.splice(l,0,this)}toString(){const{firstChild:t,lastChild:e}=this,[s,n]=this.#F;return this.#h?`<${s}${String(t)}/>`:`<${s}${String(t)}>${String(e)}${this.#v?`</${n}>`:""}`}getPadding(){return this.#F[0].length+1}getGaps(){return 1}print(){const[t,e]=this.#F;return super.print(this.#h?{pre:`&lt;${t}`,post:"/&gt;"}:{pre:`&lt;${t}`,sep:"&gt;",post:this.#v?`&lt;/${e}&gt;`:""})}}},1782:(t,e,s)=>{const{removeComment:n,print:i}=s(231),{generateForChild:r}=s(8277),o=s(6010),l=s(8138),a=s(9799);t.exports=class extends l{type="template";modifier="";#k={};setModifier(t=""){const{parserFunction:[,,e,s]}=this.getAttribute("config"),n=t.trim().toLowerCase(),i=e.includes(n),r=s.includes(n);return!(!i&&!r&&""!==t)&&(this.setAttribute("modifier",t),Boolean(t))}constructor(t,e,i=o.getConfig(),r=[]){super(void 0,i,!0,r);const l=s(9237),c=s(8058),{parserFunction:[h,p,g]}=i;if(t.includes(":")){const[e,...s]=t.split(":");this.setModifier(e)&&(t=s.join(":"))}if(t.includes(":")||0===e.length&&!g.includes(this.modifier.toLowerCase())){const[s,...o]=t.split(":"),a=n(s);if(p.includes(a)||h.includes(a.toLowerCase())){this.setAttribute("name",a.toLowerCase().replace(/^#/u,"")).type="magic-word";const t=new c(s,"magic-word-name",i,r);if(this.appendChild(t),o.length>0&&e.unshift([o.join(":")]),"invoke"===this.name)for(let t=0;t<2;t++){const s=e.shift();if(!s)break;const n=new l(s.join("="),"invoke-"+(t?"function":"module"),i,r);this.appendChild(n)}}}if("template"===this.type){const[e]=n(t).split("#");if(/\0\d+[eh!+-]\x7F|[<>[\]{}]/u.test(e))throw r.pop(),new SyntaxError(`非法的模板名称：${e}`);const s=new l(t,"template-name",i,r);this.appendChild(s)}const d=this.isTemplate();let u=1;for(const t of e)d||(t[0]=t.join("="),t.length=1),1===t.length&&(t.unshift(u),u++),this.appendChild(new a(...t,i,r))}toString(){const{childNodes:t,firstChild:e,modifier:s}=this;return`{{${s}${s&&":"}${"magic-word"===this.type?`${String(e)}${length>1?":":""}${t.slice(1).map(String).join("|")}`:super.toString("|")}}}`}getPadding(){return this.modifier?this.modifier.length+3:2}getGaps(){return 1}print(){const{childNodes:t,firstChild:e,modifier:s}=this;return`<span class="wpb-${this.type}">{{${s}${s&&":"}${"magic-word"===this.type?`${e.print()}${t.length>1?":":""}${i(t.slice(1),{sep:"|"})}`:i(t,{sep:"|"})}}}</span>`}lint(t=0){const e=super.lint(t);if(!this.isTemplate())return e;const s=this.getDuplicatedArgs();if(s.length>0){const n=this.getRootNode().posFromIndex(t);e.push(...s.flatMap((([,t])=>[...t])).map((t=>r(t,n,"重复参数"))))}return e}isTemplate(){return"template"===this.type||"magic-word"===this.type&&"invoke"===this.name}#L(t){const e=this.getAnonArgs().indexOf(t),s=String(e+1);this.getArgs(s).add(t.setAttribute("name",s))}insertAt(t,e=this.childNodes.length){return super.insertAt(t,e),t.anon?this.#L(t):t.name&&this.getArgs(t.name).add(t),t}getAllArgs(){return this.childNodes.filter((t=>t instanceof a))}getAnonArgs(){return this.getAllArgs().filter((({anon:t})=>t))}getArgs(t){const e=String(t).trim();let s=this.#k[e];return s||(s=new Set(this.getAllArgs().filter((({name:t})=>e===t))),this.#k[e]=s),s}getDuplicatedArgs(){return this.isTemplate()?Object.entries(this.#k).filter((([,{size:t}])=>t>1)).map((([t,e])=>[t,new Set(e)])):[]}}},8277:(t,e,s)=>{s(8138),t.exports={generateForChild:(t,e,s,n="error")=>{const{style:{top:i,left:r,height:o,width:l}}=t,{top:a,left:c}=e,h=a+i,p=i?r:c+r;return{message:s,severity:n,startLine:h,endLine:h+o-1,startCol:p,endCol:o>1?l:p+l}},generateForSelf:(t,e,s,n="error")=>({message:s,severity:n,startLine:e.top,endLine:e.top+t.offsetHeight-1,startCol:e.left,endCol:t.offsetHeight>1?t.offsetWidth:e.left+t.offsetWidth})}},231:(t,e,s)=>{const n=t=>t.replaceAll(/[\\{}()|.?*+^$[\]]/gu,"\\$&");t.exports={removeComment:t=>t.replaceAll(/\0\d+c\x7F/gu,""),print:(t,e={})=>{s(7507);const n=s(9205),{pre:i="",post:r="",sep:o=""}=e,l={"&":"amp","<":"lt",">":"gt"};return`${i}${t.map((t=>t instanceof n?t.print():String(t).replaceAll(/[&<>]/gu,(t=>`&${l[t]};`)))).join(o)}${r}`},escapeRegExp:n,explode:(t,e,s,i)=>{if(void 0===i)return[];const r=new RegExp(`${[t,e,s].map(n).join("|")}`,"gu"),o=[];let l=r.exec(i),a=0,c=0;for(;l;){const{0:e,index:n}=l;e!==s?a+=e===t?1:-1:0===a&&(o.push(i.slice(c,n)),({lastIndex:c}=r)),l=r.exec(i)}return o.push(i.slice(c)),o},extUrlChar:'(?:\\[[\\da-f:.]+\\]|[^[\\]<>"\\0-\\x1F\\x7F\\p{Zs}\\uFFFD])(?:[^[\\]<>"\\0-\\x1F\\x7F\\p{Zs}\\uFFFD]|\\0\\d+c\\x7F)*'}},5038:t=>{t.exports=JSON.parse('{"ext":["nowiki","pre","gallery","indicator","poem","ref","references","categorytree","charinsert","choose","imagemap","inputbox","templatestyles","dynamicpagelist","poll","modernsoundmanager","flashmp3","sm2","score","seo","tab","tabs","combobox"],"html":[["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","tr","td","th","q","bdo"],["li","dt","dd"],["br","wbr","hr","meta","link","img"]],"namespaces":{"0":"","1":"Talk","2":"User","3":"User talk","4":"Project","5":"Project talk","6":"File","7":"File talk","8":"MediaWiki","9":"MediaWiki talk","10":"Template","11":"Template talk","12":"Help","13":"Help talk","14":"Category","15":"Category talk","274":"Widget","275":"Widget talk","828":"Module","829":"Module talk","-2":"Media","-1":"Special"},"nsid":{"":0,"media":-2,"媒体":-2,"媒体文件":-2,"媒體":-2,"メディア":-2,"special":-1,"特殊":-1,"特別":-1,"talk":1,"对话":1,"對話":1,"讨论":1,"討論":1,"トーク":1,"ノート":1,"user":2,"u":2,"使用者":2,"用戶":2,"用户":2,"利用者":2,"user talk":3,"使用者討論":3,"用戶對話":3,"用戶討論":3,"用户对话":3,"用户讨论":3,"利用者‐会話":3,"利用者・トーク":3,"llwiki":4,"mgp":4,"moegirlpedia":4,"萌娘百科":4,"萌えっ娘百科事典":4,"project":4,"llwiki talk":5,"llwiki讨论":5,"llwiki討論":5,"萌娘百科 talk":5,"萌娘百科讨论":5,"萌娘百科討論":5,"moegirlpedia talk":5,"萌えっ娘百科事典‐ノート":5,"萌えっ娘百科事典・トーク":5,"project talk":5,"file":6,"image":6,"图像":6,"圖像":6,"文件":6,"档案":6,"檔案":6,"ファイル":6,"画像":6,"file talk":7,"image talk":7,"图像对话":7,"图像讨论":7,"圖像對話":7,"圖像討論":7,"文件对话":7,"文件讨论":7,"文件對話":7,"文件討論":7,"档案对话":7,"档案讨论":7,"檔案對話":7,"檔案討論":7,"ファイル‐ノート":7,"ファイル・トーク":7,"画像‐ノート":7,"mediawiki":8,"mediawiki talk":9,"mediawiki讨论":9,"mediawiki討論":9,"mediawiki‐ノート":9,"mediawiki・トーク":9,"template":10,"t":10,"样板":10,"模板":10,"樣板":10,"テンプレート":10,"template talk":11,"样板对话":11,"样板讨论":11,"模板对话":11,"模板讨论":11,"模板對話":11,"模板討論":11,"樣板對話":11,"樣板討論":11,"template‐ノート":11,"テンプレート・トーク":11,"h":12,"help":12,"使用說明":12,"帮助":12,"幫助":12,"ヘルプ":12,"help talk":13,"使用說明討論":13,"帮助对话":13,"帮助讨论":13,"幫助對話":13,"幫助討論":13,"help‐ノート":13,"ヘルプ・トーク":13,"category":14,"cat":14,"分类":14,"分類":14,"カテゴリ":14,"category talk":15,"分类对话":15,"分类讨论":15,"分類對話":15,"分類討論":15,"category‐ノート":15,"カテゴリ・トーク":15,"widget":274,"widget talk":275,"module":828,"模块":828,"模組":828,"モジュール":828,"module talk":829,"模块讨论":829,"模組討論":829,"モジュール・トーク":829},"parserFunction":[["名称空间","ns","名称空间e","nse","url编码","urlencode","小写首字","lcfirst","大写首字","ucfirst","小写","lc","大写","uc","本地url","localurl","本地urle","localurle","完整url","fullurl","完整url等同","fullurle","规范url","canonicalurl","规范url等同","canonicalurle","格式化数字","formatnum","语法","grammar","性别","gender","复数","plural","bidi","#语言","#language","左填充","padleft","右填充","padright","锚编码","anchorencode","文件路径","filepath","页面id","pageid","界面","int","#特殊","#special","#特殊等同","#speciale","#标记","#tag","#格式化日期","#日期格式化","#formatdate","#dateformat","#invoke","#while","#dowhile","#loop","#forargs","#fornumargs","#非空式","#若","#如果","#if","#相同式","#匹配式","#若相等","#如果相等","#ifeq","#多选式","#多条件式","#双射式","#开关","#转换","#switch","#存在式","#若有","#如有","#ifexist","#若表达式","#ifexpr","#错误式","#如果错误","#iferror","#时间","#time","#时间l","#timel","#计算式","#表达式","#expr","#rel2abs","#标题组成部分","#titleparts","#categorytree","#url解码","#urldecode","#choose","#调用","#var","#varexists","#var_final","#vardefine","#vardefineecho","#小工具","#widget","条目路径","articlepath","服务器","server","服务器名","servername","脚本路径","scriptpath","样式路径","stylepath","msgnw","#related","#cscore","#regex","#regex_var","#regexquote","#regexall","#len","#pos","#rpos","#sub","#count","#replace","#explode","#tab","#seo"],["页面数","NUMBEROFPAGES","用户数","NUMBEROFUSERS","活跃用户数","NUMBEROFACTIVEUSERS","条目数","NUMBEROFARTICLES","文件数","NUMBEROFFILES","管理员数","NUMBEROFADMINS","组中用户数","NUMBERINGROUP","NUMINGROUP","编辑数","NUMBEROFEDITS","默认排序","默认排序关键字","默认分类排序","DEFAULTSORT","DEFAULTSORTKEY","DEFAULTCATEGORYSORT","分类中页面数","PAGESINCATEGORY","PAGESINCAT","页面大小","PAGESIZE","保护级别","PROTECTIONLEVEL","PROTECTIONEXPIRY","名字空间等同","NAMESPACEE","名字空间编号","NAMESPACENUMBER","讨论空间","讨论名字空间","TALKSPACE","讨论空间等同","讨论名字空间等同","TALKSPACEE","主名字空间","条目名字空间","SUBJECTSPACE","ARTICLESPACE","主名字空间等同","条目名字空间等同","SUBJECTSPACEE","ARTICLESPACEE","页名","页面名","页面名称","PAGENAME","页面名等同","页面名称等同","PAGENAMEE","页面全称","完整页面名称","FULLPAGENAME","完整页面名称等同","FULLPAGENAMEE","根页面名称","ROOTPAGENAME","根页面名称等同","ROOTPAGENAMEE","基础页面名称","BASEPAGENAME","基础页面名称等同","BASEPAGENAMEE","子页面名称","SUBPAGENAME","子页面名称等同","SUBPAGENAMEE","讨论页面名称","对话页面名称","TALKPAGENAME","讨论页面名称等同","对话页面名称等同","TALKPAGENAMEE","主名字空间页面名称","条目页面名称","SUBJECTPAGENAME","ARTICLEPAGENAME","主名字空间页面名称等同","条目页面名称等同","SUBJECTPAGENAMEE","ARTICLEPAGENAMEE","修订ID","REVISIONID","修订日","REVISIONDAY","修订日2","REVISIONDAY2","修订月","REVISIONMONTH","修订月1","REVISIONMONTH1","修订年","REVISIONYEAR","修订时间戳","REVISIONTIMESTAMP","修订用户","REVISIONUSER","级联来源","CASCADINGSOURCES","名字空间","NAMESPACE","显示标题","DISPLAYTITLE","!","本月","本月2","CURRENTMONTH","CURRENTMONTH2","本月1","CURRENTMONTH1","本月名","本月名称","CURRENTMONTHNAME","本月名属格","本月名称属格","CURRENTMONTHNAMEGEN","本月简称","CURRENTMONTHABBREV","今天","CURRENTDAY","今天2","CURRENTDAY2","星期","今天名","今天名称","CURRENTDAYNAME","今年","CURRENTYEAR","当前时间","此时","CURRENTTIME","当前小时","CURRENTHOUR","本地月","本地月2","LOCALMONTH","LOCALMONTH2","本地月1","LOCALMONTH1","本地月份名","LOCALMONTHNAME","本地月历","LOCALMONTHNAMEGEN","本地月缩写","LOCALMONTHABBREV","本地日","LOCALDAY","本地日2","LOCALDAY2","本地日名","LOCALDAYNAME","本地年","LOCALYEAR","本地时间","LOCALTIME","本地小时","LOCALHOUR","站点名称","SITENAME","本周","CURRENTWEEK","当前DOW","CURRENTDOW","本地周","LOCALWEEK","本地DOW","LOCALDOW","修订大小","REVISIONSIZE","当前版本","CURRENTVERSION","当前时间戳","CURRENTTIMESTAMP","本地时间戳","LOCALTIMESTAMP","方向标记","DIRECTIONMARK","DIRMARK","内容语言","CONTENTLANGUAGE","CONTENTLANG","PAGELANGUAGE"],["msg","原始","raw"],["替代","subst","安全替代","safesubst"]],"doubleUnderscore":[["forcetoc","强显目录","nocc","nocontentconvert","不转换内容","noeditsection","无段落编辑","无编辑段落","nogallery","无图库","notc","notitleconvert","不转换标题","notoc","无目录","toc","目录"],["EXPECTUNUSEDCATEGORY","DISAMBIG","消除歧义","HIDDENCAT","隐藏分类","INDEX","索引","NEWSECTIONLINK","新段落链接","NOINDEX","无索引","NONEWSECTIONLINK","无新段落链接","STATICREDIRECT","静态重定向"]],"protocol":"bitcoin:|ftp://|ftps://|geo:|git://|gopher://|http://|https://|irc://|ircs://|magnet:|mailto:|mms://|news:|nntp://|redis://|sftp://|sip:|sips:|sms:|ssh://|svn://|tel:|telnet://|urn:|worldwind://|xmpp:","img":{"thumbnail":"thumbnail","thumb":"thumbnail","缩略图":"thumbnail","thumbnail=$1":"manualthumb","thumb=$1":"manualthumb","缩略图=$1":"manualthumb","left":"left","左":"left","right":"right","右":"right","none":"none","无":"none","$1px":"width","$1像素":"width","center":"center","centre":"center","居中":"center","framed":"framed","enframed":"framed","frame":"framed","有框":"framed","frameless":"frameless","无框":"frameless","upright":"upright","右上":"upright","upright=$1":"manual-upright","upright $1":"manual-upright","右上=$1":"manual-upright","右上$1":"manual-upright","border":"border","边框":"border","alt=$1":"alt","替代=$1":"alt","替代文本=$1":"alt","class=$1":"class","类=$1":"class","link=$1":"link","链接=$1":"link","baseline":"baseline","基线":"baseline","sub":"sub","子":"sub","super":"super","sup":"super","超":"super","top":"top","顶部":"top","text-top":"text-top","文字顶部":"text-top","middle":"middle","中间":"middle","bottom":"bottom","底部":"bottom","text-bottom":"text-bottom","文字底部":"text-bottom","lang=$1":"lang","语言=$1":"lang","page=$1":"page","page $1":"page","页数=$1":"page","$1页":"page"},"variants":["zh","zh-hans","zh-hant","zh-cn","zh-tw","zh-hk","zh-sg","zh-my","zh-mo"]}')}},e={};!function s(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,s),r.exports}(6010)})();