(()=>{"use strict";var t={6010:(t,e,s)=>{const{text:n}=s(231),i={running:!1,run(t){const{running:e}=this;this.running=!0;try{const s=t();return this.running=e,s}catch(t){throw this.running=e,t}},getConfig(){return this.config},isInterwiki:(t,{interwiki:e}=i.getConfig())=>(t=String(t)).replaceAll("_"," ").replace(/^\s*:?\s*/,"").match(new RegExp(`^(${e.join("|")})\\s*:`,"i")),normalizeTitle(t,e=0,r=!1,o=i.getConfig(),c=!1){let l;if(t=String(t),!c){const e=s(8138);l=this.run((()=>new e(t,o).parseOnce(0,r).parseOnce())),t=l.firstChild}const p=new(s(6986))(t,e,o);if(l){const t=t=>{for(const e of t)p[e].includes("\0")&&(p[e]=n(l.buildFromStr(p[e])))};this.run((()=>{t(["title","fragment"])}))}return p},MAX_STAGE:11,parse(t,e=!1,n=i.MAX_STAGE,r=i.getConfig()){const o=s(8138);let c;return this.run((()=>{if("string"==typeof t)c=new o(t,r);else{if(!(t instanceof o))throw new TypeError("待解析的内容应为 String 或 Token！");c=t,t=c.toString()}c.parse(n,e)})),c}},r={};for(const t in i)["MAX_STAGE"].includes(t)?r[t]={enumerable:!1,writable:!1}:["config","isInterwiki","normalizeTitle","parse"].includes(t)||(r[t]={enumerable:!1});Object.defineProperties(i,r),globalThis.Parser=i,t.exports=i},9205:(t,e,s)=>{const n=s(3853),i=s(6010);class r extends n{type;name;get children(){return this.childNodes.filter((t=>t instanceof r))}get firstElementChild(){return this.childNodes.find((t=>t instanceof r))}get lastElementChild(){return this.children.at(-1)}get parentElement(){return this.parentNode}append(...t){for(const e of t)this.appendChild(e)}replaceChildren(...t){for(let t=this.childNodes.length-1;t>=0;t--)this.removeAt(t);this.append(...t)}#t(t,e){const{parentNode:s}=this,n=s.childNodes.indexOf(this)+e;for(const[e,i]of t.entries())s.insertAt(i,n+e)}after(...t){this.#t(t,1)}remove(){this.parentNode.removeChild(this)}replaceWith(...t){this.after(...t),this.remove()}matches(t="",e=!1){if(!t.trim())return!0;if(!e&&t.includes(","))return i.run((()=>t.split(",").some((t=>this.matches(t,!0)))));const[s,...n]=t.trim().split("#"),r=n.join("#");return!(s&&this.type!==s||r&&this.name!==r)}closest(t=""){let{parentElement:e}=this;for(;e;){if(e.matches(t))return e;({parentElement:e}=e)}}}t.exports=r},3853:(t,e,s)=>{const{text:n,print:i}=s(231);class r{childNodes=[];#e;#s=[];get firstChild(){return this.childNodes[0]}get parentNode(){return this.#e}constructor(){Object.defineProperty(this,"childNodes",{writable:!1}),Object.freeze(this.childNodes)}hasAttribute(t){return t in this}getAttribute(t){return this.hasAttribute(t)?String(this[t]):void 0}setAttribute(t,e){if("parentNode"===t)this.#e=e;else if(this.hasAttribute(t)){const s=Object.getOwnPropertyDescriptor(this,t);this.#s.includes(t)&&(s.enumerable=Boolean(e));const n=this[t],i=null!==n&&"object"==typeof n&&Object.isFrozen(n);Object.defineProperty(this,t,{...s,value:e}),i&&null!==e&&"object"==typeof e&&Object.freeze(e)}else this[t]=e;return this}toString(t=""){return this.childNodes.map(String).join(t)}print(t={}){return`<span class="wpb-${t.class??this.type}">${i(this.childNodes,t)}</span>`}text(t=""){return n(this.childNodes,t)}removeAt(t){const e=[...this.childNodes],[s]=e.splice(t,1);return s instanceof r&&s.setAttribute("parentNode"),this.setAttribute("childNodes",e),s}#n(t){const{childNodes:e}=this;return e.indexOf(t)}removeChild(t){return this.removeAt(this.#n(t)),t}insertAt(t,e=this.childNodes.length){const s=[...this.childNodes];return t instanceof r&&t.setAttribute("parentNode",this),s.splice(e,0,t),this.setAttribute("childNodes",s),t}appendChild(t){return this.insertAt(t)}setText(t,e=0){const s=this.childNodes.at(e),n=[...this.childNodes];return n.splice(e,1,t),this.setAttribute("childNodes",n),s}normalize(){const t=[...this.childNodes];for(let e=t.length-1;e>=0;e--){const s=t[e];""===s?t.splice(e,1):"string"==typeof s&&"string"==typeof t[e-1]&&(t[e-1]+=s,t.splice(e,1))}this.setAttribute("childNodes",t)}}t.exports=r},6986:(t,e,s)=>{const{ucfirst:n}=s(231),i=s(6010);t.exports=class{title="";ns=0;interwiki="";fragment="";valid=!0;constructor(t,e=0,s=i.getConfig()){const{namespaces:r,nsid:o}=s;let c=r[e];":"===(t=t.replaceAll("_"," ").trim())[0]&&(c="",t=t.slice(1).trim());const l=i.isInterwiki(t,s);l&&(this.interwiki=l[1].toLowerCase(),t=t.slice(l[0].length));const p=t.split(":");if(p.length>1){const e=r[o[p[0].trim().toLowerCase()]];void 0!==e&&(c=e,t=p.slice(1).join(":").trim())}this.ns=o[c.toLowerCase()];const a=t.indexOf("#");if(-1!==a){const e=t.slice(a+1).trimEnd();if(e.includes("%"))try{this.fragment=decodeURIComponent(e)}catch{}else if(e.includes("."))try{this.fragment=decodeURIComponent(e.replaceAll(".","%"))}catch{}this.fragment||=e,t=t.slice(0,a).trim()}this.title=`${l?`${this.interwiki}:`:""}${c}${c&&":"}${n(t)}`,this.valid=!/\x00\d+[eh!+-]\x7f|[<>[\]{}|]/.test(this.title)}}},2308:t=>{t.exports=t=>class extends t{text(){return""}}},8275:(t,e,s)=>{const{removeComment:n}=s(231),i=s(6010);t.exports=(t,e=i.getConfig(),r=[])=>{const o="(?<=^(?:\0\\d+c)*)={1,6}|\\[\\[|{{2,}|-{(?!{)",c=[],l={"=":"\n","{":"}{2,}|\\|","-":"}-","[":"]]"},p={"!":"!","!!":"+","(!":"{","!)":"}","!-":"-","=":"~"};let a,h=new RegExp(o,"gm"),d=h.exec(t),u=t.includes("}}");for(;d||a<=t.length&&"="===c.at(-1)?.[0]?.[0];){const{0:i,index:g}=d??{0:"\n",index:t.length},f=c.pop()??{},{0:x,index:$,parts:m}=f,C="="===i&&f.findEqual;if(["]]","}-"].includes(i))a=g+2;else if("\n"===i){a=g+1;const{pos:i,findEqual:o}=c.at(-1)??{};if(!i||o||""!==n(t.slice(i,$))){const n=t.slice($,g).match(/^(={1,6})(.+)\1((?:\s|\x00\d+c\x7f)*)$/);n&&(t=`${t.slice(0,$)}\0${r.length}h${t.slice(g)}`,a=$+4+String(r.length).length,new(s(9450))(n[1].length,n.slice(2),e,r))}}else if("|"===i||C)a=g+1,m.at(-1).push(t.slice(f.pos,g)),"|"===i&&m.push([]),f.pos=a,f.findEqual="|"===i,c.push(f);else if(i.startsWith("}}")){const o=i.slice(0,Math.min(x.length,3)),l=x.length-o.length,{length:h}=r;a=g+o.length,m.at(-1).push(t.slice(f.pos,g));const d=2===o.length?p[n(m[0][0])]??"t":"t";let u=!1;if(3===o.length)new(s(9544))(m.map((t=>t.join("="))),e,r);else try{new(s(1782))(m[0][0],m.slice(1),e,r)}catch(t){t instanceof Error&&t.message.startsWith("非法的模板名称：")&&(a=$+x.length,u=!0)}u||(t=`${t.slice(0,$+l)}\0${h}${d}${t.slice(a)}`,a=$+l+3+String(h).length,l>1?c.push({0:x.slice(0,l),index:$,pos:$+l,parts:[[]]}):1===l&&"-"===t[$-1]&&c.push({0:"-{",index:$-1,pos:$+1,parts:[[]]}))}else a=g+i.length,"{"===i[0]&&(d.pos=a,d.parts=[[]]),c.push(..."0"in f?[f]:[],d);u&&=t.slice(a).includes("}}");let w=c.at(-1);u||"{"!==w?.[0]?.[0]||(c.pop(),w=c.at(-1)),h=new RegExp(o+(w?`|${l[w[0][0]]}${w.findEqual?"|=":""}`:""),"gm"),h.lastIndex=a,d=h.exec(t)}return t}},4907:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[],r=!1)=>{const o=/<onlyinclude>(.*?)<\/onlyinclude>/gs;if(r&&o.test(t))return t.replace(o,((t,n)=>{const r=`\0${i.length}e`;return new(s(851))(n,e,i),r})).replace(/(?<=^|\x00\d+e\x7f).*?(?=$|\x00\d+e\x7f)/gs,(t=>""===t?"":(new(s(3423))(t,e,i),`\0${i.length-1}c`)));const c=e.ext.join("|"),l=r?"includeonly":"(?:no|only)include",p=new RegExp(`\x3c!--.*?(?:--\x3e|$)|<${l}(?:\\s.*?)?>|</${l}\\s*>|<(${c})(\\s.*?)?(?:/>|>(.*?)</(\\1\\s*)>)|<(${r?"noinclude":"includeonly"})(\\s.*?)?(?:/>|>(.*?)(?:</(\\5\\s*)>|$))`,"gis");return t.replace(p,((t,n,r,o,c,l,p,a,h)=>{const d=`\0${i.length}${n?"e":"c"}`;if(n)new(s(7267))(n,r,o,c,e,i);else if(t.startsWith("\x3c!--")){const n=s(5749),r=t.endsWith("--\x3e");new n(t.slice(4,r?-3:void 0),r,e,i)}else l?new(s(8655))(l,p,a,h,e,i):new(s(3423))(t,e,i);return d}))}},3765:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=s(9910),o=/-{/g,c=/-{|}-/g,l=[];let p=o,a=p.exec(t);for(;a;){const{0:s,index:n}=a;if("}-"===s){const s=l.pop(),{length:c}=i,a=t.slice(s.index+2,n),h=a.indexOf("|"),[d,u]=-1===h?[[],a]:[a.slice(0,h).split(";"),a.slice(h+1)],g=u.replace(/(?<=&[#a-z0-9]+);/i,""),f=`(?:${e.variants.join("|")})`;new r(d,g.split(new RegExp(`;(?=\\s*(?:${f}|[^;]*?=>\\s*${f})\\s*:)`)).map((t=>t.replaceAll("",";"))),e,i),t=`${t.slice(0,s.index)}\0${c}v${t.slice(n+2)}`,0===l.length&&(p=o),p.lastIndex=s.index+3+String(c).length}else l.push(a),p=c;a=p.exec(t)}return t}},7513:(t,e,s)=>{const{extUrlChar:n}=s(231),i=s(6010);t.exports=(t,e=i.getConfig(),r=[])=>{const o=s(741),c=new RegExp(`\\[((?:${e.protocol}|//)${n})(\\p{Zs}*)([^\\]-\b\n-�]*)\\]`,"gui");return t.replace(c,((t,s,n,i)=>{const{length:c}=r,l=s.match(/&[lg]t;/);return l&&(n="",i=`${(s=s.slice(0,l.index)).slice(l.index)}${n}${i}`),new o(s,n,i,e,r),`\0${c}w`}))}},2937:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=s(2582),o=s(7815),{doubleUnderscore:c}=e;return t.replace(/^-{4,}/gm,(t=>(new r(t.length,e,i),`\0${i.length-1}r`))).replace(new RegExp(`__(${c.flat().join("|")})__`,"ig"),((t,s)=>c[0].includes(s.toLowerCase())||c[1].includes(s)?(new o(s,e,i),`\0${i.length-1}u`):t))}},5130:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=/^(\/?)([a-z][^\s/>]*)([^>]*?)(\/?>)([^<]*)$/i,o=e.html.flat(),c=t.split("<");let l=c.shift();for(const t of c){const n=t.match(r),c=n?.[2],p=c?.toLowerCase();if(!n||!o.includes(p)){l+=`<${t}`;continue}const[,a,,h,d,u]=n,g=new(s(5037))(h,"html-attr",p,e,i),f=g.getAttr("itemprop");("meta"!==p||void 0!==f&&void 0!==g.getAttr("content"))&&("link"!==p||void 0!==f&&void 0!==g.getAttr("href"))?(l+=`\0${i.length}x${u}`,new(s(2350))(c,g,"/"===a,"/>"===d,e,i)):(l+=`<${t}`,i.pop())}return l}},1452:(t,e,s)=>{const n=s(6010),i=(s(8138),(t,e=n.getConfig(),r=[])=>{const o=s(3360),c=/^([^\n<>[\]{}|]+)(?:\|(.+?))?]](.*)/s,l=/^([^\n<>[\]{}|]+)\|(.*)/s,p=new RegExp(`^\\s*(?:${e.protocol})`,"i"),a=t.split("[[");let h=a.shift();for(let t=0;t<a.length;t++){let d,u,g,f;const x=a[t],$=x.match(c);if($)[,u,g,f]=$,f.startsWith("]")&&g?.includes("[")&&(g+="]",f=f.slice(1));else{const t=x.match(l);t&&(d=!0,[,u,g]=t)}if(void 0===u||p.test(u)||/\x00\d+[exhbru]\x7f/.test(u)){h+=`[[${x}`;continue}let m=u;if(u.includes("%"))try{m=decodeURIComponent(u)}catch{}const C=u.trim().startsWith(":");if(C&&d){h+=`[[${x}`;continue}const w=n.normalizeTitle(m,0,!1,e,!0),{ns:y,interwiki:b,valid:S}=w;if(!S){h+=`[[${x}`;continue}if(d){if(b||6!==y){h+=`[[${x}`;continue}let s;for(t++;t<a.length;t++){const e=a[t],n=e.split("]]");if(n.length>2){s=!0,g+=`[[${n[0]}]]${n[1]}`,f=n.slice(2).join("]]");break}if(2!==n.length){g+=`[[${e}`;break}g+=`[[${n[0]}]]${n[1]}`}if(g=i(g,e,r),!s){h+=`[[${u}|${g}`;continue}}g=g&&o(g,e,r),h+=`\0${r.length}l${f}`;let A=s(3905);C||(b||6!==y?b||14!==y||(A=s(337)):A=s(7625)),new A(u,g,w,e,r)}return h});t.exports=i},6622:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=t.match(/^(?:[;:*#]|\x00\d+c\x7f)*[;:*#]/);if(!r)return t;const o=s(962),[c]=r;t=`\0${i.length}d${t.slice(c.length)}`,new o(c,e,i);let l=c.split(";").length-1;if(!l)return t;const p=s(3434);let a=/:+|-{/g,h=a.exec(t),d=0;for(;h&&l;){const{0:s,index:n}=h;if(":"===s[0]){if(s.length>=l)return new p(":".repeat(l),e,i),`${t.slice(0,n)}\0${i.length-1}d${t.slice(n+l)}`;t=`${t.slice(0,n)}\0${i.length}d${t.slice(a.lastIndex)}`,l-=s.length,a.lastIndex=n+4+String(i.length).length,new p(s,e,i)}else if("-{"===s){if(!d){const{lastIndex:t}=a;a=/-{|}-/g,a.lastIndex=t}d++}else if(d--,!d){const{lastIndex:t}=a;a=/:+|-{/g,a.lastIndex=t}h=a.exec(t)}return t}},4737:(t,e,s)=>{const{extUrlChar:n}=s(231),i=s(6010);t.exports=(t,e=i.getConfig(),r=[])=>{const o=s(8962),c=new RegExp(`\\b(?:${e.protocol})(${n})`,"gui");return t.replace(c,((t,s)=>{let n="",i=t;const c=i.match(/&(?:lt|gt|nbsp|#x0*(?:3[ce]|a0)|#0*(?:6[02]|160));/i);c&&(n=i.slice(c.index),i=i.slice(0,c.index));const l=new RegExp(`[,;.:!?${i.includes("(")?"":")"}]+$`),p=i.match(l);if(p){let t=0;p[0].startsWith(";")&&/&(?:[a-z]+|#x[\da-f]+|#\d+)$/i.test(i.slice(0,p.index))&&(t=1),n=`${i.slice(p.index+t)}${n}`,i=i.slice(0,p.index+t)}return n.length>=s.length?t:(new o(i,!1,e,r),`\0${r.length-1}w${n}`)}))}},3360:(t,e,s)=>{const n=s(6010);t.exports=(t,e=n.getConfig(),i=[])=>{const r=t.split(/('{2,})/),{length:o}=r;if(1===o)return t;let c,l,p,a=0,h=0;for(let t=1;t<o;t+=2){const e=r[t].length;switch(e){case 2:h++;break;case 4:r[t-1]+="'",r[t]="'''";case 3:if(a++,c)break;" "===r[t-1].at(-1)?l||p||(p=t):" "===r[t-1].at(-2)?c=t:l||(l=t);break;default:r[t-1]+="'".repeat(e-5),r[t]="'''''",h++,a++}}if(h%2==1&&a%2==1){const t=c??l??p;r[t]="''",r[t-1]+="'"}const d=s(6714);for(let t=1;t<o;t+=2)new d(r[t].length,e,i),r[t]=`\0${i.length-1}q`;return r.join("")}},4624:(t,e,s)=>{const n=s(6010);t.exports=({firstChild:t,type:e},i=n.getConfig(),r=[])=>{const o=s(8138),c=s(2840),l=s(3125),p=s(5567),a=[],h=t.split("\n");let d="root"===e?"":`\n${h.shift()}`;const u=(t,e)=>{if(!e)return void(d+=t);const{lastElementChild:s}=e;if(s.isPlain())s.setText(s.firstChild+t,0);else{const s=new o(t,i,!0,r);s.type="table-inter",e.appendChild(s.setAttribute("stage",3))}};for(const t of h){let e=a.pop();const[s]=t.match(/^(?:\s|\x00\d+c\x7f)*/),n=t.slice(s.length),o=n.match(/^(:*(?:\s|\x00\d+c\x7f)*)({\||{\x00\d+!\x7f|\x00\d+{\x7f)(.*)/);if(o){const[,t,n,l]=o;u(`\n${s}${t}\0${r.length}b`,e);const p=new c(n,l,i,r);a.push(...e?[e]:[],p);continue}if(!e){d+=`\n${t}`;continue}const h=n.match(/^(?:(\|}|\x00\d+!\x7f}|\x00\d+}\x7f)|(\|-+|\x00\d+!\x7f-+|\x00\d+-\x7f-*)|(!|(?:\||\x00\d+!\x7f)\+?))(.*)/);if(!h){u(`\n${t}`,e),a.push(...e?[e]:[]);continue}const[,g,f,x,$]=h;if(g){for(;!(e instanceof c);)e=a.pop();e.close(`\n${s}${g}`,!0),u($,a.at(-1))}else if(f){"td"===e.type&&(e=a.pop()),"tr"===e.type&&(e=a.pop());const t=new l(`\n${s}${f}`,$,i,r);a.push(e,t),e.appendChild(t)}else{"td"===e.type&&(e=a.pop());const t="!"===x?/!!|(?:\||\x00\d+!\x7f){2}|\x00\d+\+\x7f/g:/(?:\||\x00\d+!\x7f){2}|\x00\d+\+\x7f/g;let n=t.exec($),o=0,c=`\n${s}${x}`;for(;n;){const s=new p(c,$.slice(o,n.index),i,r);e.appendChild(s),({lastIndex:o}=t),[c]=n,n=t.exec($)}const l=new p(c,$.slice(o),i,r);a.push(e,l),e.appendChild(l)}}return d.slice(1)}},9544:(t,e,s)=>{const{text:n}=s(231),i=s(6010),r=s(8138);t.exports=class extends r{type="arg";constructor(t,e=i.getConfig(),n=[]){super(void 0,e,!0,n);for(const[i,o]of t.entries())if(0===i||i>1){const t=new(s(0===i?9237:9263))(o,"arg-"+(0===i?"name":"redundant"),e,n);this.appendChild(t)}else{const t=new r(o,e,!0,n);t.type="arg-default",this.appendChild(t.setAttribute("stage",2))}}toString(){return`{{{${super.toString("|")}}}}`}print(){return super.print({pre:"{{{",post:"}}}",sep:"|"})}text(){return`{{{${n(this.children.slice(0,2),"|")}}}}`}}},9263:(t,e,s)=>{const n=s(2308),i=s(9237);class r extends(n(i)){}t.exports=r},9237:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{constructor(t,e="plain",s=n.getConfig(),i=[],r=null){super(t,s,!0,i,r),this.type=e}}},5037:(t,e,s)=>{const{removeComment:n}=s(231),i=s(6010),r=s(8138);t.exports=class extends r{#i=new Map;#r(){let t=this.toString();t=n(t).replace(/\x00\d+~\x7f/g,"=");for(const[,e,,s,n]of t.matchAll(/([^\s/][^\s/=]*)(?:\s*=\s*(?:(["'])(.*?)(?:\2|$)|(\S*)))?/gs))this.setAttr(e,s??n??!0,!0)}constructor(t,e,s,n=i.getConfig(),r=[]){super(t,n,"ext-attr"!==e,r),this.type=e,this.#r()}getAttr(t){return this.#i.get(t.toLowerCase().trim())}setAttr(t,e){t=t.toLowerCase().trim(),/^(?:[\w:]|\x00\d+[t!~{}+-]\x7f)(?:[\w:.-]|\x00\d+[t!~{}+-]\x7f)*$/.test(t)&&this.#i.set(t,!0===e||e.replace(/\s/g," ").trim())}}},9910:(t,e,s)=>{const{text:n,print:i}=s(231),r=s(6010),o=s(8138),c=s(6719),l=s(8683);t.exports=class extends o{type="converter";constructor(t,e,s=r.getConfig(),n=[]){if(super(void 0,s,!1,n),this.append(new c(t,s,n)),e.length){const[t]=e,i=t.includes(":"),r=new l(t,i,s,n);i&&1===r.childNodes.length?this.appendChild(new l(e.join(";"),!1,s,n)):this.append(r,...e.slice(1).map((t=>new l(t,!0,s,n))))}}toString(){const[t,...e]=this.children;return`-{${t.toString()}${t.childNodes.length?"|":""}${e.map(String).join(";")}}-`}print(){const[t,...e]=this.children;return`<span class="wpb-converter">-{${t.print()}${t.childNodes.length?"|":""}${i(e,{sep:";"})}}-</span>`}text(){const[t,...e]=this.children;return`-{${t.text()}|${n(e,";")}}-`}}},6719:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(9237);t.exports=class extends i{type="converter-flags";constructor(t,e=n.getConfig(),s=[]){super(void 0,e,!1,s),this.append(...t.map((t=>new r(t,"converter-flag",e,s))))}toString(){return super.toString(";")}print(){return super.print({sep:";"})}text(){return super.text(";")}}},8683:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(9237);t.exports=class extends i{type="converter-rule";constructor(t,e=!0,s=n.getConfig(),i=[]){if(super(void 0,s,!0,i),e){const e=t.indexOf(":"),n=t.slice(0,e).indexOf("=>"),o=(-1===n?t.slice(0,e):t.slice(n+2,e)).trim(),{variants:c}=s;c.includes(o)?(super.insertAt(new r(o,"converter-rule-variant",s,i)),super.insertAt(new r(t.slice(e+1),"converter-rule-to",s,i)),-1!==n&&super.insertAt(new r(t.slice(0,n),"converter-rule-from",s,i),0)):super.insertAt(new r(t,"converter-rule-noconvert",s,i))}else super.insertAt(new r(t,"converter-rule-noconvert",s,i))}toString(){if(3===this.childNodes.length){const[t,e,s]=this.children;return`${t.toString()}=>${e.toString()}:${s.toString()}`}return super.toString(":")}print(){if(3===this.childNodes.length){const[t,e,s]=this.children;return`<span class="wpb-converter-rule">${t.print()}=>${e.print()}:${s.print()}</span>`}return super.print({sep:":"})}text(){if(3===this.childNodes.length){const[t,e,s]=this.children;return`${t.text()}=>${e.text()}:${s.text()}`}return super.text(":")}}},741:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(8962);t.exports=class extends i{type="ext-link";#o;constructor(t,e,s,o=n.getConfig(),c=[]){if(super(void 0,o,!0,c),this.appendChild(new r(t,!0,o,c)),this.#o=e,s){const t=new i(s,o,!0,c);t.type="ext-link-text",this.appendChild(t.setAttribute("stage",n.MAX_STAGE-1))}}toString(){return`[${this.firstElementChild.toString()}${this.#o}${this.children[1]?.toString()??""}]`}print(){const{childNodes:{length:t}}=this;return super.print({pre:"[",sep:t>1?this.#o:"",post:t>1?"]":`${this.#o}]`})}text(){return`[${super.text(" ").replaceAll("\n"," ")}]`}}},9450:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="heading";constructor(t,e,r=n.getConfig(),o=[]){super(void 0,r,!0,o),this.setAttribute("name",String(t));const c=new i(e[0],r,!0,o);c.type="heading-title",c.setAttribute("stage",2);const l=new(s(8058))(e[1],/^[^\S\n]*$/,"heading-trail",r,o);this.append(c,l)}toString(){const t="=".repeat(Number(this.name));return`${t}${this.firstElementChild.toString()}${t}${this.lastElementChild.toString()}`}print(){const t=Number(this.name),e="=".repeat(t);return super.print({pre:e,sep:e,class:`heading-${Math.min(t,3)}`})}text(){const t="=".repeat(Number(this.name));return`${t}${this.firstElementChild.text()}${t}`}}},2350:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="html";closing;selfClosing;#c;constructor(t,e,s,i,r=n.getConfig(),o=[]){super(void 0,r,!0,o),this.appendChild(e),this.closing=s,this.selfClosing=i,this.#c=t}toString(){return`<${this.closing?"/":""}${this.#c}${super.toString()}${this.selfClosing?"/":""}>`}print(){return super.print({pre:`&lt;${this.closing?"/":""}${this.#c}`,post:(this.selfClosing?"/":"")+"&gt;"})}text(){return`<${this.closing?"/":""}${this.#c}${super.text()}${this.selfClosing?"/":""}>`}}},1874:(t,e,s)=>{const{print:n,extUrlChar:i}=s(231),r=s(6986),o=s(6010),c=s(8138);class l extends c{type="image-parameter";#l="";static#p=Symbol("no-link");static#a(t,e,s=o.getConfig()){if(e=e.replace(/\x00\d+t\x7f/g,"").trim(),"width"===t)return/^\d*(?:x\d*)?$/.test(e);if(["alt","class","manualthumb","frameless","framed","thumbnail"].includes(t))return!0;if("link"===t){if(!e)return!0;if(new RegExp(`(?:${s.protocol}|//)${i}(?=\0\\d+t|$)`,"ui").test(e))return!0;if(/^\[\[.+]]$/.test(e)&&(e=e.slice(2,-2)),e.includes("%"))try{e=decodeURIComponent(e)}catch{}const{valid:t}=new r(e,0,s);return t}return!isNaN(e)}constructor(t,e=o.getConfig(),s=[]){const n=Object.entries(e.img).map((([t,e])=>[t,e,new RegExp(`^(\\s*)${t.replace("$1","(.*)")}(\\s*)$`)])),i=n.find((([,,e])=>e.test(t)));if(i){const n=t.match(i[2]);if(4!==n.length||l.#a(i[1],n[2],e))return 3===n.length?(super(void 0,e,!0,s),this.#l=t):(super(n[2],e,!0,s),this.#l=`${n[1]}${i[0]}${n[3]}`),void this.setAttribute("stage",o.MAX_STAGE)}super(t,e,!0,s),this.setAttribute("stage",7)}isPlain(){return!0}toString(){return this.#l?this.#l.replace("$1",super.toString()):super.toString()}print(){return this.#l?`<span class="wpb-image-parameter">${this.#l.replace("$1",n(this.childNodes))}</span>`:super.print()}text(){return this.#l?this.#l.replace("$1",super.text()).trim():super.text().trim()}}t.exports=l},8138:(t,e,s)=>{const n=s(9205),i=s(6010),{MAX_STAGE:r}=i;class o extends n{type="root";#h=0;#d;#u;#g;constructor(t,e=i.getConfig(),s=!1,n=[]){super(),"string"==typeof t&&this.appendChild(s?t:t.replace(/[\x00\x7f]/g,"")),this.#d=e,this.#u=n,n.push(this)}getAttribute(t){switch(t){case"stage":return this.#h;case"config":return JSON.parse(JSON.stringify(this.#d));case"accum":return this.#u;default:return super.getAttribute(t)}}setAttribute(t,e){return"stage"===t?(0===this.#h&&"root"===this.type&&this.#u.shift(),this.#h=e,this):super.setAttribute(t,e)}isPlain(){return this.constructor===o}insertAt(t,e=this.childNodes.length){return super.insertAt(t,e),t instanceof o&&"root"===t.type&&(t.type="plain"),t}normalizeTitle(t,e=0,s=!1){return i.normalizeTitle(t,e,this.#g,this.#d,s)}parseOnce(t=this.#h,e=!1){if(t<this.#h||!this.isPlain()||0===this.childNodes.length)return this;switch(t){case 0:"root"===this.type&&this.#u.shift(),this.#f(e);break;case 1:this.#x();break;case 2:this.#$();break;case 3:this.#m();break;case 4:this.#C();break;case 5:this.#w();break;case 6:this.#y();break;case 7:this.#b();break;case 8:this.#S();break;case 9:this.#A();break;case 10:this.#v()}if("root"===this.type)for(const s of this.#u)s.parseOnce(t,e);return this.#h++,this}buildFromStr(t){return t.split(/[\x00\x7f]/).map(((t,e)=>e%2==0?t:this.#u[Number(t.slice(0,-1))]))}build(){this.#h=r;const{childNodes:{length:t},firstChild:e}=this;if(1!==t||"string"!=typeof e||!e.includes("\0"))return this;if(this.replaceChildren(...this.buildFromStr(e)),this.normalize(),"root"===this.type)for(const t of this.#u)t.build();return this}afterBuild(){if("root"===this.type)for(const t of this.#u)t.afterBuild();return this}parse(t=r,e=!1){for(this.#g=Boolean(e);this.#h<t;)this.parseOnce(this.#h,e);return t?this.build().afterBuild():this}#f(t=!1){const e=s(4907);this.setText(e(this.firstChild,this.#d,this.#u,t))}#x(){const t=s(8275);this.setText(t(this.firstChild,this.#d,this.#u))}#$(){const t=s(5130);this.setText(t(this.firstChild,this.#d,this.#u))}#m(){const t=s(4624),e=s(2840);this.setText(t(this,this.#d,this.#u));for(const t of this.#u)if(t instanceof e&&"td"!==t.type){t.normalize();const[,e]=t.childNodes;if("string"==typeof e&&e.includes("\0")){t.removeAt(1);const s=new o(e,this.#d,!0,this.#u);t.insertAt(s,1),s.setAttribute("stage",4)}}}#C(){const t=s(2937);this.setText(t(this.firstChild,this.#d,this.#u))}#w(){const t=s(1452);this.setText(t(this.firstChild,this.#d,this.#u))}#y(){const t=s(3360),e=this.firstChild.split("\n");for(let s=0;s<e.length;s++)e[s]=t(e[s],this.#d,this.#u);this.setText(e.join("\n"))}#b(){const t=s(7513);this.setText(t(this.firstChild,this.#d,this.#u))}#S(){const t=s(4737);this.setText(t(this.firstChild,this.#d,this.#u))}#A(){const t=s(6622),e=this.firstChild.split("\n");for(let s="root"===this.type?0:1;s<e.length;s++)e[s]=t(e[s],this.#d,this.#u);this.setText(e.join("\n"))}#v(){const t=s(3765);this.setText(t(this.firstChild,this.#d,this.#u))}}t.exports=o},337:(t,e,s)=>{const n=s(6010),i=s(3905);t.exports=class extends i{type="category";constructor(t,e,s,i=n.getConfig(),r=[]){super(t,e,s,i,r)}text(){return`[[${this.firstElementChild.text()}]]`}}},7625:(t,e,s)=>{const{explode:n}=s(231),i=s(6010),r=s(3905),o=s(1874);t.exports=class extends r{type="file";constructor(t,e,s,r=i.getConfig(),c=[]){super(t,void 0,s,r,c),this.append(...n("-{","}-","|",e).map((t=>new o(t,r,c))))}}},3905:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="link";constructor(t,e,r,o=n.getConfig(),c=[]){super(void 0,o,!0,c);const l=s(9237);if(this.appendChild(new l(t,"link-target",o,c)),void 0!==e){const t=new i(e,o,!0,c);t.type="link-text",this.appendChild(t.setAttribute("stage",n.MAX_STAGE-1))}}toString(){return`[[${super.toString("|")}]]`}print(){return super.print({pre:"[[",post:"]]",sep:"|"})}text(){return`[[${super.text("|")}]]`}}},8962:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="free-ext-link";constructor(t,e=!1,s=n.getConfig(),i=[]){super(t,s,!0,i),e&&(this.type="ext-link-url")}afterBuild(){return s(9799),this.closest("parameter")?.getValue()===this.text()&&this.replaceWith(this.toString()),this}}},5749:(t,e,s)=>{const n=s(2308),i=s(6010),r=s(6935);class o extends(n(r)){type="comment";closed;constructor(t,e=!0,s=i.getConfig(),n=[]){super(t,s,n),this.closed=e}toString(){return`\x3c!--${this.firstChild}${this.closed?"--\x3e":""}`}print(){return super.print({pre:"&lt;!--",post:this.closed?"--&gt;":""})}}t.exports=o},3434:(t,e,s)=>{const n=s(6935);t.exports=class extends n{type="dd"}},7815:(t,e,s)=>{const n=s(2308),i=s(6010),r=s(6935);class o extends(n(r)){type="double-underscore";constructor(t,e=i.getConfig(),s=[]){super(t,e,s)}toString(){return`__${this.firstChild}__`}print(){return super.print({pre:"__",post:"__"})}}t.exports=o},2582:(t,e,s)=>{const n=s(6010),i=s(6935);t.exports=class extends i{type="hr";constructor(t,e=n.getConfig(),s=[]){super("-".repeat(t),e,s)}}},6935:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="ext-inner";constructor(t,e=n.getConfig(),s=[]){super(t,e,!1,s)}}},962:(t,e,s)=>{const n=s(3434);t.exports=class extends n{type="list"}},3423:(t,e,s)=>{const n=s(2308),i=s(6935);class r extends(n(i)){type="noinclude"}t.exports=r},6714:(t,e,s)=>{const n=s(6010),i=s(6935);t.exports=class extends i{type="quote";constructor(t,e=n.getConfig(),s=[]){super("'".repeat(t),e,s)}}},851:(t,e,s)=>{const n=s(6010),i=s(8138);class r extends i{type="onlyinclude";constructor(t,e=n.getConfig(),s=[]){super(t,e,!1,s)}toString(){return`<onlyinclude>${super.toString()}</onlyinclude>`}print(){return super.print({pre:"&lt;onlyinclude&gt;",post:"&lt;/onlyinclude&gt;"})}isPlain(){return this.constructor===r}}t.exports=r},9799:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{type="parameter";anon;constructor(t,e,r=n.getConfig(),o=[]){super(void 0,r,!0,o),this.anon="number"==typeof t;const c=new(s(9237))(this.anon?void 0:t,"parameter-key",r,o),l=new i(e,r,!0,o);l.type="parameter-value",this.append(c,l.setAttribute("stage",2))}toString(){return this.anon?this.lastElementChild.toString():super.toString("=")}print(){return this.anon?`<span class="wpb-parameter">${this.lastElementChild.print()}</span>`:super.print({sep:"="})}text(){return this.anon?this.lastElementChild.text():super.text("=")}getValue(){const t=this.lastElementChild.text();return this.anon&&this.parentNode?.matches("template, magic-word#invoke")?t:t.trim()}}},8058:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{constructor(t,e,s="plain",i=n.getConfig(),r=[],o=null){super(t,i,!0,r,o),this.type=s}}},2840:(t,e,s)=>{const n=s(6010),i=s(3125),r=s(8058);class o extends i{type="table";static openingPattern=/^(?:{\||{{{\s*!\s*}}|{{\s*\(!\s*}})$/;static closingPattern=/^\n[^\S\n]*(?:\|}|{{\s*!\s*}}}|{{\s*!\)\s*}})$/;constructor(t,e="",s=n.getConfig(),i=[]){super(t,e,s,i,o.openingPattern)}close(t="\n|}"){const e=this.getAttribute("config"),s=this.getAttribute("accum"),{closingPattern:i}=o;this.appendChild(n.run((()=>new r(t,i,"table-syntax",e,s))))}}t.exports=o},5567:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(3125);class o extends r{type="td";#N="";static openingPattern=/^(?:\n[\S\n]*(?:[|!]|\|\+|{{\s*!\s*}}\+?)|(?:\||{{\s*!\s*}}){2}|!!|{{\s*!!\s*}})$/;constructor(t,e,s=n.getConfig(),r=[]){let c=e?.match(/\||\x00\d+!\x7f/),l=c?e.slice(0,c.index):"";/\[\[|-{/.test(l)&&(c=null,l=""),super(t,l,s,r,o.openingPattern),c&&([this.#N]=c);const p=new i(e?.slice(c?.index+this.#N.length),s,!0,r);p.type="td-inner",this.appendChild(p.setAttribute("stage",4))}afterBuild(){return this.#N.includes("\0")&&(this.#N=this.buildFromStr(this.#N).map(String).join("")),this}toString(){const[t,e,s]=this.children;return`${t.toString()}${e.toString()}${this.#N}${s.toString()}`}print(){const[t,e,s]=this.children;return`<span class="wpb-td">${t.print()}${e.print()}${this.#N}${s.print()}</span>`}text(){const[t,e,s]=this.children;return`${t.text()}${e.text()}${this.#N}${s.text()}`}}t.exports=o},3125:(t,e,s)=>{const n=s(6010),i=s(8138),r=s(8058),o=s(5037);class c extends i{type="tr";static openingPattern=/^\n[^\S\n]*(?:\|-+|{{\s*!\s*}}-+|{{\s*!-\s*}}-*)$/;constructor(t,e="",s=n.getConfig(),i=[],l=c.openingPattern){super(void 0,s,!0,i),this.append(new r(t,l,"table-syntax",s,i),new o(e,"table-attr","tr",s,i))}text(){const t=super.text();return"tr"!==this.type||t.trim().includes("\n")?t:""}}t.exports=c},7267:(t,e,s)=>{const n=s(6010),i=s(1074);t.exports=class extends i{type="ext";constructor(t,e="",i="",r,o=n.getConfig(),c=[]){e=!e||/^\s/.test(e)?e:` ${e}`;const l=t.toLowerCase(),p=new(s(5037))(e,"ext-attr",l,o,c),a=JSON.parse(JSON.stringify(o)),h=new Set(a.ext);let d;switch(l){case"choose":h.add("option");case"ref":case"option":case"poem":case"indicator":case"tab":case"tabs":case"pre":h.delete(l),a.ext=[...h],d=new(s(8138))(i,a,!1,c);break;default:d=new(s(6935))(i,o)}d.type="ext-inner","pre"===l&&d.setAttribute("stage",n.MAX_STAGE-1),super(t,p,d,r,o,c),Object.defineProperty(this,"closed",{value:!0,enumerable:!1,writable:!1,configurable:!1})}}},8655:(t,e,s)=>{const n=s(2308),i=s(6010),r=s(1074);class o extends(n(r)){type="include";constructor(t,e="",s,n,r=i.getConfig(),o=[]){super(t,e,s??"",void 0!==s?n??"":n,r,o)}}t.exports=o},1074:(t,e,s)=>{const n=s(6010),i=s(8138);t.exports=class extends i{selfClosing;closed;#E;constructor(t,e,s,i,r=n.getConfig(),o=[]){super(void 0,r),this.#E=[t,i||t],this.selfClosing=void 0===i,this.closed=""!==i,this.append(e,s);let c=o.indexOf(e);-1===c&&(c=o.indexOf(s)),-1===c&&(c=1/0),o.splice(c,0,this)}toString(){const{closed:t,selfClosing:e}=this,[s,n]=this.#E;return e?`<${s}${super.toString()}/>`:`<${s}${super.toString(">")}${t?`</${n}>`:""}`}print(){const{closed:t,selfClosing:e}=this,[s,n]=this.#E;return e?super.print({pre:`&lt;${s}`,post:"/&gt;"}):super.print({pre:`&lt;${s}`,sep:"&gt;",post:t?`&lt;/${n}&gt;`:""})}text(){const{closed:t,firstChild:e,selfClosing:s}=this,[n,i]=this.#E;return s?`<${n}${"string"==typeof e?e:e.text()}/>`:`<${n}${super.text(">")}${t?`</${i}>`:""}`}}},1782:(t,e,s)=>{const{removeComment:n,text:i,print:r}=s(231),o=s(6010),c=s(8138),l=s(9799);t.exports=class extends c{type="template";modifier="";setModifier(t=""){const[,,e,s]=this.getAttribute("config").parserFunction,n=t.trim().toLowerCase(),i=e.includes(n),r=s.includes(n);return!(!i&&!r&&""!==t)&&(this.setAttribute("modifier",t),Boolean(t))}constructor(t,e,i=o.getConfig(),r=[]){super(void 0,i,!0,r);const c=s(9237),p=s(8058),{parserFunction:[a,h,d]}=i;if(t.includes(":")){const[e,...s]=t.split(":");this.setModifier(e)&&(t=s.join(":"))}if(t.includes(":")||0===e.length&&!d.includes(this.modifier.toLowerCase())){const[s,...o]=t.split(":"),l=n(s),d=h.includes(l);if(d||a.includes(l.toLowerCase())){this.setAttribute("name",l.toLowerCase().replace(/^#/,"")).type="magic-word";const t=new p(s,new RegExp(`^\\s*${l}\\s*$`,d?"":"i"),"magic-word-name",i,r);if(this.appendChild(t),o.length&&e.unshift([o.join(":")]),"invoke"===this.name)for(let t=0;t<2;t++){const s=e.shift();if(!s)break;const n=new c(s.join("="),"invoke-"+(t?"function":"module"),i,r);this.appendChild(n)}}}if("template"===this.type){const[e]=n(t).split("#");if(/\x00\d+[eh!+-]\x7f|[<>[\]{}]/.test(e))throw r.pop(),new SyntaxError(`非法的模板名称：${e}`);const s=new c(t,"template-name",i,r);this.appendChild(s)}const u=this.matches("template, magic-word#invoke");let g=1;for(const t of e)u||(t[0]=t.join("="),t.length=1),1===t.length&&(t.unshift(g),g++),this.appendChild(new l(...t,i,r))}toString(){const{children:t,childNodes:{length:e},firstChild:s}=this;return`{{${this.modifier}${this.modifier&&":"}${"magic-word"===this.type?`${String(s)}${e>1?":":""}${t.slice(1).map(String).join("|")}`:super.toString("|")}}}`}print(){const{children:t,childNodes:{length:e},firstElementChild:s}=this;return`<span class="wpb-${this.type}">{{${this.modifier}${this.modifier&&":"}${"magic-word"===this.type?`${s.print()}${e>1?":":""}${r(t.slice(1),{sep:"|"})}`:r(t,{sep:"|"})}}}</span>`}text(){const{children:t,childNodes:{length:e},firstElementChild:s}=this;return`{{${this.modifier}${this.modifier&&":"}${"magic-word"===this.type?`${s.text()}${e>1?":":""}${i(t.slice(1),"|")}`:super.text("|")}}}`}}},231:(t,e,s)=>{t.exports={removeComment:t=>t.replace(/\x00\d+c\x7f/g,""),ucfirst:t=>t&&`${t[0].toUpperCase()}${t.slice(1)}`,text:(t,e="")=>(s(3853),t.map((t=>"string"==typeof t?t:t.text())).join(e)),print:(t,e={})=>{s(3853);const{pre:n="",post:i="",sep:r=""}=e;return`${n}${t.map((t=>"string"==typeof t?t.replaceAll("<","&lt;").replaceAll(">","&gt;"):t.print())).join(r)}${i}`},explode:(t,e,s,n)=>{if(void 0===n)return[];const i=new RegExp(`${[t,e,s].map((t=>t.replace(/[\\{}()|.?*+\-^$[\]]/g,"\\$&"))).join("|")}`,"g"),r=[];let o=i.exec(n),c=0,l=0;for(;o;){const{0:e,index:p}=o;e!==s?c+=e===t?1:-1:0===c&&(r.push(n.slice(l,p)),({lastIndex:l}=i)),o=i.exec(n)}return r.push(n.slice(l)),r},extUrlChar:'(?:[\\d.]+|\\[[\\da-f:.]+\\]|[^[\\]<>"\\x00-\\x20\\x7f\\p{Zs}\\ufffd])[^[\\]<>"\\x00-\\x20\\x7f\\p{Zs}\\ufffd]*'}}},e={};!function s(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,s),r.exports}(6010)})();