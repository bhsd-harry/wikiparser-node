[
	{
		"desc": "Blank input",
		"wikitext": "",
		"html": "",
		"print": ""
	},
	{
		"desc": "Simple paragraph",
		"wikitext": "This is a simple paragraph.",
		"html": "<p>This is a simple paragraph.\n</p>",
		"print": "<span class=\"wpb-root\">This is a simple paragraph.</span>"
	},
	{
		"desc": "Paragraphs with extra newline spacing",
		"wikitext": "a\n\nb (+2 nls)\n\n\nc (+3 nls)\n\n\n\nd (+4 nls)\n\n\n\n\ne (+5 nls)",
		"html": "<p>a\n</p><p>b (+2 nls)\n</p><p><br />\nc (+3 nls)\n</p><p><br />\n</p><p>d (+4 nls)\n</p><p><br />\n</p><p><br />\ne (+5 nls)\n</p>",
		"print": "<span class=\"wpb-root\">a\n\nb (+2 nls)\n\n\nc (+3 nls)\n\n\n\nd (+4 nls)\n\n\n\n\ne (+5 nls)</span>"
	},
	{
		"desc": "Paragraphs with newline spacing with comment lines in between",
		"wikitext": "----\na\n<!--foo-->\nb\n----\na\n<!--foo--><!--More than 1 comment, still stripped-->\nb\n----\na\n <!--foo--> <!----> <!-- bar --> \nb\n----\na\n<!--foo-->\n\nb\n----\na\n\n<!--foo-->\nb\n----\na\n<!--foo-->\n\n\nb\n----\na\n\n\n<!--foo-->\nb\n----",
		"html": "<hr />\n<p>a\nb\n</p>\n<hr />\n<p>a\nb\n</p>\n<hr />\n<p>a\nb\n</p>\n<hr />\n<p>a\n</p><p>b\n</p>\n<hr />\n<p>a\n</p><p>b\n</p>\n<hr />\n<p>a\n</p><p><br />\nb\n</p>\n<hr />\n<p>a\n</p><p><br />\nb\n</p>\n<hr />",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-hr\">----</span>\na\n<span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\nb\n<span class=\"wpb-hr\">----</span>\na\n<span class=\"wpb-comment\">&lt;!--foo--&gt;</span><span class=\"wpb-comment\">&lt;!--More than 1 comment, still stripped--&gt;</span>\nb\n<span class=\"wpb-hr\">----</span>\na\n <span class=\"wpb-comment\">&lt;!--foo--&gt;</span> <span class=\"wpb-comment\">&lt;!----&gt;</span> <span class=\"wpb-comment\">&lt;!-- bar --&gt;</span> \nb\n<span class=\"wpb-hr\">----</span>\na\n<span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\n\nb\n<span class=\"wpb-hr\">----</span>\na\n\n<span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\nb\n<span class=\"wpb-hr\">----</span>\na\n<span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\n\n\nb\n<span class=\"wpb-hr\">----</span>\na\n\n\n<span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\nb\n<span class=\"wpb-hr\">----</span></span>"
	},
	{
		"desc": "Paragraphs with newline spacing with non-empty white-space lines in between",
		"wikitext": "----\na\n \nb\n----\na\n \n \nb\n----",
		"html": "<hr />\n<p>a\n</p><p>b\n</p>\n<hr />\n<p>a\n</p><p><br /> \nb\n</p>\n<hr />",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-hr\">----</span>\na\n \nb\n<span class=\"wpb-hr\">----</span>\na\n \n \nb\n<span class=\"wpb-hr\">----</span></span>"
	},
	{
		"desc": "Paragraphs with newline spacing with non-empty mixed comment and white-space lines in between",
		"wikitext": "----\na\n <!--foo-->\nb\n----\na\n <!--foo--><!--More than 1 comment doesn't disable stripping of this line!-->\nb\n----\na\n \n<!--foo-->\n <!--bar-->\nb\n----\na\n \n <!--foo-->\n <!--bar-->\n \nb\n----",
		"html": "<hr />\n<p>a\nb\n</p>\n<hr />\n<p>a\nb\n</p>\n<hr />\n<p>a\n</p><p>b\n</p>\n<hr />\n<p>a\n</p><p><br /> \nb\n</p>\n<hr />",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-hr\">----</span>\na\n <span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\nb\n<span class=\"wpb-hr\">----</span>\na\n <span class=\"wpb-comment\">&lt;!--foo--&gt;</span><span class=\"wpb-comment\">&lt;!--More than 1 comment doesn't disable stripping of this line!--&gt;</span>\nb\n<span class=\"wpb-hr\">----</span>\na\n \n<span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\n <span class=\"wpb-comment\">&lt;!--bar--&gt;</span>\nb\n<span class=\"wpb-hr\">----</span>\na\n \n <span class=\"wpb-comment\">&lt;!--foo--&gt;</span>\n <span class=\"wpb-comment\">&lt;!--bar--&gt;</span>\n \nb\n<span class=\"wpb-hr\">----</span></span>"
	},
	{
		"desc": "Extra newlines: More paragraphs with indented comment",
		"wikitext": "a\n\n   <!--boo-->\n\nb",
		"html": "<p>a\n</p><p><br />\nb\n</p>",
		"print": "<span class=\"wpb-root\">a\n\n   <span class=\"wpb-comment\">&lt;!--boo--&gt;</span>\n\nb</span>"
	},
	{
		"desc": "Extra newlines followed by heading",
		"wikitext": "a\n\n\n=b=\n[[a]]\n\n\n=b=",
		"html": "<p>a\n</p><p><br />\n</p>\n<h1><span class=\"mw-headline\" id=\"b\">b</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: b\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h1>\n<p><a href=\"/wiki/A\" title=\"A\">a</a>\n</p><p><br />\n</p>\n<h1><span class=\"mw-headline\" id=\"b_2\">b</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=2\" title=\"Edit section: b\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h1>",
		"print": "<span class=\"wpb-root\">a\n\n\n<span class=\"wpb-heading\">=<span class=\"wpb-heading-title\">b</span>=</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">a</span>]]</span>\n\n\n<span class=\"wpb-heading\">=<span class=\"wpb-heading-title\">b</span>=</span></span>"
	},
	{
		"desc": "Extra newlines between heading and content are swallowed (Parsoid does not)",
		"wikitext": "=b=\n\n\n\n[[a]]",
		"html": "<h1><span class=\"mw-headline\" id=\"b\">b</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: b\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h1>\n<p><a href=\"/wiki/A\" title=\"A\">a</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">=<span class=\"wpb-heading-title\">b</span>=</span>\n\n\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">a</span>]]</span></span>"
	},
	{
		"desc": "Extra new lines before and after lists are preserved",
		"wikitext": "a\n\n\n*b\n\n\nc",
		"html": "<p>a\n</p><p><br />\n</p>\n<ul><li>b</li></ul>\n<p><br />\nc\n</p>",
		"print": "<span class=\"wpb-root\">a\n\n\n<span class=\"wpb-list\">*</span>b\n\n\nc</span>"
	},
	{
		"desc": "Heading with literal wikitext - the wikitext is not parsed in section edit link tooltip",
		"wikitext": "== <nowiki>{{PAGENAME}}</nowiki> ==\n== &#123;&#123;PAGENAME}} ==",
		"html": "<h2><span class=\"mw-headline\" id=\"{{PAGENAME}}\">{{PAGENAME}}</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: {{PAGENAME}}\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"{{PAGENAME}}_2\">&#123;&#123;PAGENAME}}</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=2\" title=\"Edit section: {{PAGENAME}}\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\"> <span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">{{PAGENAME}}</span>&lt;/nowiki&gt;</span> </span>==</span>\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\"> &amp;#123;&amp;#123;PAGENAME}} </span>==</span></span>"
	},
	{
		"desc": "Parsing an URL",
		"wikitext": "http://fr.wikipedia.org/wiki/üç∫\n<!-- EasterEgg we love beer, better be able be able to link to it -->",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://fr.wikipedia.org/wiki/üç∫\">http://fr.wikipedia.org/wiki/üç∫</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://fr.wikipedia.org/wiki/üç∫</span>\n<span class=\"wpb-comment\">&lt;!-- EasterEgg we love beer, better be able be able to link to it --&gt;</span></span>"
	},
	{
		"desc": "Simple list",
		"wikitext": "*Item 1\n*Item 2",
		"html": "<ul><li>Item 1</li>\n<li>Item 2</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>Item 1\n<span class=\"wpb-list\">*</span>Item 2</span>"
	},
	{
		"desc": "Non-html5 tags should be accepted",
		"wikitext": "<center>''foo''</center>\n<big>''foo''</big>\n<font style=\"123\">''foo''</font>\n<strike>''foo''</strike>\n<tt>''foo''</tt>",
		"html": "<center><i>foo</i></center>\n<p><big><i>foo</i></big>\n<font style=\"123\"><i>foo</i></font>\n<strike><i>foo</i></strike>\n<tt><i>foo</i></tt>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;center&gt;</span><span class=\"wpb-quote\">''</span>foo<span class=\"wpb-quote\">''</span><span class=\"wpb-html\">&lt;/center&gt;</span>\n<span class=\"wpb-html\">&lt;big&gt;</span><span class=\"wpb-quote\">''</span>foo<span class=\"wpb-quote\">''</span><span class=\"wpb-html\">&lt;/big&gt;</span>\n<span class=\"wpb-html\">&lt;font<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">123</span>\"</span></span>&gt;</span><span class=\"wpb-quote\">''</span>foo<span class=\"wpb-quote\">''</span><span class=\"wpb-html\">&lt;/font&gt;</span>\n<span class=\"wpb-html\">&lt;strike&gt;</span><span class=\"wpb-quote\">''</span>foo<span class=\"wpb-quote\">''</span><span class=\"wpb-html\">&lt;/strike&gt;</span>\n<span class=\"wpb-html\">&lt;tt&gt;</span><span class=\"wpb-quote\">''</span>foo<span class=\"wpb-quote\">''</span><span class=\"wpb-html\">&lt;/tt&gt;</span></span>"
	},
	{
		"desc": "<wbr> is valid wikitext (T54468)",
		"wikitext": "<wbr>",
		"html": "<p><wbr />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;wbr&gt;</span></span>"
	},
	{
		"desc": "<s> or <strike> for strikethrough",
		"wikitext": "<strike>strike</strike>\n\n<s>s</s>",
		"html": "<p><strike>strike</strike>\n</p><p><s>s</s>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;strike&gt;</span>strike<span class=\"wpb-html\">&lt;/strike&gt;</span>\n\n<span class=\"wpb-html\">&lt;s&gt;</span>s<span class=\"wpb-html\">&lt;/s&gt;</span></span>"
	},
	{
		"desc": "Text-level semantic html elements in wikitext",
		"wikitext": "<em>text</em>\n<strong>text</strong>\n<small>text</small>\n<s>text</s>\n<cite>text</cite>\n<q>text</q>\n<dfn>text</dfn>\n<abbr>text</abbr>\n<data>text</data>\n<time>text</time>\n<code>text</code>\n<var>text</var>\n<samp>text</samp>\n<kbd>text</kbd>\n<sub>text</sub>\n<u>text</u>\n<mark>text</mark>\n<ruby><rb>ÊòéÊó•</rb><rp>(</rp><rt>Ashita</rt><rp> </rp><rtc>„ÅÇ„Åó„Åü</rtc><rp>)</rp></ruby>\n<bdi>text</bdi>\n<bdo>text</bdo>\n<span>text</span>\n<wbr />",
		"html": "<p><em>text</em>\n<strong>text</strong>\n<small>text</small>\n<s>text</s>\n<cite>text</cite>\n<q>text</q>\n<dfn>text</dfn>\n<abbr>text</abbr>\n<data>text</data>\n<time>text</time>\n<code>text</code>\n<var>text</var>\n<samp>text</samp>\n<kbd>text</kbd>\n<sub>text</sub>\n<u>text</u>\n<mark>text</mark>\n<ruby><rb>ÊòéÊó•</rb><rp>(</rp><rt>Ashita</rt><rp> </rp><rtc>„ÅÇ„Åó„Åü</rtc><rp>)</rp></ruby>\n<bdi>text</bdi>\n<bdo>text</bdo>\n<span>text</span>\n<wbr />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;em&gt;</span>text<span class=\"wpb-html\">&lt;/em&gt;</span>\n<span class=\"wpb-html\">&lt;strong&gt;</span>text<span class=\"wpb-html\">&lt;/strong&gt;</span>\n<span class=\"wpb-html\">&lt;small&gt;</span>text<span class=\"wpb-html\">&lt;/small&gt;</span>\n<span class=\"wpb-html\">&lt;s&gt;</span>text<span class=\"wpb-html\">&lt;/s&gt;</span>\n<span class=\"wpb-html\">&lt;cite&gt;</span>text<span class=\"wpb-html\">&lt;/cite&gt;</span>\n<span class=\"wpb-html\">&lt;q&gt;</span>text<span class=\"wpb-html\">&lt;/q&gt;</span>\n<span class=\"wpb-html\">&lt;dfn&gt;</span>text<span class=\"wpb-html\">&lt;/dfn&gt;</span>\n<span class=\"wpb-html\">&lt;abbr&gt;</span>text<span class=\"wpb-html\">&lt;/abbr&gt;</span>\n<span class=\"wpb-html\">&lt;data&gt;</span>text<span class=\"wpb-html\">&lt;/data&gt;</span>\n<span class=\"wpb-html\">&lt;time&gt;</span>text<span class=\"wpb-html\">&lt;/time&gt;</span>\n<span class=\"wpb-html\">&lt;code&gt;</span>text<span class=\"wpb-html\">&lt;/code&gt;</span>\n<span class=\"wpb-html\">&lt;var&gt;</span>text<span class=\"wpb-html\">&lt;/var&gt;</span>\n<span class=\"wpb-html\">&lt;samp&gt;</span>text<span class=\"wpb-html\">&lt;/samp&gt;</span>\n<span class=\"wpb-html\">&lt;kbd&gt;</span>text<span class=\"wpb-html\">&lt;/kbd&gt;</span>\n<span class=\"wpb-html\">&lt;sub&gt;</span>text<span class=\"wpb-html\">&lt;/sub&gt;</span>\n<span class=\"wpb-html\">&lt;u&gt;</span>text<span class=\"wpb-html\">&lt;/u&gt;</span>\n<span class=\"wpb-html\">&lt;mark&gt;</span>text<span class=\"wpb-html\">&lt;/mark&gt;</span>\n<span class=\"wpb-html\">&lt;ruby&gt;</span><span class=\"wpb-html\">&lt;rb&gt;</span>ÊòéÊó•<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rp&gt;</span>(<span class=\"wpb-html\">&lt;/rp&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>Ashita<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rp&gt;</span> <span class=\"wpb-html\">&lt;/rp&gt;</span><span class=\"wpb-html\">&lt;rtc&gt;</span>„ÅÇ„Åó„Åü<span class=\"wpb-html\">&lt;/rtc&gt;</span><span class=\"wpb-html\">&lt;rp&gt;</span>)<span class=\"wpb-html\">&lt;/rp&gt;</span><span class=\"wpb-html\">&lt;/ruby&gt;</span>\n<span class=\"wpb-html\">&lt;bdi&gt;</span>text<span class=\"wpb-html\">&lt;/bdi&gt;</span>\n<span class=\"wpb-html\">&lt;bdo&gt;</span>text<span class=\"wpb-html\">&lt;/bdo&gt;</span>\n<span class=\"wpb-html\">&lt;span&gt;</span>text<span class=\"wpb-html\">&lt;/span&gt;</span>\n<span class=\"wpb-html\">&lt;wbr<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span></span>"
	},
	{
		"desc": "Ruby markup (W3C-style)",
		"wikitext": ";Mono-ruby for individual base characters\n:<ruby>Êó•<rt>„Å´</rt>Êú¨<rt>„Åª„Çì</rt>Ë™û<rt>„Åî</rt></ruby>\n;Group ruby\n:<ruby>‰ªäÊó•<rt>„Åç„Çá„ÅÜ</rt></ruby>\n;Jukugo ruby\n:<ruby>Ê≥ï<rb>ËèØ</rb><rb>Áµå</rb><rt>„Åª</rt><rt>„Åë</rt><rt>„Åç„Çá„ÅÜ</rt></ruby>\n;Inline ruby\n:<ruby>Êù±<rb>‰∫¨</rb><rp>(</rp><rt>„Å®„ÅÜ</rt><rt>„Åç„Çá„ÅÜ</rt><rp>)</rp></ruby>\n;Double-sided ruby\n:<ruby><rb>Êóß</rb><rb>Èáë</rb><rb>Â±±</rb><rt>ji√π</rt><rt>jƒ´n</rt><rt>shƒÅn</rt><rtc>San Francisco</rtc></ruby>\n\n<ruby>\n<rb>‚ô•</rb><rtc><rt>Heart</rt></rtc><rtc lang=\"fr\"><rt>C≈ìur</rt></rtc>\n<rb>‚òò</rb><rtc><rt>Shamrock</rt></rtc><rtc lang=\"fr\"><rt>Tr√®fle</rt></rtc>\n<rb>‚ú∂</rb><rtc><rt>Star</rt></rtc><rtc lang=\"fr\"><rt>√âtoile</rt></rtc>\n</ruby>",
		"html": "<dl><dt>Mono-ruby for individual base characters</dt>\n<dd><ruby>Êó•<rt>„Å´</rt>Êú¨<rt>„Åª„Çì</rt>Ë™û<rt>„Åî</rt></ruby></dd>\n<dt>Group ruby</dt>\n<dd><ruby>‰ªäÊó•<rt>„Åç„Çá„ÅÜ</rt></ruby></dd>\n<dt>Jukugo ruby</dt>\n<dd><ruby>Ê≥ï<rb>ËèØ</rb><rb>Áµå</rb><rt>„Åª</rt><rt>„Åë</rt><rt>„Åç„Çá„ÅÜ</rt></ruby></dd>\n<dt>Inline ruby</dt>\n<dd><ruby>Êù±<rb>‰∫¨</rb><rp>(</rp><rt>„Å®„ÅÜ</rt><rt>„Åç„Çá„ÅÜ</rt><rp>)</rp></ruby></dd>\n<dt>Double-sided ruby</dt>\n<dd><ruby><rb>Êóß</rb><rb>Èáë</rb><rb>Â±±</rb><rt>ji√π</rt><rt>jƒ´n</rt><rt>shƒÅn</rt><rtc>San Francisco</rtc></ruby></dd></dl>\n<p><ruby>\n<rb>‚ô•</rb><rtc><rt>Heart</rt></rtc><rtc lang=\"fr\"><rt>C≈ìur</rt></rtc>\n<rb>‚òò</rb><rtc><rt>Shamrock</rt></rtc><rtc lang=\"fr\"><rt>Tr√®fle</rt></rtc>\n<rb>‚ú∂</rb><rtc><rt>Star</rt></rtc><rtc lang=\"fr\"><rt>√âtoile</rt></rtc>\n</ruby>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">;</span>Mono-ruby for individual base characters\n<span class=\"wpb-list\">:</span><span class=\"wpb-html\">&lt;ruby&gt;</span>Êó•<span class=\"wpb-html\">&lt;rt&gt;</span>„Å´<span class=\"wpb-html\">&lt;/rt&gt;</span>Êú¨<span class=\"wpb-html\">&lt;rt&gt;</span>„Åª„Çì<span class=\"wpb-html\">&lt;/rt&gt;</span>Ë™û<span class=\"wpb-html\">&lt;rt&gt;</span>„Åî<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/ruby&gt;</span>\n<span class=\"wpb-list\">;</span>Group ruby\n<span class=\"wpb-list\">:</span><span class=\"wpb-html\">&lt;ruby&gt;</span>‰ªäÊó•<span class=\"wpb-html\">&lt;rt&gt;</span>„Åç„Çá„ÅÜ<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/ruby&gt;</span>\n<span class=\"wpb-list\">;</span>Jukugo ruby\n<span class=\"wpb-list\">:</span><span class=\"wpb-html\">&lt;ruby&gt;</span>Ê≥ï<span class=\"wpb-html\">&lt;rb&gt;</span>ËèØ<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rb&gt;</span>Áµå<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>„Åª<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>„Åë<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>„Åç„Çá„ÅÜ<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/ruby&gt;</span>\n<span class=\"wpb-list\">;</span>Inline ruby\n<span class=\"wpb-list\">:</span><span class=\"wpb-html\">&lt;ruby&gt;</span>Êù±<span class=\"wpb-html\">&lt;rb&gt;</span>‰∫¨<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rp&gt;</span>(<span class=\"wpb-html\">&lt;/rp&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>„Å®„ÅÜ<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>„Åç„Çá„ÅÜ<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rp&gt;</span>)<span class=\"wpb-html\">&lt;/rp&gt;</span><span class=\"wpb-html\">&lt;/ruby&gt;</span>\n<span class=\"wpb-list\">;</span>Double-sided ruby\n<span class=\"wpb-list\">:</span><span class=\"wpb-html\">&lt;ruby&gt;</span><span class=\"wpb-html\">&lt;rb&gt;</span>Êóß<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rb&gt;</span>Èáë<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rb&gt;</span>Â±±<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>ji√π<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>jƒ´n<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>shƒÅn<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;rtc&gt;</span>San Francisco<span class=\"wpb-html\">&lt;/rtc&gt;</span><span class=\"wpb-html\">&lt;/ruby&gt;</span>\n\n<span class=\"wpb-html\">&lt;ruby&gt;</span>\n<span class=\"wpb-html\">&lt;rb&gt;</span>‚ô•<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rtc&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>Heart<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/rtc&gt;</span><span class=\"wpb-html\">&lt;rtc<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">lang</span>=\"<span class=\"wpb-attr-value\">fr</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>C≈ìur<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/rtc&gt;</span>\n<span class=\"wpb-html\">&lt;rb&gt;</span>‚òò<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rtc&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>Shamrock<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/rtc&gt;</span><span class=\"wpb-html\">&lt;rtc<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">lang</span>=\"<span class=\"wpb-attr-value\">fr</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>Tr√®fle<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/rtc&gt;</span>\n<span class=\"wpb-html\">&lt;rb&gt;</span>‚ú∂<span class=\"wpb-html\">&lt;/rb&gt;</span><span class=\"wpb-html\">&lt;rtc&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>Star<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/rtc&gt;</span><span class=\"wpb-html\">&lt;rtc<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">lang</span>=\"<span class=\"wpb-attr-value\">fr</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;rt&gt;</span>√âtoile<span class=\"wpb-html\">&lt;/rt&gt;</span><span class=\"wpb-html\">&lt;/rtc&gt;</span>\n<span class=\"wpb-html\">&lt;/ruby&gt;</span></span>"
	},
	{
		"desc": "Non-word characters don't terminate tag names (T19663, T42670, T54022)",
		"wikitext": "<blockquote|>a</blockquote>\n\n<b‚Üí> doesn't terminate </b‚Üí>\n\n<b√§> doesn't terminate </b√§>\n\n<boo> doesn't terminate </boo>\n\n<s.foo> doesn't terminate </s.foo>\n\n<sub-ID#1>",
		"html": "<p>&lt;blockquote|&gt;a\n</p><p>&lt;b‚Üí&gt; doesn't terminate &lt;/b‚Üí&gt;\n</p><p>&lt;b√§&gt; doesn't terminate &lt;/b√§&gt;\n</p><p>&lt;boo&gt; doesn't terminate &lt;/boo&gt;\n</p><p>&lt;s.foo&gt; doesn't terminate &lt;/s.foo&gt;\n</p><p>&lt;sub-ID#1&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&lt;blockquote|&gt;a<span class=\"wpb-html\">&lt;/blockquote&gt;</span>\n\n&lt;b‚Üí&gt; doesn't terminate &lt;/b‚Üí&gt;\n\n&lt;b√§&gt; doesn't terminate &lt;/b√§&gt;\n\n&lt;boo&gt; doesn't terminate &lt;/boo&gt;\n\n&lt;s.foo&gt; doesn't terminate &lt;/s.foo&gt;\n\n&lt;sub-ID#1&gt;</span>"
	},
	{
		"desc": "Self-closed tag hooks",
		"wikitext": "<pre />\n<gallery />\n<indicator name=\"something\" />",
		"html": "<pre></pre>\n<ul class=\"gallery mw-gallery-traditional\">\n</ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;pre<span class=\"wpb-ext-attrs\"><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>\n<span class=\"wpb-ext\">&lt;gallery<span class=\"wpb-ext-attrs\"><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>\n<span class=\"wpb-ext\">&lt;indicator<span class=\"wpb-ext-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-ext-attr\"><span class=\"wpb-attr-key\">name</span>=\"<span class=\"wpb-attr-value\">something</span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span></span>"
	},
	{
		"desc": "Bare pipe character (T54363)",
		"wikitext": "|",
		"html": "<p>|\n</p>",
		"print": "<span class=\"wpb-root\">|</span>"
	},
	{
		"desc": "Bare pipe character from a template (T54363)",
		"wikitext": "{{pipe}}",
		"html": "<p>|\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">pipe</span>}}</span></span>"
	},
	{
		"desc": "Implicit newline insertion/sol when expanding templates (T241150/T14974/T2529)",
		"wikitext": "{{1x|#foo}}{{1x|#foo}}",
		"html": "<ol><li>foo</li>\n<li>foo</li></ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">#foo</span></span>}}</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">#foo</span></span>}}</span></span>"
	},
	{
		"desc": "<nowiki> unordered list",
		"wikitext": "<nowiki>* This is not an unordered list item.</nowiki>",
		"html": "<p>* This is not an unordered list item.\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">* This is not an unordered list item.</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "<nowiki> spacing",
		"wikitext": "<nowiki>Lorem ipsum dolor\n\nsed abit.\n  sed nullum.\n\n:and a colon\n</nowiki>",
		"html": "<p>Lorem ipsum dolor\n\nsed abit.\n  sed nullum.\n\n:and a colon\n\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">Lorem ipsum dolor\n\nsed abit.\n  sed nullum.\n\n:and a colon\n</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "Don't parse <nowiki><span class=\"error\"></nowiki> (T149622)",
		"wikitext": "<nowiki><span class=\"error\"></nowiki>",
		"html": "<p>&lt;span class=\"error\"&gt;\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">&lt;span class=\"error\"&gt;</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "nowiki 3",
		"wikitext": ":There is not nowiki.\n:There is <nowiki>nowiki</nowiki>.\n\n#There is not nowiki.\n#There is <nowiki>nowiki</nowiki>.\n\n*There is not nowiki.\n*There is <nowiki>nowiki</nowiki>.",
		"html": "<dl><dd>There is not nowiki.</dd>\n<dd>There is nowiki.</dd></dl>\n<ol><li>There is not nowiki.</li>\n<li>There is nowiki.</li></ol>\n<ul><li>There is not nowiki.</li>\n<li>There is nowiki.</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">:</span>There is not nowiki.\n<span class=\"wpb-list\">:</span>There is <span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">nowiki</span>&lt;/nowiki&gt;</span>.\n\n<span class=\"wpb-list\">#</span>There is not nowiki.\n<span class=\"wpb-list\">#</span>There is <span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">nowiki</span>&lt;/nowiki&gt;</span>.\n\n<span class=\"wpb-list\">*</span>There is not nowiki.\n<span class=\"wpb-list\">*</span>There is <span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">nowiki</span>&lt;/nowiki&gt;</span>.</span>"
	},
	{
		"desc": "Entities inside <nowiki>",
		"wikitext": "<nowiki>&lt;</nowiki>",
		"html": "<p>&lt;\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">&amp;lt;</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "Entities inside template parameters",
		"wikitext": "{{1x|&ndash;}}",
		"html": "<p>&#8211;\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">&amp;ndash;</span></span>}}</span></span>"
	},
	{
		"desc": "Nowiki with newlines in list",
		"wikitext": ":<nowiki>test\n123</nowiki>",
		"html": "<dl><dd>test\n123</dd></dl>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">:</span><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">test\n123</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "Nowiki and french spacing",
		"wikitext": "<nowiki>test : 123</nowiki>",
		"html": "<p>test&#160;: 123\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">test : 123</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "French spacing and spans",
		"wikitext": "[[Test]] : <span>123</span>\n¬´ Test ¬ª<span>123</span>",
		"html": "<p><a href=\"/wiki/Test\" title=\"Test\">Test</a>&#160;: <span>123</span>\n¬´&#160;Test&#160;¬ª<span>123</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Test</span>]]</span> : <span class=\"wpb-html\">&lt;span&gt;</span>123<span class=\"wpb-html\">&lt;/span&gt;</span>\n¬´ Test ¬ª<span class=\"wpb-html\">&lt;span&gt;</span>123<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "multiple templates that are redirects",
		"wikitext": "{{redirect to foo}}\n{{redirect to foo}}",
		"html": "<p>FOO\nFOO\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">redirect to foo</span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">redirect to foo</span>}}</span></span>"
	},
	{
		"desc": "T53086: Double newlines in blockquotes should be turned into paragraphs",
		"wikitext": "<blockquote>\nFoo\n\nBar\n</blockquote>",
		"html": "<blockquote>\n<p>Foo\n</p><p>Bar\n</p>\n</blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>\nFoo\n\nBar\n<span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "T17491: <ins>/<del> in blockquote",
		"wikitext": "<blockquote>\nFoo <del>bar</del> <ins>baz</ins> quux\n</blockquote>",
		"html": "<blockquote>\n<p>Foo <del>bar</del> <ins>baz</ins> quux\n</p>\n</blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>\nFoo <span class=\"wpb-html\">&lt;del&gt;</span>bar<span class=\"wpb-html\">&lt;/del&gt;</span> <span class=\"wpb-html\">&lt;ins&gt;</span>baz<span class=\"wpb-html\">&lt;/ins&gt;</span> quux\n<span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "T17491: <ins>/<del> in blockquote (2)",
		"wikitext": "<blockquote>Foo <del>bar</del> <ins>baz</ins> quux\n</blockquote>",
		"html": "<blockquote><p>Foo <del>bar</del> <ins>baz</ins> quux\n</p></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>Foo <span class=\"wpb-html\">&lt;del&gt;</span>bar<span class=\"wpb-html\">&lt;/del&gt;</span> <span class=\"wpb-html\">&lt;ins&gt;</span>baz<span class=\"wpb-html\">&lt;/ins&gt;</span> quux\n<span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "Templates: Strip leading and trailing whitespace from named-param values",
		"wikitext": "{{1x|1= a }}\n\n{{1x|1= {{1x|b}} }}\n\n{{1x| 1 =\n c }}\n\n{{1x| 1 =\n* d\n}}",
		"html": "<p>a\n</p><p>b\n</p><p>c\n</p>\n<ul><li>d</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1</span>=<span class=\"wpb-parameter-value\"> a </span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1</span>=<span class=\"wpb-parameter-value\"> <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">b</span></span>}}</span> </span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\"> 1 </span>=<span class=\"wpb-parameter-value\">\n c </span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\"> 1 </span>=<span class=\"wpb-parameter-value\">\n<span class=\"wpb-list\">*</span> d\n</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Don't strip whitespace from positional-param values",
		"wikitext": "{{1x|a }}\n\n{{1x|{{1x|b}} }}\n\n{{1x| c \n}}\n\n{{1x| {{1x|d}}\n}}\n\n{{1x|\n e}}\n\n{{1x|\n*f}}\n\n{{1x|\n }}g",
		"html": "<p>a \n</p><p>b \n</p>\n<pre>c \n</pre>\n<p><br />\n</p>\n<pre>d\n</pre>\n<p><br />\n</p>\n<pre>e\n</pre>\n<p><br />\n</p>\n<ul><li>f</li></ul>\n<p><br />\n</p>\n<pre>g\n</pre>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">a </span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">b</span></span>}}</span> </span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"> c \n</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"> <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">d</span></span>}}</span>\n</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\n e</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\n<span class=\"wpb-list\">*</span>f</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\n </span></span>}}</span>g</span>"
	},
	{
		"desc": "Templates: Handle empty comment-and-ws-only lines correctly",
		"wikitext": "{{1x|foo\n<!--should be ignored-->\n <!--should be ignored as well-->\nbar}}",
		"html": "<p>foo\nbar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo\n<span class=\"wpb-comment\">&lt;!--should be ignored--&gt;</span>\n <span class=\"wpb-comment\">&lt;!--should be ignored as well--&gt;</span>\nbar</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Handle comments in the target",
		"wikitext": "{{1x\n<!-- should be ignored -->\n|foo}}\n\n{{1x\n<!-- should be ignored and spaces on next line should not trip us up (T147742) -->\n  |foo}}\n\n{{1x<!-- should be ignored -->\n|foo}}\n\n{{1x<!-- should be ignored -->|foo}}\n\n{{<!-- should be ignored -->1x|foo}}",
		"html": "<p>foo\n</p><p>foo\n</p><p>foo\n</p><p>foo\n</p><p>foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x\n<span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span>\n</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x\n<span class=\"wpb-comment\">&lt;!-- should be ignored and spaces on next line should not trip us up (T147742) --&gt;</span>\n  </span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x<span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span>\n</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x<span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\"><span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span>1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Handle comments in parameter names (T69657)",
		"wikitext": "{{1x|1\n<!-- should be ignored -->\n=foo}}\n\n{{1x|\n<!-- should be ignored -->\n1 = foo}}\n\n{{1x|1<!-- should be ignored -->=foo}}\n\n{{1x|<!-- should be ignored -->1=foo}}",
		"html": "<p>foo\n</p><p>foo\n</p><p>foo\n</p><p>foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1\n<span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span>\n</span>=<span class=\"wpb-parameter-value\">foo</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">\n<span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span>\n1 </span>=<span class=\"wpb-parameter-value\"> foo</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1<span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span></span>=<span class=\"wpb-parameter-value\">foo</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\"><span class=\"wpb-comment\">&lt;!-- should be ignored --&gt;</span>1</span>=<span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Other wikitext in parameter names (T69657)",
		"wikitext": "{{1x|''1''=foo}}",
		"html": "<p>{{{1}}}\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\"><span class=\"wpb-quote\">''</span>1<span class=\"wpb-quote\">''</span></span>=<span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: With colons",
		"wikitext": "{{With: Colon}}",
		"html": "<p>Template with colon\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">With: Colon</span>}}</span></span>"
	},
	{
		"desc": "Templates: Parsoid parameter escaping test 1",
		"wikitext": "{{1x|[foo]|{{1x|[bar]}}}}",
		"html": "<p>[foo]\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">[foo]</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">[bar]</span></span>}}</span></span></span>}}</span></span>"
	},
	{
		"desc": "Parsoid: Pipes in external links in template parameter",
		"wikitext": "{{1x|[{{1x|http://example.com}} link]}}",
		"html": "<p><a rel=\"nofollow\" class=\"external text\" href=\"http://example.com\">link</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">[<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-free-ext-link\">http://example.com</span></span></span>}}</span> link]</span></span>}}</span></span>"
	},
	{
		"desc": "Parsoid: pipe in transclusion parameter",
		"wikitext": "{{1x|http://foo.com/a&#124;b}}",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://foo.com/a%7Cb\">http://foo.com/a%7Cb</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-free-ext-link\">http://foo.com/a&amp;#124;b</span></span></span>}}</span></span>"
	},
	{
		"desc": "Parsoid: Pipe in template with nested template in external link target in template parameter (seriously)",
		"wikitext": "{{1x|[{{fullurl:{{FULLPAGENAME}}|action=edit}} bar]}}",
		"html": "<p><a rel=\"nofollow\" class=\"external text\" href=\"http://example.org/index.php?title=Parser_test&amp;action=edit\">bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">fullurl</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">FULLPAGENAME</span>}}</span></span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">action=edit</span></span>}}</span></span> <span class=\"wpb-ext-link-text\">bar</span>]</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates parameters with special tokenizing behavior dont get modified because of arg escaping",
		"wikitext": "{{1x|a : b}}",
		"html": "<p>a&#160;: b\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">a : b</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Preserve blank parameter names",
		"wikitext": "{{1x|=foo}}",
		"html": "<p>{{{1}}}\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\">=<span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Preserve blank parameter names in other positions",
		"wikitext": "{{blank_param|bar|=foo}}",
		"html": "<p>bar\nfoo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">blank_param</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>|<span class=\"wpb-parameter\">=<span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Wikilinks with embedded newlines are not broken",
		"wikitext": "{{1x|[[ Foo\nB\nC]]}}",
		"html": "<p>[[ Foo\nB\nC]]\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">[[ Foo\nB\nC]]</span></span>}}</span></span>"
	},
	{
		"desc": "Template returning pipe used in wikilink target",
		"wikitext": "[[{{pipe page}}]]",
		"html": "<p><a href=\"/index.php?title=Main&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Main (page does not exist)\">Page</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">pipe page</span>}}</span></span>]]</span></span>"
	},
	{
		"desc": "T4702: Mismatched <i>, <b> and <a> tags are invalid",
		"wikitext": "''[http://example.com text'']\n[http://example.com '''text]'''\n''Something [http://example.com in italic'']\n''Something [http://example.com mixed''''', even bold]'''\n'''''Now [http://example.com both''''']",
		"html": "<p><i><a rel=\"nofollow\" class=\"external text\" href=\"http://example.com\">text</a></i>\n<a rel=\"nofollow\" class=\"external text\" href=\"http://example.com\"><b>text</b></a>\n<i>Something <a rel=\"nofollow\" class=\"external text\" href=\"http://example.com\">in italic</a></i>\n<i>Something <a rel=\"nofollow\" class=\"external text\" href=\"http://example.com\">mixed</a></i><a rel=\"nofollow\" class=\"external text\" href=\"http://example.com\"><b>, even bold</b></a>\n<i><b>Now <a rel=\"nofollow\" class=\"external text\" href=\"http://example.com\">both</a></b></i>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-quote\">''</span><span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com</span> <span class=\"wpb-ext-link-text\">text<span class=\"wpb-quote\">''</span></span>]</span>\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com</span> <span class=\"wpb-ext-link-text\"><span class=\"wpb-quote\">'''</span>text</span>]</span><span class=\"wpb-quote\">'''</span>\n<span class=\"wpb-quote\">''</span>Something <span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com</span> <span class=\"wpb-ext-link-text\">in italic<span class=\"wpb-quote\">''</span></span>]</span>\n<span class=\"wpb-quote\">''</span>Something <span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com</span> <span class=\"wpb-ext-link-text\">mixed<span class=\"wpb-quote\">'''''</span>, even bold</span>]</span><span class=\"wpb-quote\">'''</span>\n<span class=\"wpb-quote\">'''''</span>Now <span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com</span> <span class=\"wpb-ext-link-text\">both<span class=\"wpb-quote\">'''''</span></span>]</span></span>"
	},
	{
		"desc": "Plain link, capitalized",
		"wikitext": "[[Main Page]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span></span>"
	},
	{
		"desc": "Plain link, uncapitalized",
		"wikitext": "[[main Page]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">main Page</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">main Page</span>]]</span></span>"
	},
	{
		"desc": "Piped link",
		"wikitext": "[[Main Page|The Main Page]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">The Main Page</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">The Main Page</span>]]</span></span>"
	},
	{
		"desc": "Piped link with comment in link text",
		"wikitext": "[[Main Page|The Main<!--front--> Page]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">The Main Page</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">The Main<span class=\"wpb-comment\">&lt;!--front--&gt;</span> Page</span>]]</span></span>"
	},
	{
		"desc": "Piped link with multiple pipe characters in link text",
		"wikitext": "[[Main Page||The|Main|Page|]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">|The|Main|Page|</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">|The|Main|Page|</span>]]</span></span>"
	},
	{
		"desc": "Piped link with empty link text",
		"wikitext": "[[Main Page|<nowiki/>]] - empty nowiki\n[[Main Page|&nbsp;]] - empty non breaking space",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\"></a> - empty nowiki\n<a href=\"/wiki/Main_Page\" title=\"Main Page\">&#160;</a> - empty non breaking space\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\"><span class=\"wpb-ext\">&lt;nowiki/&gt;</span></span>]]</span> - empty nowiki\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">&amp;nbsp;</span>]]</span> - empty non breaking space</span>"
	},
	{
		"desc": "Broken link",
		"wikitext": "[[Zigzagzogzagzig]]",
		"html": "<p><a href=\"/index.php?title=Zigzagzogzagzig&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Zigzagzogzagzig (page does not exist)\">Zigzagzogzagzig</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Zigzagzogzagzig</span>]]</span></span>"
	},
	{
		"desc": "Broken link with fragment",
		"wikitext": "[[Zigzagzogzagzig#zug]]",
		"html": "<p><a href=\"/index.php?title=Zigzagzogzagzig&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Zigzagzogzagzig (page does not exist)\">Zigzagzogzagzig#zug</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Zigzagzogzagzig#zug</span>]]</span></span>"
	},
	{
		"desc": "Special page link with fragment",
		"wikitext": "[[Special:Version#anchor]]",
		"html": "<p><a href=\"/wiki/Special:Version#anchor\" title=\"Special:Version\">Special:Version#anchor</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Special:Version#anchor</span>]]</span></span>"
	},
	{
		"desc": "Nonexistent special page link with fragment",
		"wikitext": "[[Special:ThisNameWillHopefullyNeverBeUsed#anchor]]",
		"html": "<p><a href=\"/wiki/Special:ThisNameWillHopefullyNeverBeUsed\" class=\"new\" title=\"Special:ThisNameWillHopefullyNeverBeUsed (page does not exist)\">Special:ThisNameWillHopefullyNeverBeUsed#anchor</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Special:ThisNameWillHopefullyNeverBeUsed#anchor</span>]]</span></span>"
	},
	{
		"desc": "Link with prefix",
		"wikitext": "xxx[[main Page]], xxx[[Main Page]], Xxx[[main Page]] XXX[[main Page]], XXX[[Main Page]]",
		"html": "<p>xxx<a href=\"/wiki/Main_Page\" title=\"Main Page\">main Page</a>, xxx<a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>, Xxx<a href=\"/wiki/Main_Page\" title=\"Main Page\">main Page</a> XXX<a href=\"/wiki/Main_Page\" title=\"Main Page\">main Page</a>, XXX<a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>\n</p>",
		"print": "<span class=\"wpb-root\">xxx<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">main Page</span>]]</span>, xxx<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>, Xxx<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">main Page</span>]]</span> XXX<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">main Page</span>]]</span>, XXX<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span></span>"
	},
	{
		"desc": "Link with suffix",
		"wikitext": "[[Main Page]]xxx, [[Main Page]]XXX, [[Main Page]]!!!",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Pagexxx</a>, <a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>XXX, <a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>!!!\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>xxx, <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>XXX, <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>!!!</span>"
	},
	{
		"desc": "T45661: Piped links with identical prefixes",
		"wikitext": "[[prefixed article|prefixed articles with spaces]]\n\n[[prefixed article|prefixed articlesaoeu]]\n\n[[Main Page|Main Page test]]",
		"html": "<p><a href=\"/wiki/Prefixed_article\" title=\"Prefixed article\">prefixed articles with spaces</a>\n</p><p><a href=\"/wiki/Prefixed_article\" title=\"Prefixed article\">prefixed articlesaoeu</a>\n</p><p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page test</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">prefixed article</span>|<span class=\"wpb-link-text\">prefixed articles with spaces</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">prefixed article</span>|<span class=\"wpb-link-text\">prefixed articlesaoeu</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">Main Page test</span>]]</span></span>"
	},
	{
		"desc": "Link with HTML entity in suffix / tail",
		"wikitext": "[[Main Page]]&quot;, [[Main Page]]&#97;",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>&quot;, <a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>&#97;\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>&amp;quot;, <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>&amp;#97;</span>"
	},
	{
		"desc": "Link with 3 brackets",
		"wikitext": "[[[Main Page]]]\nFoo [[[Main Page]]]",
		"html": "<p>[[[Main Page]]]\nFoo [[[Main Page]]]\n</p>",
		"print": "<span class=\"wpb-root\">[[[Main Page]]]\nFoo [[[Main Page]]]</span>"
	},
	{
		"desc": "Link with 4 brackets",
		"wikitext": "[[[[Main Page]]]]",
		"html": "<p>[[<a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>]]\n</p>",
		"print": "<span class=\"wpb-root\">[[<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>]]</span>"
	},
	{
		"desc": "Piped link with 3 brackets",
		"wikitext": "[[[main page|the main page]]]",
		"html": "<p>[[[main page|the main page]]]\n</p>",
		"print": "<span class=\"wpb-root\">[[[main page|the main page]]]</span>"
	},
	{
		"desc": "Piped link with extlink-like text",
		"wikitext": "[[Main Page|[bar]]]\n[[Main Page|This is a [bar]]]\n[[Main Page|[bar]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">[bar]</a>\n<a href=\"/wiki/Main_Page\" title=\"Main Page\">This is a [bar]</a>\n<a href=\"/wiki/Main_Page\" title=\"Main Page\">[bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">[bar]</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">This is a [bar]</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">[bar</span>]]</span></span>"
	},
	{
		"desc": "Link with multiple pipes",
		"wikitext": "[[Main Page|The|Main|Page]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">The|Main|Page</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">The|Main|Page</span>]]</span></span>"
	},
	{
		"desc": "Anchor containing a #. (T65430)",
		"wikitext": "[[Main Page#And#Link]]",
		"html": "<p><a href=\"/wiki/Main_Page#And#Link\" title=\"Main Page\">Main Page#And#Link</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page#And#Link</span>]]</span></span>"
	},
	{
		"desc": "Link to namespaces",
		"wikitext": "[[Talk:Parser testing]], [[Meta:Disclaimers]]",
		"html": "<p><a href=\"/wiki/Talk:Parser_testing\" title=\"Talk:Parser testing\">Talk:Parser testing</a>, <a href=\"/wiki/Meta:Disclaimers\" title=\"Meta:Disclaimers\">Meta:Disclaimers</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Talk:Parser testing</span>]]</span>, <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Meta:Disclaimers</span>]]</span></span>"
	},
	{
		"desc": "Link with space in namespace",
		"wikitext": "[[User talk:Foo bar]]",
		"html": "<p><a href=\"/wiki/User_talk:Foo_bar\" title=\"User talk:Foo bar\">User talk:Foo bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">User talk:Foo bar</span>]]</span></span>"
	},
	{
		"desc": "Namespace takes precedence over interwiki link (T53680)",
		"wikitext": "[[MemoryAlpha:AlphaTest]]",
		"html": "<p><a href=\"/wiki/MemoryAlpha:AlphaTest\" title=\"MemoryAlpha:AlphaTest\">MemoryAlpha:AlphaTest</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">MemoryAlpha:AlphaTest</span>]]</span></span>"
	},
	{
		"desc": "Piped link to namespace",
		"wikitext": "[[Meta:Disclaimers|The disclaimers]]",
		"html": "<p><a href=\"/wiki/Meta:Disclaimers\" title=\"Meta:Disclaimers\">The disclaimers</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Meta:Disclaimers</span>|<span class=\"wpb-link-text\">The disclaimers</span>]]</span></span>"
	},
	{
		"desc": "Link containing }",
		"wikitext": "[[Usually caused by a typo (oops}]]",
		"html": "<p>[[Usually caused by a typo (oops}]]\n</p>",
		"print": "<span class=\"wpb-root\">[[Usually caused by a typo (oops}]]</span>"
	},
	{
		"desc": "Link containing % (not as a hex sequence)",
		"wikitext": "[[7% Solution]]\n[[7% Solution|7%25 Solution]]",
		"html": "<p><a href=\"/wiki/7%25_Solution\" title=\"7% Solution\">7% Solution</a>\n<a href=\"/wiki/7%25_Solution\" title=\"7% Solution\">7%25 Solution</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">7% Solution</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">7% Solution</span>|<span class=\"wpb-link-text\">7%25 Solution</span>]]</span></span>"
	},
	{
		"desc": "Link containing % as a double hex sequence interpreted to hex sequence",
		"wikitext": "[[7%2525 Solution]]",
		"html": "<p>[[7%2525 Solution]]\n</p>",
		"print": "<span class=\"wpb-root\">[[7%2525 Solution]]</span>"
	},
	{
		"desc": "Link containing \"#<\" and \"#>\" % as a hex sequences- these are valid section anchors (legacy)",
		"wikitext": "[[%23%3c]][[%23%3e]]",
		"html": "<p><a href=\"#.3C\">#&lt;</a><a href=\"#.3E\">#&gt;</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%23%3c</span>]]</span><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%23%3e</span>]]</span></span>"
	},
	{
		"desc": "Link containing \"<#\" and \">#\" as a hex sequences",
		"wikitext": "[[%3c%23]][[%3e%23]]",
		"html": "<p>[[%3c%23]][[%3e%23]]\n</p>",
		"print": "<span class=\"wpb-root\">[[%3c%23]][[%3e%23]]</span>"
	},
	{
		"desc": "Link containing an equals sign",
		"wikitext": "[[Special:BookSources/isbn=4-00-026157-6]]",
		"html": "<p><a href=\"/wiki/Special:BookSources/isbn%3D4-00-026157-6\" title=\"Special:BookSources/isbn=4-00-026157-6\">Special:BookSources/isbn=4-00-026157-6</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Special:BookSources/isbn=4-00-026157-6</span>]]</span></span>"
	},
	{
		"desc": "Link containing an ampersand",
		"wikitext": "[[Foo & bar]]\n\n[[Foo &amp; bar]]\n\n[[Foo &amp;amp; bar]]",
		"html": "<p><a href=\"/wiki/Foo_%26_bar\" title=\"Foo &amp; bar\">Foo &amp; bar</a>\n</p><p><a href=\"/wiki/Foo_%26_bar\" title=\"Foo &amp; bar\">Foo &amp; bar</a>\n</p><p>[[Foo &amp;amp; bar]]\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo &amp; bar</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo &amp;amp; bar</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo &amp;amp;amp; bar</span>]]</span></span>"
	},
	{
		"desc": "Link containing a tilde",
		"wikitext": "[[Foo~bar]]",
		"html": "<p><a href=\"/wiki/Foo~bar\" title=\"Foo~bar\">Foo~bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo~bar</span>]]</span></span>"
	},
	{
		"desc": "Link containing double-single-quotes '' (T6598)",
		"wikitext": "[[Lista d''e paise d''o munno]]",
		"html": "<p><a href=\"/wiki/Lista_d%27%27e_paise_d%27%27o_munno\" title=\"Lista d&#39;&#39;e paise d&#39;&#39;o munno\">Lista d''e paise d''o munno</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Lista d''e paise d''o munno</span>]]</span></span>"
	},
	{
		"desc": "Link containing double quotes and spaces",
		"wikitext": "[[Cool \"Gator\"]]",
		"html": "<p><a href=\"/wiki/Cool_%22Gator%22\" title=\"Cool &quot;Gator&quot;\">Cool \"Gator\"</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Cool \"Gator\"</span>]]</span></span>"
	},
	{
		"desc": "Link containing double-single-quotes '' in text (T6598 check)",
		"wikitext": "Some [[Link|pretty ''italics'' and stuff]]!",
		"html": "<p>Some <a href=\"/wiki/Link\" title=\"Link\">pretty <i>italics</i> and stuff</a>!\n</p>",
		"print": "<span class=\"wpb-root\">Some <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Link</span>|<span class=\"wpb-link-text\">pretty <span class=\"wpb-quote\">''</span>italics<span class=\"wpb-quote\">''</span> and stuff</span>]]</span>!</span>"
	},
	{
		"desc": "Link containing double-single-quotes '' in text embedded in italics (T6598 check)",
		"wikitext": "''Some [[Link|pretty ''italics'' and stuff]]!''",
		"html": "<p><i>Some <a href=\"/wiki/Link\" title=\"Link\">pretty <i>italics</i> and stuff</a>!</i>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-quote\">''</span>Some <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Link</span>|<span class=\"wpb-link-text\">pretty <span class=\"wpb-quote\">''</span>italics<span class=\"wpb-quote\">''</span> and stuff</span>]]</span>!<span class=\"wpb-quote\">''</span></span>"
	},
	{
		"desc": "Link with double quotes in title part (literal) and alternate part (interpreted)",
		"wikitext": "[[File:Denys_Savchenko_''Pentecoste''.jpg]]\n\n[[''Pentecoste'']]\n\n[[''Pentecoste''|Pentecoste]]\n\n[[''Pentecoste''|''Pentecoste'']]",
		"html": "<p><span class=\"mw-default-size\" typeof=\"mw:Error mw:File\"><a href=\"/index.php?title=Special:Upload&amp;wpDestFile=Denys_Savchenko_%27%27Pentecoste%27%27.jpg\" class=\"new\" title=\"File:Denys Savchenko &#39;&#39;Pentecoste&#39;&#39;.jpg\"><span class=\"mw-file-element mw-broken-media\">File:Denys Savchenko <i>Pentecoste</i>.jpg</span></a></span>\n</p><p><a href=\"/wiki/%27%27Pentecoste%27%27\" title=\"&#39;&#39;Pentecoste&#39;&#39;\">''Pentecoste''</a>\n</p><p><a href=\"/wiki/%27%27Pentecoste%27%27\" title=\"&#39;&#39;Pentecoste&#39;&#39;\">Pentecoste</a>\n</p><p><a href=\"/wiki/%27%27Pentecoste%27%27\" title=\"&#39;&#39;Pentecoste&#39;&#39;\"><i>Pentecoste</i></a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-file\">[[<span class=\"wpb-link-target\">File:Denys_Savchenko_''Pentecoste''.jpg</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">''Pentecoste''</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">''Pentecoste''</span>|<span class=\"wpb-link-text\">Pentecoste</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">''Pentecoste''</span>|<span class=\"wpb-link-text\"><span class=\"wpb-quote\">''</span>Pentecoste<span class=\"wpb-quote\">''</span></span>]]</span></span>"
	},
	{
		"desc": "Plain link to URL",
		"wikitext": "[[http://www.example.com]]",
		"html": "<p>[<a rel=\"nofollow\" class=\"external autonumber\" href=\"http://www.example.com\">[1]</a>]\n</p>",
		"print": "<span class=\"wpb-root\">[<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://www.example.com</span>]</span>]</span>"
	},
	{
		"desc": "Plain link to URL with link text",
		"wikitext": "[[http://www.example.com Link text]]",
		"html": "<p>[<a rel=\"nofollow\" class=\"external text\" href=\"http://www.example.com\">Link text</a>]\n</p>",
		"print": "<span class=\"wpb-root\">[<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://www.example.com</span> <span class=\"wpb-ext-link-text\">Link text</span>]</span>]</span>"
	},
	{
		"desc": "Plain link to URL containing special characters, with link text (see T213950).",
		"wikitext": "[[http://www.example.com/?q=%7Babc%7D Link text]]",
		"html": "<p>[<a rel=\"nofollow\" class=\"external text\" href=\"http://www.example.com/?q=%7Babc%7D\">Link text</a>]\n</p>",
		"print": "<span class=\"wpb-root\">[<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://www.example.com/?q=%7Babc%7D</span> <span class=\"wpb-ext-link-text\">Link text</span>]</span>]</span>"
	},
	{
		"desc": "Plain link to protocol-relative URL",
		"wikitext": "[[//www.example.com]]",
		"html": "<p>[<a rel=\"nofollow\" class=\"external autonumber\" href=\"//www.example.com\">[1]</a>]\n</p>",
		"print": "<span class=\"wpb-root\">[<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">//www.example.com</span>]</span>]</span>"
	},
	{
		"desc": "Plain link to protocol-relative URL with link text",
		"wikitext": "[[//www.example.com Link text]]",
		"html": "<p>[<a rel=\"nofollow\" class=\"external text\" href=\"//www.example.com\">Link text</a>]\n</p>",
		"print": "<span class=\"wpb-root\">[<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">//www.example.com</span> <span class=\"wpb-ext-link-text\">Link text</span>]</span>]</span>"
	},
	{
		"desc": "Plain link to page with question mark in title",
		"wikitext": "[[A?b]]\n\n[[A?b|Baz]]",
		"html": "<p><a href=\"/wiki/A%3Fb\" title=\"A?b\">A?b</a>\n</p><p><a href=\"/wiki/A%3Fb\" title=\"A?b\">Baz</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">A?b</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">A?b</span>|<span class=\"wpb-link-text\">Baz</span>]]</span></span>"
	},
	{
		"desc": "Piped link to URL",
		"wikitext": "Piped link to URL: [[http://www.example.com|an example URL]]",
		"html": "<p>Piped link to URL: [<a rel=\"nofollow\" class=\"external text\" href=\"http://www.example.com%7Can\">example URL</a>]\n</p>",
		"print": "<span class=\"wpb-root\">Piped link to URL: [<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://www.example.com|an</span> <span class=\"wpb-ext-link-text\">example URL</span>]</span>]</span>"
	},
	{
		"desc": "T2002: [[page|http://url/]] should link to page, not http://url/",
		"wikitext": "[[Main Page|http://url/]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">http://url/</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">http://url/</span>]]</span></span>"
	},
	{
		"desc": "<nowiki> inside a link",
		"wikitext": "[[Main<nowiki> Page</nowiki>]] [[Main Page|the main page <nowiki>[it's not very good]</nowiki>]]",
		"html": "<p>[[Main Page]] <a href=\"/wiki/Main_Page\" title=\"Main Page\">the main page [it's not very good]</a>\n</p>",
		"print": "<span class=\"wpb-root\">[[Main<span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\"> Page</span>&lt;/nowiki&gt;</span>]] <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">the main page <span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">[it's not very good]</span>&lt;/nowiki&gt;</span></span>]]</span></span>"
	},
	{
		"desc": "<pre> inside a link",
		"wikitext": "[[Main<pre> Page</pre>]] [[Main Page|the main page <pre>[it's not very good]</pre>]]",
		"html": "<p>[[Main</p><pre> Page</pre><p>]] <a href=\"/wiki/Main_Page\" title=\"Main Page\">the main page </a></p><a href=\"/wiki/Main_Page\" title=\"Main Page\"><pre>[it's not very good]</pre></a>",
		"print": "<span class=\"wpb-root\">[[Main<span class=\"wpb-ext\">&lt;pre&gt;<span class=\"wpb-ext-inner\"> Page</span>&lt;/pre&gt;</span>]] <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">the main page <span class=\"wpb-ext\">&lt;pre&gt;<span class=\"wpb-ext-inner\">[it's not very good]</span>&lt;/pre&gt;</span></span>]]</span></span>"
	},
	{
		"desc": "Non-breaking spaces in title",
		"wikitext": "[[&nbsp; Main &nbsp; Page &nbsp;]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">&#160; Main &#160; Page &#160;</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">&amp;nbsp; Main &amp;nbsp; Page &amp;nbsp;</span>]]</span></span>"
	},
	{
		"desc": "Link with multiple \":\" in a subpage-supporting namespace (T65636)",
		"wikitext": "[[User:Foo/Test/63636:Bar|Test]]",
		"html": "<p><a href=\"/wiki/User:Foo/Test/63636:Bar\" title=\"User:Foo/Test/63636:Bar\">Test</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">User:Foo/Test/63636:Bar</span>|<span class=\"wpb-link-text\">Test</span>]]</span></span>"
	},
	{
		"desc": "1. Interaction of linktrail and template encapsulation",
		"wikitext": "{{1x|[[Foo]]}}l\n\n{{1x|[[Foo]]l}}\n\n{{1x|[[Foo]]l}}s\n\n{{1x|[[Foo]]<span>ls</span>}}\n\n[[{{1x|Foo}}]]l",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">Fool</a>\n</p><p><a href=\"/wiki/Foo\" title=\"Foo\">Fool</a>\n</p><p><a href=\"/wiki/Foo\" title=\"Foo\">Fools</a>\n</p><p><a href=\"/wiki/Foo\" title=\"Foo\">Foo</a><span>ls</span>\n</p><p><a href=\"/wiki/Foo\" title=\"Foo\">Fool</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>]]</span></span></span>}}</span>l\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>]]</span>l</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>]]</span>l</span></span>}}</span>s\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>]]</span><span class=\"wpb-html\">&lt;span&gt;</span>ls<span class=\"wpb-html\">&lt;/span&gt;</span></span></span>}}</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span></span>]]</span>l</span>"
	},
	{
		"desc": "2. Interaction of linktrail and template encapsulation",
		"wikitext": "{{1x|Some [[Fool]]}}s",
		"html": "<p>Some <a href=\"/wiki/Fool\" title=\"Fool\">Fools</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Some <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Fool</span>]]</span></span></span>}}</span>s</span>"
	},
	{
		"desc": "3. Interaction of linktrail and template encapsulation",
		"wikitext": "{{1x|Some [[Fool]]s are '''bold and foolish'''}}",
		"html": "<p>Some <a href=\"/wiki/Fool\" title=\"Fool\">Fools</a> are <b>bold and foolish</b>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Some <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Fool</span>]]</span>s are <span class=\"wpb-quote\">'''</span>bold and foolish<span class=\"wpb-quote\">'''</span></span></span>}}</span></span>"
	},
	{
		"desc": "Parsoid-centric test: Whitespace in ext- and wiki-links should be preserved",
		"wikitext": "[[Foo|  bar]]\n\n[[Foo|  ''bar'']]\n\n[http://wp.org   foo]\n\n[http://wp.org   ''foo'']",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">  bar</a>\n</p><p><a href=\"/wiki/Foo\" title=\"Foo\">  <i>bar</i></a>\n</p><p><a rel=\"nofollow\" class=\"external text\" href=\"http://wp.org\">foo</a>\n</p><p><a rel=\"nofollow\" class=\"external text\" href=\"http://wp.org\"><i>foo</i></a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">  bar</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">  <span class=\"wpb-quote\">''</span>bar<span class=\"wpb-quote\">''</span></span>]]</span>\n\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://wp.org</span>   <span class=\"wpb-ext-link-text\">foo</span>]</span>\n\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://wp.org</span>   <span class=\"wpb-ext-link-text\"><span class=\"wpb-quote\">''</span>foo<span class=\"wpb-quote\">''</span></span>]</span></span>"
	},
	{
		"desc": "Link with angle bracket after anchor",
		"wikitext": "[[Foo#<bar>]]",
		"html": "<p><a href=\"/wiki/Foo#&lt;bar&gt;\" title=\"Foo\">Foo#&lt;bar&gt;</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo#&lt;bar&gt;</span>]]</span></span>"
	},
	{
		"desc": "Link with angle bracket after anchor (legacy)",
		"wikitext": "[[Foo#<bar>]]",
		"html": "<p><a href=\"/wiki/Foo#.3Cbar.3E\" title=\"Foo\">Foo#&lt;bar&gt;</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo#&lt;bar&gt;</span>]]</span></span>"
	},
	{
		"desc": "Wikilink in wikilink",
		"wikitext": "[[Hi|[[Ho]]]]",
		"html": "<p>[[Hi|<a href=\"/wiki/Ho\" title=\"Ho\">Ho</a>]]\n</p>",
		"print": "<span class=\"wpb-root\">[[Hi|<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Ho</span>]]</span>]]</span>"
	},
	{
		"desc": "<br> to <br />",
		"wikitext": "1<br>2<br />3",
		"html": "<p>1<br />2<br />3\n</p>",
		"print": "<span class=\"wpb-root\">1<span class=\"wpb-html\">&lt;br&gt;</span>2<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>3</span>"
	},
	{
		"desc": "Incorrecly removing closing slashes from correctly formed XHTML",
		"wikitext": "<br style=\"clear:both;\" />",
		"html": "<p><br style=\"clear:both;\" />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">clear:both;</span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span></span>"
	},
	{
		"desc": "Failing to transform badly formed HTML into correct XHTML",
		"wikitext": "<br style=\"clear: left;\">\n<br style=\"clear: right;\">\n<br style=\"clear: both;\">",
		"html": "<p><br style=\"clear: left;\" />\n<br style=\"clear: right;\" />\n<br style=\"clear: both;\" />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">clear: left;</span>\"</span></span>&gt;</span>\n<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">clear: right;</span>\"</span></span>&gt;</span>\n<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">clear: both;</span>\"</span></span>&gt;</span></span>"
	},
	{
		"desc": "Handling html with a div self-closing tag",
		"wikitext": "<div title />\n<div title/>\n<div title/ >\n<div title=bar />\n<div title=bar/>\n<div title=bar/ >",
		"html": "<div title=\"\">\n<div title=\"\">\n<div title=\"\">\n<div title=\"bar\">\n<div title=\"bar\">\n<div title=\"bar/\"></div></div></div></div></div></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span></span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span></span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span></span><span class=\"wpb-attr-dirty\">/ </span></span>&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=<span class=\"wpb-attr-value\">bar</span></span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=<span class=\"wpb-attr-value\">bar</span></span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=<span class=\"wpb-attr-value\">bar/</span></span><span class=\"wpb-attr-dirty\"> </span></span>&gt;</span></span>"
	},
	{
		"desc": "Handling html with a br self-closing tag",
		"wikitext": "<br title />\n<br title/>\n<br title/ >\n<br title=bar />\n<br title=bar/>\n<br title=bar/ >",
		"html": "<p><br title=\"\" />\n<br title=\"\" />\n<br title=\"\" />\n<br title=\"bar\" />\n<br title=\"bar\" />\n<br title=\"bar/\" />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span></span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span></span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span></span><span class=\"wpb-attr-dirty\">/ </span></span>&gt;</span>\n<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=<span class=\"wpb-attr-value\">bar</span></span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=<span class=\"wpb-attr-value\">bar</span></span></span>/&gt;</span>\n<span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=<span class=\"wpb-attr-value\">bar/</span></span><span class=\"wpb-attr-dirty\"> </span></span>&gt;</span></span>"
	},
	{
		"desc": "Horizontal ruler (should it add that extra space?)",
		"wikitext": "<hr>\n<hr >\nfoo <hr\n> bar",
		"html": "<hr />\n<hr /><p>\nfoo </p><hr /><p> bar</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;hr&gt;</span>\n<span class=\"wpb-html\">&lt;hr<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span></span>&gt;</span>\nfoo <span class=\"wpb-html\">&lt;hr<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\">\n</span></span>&gt;</span> bar</span>"
	},
	{
		"desc": "Horizontal ruler -- 4+ dashes render hr",
		"wikitext": "----",
		"html": "<hr />",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-hr\">----</span></span>"
	},
	{
		"desc": "Horizontal ruler -- eats additional dashes on the same line",
		"wikitext": "---------",
		"html": "<hr />",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-hr\">---------</span></span>"
	},
	{
		"desc": "Horizontal ruler -- does not collapse dashes on consecutive lines",
		"wikitext": "----\n----",
		"html": "<hr />\n<hr />",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-hr\">----</span>\n<span class=\"wpb-hr\">----</span></span>"
	},
	{
		"desc": "Horizontal ruler -- <4 dashes render as plain text",
		"wikitext": "---",
		"html": "<p>---\n</p>",
		"print": "<span class=\"wpb-root\">---</span>"
	},
	{
		"desc": "Horizontal ruler -- Supports content following dashes on same line",
		"wikitext": "---- Foo",
		"html": "<hr /><p> Foo</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-hr\">----</span> Foo</span>"
	},
	{
		"desc": "Common list",
		"wikitext": "*Common list\n*item 2\n*item 3",
		"html": "<ul><li>Common list</li>\n<li>item 2</li>\n<li>item 3</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>Common list\n<span class=\"wpb-list\">*</span>item 2\n<span class=\"wpb-list\">*</span>item 3</span>"
	},
	{
		"desc": "Numbered list",
		"wikitext": "#Numbered list\n#item 2\n#item 3",
		"html": "<ol><li>Numbered list</li>\n<li>item 2</li>\n<li>item 3</li></ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">#</span>Numbered list\n<span class=\"wpb-list\">#</span>item 2\n<span class=\"wpb-list\">#</span>item 3</span>"
	},
	{
		"desc": "Mixed list",
		"wikitext": "*Mixed list\n*#with numbers\n**and bullets\n*#and numbers\n*bullets again\n**bullet level 2\n***bullet level 3\n***#Number on level 4\n**bullet level 2\n**#Number on level 3\n**#Number on level 3\n*#number level 2\n*Level 1\n***Level 3\n#**Level 3, but ordered",
		"html": "<ul><li>Mixed list\n<ol><li>with numbers</li></ol>\n<ul><li>and bullets</li></ul>\n<ol><li>and numbers</li></ol></li>\n<li>bullets again\n<ul><li>bullet level 2\n<ul><li>bullet level 3\n<ol><li>Number on level 4</li></ol></li></ul></li>\n<li>bullet level 2\n<ol><li>Number on level 3</li>\n<li>Number on level 3</li></ol></li></ul>\n<ol><li>number level 2</li></ol></li>\n<li>Level 1\n<ul><li><ul><li>Level 3</li></ul></li></ul></li></ul>\n<ol><li><ul><li><ul><li>Level 3, but ordered</li></ul></li></ul></li></ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>Mixed list\n<span class=\"wpb-list\">*#</span>with numbers\n<span class=\"wpb-list\">**</span>and bullets\n<span class=\"wpb-list\">*#</span>and numbers\n<span class=\"wpb-list\">*</span>bullets again\n<span class=\"wpb-list\">**</span>bullet level 2\n<span class=\"wpb-list\">***</span>bullet level 3\n<span class=\"wpb-list\">***#</span>Number on level 4\n<span class=\"wpb-list\">**</span>bullet level 2\n<span class=\"wpb-list\">**#</span>Number on level 3\n<span class=\"wpb-list\">**#</span>Number on level 3\n<span class=\"wpb-list\">*#</span>number level 2\n<span class=\"wpb-list\">*</span>Level 1\n<span class=\"wpb-list\">***</span>Level 3\n<span class=\"wpb-list\">#**</span>Level 3, but ordered</span>"
	},
	{
		"desc": "1. Nested mixed wikitext and html list",
		"wikitext": "*hi\n*<ul><li>ho</li></ul>\n*hi\n**ho",
		"html": "<ul><li>hi</li>\n<li><ul><li>ho</li></ul></li>\n<li>hi\n<ul><li>ho</li></ul></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>hi\n<span class=\"wpb-list\">*</span><span class=\"wpb-html\">&lt;ul&gt;</span><span class=\"wpb-html\">&lt;li&gt;</span>ho<span class=\"wpb-html\">&lt;/li&gt;</span><span class=\"wpb-html\">&lt;/ul&gt;</span>\n<span class=\"wpb-list\">*</span>hi\n<span class=\"wpb-list\">**</span>ho</span>"
	},
	{
		"desc": "2. Nested mixed wikitext and html list (incompatible)",
		"wikitext": ";hi\n:{{1x|<li>ho</li>}}",
		"html": "<dl><dt>hi</dt>\n<dd><li>ho</li></dd></dl>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">;</span>hi\n<span class=\"wpb-list\">:</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;li&gt;</span>ho<span class=\"wpb-html\">&lt;/li&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "Nested lists 1",
		"wikitext": "*foo\n**bar",
		"html": "<ul><li>foo\n<ul><li>bar</li></ul></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>foo\n<span class=\"wpb-list\">**</span>bar</span>"
	},
	{
		"desc": "Nested lists 2",
		"wikitext": "**foo\n*bar",
		"html": "<ul><li><ul><li>foo</li></ul></li>\n<li>bar</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">**</span>foo\n<span class=\"wpb-list\">*</span>bar</span>"
	},
	{
		"desc": "Nested lists 3 (first element empty)",
		"wikitext": "*\n**bar",
		"html": "<ul><li>\n<ul><li>bar</li></ul></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>\n<span class=\"wpb-list\">**</span>bar</span>"
	},
	{
		"desc": "Nested lists 4 (first element empty)",
		"wikitext": "**\n*bar",
		"html": "<ul><li><ul><li class=\"mw-empty-elt\"></li></ul></li>\n<li>bar</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">**</span>\n<span class=\"wpb-list\">*</span>bar</span>"
	},
	{
		"desc": "Nested lists 5 (both elements empty)",
		"wikitext": "**\n*",
		"html": "<ul><li><ul><li class=\"mw-empty-elt\"></li></ul></li>\n<li class=\"mw-empty-elt\"></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">**</span>\n<span class=\"wpb-list\">*</span></span>"
	},
	{
		"desc": "Nested lists 6 (both elements empty)",
		"wikitext": "*\n**",
		"html": "<ul><li>\n<ul><li class=\"mw-empty-elt\"></li></ul></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>\n<span class=\"wpb-list\">**</span></span>"
	},
	{
		"desc": "Nested lists 7 (skip initial nesting levels)",
		"wikitext": "***foo",
		"html": "<ul><li><ul><li><ul><li>foo</li></ul></li></ul></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">***</span>foo</span>"
	},
	{
		"desc": "Nested lists 8 (multiple nesting transitions)",
		"wikitext": "*foo\n***bar\n**baz\n*boo",
		"html": "<ul><li>foo\n<ul><li><ul><li>bar</li></ul></li>\n<li>baz</li></ul></li>\n<li>boo</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>foo\n<span class=\"wpb-list\">***</span>bar\n<span class=\"wpb-list\">**</span>baz\n<span class=\"wpb-list\">*</span>boo</span>"
	},
	{
		"desc": "1. Lists with start-of-line-transparent tokens before bullets: Comments",
		"wikitext": "*foo\n*<!--cmt-->bar\n<!--cmt-->*baz",
		"html": "<ul><li>foo</li>\n<li>bar</li>\n<li>baz</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>foo\n<span class=\"wpb-list\">*</span><span class=\"wpb-comment\">&lt;!--cmt--&gt;</span>bar\n<span class=\"wpb-comment\">&lt;!--cmt--&gt;</span><span class=\"wpb-list\">*</span>baz</span>"
	},
	{
		"desc": "2. Lists with start-of-line-transparent tokens before bullets: Template close",
		"wikitext": "*foo {{1x|bar\n}}*baz",
		"html": "<ul><li>foo bar</li>\n<li>baz</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>foo <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar\n</span></span>}}</span>*baz</span>"
	},
	{
		"desc": "List items are not parsed correctly following a <pre> block (T2785)",
		"wikitext": "*<pre>foo</pre>\n*<pre>bar</pre>\n*zar",
		"html": "<ul><li><pre>foo</pre></li>\n<li><pre>bar</pre></li>\n<li>zar</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span><span class=\"wpb-ext\">&lt;pre&gt;<span class=\"wpb-ext-inner\">foo</span>&lt;/pre&gt;</span>\n<span class=\"wpb-list\">*</span><span class=\"wpb-ext\">&lt;pre&gt;<span class=\"wpb-ext-inner\">bar</span>&lt;/pre&gt;</span>\n<span class=\"wpb-list\">*</span>zar</span>"
	},
	{
		"desc": "List items from template",
		"wikitext": "\n{{inner list}}\n*item 2\n\n*item 0\n{{inner list}}\n*item 2\n\n*item 0\n*notSOL{{inner list}}\n*item 2",
		"html": "<ul><li>item 1</li>\n<li>item 2</li></ul>\n<ul><li>item 0</li>\n<li>item 1</li>\n<li>item 2</li></ul>\n<ul><li>item 0</li>\n<li>notSOL</li>\n<li>item 1</li>\n<li>item 2</li></ul>",
		"print": "<span class=\"wpb-root\">\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">inner list</span>}}</span>\n<span class=\"wpb-list\">*</span>item 2\n\n<span class=\"wpb-list\">*</span>item 0\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">inner list</span>}}</span>\n<span class=\"wpb-list\">*</span>item 2\n\n<span class=\"wpb-list\">*</span>item 0\n<span class=\"wpb-list\">*</span>notSOL<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">inner list</span>}}</span>\n<span class=\"wpb-list\">*</span>item 2</span>"
	},
	{
		"desc": "List interrupted by empty line or heading",
		"wikitext": "*foo\n\n**bar\n==A heading==\n*Another list item",
		"html": "<ul><li>foo</li></ul>\n<ul><li><ul><li>bar</li></ul></li></ul>\n<h2><span class=\"mw-headline\" id=\"A_heading\">A heading</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: A heading\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<ul><li>Another list item</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>foo\n\n<span class=\"wpb-list\">**</span>bar\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">A heading</span>==</span>\n<span class=\"wpb-list\">*</span>Another list item</span>"
	},
	{
		"desc": "Multiple list tags generated by templates",
		"wikitext": "{{1x|<li>}}a\n{{1x|<li>}}b\n{{1x|<li>}}c",
		"html": "<li>a\n</li><li>b\n</li><li>c</li>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;li&gt;</span></span></span>}}</span>a\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;li&gt;</span></span></span>}}</span>b\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;li&gt;</span></span></span>}}</span>c</span>"
	},
	{
		"desc": "Multiple newlines in between HTML list items don't induce paragraph wrapping",
		"wikitext": "<ul>\n<li>hi</li>\n\n\n\n\n<li>ho</li>\n</ul>\n\n<dl>\n<dt>hi</dt>\n<dd>ho<div>123</div>\n</dd>\n\n\n</dl>",
		"html": "<ul>\n<li>hi</li>\n\n\n\n\n<li>ho</li>\n</ul>\n<dl>\n<dt>hi</dt>\n<dd>ho<div>123</div>\n</dd>\n\n\n</dl>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ul&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>hi<span class=\"wpb-html\">&lt;/li&gt;</span>\n\n\n\n\n<span class=\"wpb-html\">&lt;li&gt;</span>ho<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ul&gt;</span>\n\n<span class=\"wpb-html\">&lt;dl&gt;</span>\n<span class=\"wpb-html\">&lt;dt&gt;</span>hi<span class=\"wpb-html\">&lt;/dt&gt;</span>\n<span class=\"wpb-html\">&lt;dd&gt;</span>ho<span class=\"wpb-html\">&lt;div&gt;</span>123<span class=\"wpb-html\">&lt;/div&gt;</span>\n<span class=\"wpb-html\">&lt;/dd&gt;</span>\n\n\n<span class=\"wpb-html\">&lt;/dl&gt;</span></span>"
	},
	{
		"desc": "Single-comment whitespace lines dont break lists, and neither do multi-comment whitespace lines",
		"wikitext": "*a\n<!--This line will NOT split the list-->\n*b\n <!--This line will NOT split the list either-->\n*c\n <!--foo--> <!----> <!--This line NOT split the list either--> \n*d",
		"html": "<ul><li>a</li>\n<li>b</li>\n<li>c</li>\n<li>d</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>a\n<span class=\"wpb-comment\">&lt;!--This line will NOT split the list--&gt;</span>\n<span class=\"wpb-list\">*</span>b\n <span class=\"wpb-comment\">&lt;!--This line will NOT split the list either--&gt;</span>\n<span class=\"wpb-list\">*</span>c\n <span class=\"wpb-comment\">&lt;!--foo--&gt;</span> <span class=\"wpb-comment\">&lt;!----&gt;</span> <span class=\"wpb-comment\">&lt;!--This line NOT split the list either--&gt;</span> \n<span class=\"wpb-list\">*</span>d</span>"
	},
	{
		"desc": "Replacing whitespace with tabs still doesn't break the list (gerrit 78327)",
		"wikitext": "*a\n<!--This line will NOT split the list-->\t\n*b\n\t<!--This line will NOT split the list either--> \t\n*c\n\t<!--foo--> <!---->\t<!--This line NOT split the list\n        either-->\t \n*d",
		"html": "<ul><li>a</li>\n<li>b</li>\n<li>c</li>\n<li>d</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>a\n<span class=\"wpb-comment\">&lt;!--This line will NOT split the list--&gt;</span>\t\n<span class=\"wpb-list\">*</span>b\n\t<span class=\"wpb-comment\">&lt;!--This line will NOT split the list either--&gt;</span> \t\n<span class=\"wpb-list\">*</span>c\n\t<span class=\"wpb-comment\">&lt;!--foo--&gt;</span> <span class=\"wpb-comment\">&lt;!----&gt;</span>\t<span class=\"wpb-comment\">&lt;!--This line NOT split the list\n        either--&gt;</span>\t \n<span class=\"wpb-list\">*</span>d</span>"
	},
	{
		"desc": "Parsoid: Make sure nested lists are serialized on their own line even if HTML contains no newlines",
		"wikitext": "#foo\n##bar\n\n*foo\n**bar\n\n:foo\n::bar",
		"html": "<ol><li>foo\n<ol><li>bar</li></ol></li></ol>\n<ul><li>foo\n<ul><li>bar</li></ul></li></ul>\n<dl><dd>foo\n<dl><dd>bar</dd></dl></dd></dl>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">#</span>foo\n<span class=\"wpb-list\">##</span>bar\n\n<span class=\"wpb-list\">*</span>foo\n<span class=\"wpb-list\">**</span>bar\n\n<span class=\"wpb-list\">:</span>foo\n<span class=\"wpb-list\">::</span>bar</span>"
	},
	{
		"desc": "Unbalanced closing block tags break a list",
		"wikitext": "<div>\n*a</div><div>\n*b</div>",
		"html": "<div>\n<ul><li>a</li></ul></div><div>\n<li>b</li></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span>\n<span class=\"wpb-list\">*</span>a<span class=\"wpb-html\">&lt;/div&gt;</span><span class=\"wpb-html\">&lt;div&gt;</span>\n<span class=\"wpb-list\">*</span>b<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Unbalanced closing wikitext block tags break a list",
		"wikitext": "<p>\n*a</p><p>\n*b</p>",
		"html": "<p class=\"mw-empty-elt\">\n</p><ul><li>a<p class=\"mw-empty-elt\"></p><p class=\"mw-empty-elt\"></p></li>\n<li>b<p class=\"mw-empty-elt\"></p></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;p&gt;</span>\n<span class=\"wpb-list\">*</span>a<span class=\"wpb-html\">&lt;/p&gt;</span><span class=\"wpb-html\">&lt;p&gt;</span>\n<span class=\"wpb-list\">*</span>b<span class=\"wpb-html\">&lt;/p&gt;</span></span>"
	},
	{
		"desc": "1. List embedded in a formatting tag",
		"wikitext": "<small>\n*foo\n</small>",
		"html": "<p><small>\n</small></p><small><ul><li>foo</li></ul></small><small></small><p><small></small>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;small&gt;</span>\n<span class=\"wpb-list\">*</span>foo\n<span class=\"wpb-html\">&lt;/small&gt;</span></span>"
	},
	{
		"desc": "2. List embedded in a formatting tag in a misnested way",
		"wikitext": "<small>\n*a\n*b</small>",
		"html": "<p><small>\n</small></p><small></small><ul><small><li>a</li>\n</small><li><small>b</small></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;small&gt;</span>\n<span class=\"wpb-list\">*</span>a\n<span class=\"wpb-list\">*</span>b<span class=\"wpb-html\">&lt;/small&gt;</span></span>"
	},
	{
		"desc": "3. List embedded in a formatting tag in a misnested way",
		"wikitext": "<small>\n\n** 123</small>",
		"html": "<p><small>\n</small></p><small></small><ul><small></small><li><small></small><ul><small></small><li><small>123</small></li></ul></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;small&gt;</span>\n\n<span class=\"wpb-list\">**</span> 123<span class=\"wpb-html\">&lt;/small&gt;</span></span>"
	},
	{
		"desc": "Parsoid: unknown parser function (T314524)",
		"wikitext": "{{#tag:b|This is a known parser function}}\n\nNow show the unknown parser functions for comparison.\n\n{{#foo}}\n\n{{#foo:bar|bat}}",
		"html": "<p><b>This is a known parser function</b>\n</p><p>Now show the unknown parser functions for comparison.\n</p><p>{{#foo}}\n</p><p>{{#foo:bar|bat}}\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#tag</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">b</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">This is a known parser function</span></span>}}</span>\n\nNow show the unknown parser functions for comparison.\n\n{{#foo}}\n\n{{#foo:bar|bat}}</span>"
	},
	{
		"desc": "Namespace 1 {{ns:1}}",
		"wikitext": "{{ns:1}}",
		"html": "<p>Talk\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">1</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace 1 {{ns:01}}",
		"wikitext": "{{ns:01}}",
		"html": "<p>Talk\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">01</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace 0 {{ns:0}} (T6783)",
		"wikitext": "{{ns:0}}",
		"html": "",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">0</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace 0 {{ns:00}} (T6783)",
		"wikitext": "{{ns:00}}",
		"html": "",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">00</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace -1 {{ns:-1}}",
		"wikitext": "{{ns:-1}}",
		"html": "<p>Special\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">-1</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace User {{ns:User}}",
		"wikitext": "{{ns:User}}",
		"html": "<p>User\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">User</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace User talk {{ns:User_talk}}",
		"wikitext": "{{ns:User_talk}}",
		"html": "<p>User talk\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">User_talk</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace User talk {{ns:uSeR tAlK}}",
		"wikitext": "{{ns:uSeR tAlK}}",
		"html": "<p>User talk\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">uSeR tAlK</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace File {{ns:File}}",
		"wikitext": "{{ns:File}}",
		"html": "<p>File\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">File</span></span>}}</span></span>"
	},
	{
		"desc": "Namespace File {{ns:Image}}",
		"wikitext": "{{ns:Image}}",
		"html": "<p>File\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">ns</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Image</span></span>}}</span></span>"
	},
	{
		"desc": "Urlencode",
		"wikitext": "{{urlencode:hi world?!}}\n{{urlencode:hi world?!|WIKI}}\n{{urlencode:hi world?!|PATH}}\n{{urlencode:hi world?!|QUERY}}",
		"html": "<p>hi+world%3F%21\nhi_world%3F!\nhi%20world%3F%21\nhi+world%3F%21\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">hi world?!</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">hi world?!</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">WIKI</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">hi world?!</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">PATH</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">hi world?!</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">QUERY</span></span>}}</span></span>"
	},
	{
		"desc": "__proto__ is treated as normal wikitext (T105997)",
		"wikitext": "__proto__",
		"html": "<p>__proto__\n</p>",
		"print": "<span class=\"wpb-root\">__proto__</span>"
	},
	{
		"desc": "Template titles with entities in them",
		"wikitext": "*{{Foo‚Äìbar}}\n*{{Foo&ndash;bar}}",
		"html": "<ul><li>foo</li>\n<li>foo</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Foo‚Äìbar</span>}}</span>\n<span class=\"wpb-list\">*</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Foo&amp;ndash;bar</span>}}</span></span>"
	},
	{
		"desc": "Nonexistent template",
		"wikitext": "{{thistemplatedoesnotexist}}",
		"html": "<p><a href=\"/index.php?title=Template:Thistemplatedoesnotexist&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Template:Thistemplatedoesnotexist (page does not exist)\">Template:Thistemplatedoesnotexist</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">thistemplatedoesnotexist</span>}}</span></span>"
	},
	{
		"desc": "Template with invalid target containing tags",
		"wikitext": "{{a<b>b</b>|{{1x|foo}}|{{1x|a}}={{1x|b}}|a = b}}",
		"html": "<p>{{a<b>b</b>|foo|a=b|a = b}}\n</p>",
		"print": "<span class=\"wpb-root\">{{a<span class=\"wpb-html\">&lt;b&gt;</span>b<span class=\"wpb-html\">&lt;/b&gt;</span>|<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span>|<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">a</span></span>}}</span>=<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">b</span></span>}}</span>|a = b}}</span>"
	},
	{
		"desc": "Template with invalid target containing wikilink",
		"wikitext": "{{[[Main Page]]}}",
		"html": "<p>{{<a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>}}\n</p>",
		"print": "<span class=\"wpb-root\">{{<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>}}</span>"
	},
	{
		"desc": "Simple template",
		"wikitext": "{{test}}",
		"html": "<p>This is a test template\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">test</span>}}</span></span>"
	},
	{
		"desc": "Template with explicit namespace",
		"wikitext": "{{Template:test}}",
		"html": "<p>This is a test template\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Template:test</span>}}</span></span>"
	},
	{
		"desc": "Template parameter",
		"wikitext": "{{paramtest|param=foo}}",
		"html": "<p>This is a test template with parameter foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">paramtest</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">param</span>=<span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Template unnamed parameter",
		"wikitext": "{{paramtestnum|Main Page|the main page}}",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">the main page</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">paramtestnum</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Main Page</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">the main page</span></span>}}</span></span>"
	},
	{
		"desc": "Template with template name as unnamed argument",
		"wikitext": "{{templateasargtestnum|templatesimple}}",
		"html": "<p>(test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">templateasargtestnum</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">templatesimple</span></span>}}</span></span>"
	},
	{
		"desc": "Template with template name as argument",
		"wikitext": "{{templateasargtest|templ=simple}}",
		"html": "<p>(test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">templateasargtest</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">templ</span>=<span class=\"wpb-parameter-value\">simple</span></span>}}</span></span>"
	},
	{
		"desc": "Template with template name as argument (2)",
		"wikitext": "{{templateasargtest2|templ=templatesimple}}",
		"html": "<p>(test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">templateasargtest2</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">templ</span>=<span class=\"wpb-parameter-value\">templatesimple</span></span>}}</span></span>"
	},
	{
		"desc": "Template with default value",
		"wikitext": "{{templateasargtestdefault}}",
		"html": "<p>(test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">templateasargtestdefault</span>}}</span></span>"
	},
	{
		"desc": "Template with default value (value set)",
		"wikitext": "{{templateasargtestdefault|templ=templa}}",
		"html": "<p><b>templ</b>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">templateasargtestdefault</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">templ</span>=<span class=\"wpb-parameter-value\">templa</span></span>}}</span></span>"
	},
	{
		"desc": "Template redirect",
		"wikitext": "{{templateredirect}}",
		"html": "<p>(test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">templateredirect</span>}}</span></span>"
	},
	{
		"desc": "Template with argument in separate line",
		"wikitext": "{{ templateasargtest  |\n templ = simple }}",
		"html": "<p>(test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\"> templateasargtest  </span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">\n templ </span>=<span class=\"wpb-parameter-value\"> simple </span></span>}}</span></span>"
	},
	{
		"desc": "Template with complex template as argument",
		"wikitext": "{{paramtest|\n  param ={{ templateasargtest  |\n templ = simple }}}}",
		"html": "<p>This is a test template with parameter (test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">paramtest</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">\n  param </span>=<span class=\"wpb-parameter-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\"> templateasargtest  </span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">\n templ </span>=<span class=\"wpb-parameter-value\"> simple </span></span>}}</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates with templated name",
		"wikitext": "{{{{1x|1x}}|foo}}\n{{{{1x|inner list}} }}",
		"html": "<p>foo\n</p>\n<ul><li>item 1</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">1x</span></span>}}</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">inner list</span></span>}}</span> </span>}}</span></span>"
	},
	{
		"desc": "Template with complex arguments",
		"wikitext": "{{complextemplate|\n  param ={{ templateasargtest  |\n templ = simple }}|[[Template:complextemplate|link]]}}",
		"html": "<p><a href=\"/wiki/Template:Complextemplate\" title=\"Template:Complextemplate\">link</a> This is a test template with parameter (test)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">complextemplate</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">\n  param </span>=<span class=\"wpb-parameter-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\"> templateasargtest  </span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">\n templ </span>=<span class=\"wpb-parameter-value\"> simple </span></span>}}</span></span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Template:complextemplate</span>|<span class=\"wpb-link-text\">link</span>]]</span></span></span>}}</span></span>"
	},
	{
		"desc": "T2553: link with two variables in a piped link",
		"wikitext": "{|\n|[[{{{1}}}|{{{2}}}]]\n|}",
		"html": "<table>\n<tbody><tr>\n<td>[[{{{1}}}|{{{2}}}]]\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">1</span>}}}</span></span>|<span class=\"wpb-link-text\"><span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">2</span>}}}</span></span>]]</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Bail on table cell attribute parsing on wikilink",
		"wikitext": "{|\n|testing [[one|two]] |three||four\n|testing one two |three||four\n|testing=\"[[one|two]]\" |three||four\n|}",
		"html": "<table>\n<tbody><tr>\n<td>testing <a href=\"/wiki/One\" title=\"One\">two</a> |three</td>\n<td>four\n</td>\n<td>three</td>\n<td>four\n</td>\n<td>testing=\"<a href=\"/wiki/One\" title=\"One\">two</a>\" |three</td>\n<td>four\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">testing <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">one</span>|<span class=\"wpb-link-text\">two</span>]]</span> |three</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">||</span><span class=\"wpb-td-inner\">four</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">testing</span></span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">one</span></span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">two</span></span><span class=\"wpb-attr-dirty\"> </span></span>|<span class=\"wpb-td-inner\">three</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">||</span><span class=\"wpb-td-inner\">four</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">testing=\"<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">one</span>|<span class=\"wpb-link-text\">two</span>]]</span>\" |three</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">||</span><span class=\"wpb-td-inner\">four</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Magic variable as template parameter",
		"wikitext": "{{paramtest|param={{SITENAME}}}}",
		"html": "<p>This is a test template with parameter MediaWiki\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">paramtest</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">param</span>=<span class=\"wpb-parameter-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">SITENAME</span>}}</span></span></span>}}</span></span>"
	},
	{
		"desc": "Template parameter as link source",
		"wikitext": "{{linktest|param=Main Page}}",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">link</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">linktest</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">param</span>=<span class=\"wpb-parameter-value\">Main Page</span></span>}}</span></span>"
	},
	{
		"desc": "Template passing argument to another template",
		"wikitext": "{{paramtest2|arg='hmm'}}",
		"html": "<p>including another template, This is a test template with parameter 'hmm'\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">paramtest2</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">arg</span>=<span class=\"wpb-parameter-value\">'hmm'</span></span>}}</span></span>"
	},
	{
		"desc": "Template as link source",
		"wikitext": "[[{{linktest2}}]]\n\n[[{{linktest2}}|Main Page]]\n\n[[{{linktest2}}]]Page",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>\n</p><p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>\n</p><p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>Page\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">linktest2</span>}}</span></span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">linktest2</span>}}</span></span>|<span class=\"wpb-link-text\">Main Page</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">linktest2</span>}}</span></span>]]</span>Page</span>"
	},
	{
		"desc": "Template infinite loop",
		"wikitext": "{{loop1}}",
		"html": "<p><span class=\"error\">Template loop detected: <a href=\"/wiki/Template:Loop1\" title=\"Template:Loop1\">Template:Loop1</a></span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">loop1</span>}}</span></span>"
	},
	{
		"desc": "Template from main namespace",
		"wikitext": "{{:Main Page}}",
		"html": "<p>blah blah\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">:Main Page</span>}}</span></span>"
	},
	{
		"desc": "T2529: Template with table, not included at beginning of line",
		"wikitext": "foo {{table}}",
		"html": "<p>foo \n</p>\n<table>\n<tbody><tr>\n<td>1</td>\n<td>2\n</td></tr>\n<tr>\n<td>3</td>\n<td>4\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\">foo <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">table</span>}}</span></span>"
	},
	{
		"desc": "T2523: Template shouldn't eat newline (or add an extra one before table)",
		"wikitext": "foo\n{{table}}",
		"html": "<p>foo\n</p>\n<table>\n<tbody><tr>\n<td>1</td>\n<td>2\n</td></tr>\n<tr>\n<td>3</td>\n<td>4\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\">foo\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">table</span>}}</span></span>"
	},
	{
		"desc": "T2041: Template parameters shown as broken links",
		"wikitext": "{{{parameter}}}",
		"html": "<p>{{{parameter}}}\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">parameter</span>}}}</span></span>"
	},
	{
		"desc": "Templates: Double quotes as template target",
		"wikitext": "foo {{''}} baz",
		"html": "<p>foo bar baz\n</p>",
		"print": "<span class=\"wpb-root\">foo <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">''</span>}}</span> baz</span>"
	},
	{
		"desc": "Templates with intersecting and overlapping ranges",
		"wikitext": "{|{{1x|1=class=\"foo\"\n<p>ha</p>}}\n{|{{1x|1=class=\"bar\"\n<p>ho</p>}}\n{{1x|{{!}}hi}}\n|}",
		"html": "<p>ha</p><table class=\"foo\">\n\n</table><p>ho</p><table class=\"bar\">\n\n<tbody><tr>\n<td>hi\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1</span>=<span class=\"wpb-parameter-value\">class=\"foo\"\n<span class=\"wpb-html\">&lt;p&gt;</span>ha<span class=\"wpb-html\">&lt;/p&gt;</span></span></span>}}</span></span></span></span></span>\n<span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1</span>=<span class=\"wpb-parameter-value\">class=\"bar\"\n<span class=\"wpb-html\">&lt;p&gt;</span>ho<span class=\"wpb-html\">&lt;/p&gt;</span></span></span>}}</span></span></span></span><span class=\"wpb-table-inter\">\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span>hi</span></span>}}</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "msgnw keyword",
		"wikitext": "{{msgnw:MSGNW test}}",
		"html": "<p>&#39;&#39;None&#39;&#39; of &#39;&#39;&#39;this&#39;&#39;&#39; should be \n&#42; interpreted\n&#32;but rather passed unmodified\n&#123;&#123;test&#125;&#125;\n&#60;gallery&#62;\nFile:Foobar.jpg\n&#60;/gallery&#62;\n&#60;!-- comment --&#62;\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">msgnw</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">MSGNW test</span></span>}}</span></span>"
	},
	{
		"desc": "int keyword",
		"wikitext": "{{int:new-messages|lots of money|not!}}",
		"html": "<p>You have lots of money (not!).\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">int</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">new-messages</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">lots of money</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">not!</span></span>}}</span></span>"
	},
	{
		"desc": "int keyword - non-existing message",
		"wikitext": "{{int:var}}",
		"html": "<p>‚ßºvar‚ßΩ\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">int</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">var</span></span>}}</span></span>"
	},
	{
		"desc": "<includeonly> and <noinclude> being included",
		"wikitext": "{{Includes}}",
		"html": "<p>Foobar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Includes</span>}}</span></span>"
	},
	{
		"desc": "<onlyinclude> being included",
		"wikitext": "{{Includes2}}",
		"html": "<p>Foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Includes2</span>}}</span></span>"
	},
	{
		"desc": "<onlyinclude> and <includeonly> being included",
		"wikitext": "{{Includes3}}",
		"html": "<p>Foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Includes3</span>}}</span></span>"
	},
	{
		"desc": "<includeonly> and <noinclude> on a page",
		"wikitext": "Foo<noinclude>zar</noinclude><includeonly>bar</includeonly>",
		"html": "<p>Foozar\n</p>",
		"print": "<span class=\"wpb-root\">Foo<span class=\"wpb-noinclude\">&lt;noinclude&gt;</span>zar<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span><span class=\"wpb-include\">&lt;includeonly&gt;bar&lt;/includeonly&gt;</span></span>"
	},
	{
		"desc": "Un-closed <noinclude>",
		"wikitext": "<noinclude>",
		"html": "",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-noinclude\">&lt;noinclude&gt;</span></span>"
	},
	{
		"desc": "Empty <noinclude>",
		"wikitext": "Hello<noinclude></noinclude>!",
		"html": "<p>Hello!\n</p>",
		"print": "<span class=\"wpb-root\">Hello<span class=\"wpb-noinclude\">&lt;noinclude&gt;</span><span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span>!</span>"
	},
	{
		"desc": "Nested <noinclude>s",
		"wikitext": "<noinclude>\nx\n<noinclude>y</noinclude>\nz\n</noinclude>",
		"html": "<p>x\ny\nz\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-noinclude\">&lt;noinclude&gt;</span>\nx\n<span class=\"wpb-noinclude\">&lt;noinclude&gt;</span>y<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span>\nz\n<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span></span>"
	},
	{
		"desc": "<onlyinclude> on a page",
		"wikitext": "<onlyinclude>Foo</onlyinclude>bar",
		"html": "<p>Foobar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-noinclude\">&lt;onlyinclude&gt;</span>Foo<span class=\"wpb-noinclude\">&lt;/onlyinclude&gt;</span>bar</span>"
	},
	{
		"desc": "Un-closed <onlyinclude>",
		"wikitext": "<onlyinclude>",
		"html": "",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-noinclude\">&lt;onlyinclude&gt;</span></span>"
	},
	{
		"desc": "Self-closed noinclude, includeonly, onlyinclude tags",
		"wikitext": "<noinclude />\n<includeonly />\n<onlyinclude />",
		"html": "<p><br />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-noinclude\">&lt;noinclude /&gt;</span>\n<span class=\"wpb-include\">&lt;includeonly /&gt;</span>\n<span class=\"wpb-noinclude\">&lt;onlyinclude /&gt;</span></span>"
	},
	{
		"desc": "Unbalanced includeonly and noinclude tags",
		"wikitext": "{|\n|a</noinclude>\n|b</noinclude></noinclude>\n|c</noinclude></includeonly>\n|d</includeonly></includeonly>\n|}",
		"html": "<table>\n<tbody><tr>\n<td>a\n</td>\n<td>b\n</td>\n<td>c&lt;/includeonly&gt;\n</td>\n<td>d&lt;/includeonly&gt;&lt;/includeonly&gt;\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">a<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span></span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">b<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span><span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span></span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">c<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span>&lt;/includeonly&gt;</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">d&lt;/includeonly&gt;&lt;/includeonly&gt;</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "T8563: Edit link generation for section shown by <includeonly>",
		"wikitext": "{{includeonly section}}",
		"html": "<h2><span class=\"mw-headline\" id=\"Includeonly_section\">Includeonly section</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Template:Includeonly_section&amp;action=edit&amp;section=T-1\" title=\"Edit section: Includeonly section\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"Section_T-1\">Section T-1</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Template:Includeonly_section&amp;action=edit&amp;section=T-2\" title=\"Edit section: Section T-1\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">includeonly section</span>}}</span></span>"
	},
	{
		"desc": "T8563: Edit link generation for section suppressed by <includeonly>",
		"wikitext": "<includeonly>\n==Includeonly section==\n</includeonly>\n==Section 1==",
		"html": "<h2><span class=\"mw-headline\" id=\"Section_1\">Section 1</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: Section 1\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-include\">&lt;includeonly&gt;\n==Includeonly section==\n&lt;/includeonly&gt;</span>\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Section 1</span>==</span></span>"
	},
	{
		"desc": "Un-closed <includeonly>",
		"wikitext": "<includeonly>",
		"html": "",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-include\">&lt;includeonly&gt;</span></span>"
	},
	{
		"desc": "Parsoid: Merge double tds (T52603)",
		"wikitext": "{|\n|{{1x|{{!}} foo}}\n|}",
		"html": "<table>\n<tbody><tr>\n<td>foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span> foo</span></span>}}</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Parsoid: Merge double tds in nested transclusion content (T52603)",
		"wikitext": "{{1x|<div>}}\n{|\n|{{1x|{{!}} foo}}\n|}\n{{1x|</div>}}",
		"html": "<div>\n<table>\n<tbody><tr>\n<td>foo\n</td></tr></tbody></table>\n</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;div&gt;</span></span></span>}}</span>\n<span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span> foo</span></span>}}</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;/div&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "0. includeonly around the entire attribute",
		"wikitext": "<span <includeonly>id=\"v1\"</includeonly><noinclude>id=\"v2\"</noinclude>>bar</span>",
		"html": "<p><span id=\"v2\">bar</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-include\">&lt;includeonly&gt;id=\"v1\"&lt;/includeonly&gt;</span><span class=\"wpb-noinclude\">&lt;noinclude&gt;</span>id</span>=\"<span class=\"wpb-attr-value\">v2</span>\"</span><span class=\"wpb-attr-dirty\"><span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span></span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "1. includeonly in html attr key",
		"wikitext": "<span <noinclude>id</noinclude><includeonly>about</includeonly>=\"foo\">bar</span>",
		"html": "<p><span id=\"foo\">bar</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-noinclude\">&lt;noinclude&gt;</span>id<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span><span class=\"wpb-include\">&lt;includeonly&gt;about&lt;/includeonly&gt;</span></span>=\"<span class=\"wpb-attr-value\">foo</span>\"</span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "2. includeonly in html attr value",
		"wikitext": "<span id=\"<noinclude>v1</noinclude><includeonly>v2</includeonly>\">bar</span>\n<span id=<noinclude>\"v1\"</noinclude><includeonly>\"v2\"</includeonly>>bar</span>",
		"html": "<p><span id=\"v1\">bar</span>\n<span id=\"v1\">bar</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-noinclude\">&lt;noinclude&gt;</span>v1<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span><span class=\"wpb-include\">&lt;includeonly&gt;v2&lt;/includeonly&gt;</span></span>\"</span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/span&gt;</span>\n<span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=&lt;noinclude&gt;\"<span class=\"wpb-attr-value\">v1</span>\"</span><span class=\"wpb-attr-dirty\"><span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span><span class=\"wpb-include\">&lt;includeonly&gt;\"v2\"&lt;/includeonly&gt;</span></span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "3. includeonly in part of an attr value",
		"wikitext": "<span style=\"color:<noinclude>red</noinclude><includeonly>blue</includeonly>;\">bar</span>",
		"html": "<p><span style=\"color:red;\">bar</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">color:<span class=\"wpb-noinclude\">&lt;noinclude&gt;</span>red<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span><span class=\"wpb-include\">&lt;includeonly&gt;blue&lt;/includeonly&gt;</span>;</span>\"</span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "4. includeonly in table attributes",
		"wikitext": "{|\n|- <noinclude>\n|-\n|a\n</noinclude>\n|- <includeonly>\n|-\n|b\n</includeonly>\n|}",
		"html": "<table>\n\n\n<tbody><tr>\n<td>a\n</td></tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> <span class=\"wpb-noinclude\">&lt;noinclude&gt;</span></span></span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">a\n<span class=\"wpb-noinclude\">&lt;/noinclude&gt;</span></span></span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> <span class=\"wpb-include\">&lt;includeonly&gt;\n|-\n|b\n&lt;/includeonly&gt;</span></span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Table wikitext syntax outside wiki-tables",
		"wikitext": "a\n|+ not a caption\n! not a table heading\n|- not a table row\n| not a table cell\n| class=\"foo bar\" | baz\nb\n|}\n|-\nc",
		"html": "<p>a\n|+ not a caption\n! not a table heading\n|- not a table row\n| not a table cell\n| class=\"foo bar\" | baz\nb\n|}\n|-\nc\n</p>",
		"print": "<span class=\"wpb-root\">a\n|+ not a caption\n! not a table heading\n|- not a table row\n| not a table cell\n| class=\"foo bar\" | baz\nb\n|}\n|-\nc</span>"
	},
	{
		"desc": "Content after <tr> like wikitext should get fully processed",
		"wikitext": "x\n|- [[Foo]] and {{1x|bar}}\ny",
		"html": "<p>x\n|- <a href=\"/wiki/Foo\" title=\"Foo\">Foo</a> and bar\ny\n</p>",
		"print": "<span class=\"wpb-root\">x\n|- <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>]]</span> and <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span>\ny</span>"
	},
	{
		"desc": "P-wrapping should not break after <td>s separated by newlines are converted back to pipes",
		"wikitext": "a\n|b\n\n|c\nd",
		"html": "<p>a\n|b\n</p><p>|c\nd\n</p>",
		"print": "<span class=\"wpb-root\">a\n|b\n\n|c\nd</span>"
	},
	{
		"desc": "Orphaned table row wikitext with templated table for an attribute should not duplicate table",
		"wikitext": "|-{{1x|\n{{{!}}\n{{!}}foo\n{{!}}}\n}}",
		"html": "<p>|-\n</p>\n<table>\n<tbody><tr>\n<td>foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\">|-<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\n<span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span></span><span class=\"wpb-td-inner\">foo</span></span><span class=\"wpb-table-syntax\">\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span>}</span></span>\n</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Template Name/Arg clash: 1. Use of positional param",
		"wikitext": "{{quote|foo}}",
		"html": "<p>foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">quote</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Template Name/Arg clash: 2. Use of named param",
		"wikitext": "{{quote|quote=foo}}",
		"html": "<p>foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">quote</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">quote</span>=<span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: 1. Simple use",
		"wikitext": "{{1x|Foo}}",
		"html": "<p>Foo\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: 2. Inside a block tag",
		"wikitext": "<div>{{1x|Foo}}</div>\n<blockquote>{{1x|Foo}}</blockquote>",
		"html": "<div>Foo</div>\n<blockquote><p>Foo</p></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span><span class=\"wpb-html\">&lt;/div&gt;</span>\n<span class=\"wpb-html\">&lt;blockquote&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span><span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "Templates: P-wrapping: 1a. Templates on consecutive lines",
		"wikitext": "{{1x|Foo}}\n{{1x|bar}}",
		"html": "<p>Foo\nbar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: P-wrapping: 1b. Templates on consecutive lines",
		"wikitext": "Foo\n\n{{1x|bar}}\n{{1x|baz}}",
		"html": "<p>Foo\n</p><p>bar\nbaz\n</p>",
		"print": "<span class=\"wpb-root\">Foo\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">baz</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: P-wrapping: 1c. Templates on consecutive lines",
		"wikitext": "{{1x|Foo}}\n{{1x|bar}} <div>baz</div>",
		"html": "<p>Foo\n</p><p>\nbar </p><div>baz</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span> <span class=\"wpb-html\">&lt;div&gt;</span>baz<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: P-wrapping: 1d. Template preceded by comment-only line",
		"wikitext": "<!-- foo -->\n{{1x|Bar}}",
		"html": "<p>Bar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-comment\">&lt;!-- foo --&gt;</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Bar</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Inline Text: 1. Multiple template uses",
		"wikitext": "{{1x|Foo}}bar{{1x|baz}}",
		"html": "<p>Foobarbaz\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span>bar<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">baz</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Inline Text: 2. Back-to-back template uses",
		"wikitext": "{{1x|Foo}}{{1x|bar}}",
		"html": "<p>Foobar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Block Tags: 1. Multiple template uses",
		"wikitext": "{{1x|<div>Foo</div>}}<div>bar</div>{{1x|<div>baz</div>}}",
		"html": "<div>Foo</div><div>bar</div><div>baz</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;div&gt;</span>Foo<span class=\"wpb-html\">&lt;/div&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;div&gt;</span>bar<span class=\"wpb-html\">&lt;/div&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;div&gt;</span>baz<span class=\"wpb-html\">&lt;/div&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Block Tags: 2. Back-to-back template uses",
		"wikitext": "{{1x|<div>Foo</div>}}{{1x|<div>bar</div>}}",
		"html": "<div>Foo</div><div>bar</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;div&gt;</span>Foo<span class=\"wpb-html\">&lt;/div&gt;</span></span></span>}}</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;div&gt;</span>bar<span class=\"wpb-html\">&lt;/div&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Correctly encapsulate templates producing </p> tag without a corresponding <p> tag",
		"wikitext": "{{1x|a\nb</p>}}",
		"html": "<p>a\n</p><p>\nb</p><p class=\"mw-empty-elt\"></p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">a\nb<span class=\"wpb-html\">&lt;/p&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "Drop stripped tag markers, unless they have encapsulation info",
		"wikitext": "{{1x|<tr></tr>}}",
		"html": "",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Links: 1. Simple example",
		"wikitext": "{{1x|[[Foo|bar]]}}",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">bar</span>]]</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Links: 2. Generation of link href",
		"wikitext": "[[{{1x|Foo}}|bar]]",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span></span>"
	},
	{
		"desc": "Templates: Links: 3. Generation of part of a link href",
		"wikitext": "[[Fo{{1x|o}}|bar]]\n\n[[Foo{{1x|bar}}]]\n\n[[Foo{{1x|bar}}baz]]\n\n[[Foo{{1x|bar}}|bar]]\n\n[[:Foo{{1x|bar}}]]\n\n[[:Foo{{1x|bar}}|bar]]",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">bar</a>\n</p><p><a href=\"/wiki/Foobar\" title=\"Foobar\">Foobar</a>\n</p><p><a href=\"/wiki/Foobarbaz\" title=\"Foobarbaz\">Foobarbaz</a>\n</p><p><a href=\"/wiki/Foobar\" title=\"Foobar\">bar</a>\n</p><p><a href=\"/wiki/Foobar\" title=\"Foobar\">Foobar</a>\n</p><p><a href=\"/wiki/Foobar\" title=\"Foobar\">bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Fo<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">o</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span></span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span>baz</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:Foo<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span></span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:Foo<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span></span>"
	},
	{
		"desc": "Templates: Links: 4. Multiple templates generating link href",
		"wikitext": "[[{{1x|F}}{{1x|o}}ob{{1x|ar}}]]",
		"html": "<p><a href=\"/wiki/Foobar\" title=\"Foobar\">Foobar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">F</span></span>}}</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">o</span></span>}}</span>ob<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">ar</span></span>}}</span></span>]]</span></span>"
	},
	{
		"desc": "Templates: Links: 5. Generation of link text",
		"wikitext": "[[Foo|{{1x|bar}}]]",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">bar</span></span>}}</span></span>]]</span></span>"
	},
	{
		"desc": "Templates: Links: 5. Nested templates (only outermost template should be marked)",
		"wikitext": "{{1x|[[{{1x|Foo}}|bar]]}}",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foo</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 1. Generation of HTML attr. key",
		"wikitext": "<div {{1x|style}}=\"color:red;\">foo</div>",
		"html": "<div style=\"color:red;\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">style</span></span>}}</span></span>=\"<span class=\"wpb-attr-value\">color:red;</span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 2. Generation of HTML attr. value",
		"wikitext": "<div style={{1x|'color:red;'}}>foo</div>",
		"html": "<div style=\"color:red;\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=<span class=\"wpb-attr-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">'color:red;'</span></span>}}</span></span></span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 3. Generation of HTML attr key and value",
		"wikitext": "<div {{1x|style}}={{1x|'color:red;'}}>foo</div>",
		"html": "<div style=\"color:red;\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">style</span></span>}}</span></span>=<span class=\"wpb-attr-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">'color:red;'</span></span>}}</span></span></span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 4. Generation of starting piece of HTML attr value",
		"wikitext": "<div title=\"{{1x|This is a long title}} with just one piece templated\">foo</div>",
		"html": "<div title=\"This is a long title with just one piece templated\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">This is a long title</span></span>}}</span> with just one piece templated</span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 5. Generation of middle piece of HTML attr value",
		"wikitext": "<div title=\"This is a long title with just {{1x|one piece}} templated\">foo</div>",
		"html": "<div title=\"This is a long title with just one piece templated\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">This is a long title with just <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">one piece</span></span>}}</span> templated</span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 6. Generation of end piece of HTML attr value",
		"wikitext": "<div title=\"This is a long title with just one piece {{1x|templated}}\">foo</div>",
		"html": "<div title=\"This is a long title with just one piece templated\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">This is a long title with just one piece <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">templated</span></span>}}</span></span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 7. Generation of partial attribute key string",
		"wikitext": "<div st{{1x|yle}}=\"color:red;\">foo</div>",
		"html": "<div style=\"color:red;\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">st<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">yle</span></span>}}</span></span>=\"<span class=\"wpb-attr-value\">color:red;</span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 8. Template-generated attribute (k=v)",
		"wikitext": "<div {{1x|1=id=\"v1\"}}>bar</div>",
		"html": "<div id=\"v1\">bar</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1</span>=<span class=\"wpb-parameter-value\">id=\"v1\"</span></span>}}</span></span></span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tag: 9. Multiple template-generated attributes",
		"wikitext": "<div {{1x|1=id=\"v1\" title=\"foo\"}}>bar</div>",
		"html": "<div id=\"v1\" title=\"foo\">bar</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1</span>=<span class=\"wpb-parameter-value\">id=\"v1\" title=\"foo\"</span></span>}}</span></span></span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Templates: Support for templates generating attributes and content",
		"wikitext": "{| {{mixed_attr_content_template}}\n|-\n|bar\n|}",
		"html": "<table style=\"color:red;\" title=\"T48811\">\n\n<tbody><tr>\n<td>foo\n</td></tr>\n<tr>\n<td>bar\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">mixed_attr_content_template</span>}}</span></span></span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">bar</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Templates: Support for templates generating table attributes and content (with fostered categories)",
		"wikitext": "{| {{mixed_attr_content_template_2}}\n|-\n|bar\n|}",
		"html": "<table style=\"color:red;\" title=\"T249740\">\n<tbody><tr>\n<td>foo\n</td></tr>\n<tr>\n<td>bar\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">mixed_attr_content_template_2</span>}}</span></span></span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">bar</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "1. Entities and nowikis inside templated attributes should be handled correctly",
		"wikitext": "<div {{1x|style{{=}}\"background:&#35;f9f9f9;\"}}>foo</div>",
		"html": "<div style=\"background:#f9f9f9;\">foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">style<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">=</span>}}</span>\"background:&amp;#35;f9f9f9;\"</span></span>}}</span></span></span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "2. Entities and nowikis inside templated attributes should be handled correctly",
		"wikitext": "{|\n|{{table_attribs_3}}\n|}",
		"html": "<table>\n<tbody><tr>\n<td style=\"background:#f9f9f9;\">Foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">table_attribs_3</span>}}</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "3. Entities and nowikis inside templated attributes should be handled correctly inside templated tables",
		"wikitext": "{{tbl-start}}\n|{{table_attribs_3}}\n{{tbl-end}}",
		"html": "<table>\n<tbody><tr>\n<td style=\"background:#f9f9f9;\">Foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-start</span>}}</span>\n|<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">table_attribs_3</span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-end</span>}}</span></span>"
	},
	{
		"desc": "4. Entities and nowikis inside templated attributes should be handled correctly inside templated tables",
		"wikitext": "{|\n|{{table_attribs_6}} hi\n|}",
		"html": "<table>\n<tbody><tr>\n<td style=\"background: red;\">hi\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">table_attribs_6</span>}}</span> hi</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Extension tag in templated tag attribute",
		"wikitext": "{{1x|1=\n{{{!}} class=\"123\" <nowiki />\n{{!}} hi\n{{!}}}\n}}",
		"html": "<table class=\"123\">\n<tbody><tr>\n<td>hi\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">1</span>=<span class=\"wpb-parameter-value\">\n<span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span></span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">class</span>=\"<span class=\"wpb-attr-value\">123</span>\"</span><span class=\"wpb-attr-dirty\"> <span class=\"wpb-ext\">&lt;nowiki<span class=\"wpb-ext-attrs\"><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span></span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span></span><span class=\"wpb-td-inner\"> hi</span></span><span class=\"wpb-table-syntax\">\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span>}</span></span>\n</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 1. Generating start of a HTML table",
		"wikitext": "{{1x|<table><tr><td>foo</td>}}</tr></table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 2a. Generating middle of a HTML table",
		"wikitext": "<table><tr>{{1x|<td>foo</td>}}</tr></table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 2b. Generating middle of a HTML table",
		"wikitext": "<table>{{1x|<tr><td>foo</td></tr>}}</table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 3. Generating end of a HTML table",
		"wikitext": "<table><tr>{{1x|<td>foo</td></tr></table>}}",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 4a. Generating a single tag of a HTML table",
		"wikitext": "{{1x|<table>}}<tr><td>foo</td></tr></table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;table&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 4b. Generating a single tag of a HTML table",
		"wikitext": "<table>{{1x|<tr>}}<td>foo</td></tr></table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;tr&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 4c. Generating a single tag of a HTML table",
		"wikitext": "<table><tr>{{1x|<td>}}foo</td></tr></table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;td&gt;</span></span></span>}}</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 4d. Generating a single tag of a HTML table",
		"wikitext": "<table><tr><td>foo{{1x|</td>}}</tr></table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;/td&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 4e. Generating a single tag of a HTML table",
		"wikitext": "<table><tr><td>foo</td>{{1x|</tr>}}</table>",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;/tr&gt;</span></span></span>}}</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Templates: HTML Tables: 4f. Generating a single tag of a HTML table",
		"wikitext": "<table><tr><td>foo</td></tr>{{1x|</table>}}",
		"html": "<table><tbody><tr><td>foo</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;/table&gt;</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Wiki Tables: 1a. Fostering of entire template content",
		"wikitext": "{|\n{{1x|a}}\n|}",
		"html": "\na\n<table><tbody><tr><td></td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-inter\">\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">a</span></span>}}</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Templates: Wiki Tables: 1b. Fostering of entire template content",
		"wikitext": "{|\n{{1x|<div>}}\nfoo\n{{1x|</div>}}\n|}",
		"html": "<div>\n<p>foo\n</p>\n</div><table>\n\n<tbody><tr><td></td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-inter\">\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;div&gt;</span></span></span>}}</span>\nfoo\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;/div&gt;</span></span></span>}}</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Templates: Wiki Tables: 2. Fostering of partial template content",
		"wikitext": "{|\n{{1x|a\n<div>b</div>}}\n|}",
		"html": "\na\n<div>b</div><table>\n<tbody><tr><td></td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-inter\">\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">a\n<span class=\"wpb-html\">&lt;div&gt;</span>b<span class=\"wpb-html\">&lt;/div&gt;</span></span></span>}}</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Templates: Wiki Tables: 3. td-content via multiple templates",
		"wikitext": "{|\n{{1x|{{pipe}}a}}{{1x|b}}\n|}",
		"html": "<table>\n<tbody><tr>\n<td>ab\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-inter\">\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">pipe</span>}}</span>a</span></span>}}</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">b</span></span>}}</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Templates: Wiki Tables: 4. Templated tags, no content",
		"wikitext": "{{tbl-start}}\n{{tbl-end}}",
		"html": "<table>\n<tbody><tr><td></td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-start</span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-end</span>}}</span></span>"
	},
	{
		"desc": "Templates: Wiki Tables: 5. Templated tags, regular td-tags",
		"wikitext": "{{tbl-start}}\n|foo\n{{tbl-end}}",
		"html": "<table>\n<tbody><tr>\n<td>foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-start</span>}}</span>\n|foo\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-end</span>}}</span></span>"
	},
	{
		"desc": "Templates: Wiki Tables: 6. Templated tags, templated td-tags",
		"wikitext": "{{tbl-start}}\n{{!}}foo\n{{tbl-end}}",
		"html": "<table>\n<tbody><tr>\n<td>foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-start</span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span>foo\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">tbl-end</span>}}</span></span>"
	},
	{
		"desc": "Templates: Lists: Multi-line list-items via templates",
		"wikitext": "*{{1x|a {{nonexistent|\nunused}}}}\n*{{1x|b {{nonexistent|\nunused}}}}",
		"html": "<ul><li>a <a href=\"/index.php?title=Template:Nonexistent&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Template:Nonexistent (page does not exist)\">Template:Nonexistent</a></li>\n<li>b <a href=\"/index.php?title=Template:Nonexistent&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Template:Nonexistent (page does not exist)\">Template:Nonexistent</a></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">a <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">nonexistent</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\nunused</span></span>}}</span></span></span>}}</span>\n<span class=\"wpb-list\">*</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">b <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">nonexistent</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\nunused</span></span>}}</span></span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Ugly nesting: 1. Quotes opened/closed across templates (1x)",
		"wikitext": "{{1x|''a}}{{1x|b''c''d}}{{1x|''e}}",
		"html": "<p><i>ab</i>c<i>d</i>e\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-quote\">''</span>a</span></span>}}</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">b<span class=\"wpb-quote\">''</span>c<span class=\"wpb-quote\">''</span>d</span></span>}}</span><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-quote\">''</span>e</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Ugly nesting: 4. Divs opened/closed across templates",
		"wikitext": "a<div>b{{1x|c</div>d}}e",
		"html": "<p>a</p><div>bc</div><p>de</p>",
		"print": "<span class=\"wpb-root\">a<span class=\"wpb-html\">&lt;div&gt;</span>b<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">c<span class=\"wpb-html\">&lt;/div&gt;</span>d</span></span>}}</span>e</span>"
	},
	{
		"desc": "Templates: Ugly templates: 3. newline-only template parameter",
		"wikitext": "foo {{1x|\n}}",
		"html": "<p>foo \n</p>",
		"print": "<span class=\"wpb-root\">foo <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\n</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Ugly templates: 4. newline-only template parameter inconsistency",
		"wikitext": "{{1x|\n}}",
		"html": "<p><br />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\n</span></span>}}</span></span>"
	},
	{
		"desc": "Templates: Parameters substituted at the top-level",
		"wikitext": "{{{foo|''who'' {{1x|me}}? '''never!'''}}}\n\n{{{foo|bar|baz}}}",
		"html": "<p><i>who</i> me? <b>never!</b>\n</p><p>bar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">foo</span>|<span class=\"wpb-arg-default\"><span class=\"wpb-quote\">''</span>who<span class=\"wpb-quote\">''</span> <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">me</span></span>}}</span>? <span class=\"wpb-quote\">'''</span>never!<span class=\"wpb-quote\">'''</span></span>}}}</span>\n\n<span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">foo</span>|<span class=\"wpb-arg-default\">bar</span>|<span class=\"wpb-hidden\">baz</span>}}}</span></span>"
	},
	{
		"desc": "Compound transclusion with template and top level templatearg",
		"wikitext": "{{1x|<table>}}\n{{{top|<td>123</td>}}}\n</table>",
		"html": "<table>\n<tbody><tr><td>123</td>\n</tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;table&gt;</span></span></span>}}</span>\n<span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">top</span>|<span class=\"wpb-arg-default\"><span class=\"wpb-html\">&lt;td&gt;</span>123<span class=\"wpb-html\">&lt;/td&gt;</span></span>}}}</span>\n<span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Parser Functions: 1. Simple example",
		"wikitext": "{{uc:foo}}",
		"html": "<p>FOO\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">uc</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo</span></span>}}</span></span>"
	},
	{
		"desc": "Parser Functions: 2. Nested use (only outermost should be marked up)",
		"wikitext": "{{uc:{{lc:FOO}}}}",
		"html": "<p>FOO\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">uc</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">lc</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">FOO</span></span>}}</span></span></span>}}</span></span>"
	},
	{
		"desc": "Parsoid: dot-slash prefixed wikilinks",
		"wikitext": "[[./foo]]\n\n[[././bar]]\n\n[[././baz/]]",
		"html": "<p>[[./foo]]\n</p><p>[[././bar]]\n</p><p>[[././baz/]]\n</p>",
		"print": "<span class=\"wpb-root\">[[./foo]]\n\n[[././bar]]\n\n[[././baz/]]</span>"
	},
	{
		"desc": "Render invalid page names as plain text (T53090)",
		"wikitext": "[[./../foo|bar]]\n[[fooÔøΩ|bar]]\n[[foo/.|bar]]\n[[foo/..|bar]]\n[[foo~~~bar]]\n[[foo>bar]]\n[[foo[bar]]\n[[.]]\n[[..]]\n[[foo././bar]]\n[[foo[http://example.com]xyz]]\n\n[[{{1x|./../foo}}|bar]]\n[[{{1x|foo/.}}|bar]]\n[[{{1x|foo/..}}|bar]]\n[[{{1x|foo~~~~bar}}]]\n[[{{1x|foo>bar}}]]\n[[{{1x|foo././bar}}]]\n[[{{1x|foo{bar}}]]\n[[{{1x|foo}bar}}]]\n[[{{1x|foo[bar}}]]\n[[{{1x|foo]bar}}]]\n[[{{1x|foo<bar}}]]",
		"html": "<p>[[./../foo|bar]]\n[[fooÔøΩ|bar]]\n[[foo/.|bar]]\n[[foo/..|bar]]\n[[foo~~~bar]]\n[[foo&gt;bar]]\n[[foo[bar]]\n[[.]]\n[[..]]\n[[foo././bar]]\n[[foo<a rel=\"nofollow\" class=\"external autonumber\" href=\"http://example.com\">[1]</a>xyz]]\n</p><p>[[./../foo|bar]]\n[[foo/.|bar]]\n[[foo/..|bar]]\n[[foo~~~~bar]]\n[[foo&gt;bar]]\n[[foo././bar]]\n[[foo{bar]]\n[[foo}bar]]\n[[foo[bar]]\n[[foo]bar]]\n[[foo&lt;bar]]\n</p>",
		"print": "<span class=\"wpb-root\">[[./../foo|bar]]\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">fooÔøΩ</span>|<span class=\"wpb-link-text\">bar</span>]]</span>\n[[foo/.|bar]]\n[[foo/..|bar]]\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">foo~~~bar</span>]]</span>\n[[foo&gt;bar]]\n[[foo[bar]]\n[[.]]\n[[..]]\n[[foo././bar]]\n[[foo<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com</span>]</span>xyz]]\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">./../foo</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo/.</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo/..</span></span>}}</span></span>|<span class=\"wpb-link-text\">bar</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo~~~~bar</span></span>}}</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo&gt;bar</span></span>}}</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo././bar</span></span>}}</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo{bar</span></span>}}</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo}bar</span></span>}}</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo[bar</span></span>}}</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo]bar</span></span>}}</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo&lt;bar</span></span>}}</span></span>]]</span></span>"
	},
	{
		"desc": "Disabled subpages",
		"wikitext": "[[/subpage]]",
		"html": "<p><a href=\"/index.php?title=/subpage&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"/subpage (page does not exist)\">/subpage</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">/subpage</span>]]</span></span>"
	},
	{
		"desc": "Link to category",
		"wikitext": "[[:Category:MediaWiki User's Guide]]",
		"html": "<p><a href=\"/wiki/Category:MediaWiki_User%27s_Guide\" title=\"Category:MediaWiki User&#39;s Guide\">Category:MediaWiki User's Guide</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:Category:MediaWiki User's Guide</span>]]</span></span>"
	},
	{
		"desc": "PAGESINCATEGORY invalid title fatal (r33546 fix)",
		"wikitext": "{{PAGESINCATEGORY:<bogus>}}",
		"html": "<p>0\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">PAGESINCATEGORY</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">&lt;bogus&gt;</span></span>}}</span></span>"
	},
	{
		"desc": "Parsoid: Serialize link to category page with colon escape",
		"wikitext": "[[:Category:Foo]]\n[[:Category:Foo|Bar]]",
		"html": "<p><a href=\"/index.php?title=Category:Foo&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Category:Foo (page does not exist)\">Category:Foo</a>\n<a href=\"/index.php?title=Category:Foo&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Category:Foo (page does not exist)\">Bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:Category:Foo</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:Category:Foo</span>|<span class=\"wpb-link-text\">Bar</span>]]</span></span>"
	},
	{
		"desc": "Parsoid: Serialize link to file page with colon escape",
		"wikitext": "\n[[:File:Foo.png]]\n[[:File:Foo.png|Bar]]",
		"html": "<p><a href=\"/index.php?title=File:Foo.png&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"File:Foo.png (page does not exist)\">File:Foo.png</a>\n<a href=\"/index.php?title=File:Foo.png&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"File:Foo.png (page does not exist)\">Bar</a>\n</p>",
		"print": "<span class=\"wpb-root\">\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:File:Foo.png</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:File:Foo.png</span>|<span class=\"wpb-link-text\">Bar</span>]]</span></span>"
	},
	{
		"desc": "Parsoid: Serialize a genuine category link without colon escape",
		"wikitext": "[[Category:Foo]]\n[[Category:Foo|Bar]]",
		"html": "",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-category\">[[<span class=\"wpb-link-target\">Category:Foo</span>]]</span>\n<span class=\"wpb-category\">[[<span class=\"wpb-link-target\">Category:Foo</span>|<span class=\"wpb-link-text\">Bar</span>]]</span></span>"
	},
	{
		"desc": "Parsoid: Defaultsort variations (T236846)",
		"wikitext": "{{DEFAULTSORT}}\n\n{{DEFAULTSORT:}}\n{{DEFAULTSORT:DOGGIE}}",
		"html": "<p><a href=\"/index.php?title=Template:DEFAULTSORT&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Template:DEFAULTSORT (page does not exist)\">Template:DEFAULTSORT</a>\n</p><p><br />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">DEFAULTSORT</span>}}</span>\n\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">DEFAULTSORT</span>:}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">DEFAULTSORT</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">DOGGIE</span></span>}}</span></span>"
	},
	{
		"desc": "T3186 news: in the middle of text",
		"wikitext": "http://en.wikinews.org/wiki/Wikinews:Workplace",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://en.wikinews.org/wiki/Wikinews:Workplace\">http://en.wikinews.org/wiki/Wikinews:Workplace</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://en.wikinews.org/wiki/Wikinews:Workplace</span></span>"
	},
	{
		"desc": "Namespaced link must have a title",
		"wikitext": "[[Project:]]",
		"html": "<p>[[Project:]]\n</p>",
		"print": "<span class=\"wpb-root\">[[Project:]]</span>"
	},
	{
		"desc": "Namespaced link must have a title (bad fragment version)",
		"wikitext": "[[Project:#fragment]]",
		"html": "<p>[[Project:#fragment]]\n</p>",
		"print": "<span class=\"wpb-root\">[[Project:#fragment]]</span>"
	},
	{
		"desc": "div with no attributes",
		"wikitext": "<div>HTML rocks</div>",
		"html": "<div>HTML rocks</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span>HTML rocks<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "div with double-quoted attribute",
		"wikitext": "<div id=\"rock\">HTML rocks</div>",
		"html": "<div id=\"rock\">HTML rocks</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">rock</span>\"</span></span>&gt;</span>HTML rocks<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "div with single-quoted attribute",
		"wikitext": "<div id='rock'>HTML rocks</div>",
		"html": "<div id=\"rock\">HTML rocks</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>='<span class=\"wpb-attr-value\">rock</span>'</span></span>&gt;</span>HTML rocks<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "div with unquoted attribute",
		"wikitext": "<div id=rock>HTML rocks</div>",
		"html": "<div id=\"rock\">HTML rocks</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=<span class=\"wpb-attr-value\">rock</span></span></span>&gt;</span>HTML rocks<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "div with illegal double attributes",
		"wikitext": "<div id=\"a\" id=\"b\">HTML rocks</div>",
		"html": "<div id=\"b\">HTML rocks</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">a</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">b</span>\"</span></span>&gt;</span>HTML rocks<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "div with braces in attribute value",
		"wikitext": "<div title=\"{}\">Foo</div>",
		"html": "<div title=\"&#123;&#125;\">Foo</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">{}</span>\"</span></span>&gt;</span>Foo<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "HTML multiple attributes correction",
		"wikitext": "<p class=\"error\" class=\"awesome\">Awesome!</p>",
		"html": "<p class=\"awesome\">Awesome!</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;p<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">class</span>=\"<span class=\"wpb-attr-value\">error</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">class</span>=\"<span class=\"wpb-attr-value\">awesome</span>\"</span></span>&gt;</span>Awesome!<span class=\"wpb-html\">&lt;/p&gt;</span></span>"
	},
	{
		"desc": "Table multiple attributes correction",
		"wikitext": "{|\n!+ class=\"error\" class=\"awesome\"|status\n|}",
		"html": "<table>\n<tbody><tr>\n<th class=\"awesome\">status\n</th></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n!</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\">+ </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">class</span>=\"<span class=\"wpb-attr-value\">error</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">class</span>=\"<span class=\"wpb-attr-value\">awesome</span>\"</span></span>|<span class=\"wpb-td-inner\">status</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "DIV IN UPPERCASE",
		"wikitext": "<DIV ID=\"x\">HTML ROCKS</DIV>",
		"html": "<div id=\"x\">HTML ROCKS</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;DIV<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">ID</span>=\"<span class=\"wpb-attr-value\">x</span>\"</span></span>&gt;</span>HTML ROCKS<span class=\"wpb-html\">&lt;/DIV&gt;</span></span>"
	},
	{
		"desc": "Non-ASCII pseudo-tags are rendered as text",
		"wikitext": "<khy√¥>",
		"html": "<p>&lt;khy√¥&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&lt;khy√¥&gt;</span>"
	},
	{
		"desc": "Pseudo-tag with URL 'name' renders as url link",
		"wikitext": "<http://example.com/>",
		"html": "<p>&lt;<a rel=\"nofollow\" class=\"external free\" href=\"http://example.com/\">http://example.com/</a>&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&lt;<span class=\"wpb-free-ext-link\">http://example.com/</span>&gt;</span>"
	},
	{
		"desc": "text with amp in the middle of nowhere",
		"wikitext": "Remember AT&T?",
		"html": "<p>Remember AT&amp;T?\n</p>",
		"print": "<span class=\"wpb-root\">Remember AT&amp;T?</span>"
	},
	{
		"desc": "text with character entity: eacute",
		"wikitext": "I always thought &eacute; was a cute letter.",
		"html": "<p>I always thought &#233; was a cute letter.\n</p>",
		"print": "<span class=\"wpb-root\">I always thought &amp;eacute; was a cute letter.</span>"
	},
	{
		"desc": "text with entity-escaped character entity-like string: eacute",
		"wikitext": "I always thought &amp;eacute; was a cute letter.",
		"html": "<p>I always thought &amp;eacute; was a cute letter.\n</p>",
		"print": "<span class=\"wpb-root\">I always thought &amp;amp;eacute; was a cute letter.</span>"
	},
	{
		"desc": "text with undefined character entity: xacute",
		"wikitext": "I always thought &xacute; was a cute letter.",
		"html": "<p>I always thought &amp;xacute; was a cute letter.\n</p>",
		"print": "<span class=\"wpb-root\">I always thought &amp;xacute; was a cute letter.</span>"
	},
	{
		"desc": "Text with HTML5 semicolon-less entity (should not decode)",
		"wikitext": "&ampamp;",
		"html": "<p>&amp;ampamp;\n</p>",
		"print": "<span class=\"wpb-root\">&amp;ampamp;</span>"
	},
	{
		"desc": "HTML5 tags",
		"wikitext": "<data value=\"5\">five</data>\n<time datetime=\"2000-01-01T00:00Z\">The new millenium started</time>\n<mark>This highlighted text</mark>",
		"html": "<p><data value=\"5\">five</data>\n<time datetime=\"2000-01-01T00:00Z\">The new millenium started</time>\n<mark>This highlighted text</mark>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;data<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">value</span>=\"<span class=\"wpb-attr-value\">5</span>\"</span></span>&gt;</span>five<span class=\"wpb-html\">&lt;/data&gt;</span>\n<span class=\"wpb-html\">&lt;time<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">datetime</span>=\"<span class=\"wpb-attr-value\">2000-01-01T00:00Z</span>\"</span></span>&gt;</span>The new millenium started<span class=\"wpb-html\">&lt;/time&gt;</span>\n<span class=\"wpb-html\">&lt;mark&gt;</span>This highlighted text<span class=\"wpb-html\">&lt;/mark&gt;</span></span>"
	},
	{
		"desc": "HTML tag with leading space is parsed as text",
		"wikitext": "< div>foo< /div>",
		"html": "<p>&lt; div&gt;foo&lt; /div&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&lt; div&gt;foo&lt; /div&gt;</span>"
	},
	{
		"desc": "Ensure that HTML adoption agency algorithm is properly implemented.",
		"wikitext": "<small>X<small>Y</small>Z</small>",
		"html": "<p><small>X<small>Y</small>Z</small>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;small&gt;</span>X<span class=\"wpb-html\">&lt;small&gt;</span>Y<span class=\"wpb-html\">&lt;/small&gt;</span>Z<span class=\"wpb-html\">&lt;/small&gt;</span></span>"
	},
	{
		"desc": "Nesting of <kbd>",
		"wikitext": "<kbd>X<kbd>Y</kbd>Z</kbd>",
		"html": "<p><kbd>X<kbd>Y</kbd>Z</kbd>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;kbd&gt;</span>X<span class=\"wpb-html\">&lt;kbd&gt;</span>Y<span class=\"wpb-html\">&lt;/kbd&gt;</span>Z<span class=\"wpb-html\">&lt;/kbd&gt;</span></span>"
	},
	{
		"desc": "Nesting of <em>",
		"wikitext": "<em>X<em>Y</em>Z</em>",
		"html": "<p><em>X<em>Y</em>Z</em>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;em&gt;</span>X<span class=\"wpb-html\">&lt;em&gt;</span>Y<span class=\"wpb-html\">&lt;/em&gt;</span>Z<span class=\"wpb-html\">&lt;/em&gt;</span></span>"
	},
	{
		"desc": "Nesting of <strong>",
		"wikitext": "<strong>X<strong>Y</strong>Z</strong>",
		"html": "<p><strong>X<strong>Y</strong>Z</strong>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;strong&gt;</span>X<span class=\"wpb-html\">&lt;strong&gt;</span>Y<span class=\"wpb-html\">&lt;/strong&gt;</span>Z<span class=\"wpb-html\">&lt;/strong&gt;</span></span>"
	},
	{
		"desc": "Nesting of <q>",
		"wikitext": "<q>X<q>Y</q>Z</q>",
		"html": "<p><q>X<q>Y</q>Z</q>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;q&gt;</span>X<span class=\"wpb-html\">&lt;q&gt;</span>Y<span class=\"wpb-html\">&lt;/q&gt;</span>Z<span class=\"wpb-html\">&lt;/q&gt;</span></span>"
	},
	{
		"desc": "Nesting of <ruby>",
		"wikitext": "<ruby>X<ruby>Y</ruby>Z</ruby>",
		"html": "<p><ruby>X<ruby>Y</ruby>Z</ruby>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ruby&gt;</span>X<span class=\"wpb-html\">&lt;ruby&gt;</span>Y<span class=\"wpb-html\">&lt;/ruby&gt;</span>Z<span class=\"wpb-html\">&lt;/ruby&gt;</span></span>"
	},
	{
		"desc": "Nesting of <bdo>",
		"wikitext": "<bdo>X<bdo>Y</bdo>Z</bdo>",
		"html": "<p><bdo>X<bdo>Y</bdo>Z</bdo>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;bdo&gt;</span>X<span class=\"wpb-html\">&lt;bdo&gt;</span>Y<span class=\"wpb-html\">&lt;/bdo&gt;</span>Z<span class=\"wpb-html\">&lt;/bdo&gt;</span></span>"
	},
	{
		"desc": "Media link",
		"wikitext": "[[Media:Foobar.jpg]]\n[[Media:Video.ogv]]\n[[:Media:Video.ogv]]",
		"html": "<p><a href=\"http://example.com/images/3/3a/Foobar.jpg\" class=\"internal\" title=\"Foobar.jpg\">Media:Foobar.jpg</a>\n<a href=\"http://example.com/images/0/00/Video.ogv\" class=\"internal\" title=\"Video.ogv\">Media:Video.ogv</a>\n<a href=\"http://example.com/images/0/00/Video.ogv\" class=\"internal\" title=\"Video.ogv\">Media:Video.ogv</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Media:Foobar.jpg</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Media:Video.ogv</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">:Media:Video.ogv</span>]]</span></span>"
	},
	{
		"desc": "Media link with text",
		"wikitext": "[[Media:Foobar.jpg|A neat file to look at]]",
		"html": "<p><a href=\"http://example.com/images/3/3a/Foobar.jpg\" class=\"internal\" title=\"Foobar.jpg\">A neat file to look at</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Media:Foobar.jpg</span>|<span class=\"wpb-link-text\">A neat file to look at</span>]]</span></span>"
	},
	{
		"desc": "Media link redirect",
		"wikitext": "[[Media:Redirect to foobar.jpg]]",
		"html": "<p><a href=\"http://example.com/images/3/3a/Foobar.jpg\" class=\"internal\" title=\"Foobar.jpg\">Media:Redirect to foobar.jpg</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Media:Redirect to foobar.jpg</span>]]</span></span>"
	},
	{
		"desc": "Media link to nonexistent file (T3702)",
		"wikitext": "[[Media:No such.jpg]]\n[[Media:No_such file.jpg]]",
		"html": "<p><a href=\"/index.php?title=Special:Upload&amp;wpDestFile=No_such.jpg\" class=\"new\" title=\"No such.jpg\">Media:No such.jpg</a>\n<a href=\"/index.php?title=Special:Upload&amp;wpDestFile=No_such_file.jpg\" class=\"new\" title=\"No such file.jpg\">Media:No_such file.jpg</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Media:No such.jpg</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Media:No_such file.jpg</span>]]</span></span>"
	},
	{
		"desc": "Media link with nested wikilinks",
		"wikitext": "[[Media:Foobar.jpg|[[Test]]]]\n[[Media:Foobar.jpg|[[File:Foobar.jpg]]]]",
		"html": "<p>[[Media:Foobar.jpg|<a href=\"/wiki/Test\" title=\"Test\">Test</a>]]\n[[Media:Foobar.jpg|<span class=\"mw-default-size\" typeof=\"mw:File\"><a href=\"/wiki/File:Foobar.jpg\" class=\"mw-file-description\"><img src=\"http://example.com/images/3/3a/Foobar.jpg\" decoding=\"async\" width=\"1941\" height=\"220\" class=\"mw-file-element\" /></a></span>]]\n</p>",
		"print": "<span class=\"wpb-root\">[[Media:Foobar.jpg|<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Test</span>]]</span>]]\n[[Media:Foobar.jpg|<span class=\"wpb-file\">[[<span class=\"wpb-link-target\">File:Foobar.jpg</span>]]</span>]]</span>"
	},
	{
		"desc": "Character reference normalization in link text (T3938)",
		"wikitext": "[[Main Page|this&that]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">this&amp;that</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">this&amp;that</span>]]</span></span>"
	},
	{
		"desc": "(T21451) Links should refer to the normalized form.",
		"wikitext": "[[&#xFB2E;]]\n[[&#x5d0;&#x5b7;]]\n[[&#x5d0;÷∑]]\n[[◊ê&#x5b7;]]\n[[◊ê÷∑]]",
		"html": "<p><a href=\"/wiki/%D7%90%D6%B7\" title=\"◊ê÷∑\">&#xfb2e;</a>\n<a href=\"/wiki/%D7%90%D6%B7\" title=\"◊ê÷∑\">&#x5d0;&#x5b7;</a>\n<a href=\"/wiki/%D7%90%D6%B7\" title=\"◊ê÷∑\">&#x5d0;÷∑</a>\n<a href=\"/wiki/%D7%90%D6%B7\" title=\"◊ê÷∑\">◊ê&#x5b7;</a>\n<a href=\"/wiki/%D7%90%D6%B7\" title=\"◊ê÷∑\">◊ê÷∑</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">&amp;#xFB2E;</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">&amp;#x5d0;&amp;#x5b7;</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">&amp;#x5d0;÷∑</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">◊ê&amp;#x5b7;</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">◊ê÷∑</span>]]</span></span>"
	},
	{
		"desc": "Empty attribute crash test (T4067)",
		"wikitext": "<font color=\"\">foo</font>",
		"html": "<p><font color=\"\">foo</font>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;font<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">color</span>=\"\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/font&gt;</span></span>"
	},
	{
		"desc": "Empty attribute crash test single-quotes (T4067)",
		"wikitext": "<font color=''>foo</font>",
		"html": "<p><font color=\"\">foo</font>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;font<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">color</span>=''</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/font&gt;</span></span>"
	},
	{
		"desc": "Attribute test: unquoted but illegal value (hash)",
		"wikitext": "<font color=#x>foo</font>",
		"html": "<p><font color=\"#x\">foo</font>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;font<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">color</span>=<span class=\"wpb-attr-value\">#x</span></span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/font&gt;</span></span>"
	},
	{
		"desc": "T4095: link with three closing brackets",
		"wikitext": "[[Main Page]]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Main Page</a>]\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>]]</span>]</span>"
	},
	{
		"desc": "T4095: link with pipe and three closing brackets",
		"wikitext": "[[Main Page|link]]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">link</a>]\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">link</span>]]</span>]</span>"
	},
	{
		"desc": "T4095: link with pipe and three closing brackets, version 2",
		"wikitext": "[[Main Page|[http://example.com/]]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">[http://example.com/]</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>|<span class=\"wpb-link-text\">[http://example.com/]</span>]]</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (safe template; regression T4309)",
		"wikitext": "<div title=\"{{test}}\"></div>",
		"html": "<div title=\"This is a test template\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">test</span>}}</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (dangerous template; 2309)",
		"wikitext": "<div title=\"{{dangerous attribute}}\"></div>",
		"html": "<div title=\"\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">dangerous attribute</span>}}</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (dangerous style template; 2309)",
		"wikitext": "<div style=\"{{dangerous style attribute}}\"></div>",
		"html": "<div style=\"/* insecure input */\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">dangerous style attribute</span>}}</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (safe parameter; 2309)",
		"wikitext": "{{div style|width: 200px}}",
		"html": "<div style=\"float: right; width: 200px\">Magic div</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">div style</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">width: 200px</span></span>}}</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (unsafe parameter; 2309)",
		"wikitext": "{{div style|width: expression(alert(document.cookie))}}",
		"html": "<div style=\"/* insecure input */\">Magic div</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">div style</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">width: expression(alert(document.cookie))</span></span>}}</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (unsafe breakout parameter; 2309)",
		"wikitext": "{{div style|\"><script>alert(document.cookie)</script>}}",
		"html": "<div style=\"float: right;\">&lt;script&gt;alert(document.cookie)&lt;/script&gt;\"&gt;Magic div</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">div style</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\"&gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span></span>}}</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (unsafe breakout parameter 2; 2309)",
		"wikitext": "{{div style|\" ><script>alert(document.cookie)</script>}}",
		"html": "<div style=\"float: right;\">&lt;script&gt;alert(document.cookie)&lt;/script&gt;\"&gt;Magic div</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">div style</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">\" &gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span></span>}}</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (link)",
		"wikitext": "<div title=\"[[Main Page]]\"></div>",
		"html": "<div title=\"&#91;&#91;Main Page&#93;&#93;\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">[[Main Page]]</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (italics)",
		"wikitext": "<div title=\"''foobar''\"></div>",
		"html": "<div title=\"&#39;&#39;foobar&#39;&#39;\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">''foobar''</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (bold)",
		"wikitext": "<div title=\"'''foobar'''\"></div>",
		"html": "<div title=\"&#39;&#39;&#39;foobar&#39;&#39;&#39;\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">'''foobar'''</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (ISBN)",
		"wikitext": "<div title=\"ISBN 1234567890\"></div>",
		"html": "<div title=\"&#73;SBN 1234567890\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">ISBN 1234567890</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (RFC)",
		"wikitext": "<div title=\"RFC 1234\"></div>",
		"html": "<div title=\"&#82;FC 1234\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">RFC 1234</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (PMID)",
		"wikitext": "<div title=\"PMID 1234567890\"></div>",
		"html": "<div title=\"&#80;MID 1234567890\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">PMID 1234567890</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (web link)",
		"wikitext": "<div title=\"http://example.com/\"></div>",
		"html": "<div title=\"http&#58;//example.com/\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">http://example.com/</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T4304: HTML attribute safety (named web link)",
		"wikitext": "<div title=\"[http://example.com/ link]\"></div>",
		"html": "<div title=\"&#91;http&#58;//example.com/ link&#93;\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">[http://example.com/ link]</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T5244: HTML attribute safety (extension; safe)",
		"wikitext": "<div style=\"<nowiki>background:blue</nowiki>\"></div>",
		"html": "<div style=\"background:blue\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">background:blue</span>&lt;/nowiki&gt;</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "T5244: HTML attribute safety (extension; unsafe)",
		"wikitext": "<div style=\"<nowiki>border-left:expression(alert(document.cookie))</nowiki>\"></div>",
		"html": "<div style=\"/* insecure input */\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">border-left:expression(alert(document.cookie))</span>&lt;/nowiki&gt;</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "MSIE CSS safety test: spurious slash",
		"wikitext": "<div style=\"background-image:u\\rl(javascript:alert('boo'))\">evil</div>",
		"html": "<div style=\"/* insecure input */\">evil</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background-image:u\\rl(javascript:alert('boo'))</span>\"</span></span>&gt;</span>evil<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "MSIE CSS safety test: hex code",
		"wikitext": "<div style=\"background-image:u\\72l(javascript:alert('boo'))\">evil</div>",
		"html": "<div style=\"/* insecure input */\">evil</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background-image:u\\72l(javascript:alert('boo'))</span>\"</span></span>&gt;</span>evil<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "MSIE CSS safety test: comment in url",
		"wikitext": "<div style=\"background-image:u/**/rl(javascript:alert('boo'))\">evil</div>",
		"html": "<div style=\"background-image:u rl(javascript:alert(&#39;boo&#39;))\">evil</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background-image:u/**/rl(javascript:alert('boo'))</span>\"</span></span>&gt;</span>evil<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "MSIE CSS safety test: comment in expression",
		"wikitext": "<div style=\"background-image:expres/**/sion(alert('boo4'))\">evil4</div>",
		"html": "<div style=\"background-image:expres sion(alert(&#39;boo4&#39;))\">evil4</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background-image:expres/**/sion(alert('boo4'))</span>\"</span></span>&gt;</span>evil4<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "CSS safety test (all browsers): vertical tab (T57332 / CVE-2013-4567)",
		"wikitext": "<p style=\"font-size: 100px; background-image:url\\b(https://www.google.com/images/srpr/logo6w.png)\">A</p>",
		"html": "<p style=\"/* invalid control char */\">A</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;p<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">font-size: 100px; background-image:url\\b(https://www.google.com/images/srpr/logo6w.png)</span>\"</span></span>&gt;</span>A<span class=\"wpb-html\">&lt;/p&gt;</span></span>"
	},
	{
		"desc": "Table attribute legitimate extension",
		"wikitext": "{|\n!+ style=\"<nowiki>color:blue</nowiki>\"|status\n|}",
		"html": "<table>\n<tbody><tr>\n<th style=\"color:blue\">status\n</th></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n!</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\">+ </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">color:blue</span>&lt;/nowiki&gt;</span></span>\"</span></span>|<span class=\"wpb-td-inner\">status</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Table attribute safety",
		"wikitext": "{|\n!+ style=\"<nowiki>border-width:expression(0+alert(document.cookie))</nowiki>\"|status\n|}",
		"html": "<table>\n<tbody><tr>\n<th style=\"/* insecure input */\">status\n</th></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n!</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\">+ </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">border-width:expression(0+alert(document.cookie))</span>&lt;/nowiki&gt;</span></span>\"</span></span>|<span class=\"wpb-td-inner\">status</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "CSS line continuation 1",
		"wikitext": "<div style=\"background-image: u\\&#10;rl(test.jpg);\"></div>",
		"html": "<div style=\"/* insecure input */\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background-image: u\\&amp;#10;rl(test.jpg);</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "CSS line continuation 2",
		"wikitext": "<div style=\"background-image: u\\&#13;rl(test.jpg); \"></div>",
		"html": "<div style=\"/* invalid control char */\"></div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background-image: u\\&amp;#13;rl(test.jpg); </span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Allow aria attributes",
		"wikitext": "<span aria-describedby=\"id1\" aria-flowto=\"id2\" aria-hidden=\"true\" aria-label=\"id3\" aria-labelledby=\"id4\" aria-level=\"3\" aria-owns=\"id5\">foo</span>\n<span aria-bogus=\"stripped\">bar</span>",
		"html": "<p><span aria-describedby=\"id1\" aria-flowto=\"id2\" aria-hidden=\"true\" aria-label=\"id3\" aria-labelledby=\"id4\" aria-level=\"3\" aria-owns=\"id5\">foo</span>\n<span>bar</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-describedby</span>=\"<span class=\"wpb-attr-value\">id1</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-flowto</span>=\"<span class=\"wpb-attr-value\">id2</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-hidden</span>=\"<span class=\"wpb-attr-value\">true</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-label</span>=\"<span class=\"wpb-attr-value\">id3</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-labelledby</span>=\"<span class=\"wpb-attr-value\">id4</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-level</span>=\"<span class=\"wpb-attr-value\">3</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-owns</span>=\"<span class=\"wpb-attr-value\">id5</span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/span&gt;</span>\n<span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">aria-bogus</span>=\"<span class=\"wpb-attr-value\">stripped</span>\"</span></span>&gt;</span>bar<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "Expansion of multi-line templates in attribute values (T8255)",
		"wikitext": "<div style=\"background: {{1x|#00FF00}}\">-</div>",
		"html": "<div style=\"background: #00FF00\">-</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background: <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">#00FF00</span></span>}}</span></span>\"</span></span>&gt;</span>-<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Expansion of multi-line templates in attribute values (T8255 check)",
		"wikitext": "<div style=\"background:\n#00FF00\">-</div>",
		"html": "<div style=\"background: #00FF00\">-</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background:\n#00FF00</span>\"</span></span>&gt;</span>-<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Expansion of multi-line templates in attribute values (T8255 check 2)",
		"wikitext": "<div style=\"background: &#10;#00FF00\">-</div>",
		"html": "<div style=\"background: &#10;#00FF00\">-</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">background: &amp;#10;#00FF00</span>\"</span></span>&gt;</span>-<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Parser hook: empty input",
		"wikitext": "<tag></tag>",
		"html": "<pre>''\narray (\n)\n</pre>",
		"print": "<span class=\"wpb-root\">&lt;tag&gt;&lt;/tag&gt;</span>"
	},
	{
		"desc": "Parser hook: basic input",
		"wikitext": "<tag>input</tag>",
		"html": "<pre>'input'\narray (\n)\n</pre>",
		"print": "<span class=\"wpb-root\">&lt;tag&gt;input&lt;/tag&gt;</span>"
	},
	{
		"desc": "Parser hook: basic arguments",
		"wikitext": "<tag width=\"200\" height=\"100\" depth=\"50\" square=\"\"></tag>",
		"html": "<pre>''\narray (\n  'width' =&gt; '200',\n  'height' =&gt; '100',\n  'depth' =&gt; '50',\n  'square' =&gt; '',\n)\n</pre>",
		"print": "<span class=\"wpb-root\">&lt;tag width=\"200\" height=\"100\" depth=\"50\" square=\"\"&gt;&lt;/tag&gt;</span>"
	},
	{
		"desc": "Parser hook: argument containing a forward slash (T7344)",
		"wikitext": "<tag filename=\"/tmp/bla\"></tag>",
		"html": "<pre>''\narray (\n  'filename' =&gt; '/tmp/bla',\n)\n</pre>",
		"print": "<span class=\"wpb-root\">&lt;tag filename=\"/tmp/bla\"&gt;&lt;/tag&gt;</span>"
	},
	{
		"desc": "Parser hook: horizontal rule inside extension tag that outputs <pre>",
		"wikitext": "<tag>\nHello\n<hr/>\nGoodbye\n</tag>",
		"html": "<pre>'\nHello\n<hr />\nGoodbye\n'\narray (\n)\n</pre>",
		"print": "<span class=\"wpb-root\">&lt;tag&gt;\nHello\n<span class=\"wpb-html\">&lt;hr/&gt;</span>\nGoodbye\n&lt;/tag&gt;</span>"
	},
	{
		"desc": "Parser hook: static parser hook not inside a comment",
		"wikitext": "<statictag>hello, world</statictag>\n\n<statictag action=\"flush\" />",
		"html": "<p><br />\nhello, world\n</p>",
		"print": "<span class=\"wpb-root\">&lt;statictag&gt;hello, world&lt;/statictag&gt;\n\n&lt;statictag action=\"flush\" /&gt;</span>"
	},
	{
		"desc": "Parser hook: static parser hook inside a comment",
		"wikitext": "<!-- <statictag>hello, world</statictag> -->\n<statictag action=\"flush\" />",
		"html": "<p><br />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-comment\">&lt;!-- &lt;statictag&gt;hello, world&lt;/statictag&gt; --&gt;</span>\n&lt;statictag action=\"flush\" /&gt;</span>"
	},
	{
		"desc": "Nested template calls",
		"wikitext": "{{Map-one-parameter|One-parameter|param}}",
		"html": "<p>(My parameter is: param)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Map-one-parameter</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">One-parameter</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">param</span></span>}}</span></span>"
	},
	{
		"desc": "Sanitizer: Closing of open tags",
		"wikitext": "<s></s><table></table>",
		"html": "<p><s></s></p><table></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;s&gt;</span><span class=\"wpb-html\">&lt;/s&gt;</span><span class=\"wpb-html\">&lt;table&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Sanitizer: Closing of open but not closed tags",
		"wikitext": "<s>foo",
		"html": "<p><s>foo\n</s></p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;s&gt;</span>foo</span>"
	},
	{
		"desc": "Sanitizer: Escaping of spaces, multibyte characters, colons & other stuff in id=\"\" (legacy)",
		"wikitext": "<span id=\"√¶: v\">byte</span>[[#√¶: v|backlink]]",
		"html": "<p><span id=\".C3.A6:_v\">byte</span><a href=\"#.C3.A6:_v\">backlink</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">√¶: v</span>\"</span></span>&gt;</span>byte<span class=\"wpb-html\">&lt;/span&gt;</span><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#√¶: v</span>|<span class=\"wpb-link-text\">backlink</span>]]</span></span>"
	},
	{
		"desc": "Sanitizer: Validating that <meta> and <link> work, but only for Microdata",
		"wikitext": "<div itemscope>\n\t<meta itemprop=\"hello\" content=\"world\">\n\t<meta http-equiv=\"refresh\" content=\"5\">\n\t<meta itemprop=\"hello\" http-equiv=\"refresh\" content=\"5\">\n\t<link itemprop=\"hello\" href=\"{{SERVER}}\">\n\t<link rel=\"stylesheet\" href=\"{{SERVER}}\">\n\t<link rel=\"stylesheet\" itemprop=\"hello\" href=\"{{SERVER}}\">\n</div>",
		"html": "<div itemscope=\"\">\n<p>\t<meta itemprop=\"hello\" content=\"world\" />\n\t&lt;meta http-equiv=\"refresh\" content=\"5\"&gt;\n\t<meta itemprop=\"hello\" content=\"5\" />\n\t<link itemprop=\"hello\" href=\"http&#58;//example.org\" />\n\t&lt;link rel=\"stylesheet\" href=\"<a rel=\"nofollow\" class=\"external free\" href=\"http://example.org\">http://example.org</a>\"&gt;\n\t<link itemprop=\"hello\" href=\"http&#58;//example.org\" />\n</p>\n</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">itemscope</span></span></span>&gt;</span>\n\t<span class=\"wpb-html\">&lt;meta<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">itemprop</span>=\"<span class=\"wpb-attr-value\">hello</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">content</span>=\"<span class=\"wpb-attr-value\">world</span>\"</span></span>&gt;</span>\n\t&lt;meta http-equiv=\"refresh\" content=\"5\"&gt;\n\t<span class=\"wpb-html\">&lt;meta<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">itemprop</span>=\"<span class=\"wpb-attr-value\">hello</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">http-equiv</span>=\"<span class=\"wpb-attr-value\">refresh</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">content</span>=\"<span class=\"wpb-attr-value\">5</span>\"</span></span>&gt;</span>\n\t<span class=\"wpb-html\">&lt;link<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">itemprop</span>=\"<span class=\"wpb-attr-value\">hello</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">href</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">SERVER</span>}}</span></span>\"</span></span>&gt;</span>\n\t&lt;link rel=\"stylesheet\" href=\"<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">SERVER</span>}}</span>\"&gt;\n\t<span class=\"wpb-html\">&lt;link<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">rel</span>=\"<span class=\"wpb-attr-value\">stylesheet</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">itemprop</span>=\"<span class=\"wpb-attr-value\">hello</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">href</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">SERVER</span>}}</span></span>\"</span></span>&gt;</span>\n<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Sanitizer: Avoid unnecessary percent encoded characters in interwiki links",
		"wikitext": "[[meatball:Soft\"Security]]",
		"html": "<p><a href=\"http://www.usemod.com/cgi-bin/mb.pl?Soft%22Security\" class=\"extiw\" title=\"meatball:Soft&quot;Security\">meatball:Soft\"Security</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">meatball:Soft\"Security</span>]]</span></span>"
	},
	{
		"desc": "Sanitizer: angle brackets are invalid, even in interwiki links (T182338)",
		"wikitext": "[[meatball:Foo<Bar]]\n[[meatball:Foo>Bar]]\n[[meatball:Foo&lt;bar]]\n[[meatball:Foo&gt;bar]]",
		"html": "<p>[[meatball:Foo&lt;Bar]]\n[[meatball:Foo&gt;Bar]]\n[[meatball:Foo&lt;bar]]\n[[meatball:Foo&gt;bar]]\n</p>",
		"print": "<span class=\"wpb-root\">[[meatball:Foo&lt;Bar]]\n[[meatball:Foo&gt;Bar]]\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">meatball:Foo&amp;lt;bar</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">meatball:Foo&amp;gt;bar</span>]]</span></span>"
	},
	{
		"desc": "Self closed html pairs (T7487)",
		"wikitext": "<center><font id=\"bug\" />Centered text</center>\n<div><font id=\"bug2\" />In div text</div>",
		"html": "<center><font id=\"bug\">Centered text</font></center><font id=\"bug\"><div><font id=\"bug2\">In div text</font></div></font>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;center&gt;</span><span class=\"wpb-html\">&lt;font<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">bug</span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>Centered text<span class=\"wpb-html\">&lt;/center&gt;</span>\n<span class=\"wpb-html\">&lt;div&gt;</span><span class=\"wpb-html\">&lt;font<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">bug2</span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span>In div text<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Punctuation: nbsp before exclamation",
		"wikitext": "C'est grave !",
		"html": "<p>C'est grave&#160;!\n</p>",
		"print": "<span class=\"wpb-root\">C'est grave !</span>"
	},
	{
		"desc": "Punctuation: CSS !important (T13874)",
		"wikitext": "<div style=\"width:50% !important\">important</div>",
		"html": "<div style=\"width:50% !important\">important</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">width:50% !important</span>\"</span></span>&gt;</span>important<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Punctuation: CSS ! important (T13874; with space after)",
		"wikitext": "<div style=\"width:50% ! important\">important</div>",
		"html": "<div style=\"width:50% ! important\">important</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">width:50% ! important</span>\"</span></span>&gt;</span>important<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "HTML bullet list, closed tags (T7497)",
		"wikitext": "<ul>\n<li>One</li>\n<li>Two</li>\n</ul>",
		"html": "<ul>\n<li>One</li>\n<li>Two</li>\n</ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ul&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Two<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ul&gt;</span></span>"
	},
	{
		"desc": "HTML bullet list, unclosed tags (T7497)",
		"wikitext": "<ul>\n<li>One\n<li>Two\n</ul>",
		"html": "<ul>\n<li>One\n</li><li>Two\n</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ul&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One\n<span class=\"wpb-html\">&lt;li&gt;</span>Two\n<span class=\"wpb-html\">&lt;/ul&gt;</span></span>"
	},
	{
		"desc": "HTML ordered list, closed tags (T7497)",
		"wikitext": "<ol>\n<li>One</li>\n<li>Two</li>\n</ol>",
		"html": "<ol>\n<li>One</li>\n<li>Two</li>\n</ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ol&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Two<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ol&gt;</span></span>"
	},
	{
		"desc": "HTML ordered list, unclosed tags (T7497)",
		"wikitext": "<ol>\n<li>One\n<li>Two\n</ol>",
		"html": "<ol>\n<li>One\n</li><li>Two\n</li></ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ol&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One\n<span class=\"wpb-html\">&lt;li&gt;</span>Two\n<span class=\"wpb-html\">&lt;/ol&gt;</span></span>"
	},
	{
		"desc": "HTML nested bullet list, closed tags (T7497)",
		"wikitext": "<ul>\n<li>One</li>\n<li>Two:\n<ul>\n<li>Sub-one</li>\n<li>Sub-two</li>\n</ul>\n</li>\n</ul>",
		"html": "<ul>\n<li>One</li>\n<li>Two:\n<ul>\n<li>Sub-one</li>\n<li>Sub-two</li>\n</ul>\n</li>\n</ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ul&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Two:\n<span class=\"wpb-html\">&lt;ul&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-one<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-two<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ul&gt;</span>\n<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ul&gt;</span></span>"
	},
	{
		"desc": "HTML nested bullet list, open tags (T7497)",
		"wikitext": "<ul>\n<li>One\n<li>Two:\n<ul>\n<li>Sub-one\n<li>Sub-two\n</ul>\n</ul>",
		"html": "<ul>\n<li>One\n</li><li>Two:\n<ul>\n<li>Sub-one\n</li><li>Sub-two\n</li></ul>\n</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ul&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One\n<span class=\"wpb-html\">&lt;li&gt;</span>Two:\n<span class=\"wpb-html\">&lt;ul&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-one\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-two\n<span class=\"wpb-html\">&lt;/ul&gt;</span>\n<span class=\"wpb-html\">&lt;/ul&gt;</span></span>"
	},
	{
		"desc": "HTML nested ordered list, closed tags (T7497)",
		"wikitext": "<ol>\n<li>One</li>\n<li>Two:\n<ol>\n<li>Sub-one</li>\n<li>Sub-two</li>\n</ol>\n</li>\n</ol>",
		"html": "<ol>\n<li>One</li>\n<li>Two:\n<ol>\n<li>Sub-one</li>\n<li>Sub-two</li>\n</ol>\n</li>\n</ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ol&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Two:\n<span class=\"wpb-html\">&lt;ol&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-one<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-two<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ol&gt;</span>\n<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ol&gt;</span></span>"
	},
	{
		"desc": "HTML nested ordered list, open tags (T7497)",
		"wikitext": "<ol>\n<li>One\n<li>Two:\n<ol>\n<li>Sub-one\n<li>Sub-two\n</ol>\n</ol>",
		"html": "<ol>\n<li>One\n</li><li>Two:\n<ol>\n<li>Sub-one\n</li><li>Sub-two\n</li></ol>\n</li></ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ol&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>One\n<span class=\"wpb-html\">&lt;li&gt;</span>Two:\n<span class=\"wpb-html\">&lt;ol&gt;</span>\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-one\n<span class=\"wpb-html\">&lt;li&gt;</span>Sub-two\n<span class=\"wpb-html\">&lt;/ol&gt;</span>\n<span class=\"wpb-html\">&lt;/ol&gt;</span></span>"
	},
	{
		"desc": "HTML ordered list item with parameters oddity",
		"wikitext": "<ol><li id=\"fragment\">One</li>\n</ol>",
		"html": "<ol><li id=\"fragment\">One</li>\n</ol>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;ol&gt;</span><span class=\"wpb-html\">&lt;li<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">fragment</span>\"</span></span>&gt;</span>One<span class=\"wpb-html\">&lt;/li&gt;</span>\n<span class=\"wpb-html\">&lt;/ol&gt;</span></span>"
	},
	{
		"desc": "T7918: autonumbering",
		"wikitext": "[http://first/] [http://second] [ftp://ftp]\n\nftp://inlineftp\n\n[mailto:enclosed@mail.tld With target]\n\n[mailto:enclosed@mail.tld]\n\nmailto:inline@mail.tld",
		"html": "<p><a rel=\"nofollow\" class=\"external autonumber\" href=\"http://first/\">[1]</a> <a rel=\"nofollow\" class=\"external autonumber\" href=\"http://second\">[2]</a> <a rel=\"nofollow\" class=\"external autonumber\" href=\"ftp://ftp\">[3]</a>\n</p><p><a rel=\"nofollow\" class=\"external free\" href=\"ftp://inlineftp\">ftp://inlineftp</a>\n</p><p><a rel=\"nofollow\" class=\"external text\" href=\"mailto:enclosed@mail.tld\">With target</a>\n</p><p><a rel=\"nofollow\" class=\"external autonumber\" href=\"mailto:enclosed@mail.tld\">[4]</a>\n</p><p><a rel=\"nofollow\" class=\"external free\" href=\"mailto:inline@mail.tld\">mailto:inline@mail.tld</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://first/</span>]</span> <span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://second</span>]</span> <span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">ftp://ftp</span>]</span>\n\n<span class=\"wpb-free-ext-link\">ftp://inlineftp</span>\n\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">mailto:enclosed@mail.tld</span> <span class=\"wpb-ext-link-text\">With target</span>]</span>\n\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">mailto:enclosed@mail.tld</span>]</span>\n\n<span class=\"wpb-free-ext-link\">mailto:inline@mail.tld</span></span>"
	},
	{
		"desc": "Fuzz testing: Parser13",
		"wikitext": "{| \n| http://a|",
		"html": "<table>\n<tbody><tr>\n<td>\n</td>\n</tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">http:</span></span><span class=\"wpb-attr-dirty\">//</span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">a</span></span></span>|</span></span></span>"
	},
	{
		"desc": "Fuzz testing: Parser14",
		"wikitext": "==onmouseover===\nhttp://__TOC__",
		"html": "<h2><span class=\"mw-headline\" id=\"onmouseover.3D\">onmouseover=</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: onmouseover=\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2><p>\nhttp://</p><div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2 id=\"mw-toc-heading\">Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#onmouseover.3D\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">onmouseover=</span></a></li>\n</ul>\n</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">onmouseover=</span>==</span>\nhttp://<span class=\"wpb-double-underscore\">__TOC__</span></span>"
	},
	{
		"desc": "Fuzz testing: Parser16",
		"wikitext": "{|\n!https://||||||",
		"html": "<table>\n<tbody><tr>\n<th>https://</th>\n<th></th>\n<th></th>\n<th>\n\n</th></tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n!</span><span class=\"wpb-td-inner\">https://</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">||</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">||</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">||</span></span></span></span>"
	},
	{
		"desc": "Fuzz testing: Parser21",
		"wikitext": "{|\n!irc://{{ftp://a\" onmouseover=\"alert('hello world');\"\n|",
		"html": "<table>\n<tbody><tr>\n<th><a rel=\"nofollow\" class=\"external free\" href=\"irc://{{ftp://a\">irc://{{ftp://a</a>\" onmouseover=\"alert('hello world');\"\n</th>\n<td>\n</td>\n</tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n!</span><span class=\"wpb-td-inner\"><span class=\"wpb-free-ext-link\">irc://{{ftp://a</span>\" onmouseover=\"alert('hello world');\"</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span></span></span></span>"
	},
	{
		"desc": "Fuzz testing: Parser22",
		"wikitext": "http://===r:::https://b\n\n{|",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://===r:::https://b\">http://===r:::https://b</a>\n</p>\n<table>\n<tbody><tr><td></td></tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://===r:::https://b</span>\n\n<span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span></span></span>"
	},
	{
		"desc": "Fuzz testing: Parser25 (T8055)",
		"wikitext": "{{{\n| \n<LI CLASS=||\n >\n}}}blah\" onmouseover=\"alert('hello world');\" align=\"left\"'''MOVE MOUSE CURSOR OVER HERE",
		"html": "<p>&lt;LI CLASS=blah\" onmouseover=\"alert('hello world');\" align=\"left\"<b>MOVE MOUSE CURSOR OVER HERE</b>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">\n</span>|<span class=\"wpb-arg-default\"> \n&lt;LI CLASS=</span>||<span class=\"wpb-hidden\">\n &gt;\n</span>}}}</span>blah\" onmouseover=\"alert('hello world');\" align=\"left\"<span class=\"wpb-quote\">'''</span>MOVE MOUSE CURSOR OVER HERE</span>"
	},
	{
		"desc": "Fuzz testing: URL adjacent extension (with space, clean)",
		"wikitext": "http://example.com <nowiki>junk</nowiki>",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://example.com\">http://example.com</a> junk\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://example.com</span> <span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">junk</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "Fuzz testing: URL adjacent extension (no space, dirty; nowiki)",
		"wikitext": "http://example.com<nowiki>junk</nowiki>",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://example.com\">http://example.com</a>junk\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://example.com</span><span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">junk</span>&lt;/nowiki&gt;</span></span>"
	},
	{
		"desc": "Fuzz testing: URL adjacent extension (no space, dirty; pre)",
		"wikitext": "http://example.com<pre>junk</pre>",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://example.com\">http://example.com</a></p><pre>junk</pre>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://example.com</span><span class=\"wpb-ext\">&lt;pre&gt;<span class=\"wpb-ext-inner\">junk</span>&lt;/pre&gt;</span></span>"
	},
	{
		"desc": "Templates in extension attributes are not expanded",
		"wikitext": "<pre dir=\"{{1x|ltr}}\"></pre>",
		"html": "<pre dir=\"{{1x|ltr}}\"></pre>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;pre<span class=\"wpb-ext-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-ext-attr\"><span class=\"wpb-attr-key\">dir</span>=\"<span class=\"wpb-attr-value\">{{1x|ltr}}</span>\"</span></span>&gt;&lt;/pre&gt;</span></span>"
	},
	{
		"desc": "Parsing optional HTML elements (T8171)",
		"wikitext": "<table>\n  <tr>\n    <td> Some tabular data</td>\n    <td> More tabular data ...\n    <td> And yet som tabular data</td>\n  </tr>\n</table>",
		"html": "<table>\n  <tbody><tr>\n    <td> Some tabular data</td>\n    <td> More tabular data ...\n    </td><td> And yet som tabular data</td>\n  </tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span>\n  <span class=\"wpb-html\">&lt;tr&gt;</span>\n    <span class=\"wpb-html\">&lt;td&gt;</span> Some tabular data<span class=\"wpb-html\">&lt;/td&gt;</span>\n    <span class=\"wpb-html\">&lt;td&gt;</span> More tabular data ...\n    <span class=\"wpb-html\">&lt;td&gt;</span> And yet som tabular data<span class=\"wpb-html\">&lt;/td&gt;</span>\n  <span class=\"wpb-html\">&lt;/tr&gt;</span>\n<span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Correct handling of <td>, <tr> (T8171)",
		"wikitext": "<table>\n  <tr>\n    <td> Some tabular data</td>\n    <td> More tabular data ...</td>\n    <td> And yet som tabular data</td>\n  </tr>\n</table>",
		"html": "<table>\n  <tbody><tr>\n    <td> Some tabular data</td>\n    <td> More tabular data ...</td>\n    <td> And yet som tabular data</td>\n  </tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table&gt;</span>\n  <span class=\"wpb-html\">&lt;tr&gt;</span>\n    <span class=\"wpb-html\">&lt;td&gt;</span> Some tabular data<span class=\"wpb-html\">&lt;/td&gt;</span>\n    <span class=\"wpb-html\">&lt;td&gt;</span> More tabular data ...<span class=\"wpb-html\">&lt;/td&gt;</span>\n    <span class=\"wpb-html\">&lt;td&gt;</span> And yet som tabular data<span class=\"wpb-html\">&lt;/td&gt;</span>\n  <span class=\"wpb-html\">&lt;/tr&gt;</span>\n<span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "Parsing crashing regression (fr:JavaScript)",
		"wikitext": "</body></x>",
		"html": "<p>&lt;/body&gt;&lt;/x&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&lt;/body&gt;&lt;/x&gt;</span>"
	},
	{
		"desc": "Inline wiki vs wiki block nesting",
		"wikitext": "'''Bold paragraph\n\nNew wiki paragraph",
		"html": "<p><b>Bold paragraph</b>\n</p><p>New wiki paragraph\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-quote\">'''</span>Bold paragraph\n\nNew wiki paragraph</span>"
	},
	{
		"desc": "Inline HTML vs wiki block nesting",
		"wikitext": "<b>Bold paragraph\n\nNew wiki paragraph",
		"html": "<p><b>Bold paragraph\n</b></p><p><b>New wiki paragraph\n</b></p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;b&gt;</span>Bold paragraph\n\nNew wiki paragraph</span>"
	},
	{
		"desc": "Mixing markup for italics and bold",
		"wikitext": "'''bold''''''bold''bolditalics'''''",
		"html": "<p>'<i>bold'</i><b>bold<i>bolditalics</i></b>\n</p>",
		"print": "<span class=\"wpb-root\">'<span class=\"wpb-quote\">''</span>bold'<span class=\"wpb-quote\">'''''</span>bold<span class=\"wpb-quote\">''</span>bolditalics<span class=\"wpb-quote\">'''''</span></span>"
	},
	{
		"desc": "Special page transclusion",
		"wikitext": "{{Special:Prefixindex/Xyzzyx}}",
		"html": "<ul class=\"mw-prefixindex-list\"><li><a href=\"/wiki/Xyzzyx\" title=\"Xyzzyx\">Xyzzyx</a></li>\n</ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Special:Prefixindex/Xyzzyx</span>}}</span></span>"
	},
	{
		"desc": "Special page transclusion twice (T7021)",
		"wikitext": "{{Special:Prefixindex/Xyzzyx}}\n{{Special:Prefixindex/Xyzzyx}}",
		"html": "<ul class=\"mw-prefixindex-list\"><li><a href=\"/wiki/Xyzzyx\" title=\"Xyzzyx\">Xyzzyx</a></li>\n</ul>\n<ul class=\"mw-prefixindex-list\"><li><a href=\"/wiki/Xyzzyx\" title=\"Xyzzyx\">Xyzzyx</a></li>\n</ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Special:Prefixindex/Xyzzyx</span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Special:Prefixindex/Xyzzyx</span>}}</span></span>"
	},
	{
		"desc": "Transclusion of default MediaWiki message",
		"wikitext": "{{MediaWiki:Mainpage}}",
		"html": "<p>Main Page\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">MediaWiki:Mainpage</span>}}</span></span>"
	},
	{
		"desc": "Transclusion of nonexistent MediaWiki message",
		"wikitext": "{{MediaWiki:Mainpagexxx}}",
		"html": "<p><a href=\"/index.php?title=MediaWiki:Mainpagexxx&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"MediaWiki:Mainpagexxx (page does not exist)\">MediaWiki:Mainpagexxx</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">MediaWiki:Mainpagexxx</span>}}</span></span>"
	},
	{
		"desc": "Transclusion of MediaWiki message with underscore",
		"wikitext": "{{MediaWiki:history_short}}",
		"html": "<p>History\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">MediaWiki:history_short</span>}}</span></span>"
	},
	{
		"desc": "Transclusion of MediaWiki message with space",
		"wikitext": "{{MediaWiki:history short}}",
		"html": "<p>History\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">MediaWiki:history short</span>}}</span></span>"
	},
	{
		"desc": "Invalid header with following text",
		"wikitext": "= x = y",
		"html": "<p>= x = y\n</p>",
		"print": "<span class=\"wpb-root\">= x = y</span>"
	},
	{
		"desc": "Handling of &#x0A; in URLs",
		"wikitext": "*irc://&#x0A;a",
		"html": "<ul><li><a rel=\"nofollow\" class=\"external free\" href=\"irc://%0Aa\">irc://%0Aa</a></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span><span class=\"wpb-free-ext-link\">irc://&amp;#x0A;a</span></span>"
	},
	{
		"desc": "Handling of %0A in URLs",
		"wikitext": "*irc://%0Aa",
		"html": "<ul><li><a rel=\"nofollow\" class=\"external free\" href=\"irc://%0Aa\">irc://%0Aa</a></li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span><span class=\"wpb-free-ext-link\">irc://%0Aa</span></span>"
	},
	{
		"desc": "Special:Search page linking.",
		"wikitext": "{{Special:search}}",
		"html": "<p><a href=\"/wiki/Special:Search\" title=\"Special:Search\">Special:Search</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Special:search</span>}}</span></span>"
	},
	{
		"desc": "{{!}} is a magic word",
		"wikitext": "{{!}} is a magic word there and {{!}} is still a magic word here\n| is not a magic word here but {{!}} is still a magic word here",
		"html": "<p>| is a magic word there and | is still a magic word here\n| is not a magic word here but | is still a magic word here\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span> is a magic word there and <span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span> is still a magic word here\n| is not a magic word here but <span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span> is still a magic word here</span>"
	},
	{
		"desc": "Single {{!}} in table cell",
		"wikitext": "{|\n| colspan=\"1\" |foo {{!}} bar\n|}",
		"html": "<table>\n<tbody><tr>\n<td colspan=\"1\">foo | bar\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">colspan</span>=\"<span class=\"wpb-attr-value\">1</span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>|<span class=\"wpb-td-inner\">foo <span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span> bar</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Using {{!}} in wikilinks (T290526)",
		"wikitext": "[[Main Page{{!}}Something else]]\n\n[[{{T290526}}]]",
		"html": "<p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Something else</a>\n</p><p><a href=\"/wiki/Main_Page\" title=\"Main Page\">Something else</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Main Page</span>{{!}}<span class=\"wpb-link-text\">Something else</span>]]</span>\n\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">T290526</span>}}</span></span>]]</span></span>"
	},
	{
		"desc": "Using {{!}} in template arguments (T290526)",
		"wikitext": "{{1x|Main Page{{!}}Something else}}\n\n{{1x|{{T290526}}}}",
		"html": "<p>Main Page|Something else\n</p><p>Main Page|Something else\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Main Page<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">!</span>}}</span>Something else</span></span>}}</span>\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">T290526</span>}}</span></span></span>}}</span></span>"
	},
	{
		"desc": "HTML Hex character encoding bogus encoding (T28437 regression check)",
		"wikitext": "&#xsee;&#XSEE;",
		"html": "<p>&amp;#xsee;&amp;#XSEE;\n</p>",
		"print": "<span class=\"wpb-root\">&amp;#xsee;&amp;#XSEE;</span>"
	},
	{
		"desc": "ISBN code coverage",
		"wikitext": "ISBN  978-0-1234-56&#x20;789",
		"html": "<p><a href=\"/wiki/Special:BookSources/9780123456\" class=\"internal mw-magiclink-isbn\">ISBN 978-0-1234-56</a>&#x20;789\n</p>",
		"print": "<span class=\"wpb-root\">ISBN  978-0-1234-56&amp;#x20;789</span>"
	},
	{
		"desc": "ISBN followed by 5 spaces",
		"wikitext": "ISBN    ",
		"html": "<p>ISBN    \n</p>",
		"print": "<span class=\"wpb-root\">ISBN    </span>"
	},
	{
		"desc": "Double ISBN",
		"wikitext": "ISBN ISBN 1234567890",
		"html": "<p>ISBN <a href=\"/wiki/Special:BookSources/1234567890\" class=\"internal mw-magiclink-isbn\">ISBN 1234567890</a>\n</p>",
		"print": "<span class=\"wpb-root\">ISBN ISBN 1234567890</span>"
	},
	{
		"desc": "ISBN with an X",
		"wikitext": "ISBN 3-462-04561-X\nISBN 3-462-04561-x\nISBN 080442957X\nISBN 080442957x\nISBN 978080442957X\nISBN 978080442957x",
		"html": "<p><a href=\"/wiki/Special:BookSources/346204561X\" class=\"internal mw-magiclink-isbn\">ISBN 3-462-04561-X</a>\n<a href=\"/wiki/Special:BookSources/346204561X\" class=\"internal mw-magiclink-isbn\">ISBN 3-462-04561-x</a>\n<a href=\"/wiki/Special:BookSources/080442957X\" class=\"internal mw-magiclink-isbn\">ISBN 080442957X</a>\n<a href=\"/wiki/Special:BookSources/080442957X\" class=\"internal mw-magiclink-isbn\">ISBN 080442957x</a>\n<a href=\"/wiki/Special:BookSources/978080442957X\" class=\"internal mw-magiclink-isbn\">ISBN 978080442957X</a>\n<a href=\"/wiki/Special:BookSources/978080442957X\" class=\"internal mw-magiclink-isbn\">ISBN 978080442957x</a>\n</p>",
		"print": "<span class=\"wpb-root\">ISBN 3-462-04561-X\nISBN 3-462-04561-x\nISBN 080442957X\nISBN 080442957x\nISBN 978080442957X\nISBN 978080442957x</span>"
	},
	{
		"desc": "ISBN with empty prefix (parsoid test)",
		"wikitext": "ISBN 1234567890",
		"html": "<p><a href=\"/wiki/Special:BookSources/1234567890\" class=\"internal mw-magiclink-isbn\">ISBN 1234567890</a>\n</p>",
		"print": "<span class=\"wpb-root\">ISBN 1234567890</span>"
	},
	{
		"desc": "T24905: <abbr> followed by ISBN followed by </a>",
		"wikitext": "<abbr>(fr)</abbr> ISBN 2753300917 [http://www.example.com example.com]",
		"html": "<p><abbr>(fr)</abbr> <a href=\"/wiki/Special:BookSources/2753300917\" class=\"internal mw-magiclink-isbn\">ISBN 2753300917</a> <a rel=\"nofollow\" class=\"external text\" href=\"http://www.example.com\">example.com</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;abbr&gt;</span>(fr)<span class=\"wpb-html\">&lt;/abbr&gt;</span> ISBN 2753300917 <span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://www.example.com</span> <span class=\"wpb-ext-link-text\">example.com</span>]</span></span>"
	},
	{
		"desc": "Double RFC",
		"wikitext": "RFC RFC 1234",
		"html": "<p>RFC <a class=\"external mw-magiclink-rfc\" rel=\"nofollow\" href=\"https://tools.ietf.org/html/rfc1234\">RFC 1234</a>\n</p>",
		"print": "<span class=\"wpb-root\">RFC RFC 1234</span>"
	},
	{
		"desc": "Double RFC with a wiki link",
		"wikitext": "RFC [[RFC 1234]]",
		"html": "<p>RFC <a href=\"/index.php?title=RFC_1234&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"RFC 1234 (page does not exist)\">RFC 1234</a>\n</p>",
		"print": "<span class=\"wpb-root\">RFC <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">RFC 1234</span>]]</span></span>"
	},
	{
		"desc": "RFC code coverage",
		"wikitext": "RFC   983&#x20;987",
		"html": "<p><a class=\"external mw-magiclink-rfc\" rel=\"nofollow\" href=\"https://tools.ietf.org/html/rfc983\">RFC 983</a>&#x20;987\n</p>",
		"print": "<span class=\"wpb-root\">RFC   983&amp;#x20;987</span>"
	},
	{
		"desc": "dt/dd/dl test",
		"wikitext": ":;;;::",
		"html": "<dl><dd><dl><dt><dl><dt><dl><dt><dl><dd><dl><dd></dd></dl></dd></dl></dt></dl></dt></dl></dt></dl></dd></dl>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">:;;;::</span></span>"
	},
	{
		"desc": "[Before] HTML without raw HTML enabled ($wgRawHtml==false)",
		"wikitext": "<html><script>alert(1);</script></html>",
		"html": "<p>&lt;html&gt;&lt;script&gt;alert(1);&lt;/script&gt;&lt;/html&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&lt;html&gt;&lt;script&gt;alert(1);&lt;/script&gt;&lt;/html&gt;</span>"
	},
	{
		"desc": "Don't fall for the self-closing div",
		"wikitext": "<div>hello world</div/>",
		"html": "<div>hello world</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span>hello world<span class=\"wpb-html\">&lt;/div/&gt;</span></span>"
	},
	{
		"desc": "MSGNW magic word",
		"wikitext": "{{MSGNW:msg}}",
		"html": "<p>&#91;&#91;:Template:Msg&#93;&#93;\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">MSGNW</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">msg</span></span>}}</span></span>"
	},
	{
		"desc": "RAW magic word",
		"wikitext": "{{RAW:QUERTY}}",
		"html": "<p><a href=\"/index.php?title=Template:QUERTY&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Template:QUERTY (page does not exist)\">Template:QUERTY</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{RAW:<span class=\"wpb-template-name\">QUERTY</span>}}</span></span>"
	},
	{
		"desc": "Always escape literal '>' in output, not just after '<'",
		"wikitext": "><>",
		"html": "<p>&gt;&lt;&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&gt;&lt;&gt;</span>"
	},
	{
		"desc": "Template caching",
		"wikitext": "{{Test}}\n{{Test}}",
		"html": "<p>This is a test template\nThis is a test template\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Test</span>}}</span>\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Test</span>}}</span></span>"
	},
	{
		"desc": "Inclusion of !userCanEdit() content",
		"wikitext": "{{MediaWiki:Fake}}",
		"html": "<h2><span class=\"mw-headline\" id=\"header\">header</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=MediaWiki:Fake&amp;action=edit&amp;section=T-1\" title=\"Edit section: header\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">MediaWiki:Fake</span>}}</span></span>"
	},
	{
		"desc": "ISBN with a dummy number",
		"wikitext": "ISBN ---",
		"html": "<p>ISBN ---\n</p>",
		"print": "<span class=\"wpb-root\">ISBN ---</span>"
	},
	{
		"desc": "ISBN with space-delimited number",
		"wikitext": "ISBN 92 9017 032 8",
		"html": "<p><a href=\"/wiki/Special:BookSources/9290170328\" class=\"internal mw-magiclink-isbn\">ISBN 92 9017 032 8</a>\n</p>",
		"print": "<span class=\"wpb-root\">ISBN 92 9017 032 8</span>"
	},
	{
		"desc": "ISBN with multiple spaces, no number",
		"wikitext": "ISBN  foo",
		"html": "<p>ISBN  foo\n</p>",
		"print": "<span class=\"wpb-root\">ISBN  foo</span>"
	},
	{
		"desc": "ISBN length",
		"wikitext": "ISBN 123456789\n\nISBN 1234567890\n\nISBN 12345678901",
		"html": "<p>ISBN 123456789\n</p><p><a href=\"/wiki/Special:BookSources/1234567890\" class=\"internal mw-magiclink-isbn\">ISBN 1234567890</a>\n</p><p>ISBN 12345678901\n</p>",
		"print": "<span class=\"wpb-root\">ISBN 123456789\n\nISBN 1234567890\n\nISBN 12345678901</span>"
	},
	{
		"desc": "ISBN with trailing year (T9110)",
		"wikitext": "ISBN 1-234-56789-0 - 2006\n\nISBN 1 234 56789 0 - 2006",
		"html": "<p><a href=\"/wiki/Special:BookSources/1234567890\" class=\"internal mw-magiclink-isbn\">ISBN 1-234-56789-0</a> - 2006\n</p><p><a href=\"/wiki/Special:BookSources/1234567890\" class=\"internal mw-magiclink-isbn\">ISBN 1 234 56789 0</a> - 2006\n</p>",
		"print": "<span class=\"wpb-root\">ISBN 1-234-56789-0 - 2006\n\nISBN 1 234 56789 0 - 2006</span>"
	},
	{
		"desc": "anchorencode",
		"wikitext": "{{anchorencode:foo bar¬©#%n}}",
		"html": "<p>foo_bar¬©#%n\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo bar¬©#%n</span></span>}}</span></span>"
	},
	{
		"desc": "anchorencode (legacy)",
		"wikitext": "{{anchorencode:foo bar¬©#%n}}",
		"html": "<p>foo_bar.C2.A9.23.25n\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">foo bar¬©#%n</span></span>}}</span></span>"
	},
	{
		"desc": "anchorencode trims spaces",
		"wikitext": "{{anchorencode: __pretty__please__}}",
		"html": "<p>pretty_please\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"> __pretty__please__</span></span>}}</span></span>"
	},
	{
		"desc": "anchorencode deals with links",
		"wikitext": "{{anchorencode: [[hello|world]] [[hi]]}}",
		"html": "<p>world_hi\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">hello</span>|<span class=\"wpb-link-text\">world</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">hi</span>]]</span></span></span>}}</span></span>"
	},
	{
		"desc": "anchorencode deals with templates",
		"wikitext": "{{anchorencode: {{Foo}} x}}",
		"html": "<p>FOO_x\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"> <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Foo</span>}}</span> x</span></span>}}</span></span>"
	},
	{
		"desc": "anchorencode encodes like the TOC generator: (T20431)",
		"wikitext": "===_ +:.3A%3A _ &&amp;]] x===\n{{anchorencode: _ +:.3A%3A _ &&amp;]] x}}\n\n__NOEDITSECTION__",
		"html": "<h3><span id=\".2B:.3A.253A_.26.26.5D.5D_x\"></span><span class=\"mw-headline\" id=\"+:.3A%3A_&amp;&amp;]]_x\">_ +:.3A%3A _ &amp;&amp;]] x</span></h3>\n<p>+:.3A%253A_&amp;&amp;&#93;&#93;_x\n</p><p><br />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">===<span class=\"wpb-heading-title\">_ +:.3A%3A _ &amp;&amp;amp;]] x</span>===</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"> _ +:.3A%3A _ &amp;&amp;amp;]] x</span></span>}}</span>\n\n<span class=\"wpb-double-underscore\">__NOEDITSECTION__</span></span>"
	},
	{
		"desc": "anchorencode encodes like the TOC generator: (T20431) (legacy)",
		"wikitext": "===_ +:.3A%3A&&amp;]]===\n{{anchorencode: _ +:.3A%3A&&amp;]] }}\n__NOEDITSECTION__",
		"html": "<h3><span class=\"mw-headline\" id=\".2B:.3A.253A.26.26.5D.5D\">_ +:.3A%3A&amp;&amp;]]</span></h3>\n<p>.2B:.3A.253A.26.26.5D.5D\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">===<span class=\"wpb-heading-title\">_ +:.3A%3A&amp;&amp;amp;]]</span>===</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"> _ +:.3A%3A&amp;&amp;amp;]] </span></span>}}</span>\n<span class=\"wpb-double-underscore\">__NOEDITSECTION__</span></span>"
	},
	{
		"desc": "T8200: blockquotes and paragraph formatting",
		"wikitext": "<blockquote>\nfoo\n</blockquote>\n\nbar\n\n baz",
		"html": "<blockquote>\n<p>foo\n</p>\n</blockquote>\n<p>bar\n</p>\n<pre>baz\n</pre>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>\nfoo\n<span class=\"wpb-html\">&lt;/blockquote&gt;</span>\n\nbar\n\n baz</span>"
	},
	{
		"desc": "T10293: Use of center tag ruins paragraph formatting",
		"wikitext": "<center>\nfoo\n</center>\n\nbar\n\n baz",
		"html": "<center>\n<p>foo\n</p>\n</center>\n<p>bar\n</p>\n<pre>baz\n</pre>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;center&gt;</span>\nfoo\n<span class=\"wpb-html\">&lt;/center&gt;</span>\n\nbar\n\n baz</span>"
	},
	{
		"desc": "Parsing of overlapping (improperly nested) inline html tags",
		"wikitext": "<span><s>x</span></s>",
		"html": "<p><span><s>x</s></span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span&gt;</span><span class=\"wpb-html\">&lt;s&gt;</span>x<span class=\"wpb-html\">&lt;/span&gt;</span><span class=\"wpb-html\">&lt;/s&gt;</span></span>"
	},
	{
		"desc": "T2529: Uncovered bullet",
		"wikitext": "*Foo {{bullet}}",
		"html": "<ul><li>Foo</li>\n<li>Bar</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>Foo <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">bullet</span>}}</span></span>"
	},
	{
		"desc": "T2529: Uncovered bullet in a deeply nested list",
		"wikitext": "*******Foo {{bullet}}",
		"html": "<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li>Foo</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>\n<li>Bar</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*******</span>Foo <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">bullet</span>}}</span></span>"
	},
	{
		"desc": "T2529: Uncovered table already at line-start",
		"wikitext": "x\n\n{{table}}\ny",
		"html": "<p>x\n</p>\n<table>\n<tbody><tr>\n<td>1</td>\n<td>2\n</td></tr>\n<tr>\n<td>3</td>\n<td>4\n</td></tr></tbody></table>\n<p>y\n</p>",
		"print": "<span class=\"wpb-root\">x\n\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">table</span>}}</span>\ny</span>"
	},
	{
		"desc": "T2529: Uncovered bullet in parser function result",
		"wikitext": "*Foo{{lc:{{bullet}} }}",
		"html": "<ul><li>Foo</li>\n<li>bar</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>Foo<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">lc</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">bullet</span>}}</span> </span></span>}}</span></span>"
	},
	{
		"desc": "T7678: Double-parsed template argument",
		"wikitext": "{{lc:{{{1}}}|hello}}",
		"html": "<p>{{{1}}}\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">lc</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-arg\">{{{<span class=\"wpb-arg-name\">1</span>}}}</span></span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">hello</span></span>}}</span></span>"
	},
	{
		"desc": "Morwen/13: Unclosed link followed by heading",
		"wikitext": "[[link\n==heading==",
		"html": "<p>[[link\n</p>\n<h2><span class=\"mw-headline\" id=\"heading\">heading</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: heading\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>",
		"print": "<span class=\"wpb-root\">[[link\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">heading</span>==</span></span>"
	},
	{
		"desc": "HHP2.1: Heuristics for headings in preprocessor parenthetical structures",
		"wikitext": "{{foo|\n=heading=",
		"html": "<p>{{foo|\n</p>\n<h1><span class=\"mw-headline\" id=\"heading\">heading</span></h1>",
		"print": "<span class=\"wpb-root\">{{foo|\n<span class=\"wpb-heading\">=<span class=\"wpb-heading-title\">heading</span>=</span></span>"
	},
	{
		"desc": "HHP2.2: Heuristics for headings in preprocessor parenthetical structures",
		"wikitext": "{{foo|\n==heading==",
		"html": "<p>{{foo|\n</p>\n<h2><span class=\"mw-headline\" id=\"heading\">heading</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: heading\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>",
		"print": "<span class=\"wpb-root\">{{foo|\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">heading</span>==</span></span>"
	},
	{
		"desc": "Paragraphs inside divs (no extra line breaks)",
		"wikitext": "<div>Line one\n\nLine two</div>",
		"html": "<div>Line one\nLine two</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span>Line one\n\nLine two<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Paragraphs inside divs (extra line break on open)",
		"wikitext": "<div>\nLine one\n\nLine two</div>",
		"html": "<div>\n<p>Line one\n</p>\nLine two</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span>\nLine one\n\nLine two<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Paragraphs inside divs (extra line break on close)",
		"wikitext": "<div>Line one\n\nLine two\n</div>",
		"html": "<div>Line one\n<p>Line two\n</p>\n</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span>Line one\n\nLine two\n<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Paragraphs inside divs (extra line break on open and close)",
		"wikitext": "<div>\nLine one\n\nLine two\n</div>",
		"html": "<div>\n<p>Line one\n</p><p>Line two\n</p>\n</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span>\nLine one\n\nLine two\n<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "Nesting tags, paragraphs on lines which begin with <div>",
		"wikitext": "<div></div><strong>A\nB</strong>",
		"html": "<div></div><p><strong>A\n</strong></p><strong></strong><p><strong>B</strong>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div&gt;</span><span class=\"wpb-html\">&lt;/div&gt;</span><span class=\"wpb-html\">&lt;strong&gt;</span>A\nB<span class=\"wpb-html\">&lt;/strong&gt;</span></span>"
	},
	{
		"desc": "T8200: paragraphs inside blockquotes (no extra line breaks)",
		"wikitext": "<blockquote>Line one\n\nLine two</blockquote>",
		"html": "<blockquote><p>Line one\nLine two</p></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>Line one\n\nLine two<span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "T8200: paragraphs inside blockquotes (extra line break on open)",
		"wikitext": "<blockquote>\nLine one\n\nLine two</blockquote>",
		"html": "<blockquote>\n<p>Line one\n</p><p>\nLine two</p></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>\nLine one\n\nLine two<span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "T8200: paragraphs inside blockquotes (extra line break on close)",
		"wikitext": "<blockquote>Line one\n\nLine two\n</blockquote>",
		"html": "<blockquote><p>Line one\n</p><p>Line two\n</p>\n</blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>Line one\n\nLine two\n<span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "T8200: paragraphs inside blockquotes (extra line break on open and close)",
		"wikitext": "<blockquote>\nLine one\n\nLine two\n</blockquote>",
		"html": "<blockquote>\n<p>Line one\n</p><p>Line two\n</p>\n</blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span>\nLine one\n\nLine two\n<span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "Paragraphs inside blockquotes/divs (no extra line breaks)",
		"wikitext": "<blockquote><div>Line one\n\nLine two</div></blockquote>",
		"html": "<blockquote><div>Line one\nLine two</div></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span><span class=\"wpb-html\">&lt;div&gt;</span>Line one\n\nLine two<span class=\"wpb-html\">&lt;/div&gt;</span><span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "Paragraphs inside blockquotes/divs (extra line break on open)",
		"wikitext": "<blockquote><div>\nLine one\n\nLine two</div></blockquote>",
		"html": "<blockquote><div>\n<p>Line one\n</p>\nLine two</div></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span><span class=\"wpb-html\">&lt;div&gt;</span>\nLine one\n\nLine two<span class=\"wpb-html\">&lt;/div&gt;</span><span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "Paragraphs inside blockquotes/divs (extra line break on close)",
		"wikitext": "<blockquote><div>Line one\n\nLine two\n</div></blockquote>",
		"html": "<blockquote><div>Line one\n<p>Line two\n</p>\n</div></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span><span class=\"wpb-html\">&lt;div&gt;</span>Line one\n\nLine two\n<span class=\"wpb-html\">&lt;/div&gt;</span><span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "Paragraphs inside blockquotes/divs (extra line break on open and close)",
		"wikitext": "<blockquote><div>\nLine one\n\nLine two\n</div></blockquote>",
		"html": "<blockquote><div>\n<p>Line one\n</p><p>Line two\n</p>\n</div></blockquote>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;blockquote&gt;</span><span class=\"wpb-html\">&lt;div&gt;</span>\nLine one\n\nLine two\n<span class=\"wpb-html\">&lt;/div&gt;</span><span class=\"wpb-html\">&lt;/blockquote&gt;</span></span>"
	},
	{
		"desc": "Multibyte character in padleft",
		"wikitext": "{{padleft:-Hello|7|√Ü}}",
		"html": "<p>√Ü-Hello\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padleft</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">-Hello</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">7</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">√Ü</span></span>}}</span></span>"
	},
	{
		"desc": "Multibyte character in padright",
		"wikitext": "{{padright:Hello-|7|√Ü}}",
		"html": "<p>Hello-√Ü\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padright</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Hello-</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">7</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">√Ü</span></span>}}</span></span>"
	},
	{
		"desc": "formatdate parser function",
		"wikitext": "{{#formatdate:2009-03-24}}",
		"html": "<p><span class=\"mw-formatted-date\" title=\"2009-03-24\">2009-03-24</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">2009-03-24</span></span>}}</span></span>"
	},
	{
		"desc": "formatdate parser function, with default format",
		"wikitext": "{{#formatdate:2009-03-24|mdy}}",
		"html": "<p><span class=\"mw-formatted-date\" title=\"2009-03-24\">March 24, 2009</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">2009-03-24</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">mdy</span></span>}}</span></span>"
	},
	{
		"desc": "Spacing of numbers in formatted dates",
		"wikitext": "{{#formatdate:January 15}}",
		"html": "<p><span class=\"mw-formatted-date\" title=\"01-15\">January 15</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">January 15</span></span>}}</span></span>"
	},
	{
		"desc": "formatdate with invalid month",
		"wikitext": "{{#formatdate:2019-22-22|dmy}}",
		"html": "<p>2019-22-22\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">2019-22-22</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">dmy</span></span>}}</span></span>"
	},
	{
		"desc": "formatdate uses correct capitalisation in English",
		"wikitext": "{{#formatdate:june 3|dmy}}",
		"html": "<p><span class=\"mw-formatted-date\" title=\"06-03\">3 June</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">june 3</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">dmy</span></span>}}</span></span>"
	},
	{
		"desc": "formatdate formats ISO year 0 as 1 BC",
		"wikitext": "{{#formatdate:-0001-12-31|mdy}}\n{{#formatdate:0000-12-31|mdy}}\n{{#formatdate:0001-12-31|mdy}}",
		"html": "<p><span class=\"mw-formatted-date\" title=\"-0001-12-31\">December 31, 2 BC</span>\n<span class=\"mw-formatted-date\" title=\"0000-12-31\">December 31, 1 BC</span>\n<span class=\"mw-formatted-date\" title=\"0001-12-31\">December 31, 1</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">-0001-12-31</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">mdy</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">0000-12-31</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">mdy</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#formatdate</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">0001-12-31</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">mdy</span></span>}}</span></span>"
	},
	{
		"desc": "Play a bit with r67090 and T5158",
		"wikitext": "<div style=\"width:50% !important\">&nbsp;</div>\n<div style=\"width:50%&nbsp;!important\">&nbsp;</div>\n<div style=\"width:50%&#160;!important\">&nbsp;</div>\n<div style=\"border : solid;\">&nbsp;</div>",
		"html": "<div style=\"width:50% !important\">&#160;</div>\n<div style=\"width:50%&#160;!important\">&#160;</div>\n<div style=\"width:50%&#160;!important\">&#160;</div>\n<div style=\"border : solid;\">&#160;</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">width:50% !important</span>\"</span></span>&gt;</span>&amp;nbsp;<span class=\"wpb-html\">&lt;/div&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">width:50%&amp;nbsp;!important</span>\"</span></span>&gt;</span>&amp;nbsp;<span class=\"wpb-html\">&lt;/div&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">width:50%&amp;#160;!important</span>\"</span></span>&gt;</span>&amp;nbsp;<span class=\"wpb-html\">&lt;/div&gt;</span>\n<span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">border : solid;</span>\"</span></span>&gt;</span>&amp;nbsp;<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "French spaces in wikitext",
		"wikitext": "foo ! bar ? bat 50 % is less than 75 %.\n\nHello : this ; is ¬´ something ‚Äπ else ‚Ä∫ again ¬ª",
		"html": "<p>foo&#160;! bar&#160;? bat 50&#160;% is less than 75&#160;%.\n</p><p>Hello&#160;: this&#160;; is ¬´&#160;something ‚Äπ&#160;else&#160;‚Ä∫ again&#160;¬ª\n</p>",
		"print": "<span class=\"wpb-root\">foo ! bar ? bat 50 % is less than 75 %.\n\nHello : this ; is ¬´ something ‚Äπ else ‚Ä∫ again ¬ª</span>"
	},
	{
		"desc": "T5158: Test for French spaces in attributes",
		"wikitext": "<br style=\" clear : both ; \" />",
		"html": "<p><br style=\"clear : both ;\" />\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;br<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\"> clear : both ; </span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>/&gt;</span></span>"
	},
	{
		"desc": "HTML5 data attributes",
		"wikitext": "<span data-foo=\"bar\">Baz</span>\n<p data-abc-def_hij=\"\">Quuz</p>",
		"html": "<p><span data-foo=\"bar\">Baz</span>\n</p>\n<p data-abc-def_hij=\"\">Quuz</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-foo</span>=\"<span class=\"wpb-attr-value\">bar</span>\"</span></span>&gt;</span>Baz<span class=\"wpb-html\">&lt;/span&gt;</span>\n<span class=\"wpb-html\">&lt;p<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-abc-def_hij</span>=\"\"</span></span>&gt;</span>Quuz<span class=\"wpb-html\">&lt;/p&gt;</span></span>"
	},
	{
		"desc": "Strip reserved data attributes",
		"wikitext": "<div data-mw=\"foo\" data-parsoid=\"bar\" data-mw-someext=\"baz\" data-ok=\"fred\" data-object-id=\"123\" data-ooui=\"xyzzy\" data-bad:ns=\"ns\">d</div>",
		"html": "<div data-ok=\"fred\" data-object-id=\"123\">d</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-mw</span>=\"<span class=\"wpb-attr-value\">foo</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-parsoid</span>=\"<span class=\"wpb-attr-value\">bar</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-mw-someext</span>=\"<span class=\"wpb-attr-value\">baz</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-ok</span>=\"<span class=\"wpb-attr-value\">fred</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-object-id</span>=\"<span class=\"wpb-attr-value\">123</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-ooui</span>=\"<span class=\"wpb-attr-value\">xyzzy</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">data-bad:ns</span>=\"<span class=\"wpb-attr-value\">ns</span>\"</span></span>&gt;</span>d<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "percent-encoding and + signs in internal links (T28410)",
		"wikitext": "[[User:+%]] [[Page+title%]]\n[[%+]] [[%+|%20]] [[%+ ]] [[%+r]]\n[[%]] [[+]] [[File:%+abc%39|foo|[[bar]]]]\n[[%33%45]] [[%33%45+]]",
		"html": "<p><a href=\"/index.php?title=User:%2B%25&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"User:+% (page does not exist)\">User:+%</a> <a href=\"/index.php?title=Page%2Btitle%25&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"Page+title% (page does not exist)\">Page+title%</a>\n<a href=\"/index.php?title=%25%2B&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"%+ (page does not exist)\">%+</a> <a href=\"/index.php?title=%25%2B&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"%+ (page does not exist)\">%20</a> <a href=\"/index.php?title=%25%2B&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"%+ (page does not exist)\">%+ </a> <a href=\"/index.php?title=%25%2Br&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"%+r (page does not exist)\">%+r</a>\n<a href=\"/index.php?title=%25&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"% (page does not exist)\">%</a> <a href=\"/index.php?title=%2B&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"+ (page does not exist)\">+</a> <span class=\"mw-default-size\" typeof=\"mw:Error mw:File\"><a href=\"/index.php?title=Special:Upload&amp;wpDestFile=%25%2Babc9\" class=\"new\" title=\"File:%+abc9\"><span class=\"mw-file-element mw-broken-media\">bar</span></a></span>\n<a href=\"/index.php?title=3E&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"3E (page does not exist)\">3E</a> <a href=\"/index.php?title=3E%2B&amp;action=edit&amp;redlink=1\" class=\"new\" title=\"3E+ (page does not exist)\">3E+</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">User:+%</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Page+title%</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%+</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%+</span>|<span class=\"wpb-link-text\">%20</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%+ </span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%+r</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">+</span>]]</span> [[File:%+abc%39|foo|<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">bar</span>]]</span>]]\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%33%45</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">%33%45+</span>]]</span></span>"
	},
	{
		"desc": "Confirm that 'apos' named character reference doesn't make it to output (not legal in HTML 4)",
		"wikitext": "Text&apos;s been normalized?",
		"html": "<p>Text&#39;s been normalized?\n</p>",
		"print": "<span class=\"wpb-root\">Text&amp;apos;s been normalized?</span>"
	},
	{
		"desc": "T21052 U+3000 IDEOGRAPHIC SPACE should terminate free external links",
		"wikitext": "http://www.example.org/„ÄÄ<-- U+3000 (vim: ^Vu3000)",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"http://www.example.org/\">http://www.example.org/</a>„ÄÄ&lt;-- U+3000 (vim: ^Vu3000)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://www.example.org/</span>„ÄÄ&lt;-- U+3000 (vim: ^Vu3000)</span>"
	},
	{
		"desc": "T21052 U+3000 IDEOGRAPHIC SPACE should terminate bracketed external links",
		"wikitext": "[http://www.example.org/„ÄÄideograms]",
		"html": "<p><a rel=\"nofollow\" class=\"external text\" href=\"http://www.example.org/\">ideograms</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://www.example.org/</span>„ÄÄ<span class=\"wpb-ext-link-text\">ideograms</span>]</span></span>"
	},
	{
		"desc": "T21052 U+3000 IDEOGRAPHIC SPACE should terminate external images links",
		"wikitext": "http://www.example.org/pic.png„ÄÄ<-- U+3000 (vim: ^Vu3000)",
		"html": "<p><img src=\"http://www.example.org/pic.png\" alt=\"pic.png\" />„ÄÄ&lt;-- U+3000 (vim: ^Vu3000)\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">http://www.example.org/pic.png</span>„ÄÄ&lt;-- U+3000 (vim: ^Vu3000)</span>"
	},
	{
		"desc": "T33098 Template which includes system messages which includes the template",
		"wikitext": "{{Identical}}",
		"html": "<p><span class=\"error\">Template loop detected: <a href=\"/wiki/Template:Identical\" title=\"Template:Identical\">Template:Identical</a></span>\n<span class=\"error\">Template loop detected: <a href=\"/wiki/Template:Identical\" title=\"Template:Identical\">Template:Identical</a></span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Identical</span>}}</span></span>"
	},
	{
		"desc": "Strip marker in urlencode",
		"wikitext": "{{urlencode:x<nowiki/>y}}\n{{urlencode:x<nowiki/>y|wiki}}\n{{urlencode:x<nowiki/>y|path}}\n{{urlencode:x<pre id=\"one\">two</pre>y}}",
		"html": "<p>xy\nxy\nxy\nxy\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">wiki</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">path</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">urlencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;pre<span class=\"wpb-ext-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-ext-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\">one</span>\"</span></span>&gt;<span class=\"wpb-ext-inner\">two</span>&lt;/pre&gt;</span>y</span></span>}}</span></span>"
	},
	{
		"desc": "Strip marker in lc",
		"wikitext": "{{lc:x<nowiki/>y}}",
		"html": "<p>xy\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">lc</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>}}</span></span>"
	},
	{
		"desc": "Strip marker in uc",
		"wikitext": "{{uc:x<nowiki/>y}}",
		"html": "<p>XY\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">uc</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>}}</span></span>"
	},
	{
		"desc": "Strip marker in formatNum",
		"wikitext": "{{formatnum:1<nowiki/>2}}\n{{formatnum:1<nowiki/>2|R}}",
		"html": "<p>12\n12\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">formatnum</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">1<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>2</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">formatnum</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">1<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>2</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">R</span></span>}}</span></span>"
	},
	{
		"desc": "Wrong option for formatNum (T58199)",
		"wikitext": "{{formatnum:1,234.56|Random}}\n{{formatnum:1,234.56|EVERYTHING}}\n{{formatnum:1234.56|any argument that has the string 'NOSEP'}}",
		"html": "<p>1,234.56\n1,234.56\n1,234.56\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">formatnum</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">1,234.56</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Random</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">formatnum</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">1,234.56</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">EVERYTHING</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">formatnum</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">1234.56</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">any argument that has the string 'NOSEP'</span></span>}}</span></span>"
	},
	{
		"desc": "Strip marker in padleft",
		"wikitext": "{{padleft:|2|x<nowiki/>y}}",
		"html": "<p>xy\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padleft</span>:|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">2</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>}}</span></span>"
	},
	{
		"desc": "Strip marker in padright",
		"wikitext": "{{padright:|2|x<nowiki/>y}}",
		"html": "<p>xy\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padright</span>:|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">2</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>}}</span></span>"
	},
	{
		"desc": "Strip marker in anchorencode",
		"wikitext": "{{anchorencode:x<nowiki/>y}}",
		"html": "<p>xy\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">x<span class=\"wpb-ext\">&lt;nowiki/&gt;</span>y</span></span>}}</span></span>"
	},
	{
		"desc": "nowiki inside link inside heading (T20295)",
		"wikitext": "==[[foo|x<nowiki>y</nowiki>z]]==",
		"html": "<h2><span class=\"mw-headline\" id=\"xyz\"><a href=\"/wiki/Foo\" title=\"Foo\">xyz</a></span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: xyz\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">foo</span>|<span class=\"wpb-link-text\">x<span class=\"wpb-ext\">&lt;nowiki&gt;<span class=\"wpb-ext-inner\">y</span>&lt;/nowiki&gt;</span>z</span>]]</span></span>==</span></span>"
	},
	{
		"desc": "new support for bdi element (T33817)",
		"wikitext": "<p dir=\"rtl\" lang=\"he\">◊ï◊ú◊ì◊ô◊û◊ô◊® ◊ú◊†◊ô◊ü (◊ë◊®◊ï◊°◊ô◊™: <bdi lang=\"ru\">–í–ª–∞–¥–∏–º–∏—Ä –õ–µ–Ω–∏–Ω</bdi>, 24 ◊ë◊ê◊§◊®◊ô◊ú 1870‚Äì22 ◊ë◊ô◊†◊ï◊ê◊® 1924) ◊î◊ï◊ê ◊û◊†◊î◊ô◊í ◊§◊ï◊ú◊ô◊ò◊ô ◊ß◊ï◊û◊ï◊†◊ô◊°◊ò◊ô ◊®◊ï◊°◊ô.</p>",
		"html": "<p dir=\"rtl\" lang=\"he\">◊ï◊ú◊ì◊ô◊û◊ô◊® ◊ú◊†◊ô◊ü (◊ë◊®◊ï◊°◊ô◊™: <bdi lang=\"ru\">–í–ª–∞–¥–∏–º–∏—Ä –õ–µ–Ω–∏–Ω</bdi>, 24 ◊ë◊ê◊§◊®◊ô◊ú 1870‚Äì22 ◊ë◊ô◊†◊ï◊ê◊® 1924) ◊î◊ï◊ê ◊û◊†◊î◊ô◊í ◊§◊ï◊ú◊ô◊ò◊ô ◊ß◊ï◊û◊ï◊†◊ô◊°◊ò◊ô ◊®◊ï◊°◊ô.</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;p<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">dir</span>=\"<span class=\"wpb-attr-value\">rtl</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">lang</span>=\"<span class=\"wpb-attr-value\">he</span>\"</span></span>&gt;</span>◊ï◊ú◊ì◊ô◊û◊ô◊® ◊ú◊†◊ô◊ü (◊ë◊®◊ï◊°◊ô◊™: <span class=\"wpb-html\">&lt;bdi<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">lang</span>=\"<span class=\"wpb-attr-value\">ru</span>\"</span></span>&gt;</span>–í–ª–∞–¥–∏–º–∏—Ä –õ–µ–Ω–∏–Ω<span class=\"wpb-html\">&lt;/bdi&gt;</span>, 24 ◊ë◊ê◊§◊®◊ô◊ú 1870‚Äì22 ◊ë◊ô◊†◊ï◊ê◊® 1924) ◊î◊ï◊ê ◊û◊†◊î◊ô◊í ◊§◊ï◊ú◊ô◊ò◊ô ◊ß◊ï◊û◊ï◊†◊ô◊°◊ò◊ô ◊®◊ï◊°◊ô.<span class=\"wpb-html\">&lt;/p&gt;</span></span>"
	},
	{
		"desc": "Ignore pipe between table row attributes",
		"wikitext": "{|\n|quux\n|- id=foo | style='color: red'\n|bar\n|}",
		"html": "<table>\n<tbody><tr>\n<td>quux\n</td></tr>\n<tr id=\"foo\" style=\"color: red\">\n<td>bar\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">quux</span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">id</span>=<span class=\"wpb-attr-value\">foo</span></span><span class=\"wpb-attr-dirty\"> | </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">style</span>='<span class=\"wpb-attr-value\">color: red</span>'</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">bar</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Language parser function",
		"wikitext": "{{#language:ar}}",
		"html": "<p>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#language</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">ar</span></span>}}</span></span>"
	},
	{
		"desc": "Padleft and padright (default 0-padding)",
		"wikitext": "{{padleft:xyz|5}}\n{{padright:xyz|5}}",
		"html": "<p>00xyz\nxyz00\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padleft</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">xyz</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">5</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padright</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">xyz</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">5</span></span>}}</span></span>"
	},
	{
		"desc": "Padleft and padright (partial fill)",
		"wikitext": "{{padleft:xyz|6|ab}}\n{{padright:xyz|6|ab}}",
		"html": "<p>abaxyz\nxyzaba\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padleft</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">xyz</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">6</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">ab</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padright</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">xyz</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">6</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">ab</span></span>}}</span></span>"
	},
	{
		"desc": "Padleft and padright as substr",
		"wikitext": "{{padleft:|3|abcde}}\n{{padright:|3|abcde}}",
		"html": "<p>abc\nabc\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padleft</span>:|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">3</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">abcde</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padright</span>:|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">3</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">abcde</span></span>}}</span></span>"
	},
	{
		"desc": "Padleft and padright with non-numerical length (T180403)",
		"wikitext": "{{padleft:abcdef|junk}}\n{{padright:abcdef|junk}}",
		"html": "<p>abcdef\nabcdef\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padleft</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">abcdef</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">junk</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">padright</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">abcdef</span></span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">junk</span></span>}}</span></span>"
	},
	{
		"desc": "Special parser function",
		"wikitext": "{{#special:RandomPage}}\n{{#special:BaDtItLe}}\n{{#special:Foobar}}",
		"html": "<p>Special:Random\nSpecial:Badtitle\nSpecial:Foobar\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#special</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">RandomPage</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#special</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">BaDtItLe</span></span>}}</span>\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">#special</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">Foobar</span></span>}}</span></span>"
	},
	{
		"desc": "Using {{=}} when it expands to \"=\" should not create a tracking category",
		"wikitext": "This uses {{=}} and {{Template:=}}.",
		"html": "<p>This uses = and =.\n</p>",
		"print": "<span class=\"wpb-root\">This uses <span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">=</span>}}</span> and <span class=\"wpb-template\">{{<span class=\"wpb-template-name\">Template:=</span>}}</span>.</span>"
	},
	{
		"desc": "T36939 - Case insensitive link parsing ([HttP://])",
		"wikitext": "[HttP://MediaWiki.Org/]",
		"html": "<p><a rel=\"nofollow\" class=\"external autonumber\" href=\"HttP://MediaWiki.Org/\">[1]</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">HttP://MediaWiki.Org/</span>]</span></span>"
	},
	{
		"desc": "T36939 - Case insensitive link parsing ([HttP:// title])",
		"wikitext": "[HttP://MediaWiki.Org/ MediaWiki]",
		"html": "<p><a rel=\"nofollow\" class=\"external text\" href=\"HttP://MediaWiki.Org/\">MediaWiki</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">HttP://MediaWiki.Org/</span> <span class=\"wpb-ext-link-text\">MediaWiki</span>]</span></span>"
	},
	{
		"desc": "T36939 - Case insensitive link parsing (HttP://)",
		"wikitext": "HttP://MediaWiki.Org/",
		"html": "<p><a rel=\"nofollow\" class=\"external free\" href=\"HttP://MediaWiki.Org/\">HttP://MediaWiki.Org/</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-free-ext-link\">HttP://MediaWiki.Org/</span></span>"
	},
	{
		"desc": "\nTag-like HTML structures are passed through as text",
		"wikitext": "<x y>\n\n<x.y>\n\n<x-y>\n\n1>2\n\nx<y\n\na>b\n\n1<d e>f",
		"html": "<p>&lt;x y&gt;\n</p><p>&lt;x.y&gt;\n</p><p>&lt;x-y&gt;\n</p><p>1&gt;2\n</p><p>x&lt;y\n</p><p>a&gt;b\n</p><p>1&lt;d e&gt;f\n</p>",
		"print": "<span class=\"wpb-root\">&lt;x y&gt;\n\n&lt;x.y&gt;\n\n&lt;x-y&gt;\n\n1&gt;2\n\nx&lt;y\n\na&gt;b\n\n1&lt;d e&gt;f</span>"
	},
	{
		"desc": "HTML tag with necessary entities in attributes",
		"wikitext": "<span title=\"&amp;amp;\">foo</span>",
		"html": "<p><span title=\"&amp;amp;\">foo</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">&amp;amp;amp;</span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "HTML tag with 'unnecessary' entity encoding in attributes",
		"wikitext": "<span title=\"&amp;\">foo</span>",
		"html": "<p><span title=\"&amp;\">foo</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">&amp;amp;</span>\"</span></span>&gt;</span>foo<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "Accept empty td cell attribute",
		"wikitext": "{|\n| align=\"center\" |foo||  |\n|}",
		"html": "<table>\n<tbody><tr>\n<td align=\"center\">foo</td>\n<td>\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">align</span>=\"<span class=\"wpb-attr-value\">center</span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>|<span class=\"wpb-td-inner\">foo</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">||</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\">  </span></span>|</span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Non-empty attributes in th-cells",
		"wikitext": "{|\n!Foo!! style=\"color: red\" |Bar\n|}",
		"html": "<table>\n<tbody><tr>\n<th>Foo</th>\n<th style=\"color: red\">Bar\n</th></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n!</span><span class=\"wpb-td-inner\">Foo</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">!!</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">style</span>=\"<span class=\"wpb-attr-value\">color: red</span>\"</span><span class=\"wpb-attr-dirty\"> </span></span>|<span class=\"wpb-td-inner\">Bar</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Accept empty attributes in th-cells",
		"wikitext": "{|\n!|foo!!|bar\n|}",
		"html": "<table>\n<tbody><tr>\n<th>foo</th>\n<th>bar\n</th></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n!</span>|<span class=\"wpb-td-inner\">foo</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">!!</span>|<span class=\"wpb-td-inner\">bar</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Empty table rows go away",
		"wikitext": "{|\n|Hello\n|there\n|- class=\"foo\"\n|-\n|}",
		"html": "<table>\n<tbody><tr>\n<td>Hello\n</td>\n<td>there\n</td></tr>\n\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">Hello</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-td-inner\">there</span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\">class</span>=\"<span class=\"wpb-attr-value\">foo</span>\"</span></span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "RT-ed inter-element separators should be valid separators",
		"wikitext": "{|\n|- [[foo]]\n|}",
		"html": "<table>\n\n</table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-attrs\"><span class=\"wpb-attr-dirty\"> [[foo]]</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Empty TD followed by TD with tpl-generated attribute",
		"wikitext": "{|\n|-\n|\n|{{1x|style='color:red'}}|foo\n|}",
		"html": "<table>\n\n<tbody><tr>\n<td>\n</td>\n<td>foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n|</span><span class=\"wpb-table-attrs\"><span class=\"wpb-table-attr\"><span class=\"wpb-attr-key\"><span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-key\">style</span>=<span class=\"wpb-parameter-value\">'color:red'</span></span>}}</span></span></span></span>|<span class=\"wpb-td-inner\">foo</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Indented table with an empty td",
		"wikitext": " {|\n |-\n |\n |foo\n |}",
		"html": "<table>\n\n<tbody><tr>\n<td>\n</td>\n<td>foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"> <span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n |-</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n |</span></span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n |</span><span class=\"wpb-td-inner\">foo</span></span></span><span class=\"wpb-table-syntax\">\n |}</span></span></span>"
	},
	{
		"desc": "Indented table with blank lines in between (T85627)",
		"wikitext": " {|\n |foo\n \n \n |}",
		"html": "<table>\n<tbody><tr>\n<td>foo\n<p><br /> \n</p>\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"> <span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n |</span><span class=\"wpb-td-inner\">foo\n \n </span></span><span class=\"wpb-table-syntax\">\n |}</span></span></span>"
	},
	{
		"desc": "Indented block & table",
		"wikitext": " <div>foo</div>\n {|\n |foo\n |}",
		"html": " <div>foo</div>\n<table>\n<tbody><tr>\n<td>foo\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"> <span class=\"wpb-html\">&lt;div&gt;</span>foo<span class=\"wpb-html\">&lt;/div&gt;</span>\n <span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n |</span><span class=\"wpb-td-inner\">foo</span></span><span class=\"wpb-table-syntax\">\n |}</span></span></span>"
	},
	{
		"desc": "Indent and comment before table row",
		"wikitext": "{|\n <!--hi-->|-\n |there\n|}",
		"html": "<table>\n\n<tbody><tr>\n<td>there\n</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n <span class=\"wpb-comment\">&lt;!--hi--&gt;</span>|-</span><span class=\"wpb-td\"><span class=\"wpb-table-syntax\">\n |</span><span class=\"wpb-td-inner\">there</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Empty TR followed by a template-generated TR",
		"wikitext": "{|\n|-\n{{1x|<tr><td>foo</td></tr>}}\n|}",
		"html": "<table>\n\n<tbody><tr><td>foo</td></tr>\n</tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-inter\">\n<span class=\"wpb-template\">{{<span class=\"wpb-template-name\">1x</span>|<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\"><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>foo<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span></span></span>}}</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "Empty TR followed by mixed-ws-comment line should RT correctly",
		"wikitext": "{|\n|-\n <!--c-->\n|-\n<!--c--> <!--d-->\n|}",
		"html": "<table>\n\n\n</table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-table\"><span class=\"wpb-table-syntax\">{|</span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-inter\">\n <span class=\"wpb-comment\">&lt;!--c--&gt;</span></span></span><span class=\"wpb-tr\"><span class=\"wpb-table-syntax\">\n|-</span><span class=\"wpb-table-inter\">\n<span class=\"wpb-comment\">&lt;!--c--&gt;</span> <span class=\"wpb-comment\">&lt;!--d--&gt;</span></span></span><span class=\"wpb-table-syntax\">\n|}</span></span></span>"
	},
	{
		"desc": "T72867: Don't block XML namespace declaration",
		"wikitext": "<span xmlns:dct=\"http://purl.org/dc/terms/\" property=\"dct:title\">MediaWiki</span>",
		"html": "<p><span xmlns:dct=\"http&#58;//purl.org/dc/terms/\" property=\"dct:title\">MediaWiki</span>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">xmlns:dct</span>=\"<span class=\"wpb-attr-value\">http://purl.org/dc/terms/</span>\"</span><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">property</span>=\"<span class=\"wpb-attr-value\">dct:title</span>\"</span></span>&gt;</span>MediaWiki<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "Magic links inside links (not autolinked)",
		"wikitext": "[[Foo|http://example.com]]\n[[Foo|RFC 1234]]\n[[Foo|PMID 1234]]\n[[Foo|ISBN 123456789x]]\n\n[http://foo.com http://example.com]\n[http://foo.com RFC 1234]\n[http://foo.com PMID 1234]\n[http://foo.com ISBN 123456789x]",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">http://example.com</a>\n<a href=\"/wiki/Foo\" title=\"Foo\">RFC 1234</a>\n<a href=\"/wiki/Foo\" title=\"Foo\">PMID 1234</a>\n<a href=\"/wiki/Foo\" title=\"Foo\">ISBN 123456789x</a>\n</p><p><a rel=\"nofollow\" class=\"external text\" href=\"http://foo.com\">http://example.com</a>\n<a rel=\"nofollow\" class=\"external text\" href=\"http://foo.com\">RFC 1234</a>\n<a rel=\"nofollow\" class=\"external text\" href=\"http://foo.com\">PMID 1234</a>\n<a rel=\"nofollow\" class=\"external text\" href=\"http://foo.com\">ISBN 123456789x</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">http://example.com</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">RFC 1234</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">PMID 1234</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">ISBN 123456789x</span>]]</span>\n\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://foo.com</span> <span class=\"wpb-ext-link-text\">http://example.com</span>]</span>\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://foo.com</span> <span class=\"wpb-ext-link-text\">RFC 1234</span>]</span>\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://foo.com</span> <span class=\"wpb-ext-link-text\">PMID 1234</span>]</span>\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://foo.com</span> <span class=\"wpb-ext-link-text\">ISBN 123456789x</span>]</span></span>"
	},
	{
		"desc": "Don't escape pre elements that fail to parse as extension tags",
		"wikitext": "<pre>closed is extension tag, so everything is <span>text</span></pre>\n<pre>unclosed is not, so these are <span>tags</span>",
		"html": "<pre>closed is extension tag, so everything is &lt;span&gt;text&lt;/span&gt;</pre>\n<pre>unclosed is not, so these are <span>tags</span></pre>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext\">&lt;pre&gt;<span class=\"wpb-ext-inner\">closed is extension tag, so everything is &lt;span&gt;text&lt;/span&gt;</span>&lt;/pre&gt;</span>\n<span class=\"wpb-html\">&lt;pre&gt;</span>unclosed is not, so these are <span class=\"wpb-html\">&lt;span&gt;</span>tags<span class=\"wpb-html\">&lt;/span&gt;</span></span>"
	},
	{
		"desc": "Empty LI (T49673)",
		"wikitext": "*a\n* \n*\n*b",
		"html": "<ul><li>a</li>\n<li class=\"mw-empty-elt\"></li>\n<li class=\"mw-empty-elt\"></li>\n<li>b</li></ul>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-list\">*</span>a\n<span class=\"wpb-list\">*</span> \n<span class=\"wpb-list\">*</span>\n<span class=\"wpb-list\">*</span>b</span>"
	},
	{
		"desc": "unclosed internal link XSS (T137264)",
		"wikitext": "[[#%3Cscript%3Ealert(1)%3C/script%3E|",
		"html": "<p>[[#&lt;script&gt;alert(1)&lt;/script&gt;|\n</p>",
		"print": "<span class=\"wpb-root\">[[#%3Cscript%3Ealert(1)%3C/script%3E|</span>"
	},
	{
		"desc": "Decoding of HTML entities in headings and links for IDs and link fragments (T103714)",
		"wikitext": "==A&B&amp;C&amp;amp;D&amp;amp;amp;E==\n[[#A&B&amp;C&amp;amp;D&amp;amp;amp;E]]",
		"html": "<h2><span id=\"A.26B.26C.26amp.3BD.26amp.3Bamp.3BE\"></span><span class=\"mw-headline\" id=\"A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E\">A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p><a href=\"#A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E\">#A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">A&amp;B&amp;amp;C&amp;amp;amp;D&amp;amp;amp;amp;E</span>==</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#A&amp;B&amp;amp;C&amp;amp;amp;D&amp;amp;amp;amp;E</span>]]</span></span>"
	},
	{
		"desc": "Decoding of HTML entities in headings and links for IDs and link fragments (T103714) (legacy)",
		"wikitext": "==A&B&amp;C&amp;amp;D&amp;amp;amp;E==\n[[#A&B&amp;C&amp;amp;D&amp;amp;amp;E]]",
		"html": "<h2><span class=\"mw-headline\" id=\"A.26B.26C.26amp.3BD.26amp.3Bamp.3BE\">A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p><a href=\"#A.26B.26C.26amp.3BD.26amp.3Bamp.3BE\">#A&amp;B&amp;C&amp;amp;D&amp;amp;amp;E</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">A&amp;B&amp;amp;C&amp;amp;amp;D&amp;amp;amp;amp;E</span>==</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#A&amp;B&amp;amp;C&amp;amp;amp;D&amp;amp;amp;amp;E</span>]]</span></span>"
	},
	{
		"desc": "Decoding of HTML entities in embedded HTML tags",
		"wikitext": "<table class=\"1&2&amp;3&amp;amp;4&amp;amp;amp;5\"><tr><td>x</td></tr></table>",
		"html": "<table class=\"1&amp;2&amp;3&amp;amp;4&amp;amp;amp;5\"><tbody><tr><td>x</td></tr></tbody></table>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;table<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">class</span>=\"<span class=\"wpb-attr-value\">1&amp;2&amp;amp;3&amp;amp;amp;4&amp;amp;amp;amp;5</span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;tr&gt;</span><span class=\"wpb-html\">&lt;td&gt;</span>x<span class=\"wpb-html\">&lt;/td&gt;</span><span class=\"wpb-html\">&lt;/tr&gt;</span><span class=\"wpb-html\">&lt;/table&gt;</span></span>"
	},
	{
		"desc": "HTML5 ids: fallback to legacy",
		"wikitext": "==Foo bar==\n\n==foo Bar==\n\n==–¢–µ—Å—Ç==\n\n==–¢–µ—Å—Ç==\n\n==—Ç–µ—Å—Ç==\n\n==Hey < # \" > % : '==\n[[#Foo bar]] [[#foo Bar]] [[#–¢–µ—Å—Ç]] [[#—Ç–µ—Å—Ç]] [[#Hey < # \" > % : ']]\n\n{{anchorencode:üí©}} <span id=\"{{anchorencode:üí©}}\"></span>\n\n<!-- These two links should produce identical HTML -->\n[[#Âï§ÈÖí]] [[#%E5%95%A4%E9%85%92]]\n",
		"html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2 id=\"mw-toc-heading\">Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Foo_bar\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Foo bar</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#foo_Bar_2\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">foo Bar</span></a></li>\n<li class=\"toclevel-1 tocsection-3\"><a href=\"#–¢–µ—Å—Ç\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">–¢–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-4\"><a href=\"#–¢–µ—Å—Ç_2\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">–¢–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-5\"><a href=\"#—Ç–µ—Å—Ç\"><span class=\"tocnumber\">5</span> <span class=\"toctext\">—Ç–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-6\"><a href=\"#Hey_&lt;_#_&quot;_&gt;_%_:_&#39;\"><span class=\"tocnumber\">6</span> <span class=\"toctext\">Hey &lt; # \" &gt;&#160;%&#160;: '</span></a></li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Foo_bar\">Foo bar</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: Foo bar\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"foo_Bar_2\">foo Bar</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=2\" title=\"Edit section: foo Bar\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\".D0.A2.D0.B5.D1.81.D1.82\"></span><span class=\"mw-headline\" id=\"–¢–µ—Å—Ç\">–¢–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=3\" title=\"Edit section: –¢–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\".D0.A2.D0.B5.D1.81.D1.82_2\"></span><span class=\"mw-headline\" id=\"–¢–µ—Å—Ç_2\">–¢–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=4\" title=\"Edit section: –¢–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\".D1.82.D0.B5.D1.81.D1.82\"></span><span class=\"mw-headline\" id=\"—Ç–µ—Å—Ç\">—Ç–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=5\" title=\"Edit section: —Ç–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\"Hey_.3C_.23_.22_.3E_.25_:_.27\"></span><span class=\"mw-headline\" id=\"Hey_&lt;_#_&quot;_&gt;_%_:_'\">Hey &lt; # \" &gt;&#160;%&#160;: '</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=6\" title=\"Edit section: Hey &lt; # &quot; &gt;¬†%¬†: &#039;\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p><a href=\"#Foo_bar\">#Foo bar</a> <a href=\"#foo_Bar\">#foo Bar</a> <a href=\"#–¢–µ—Å—Ç\">#–¢–µ—Å—Ç</a> <a href=\"#—Ç–µ—Å—Ç\">#—Ç–µ—Å—Ç</a> <a href=\"#Hey_&lt;_#_&quot;_&gt;_%_:_&#39;\">#Hey &lt; # \" &gt;&#160;%&#160;: '</a>\n</p><p>üí© <span id=\"üí©\"></span>\n</p><p><a href=\"#Âï§ÈÖí\">#Âï§ÈÖí</a> <a href=\"#Âï§ÈÖí\">#Âï§ÈÖí</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Foo bar</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">foo Bar</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">–¢–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">–¢–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">—Ç–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Hey &lt; # \" &gt; % : '</span>==</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Foo bar</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#foo Bar</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#–¢–µ—Å—Ç</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#—Ç–µ—Å—Ç</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Hey &lt; # \" &gt; % : '</span>]]</span>\n\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">üí©</span></span>}}</span> <span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">üí©</span></span>}}</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/span&gt;</span>\n\n<span class=\"wpb-comment\">&lt;!-- These two links should produce identical HTML --&gt;</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Âï§ÈÖí</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#%E5%95%A4%E9%85%92</span>]]</span>\n</span>"
	},
	{
		"desc": "HTML5 ids: legacy with a fallback to modern",
		"wikitext": "==Foo bar==\n\n==foo Bar==\n\n==–¢–µ—Å—Ç==\n\n==–¢–µ—Å—Ç==\n\n==—Ç–µ—Å—Ç==\n\n==Hey < # \" > % : '==\n[[#Foo bar]] [[#foo Bar]] [[#–¢–µ—Å—Ç]] [[#—Ç–µ—Å—Ç]] [[#Hey < # \" > % : ']]\n\n{{anchorencode:üí©}} <span id=\"{{anchorencode:üí©}}\"></span>\n\n<!-- These two links should produce identical HTML -->\n[[#Âï§ÈÖí]] [[#%E5%95%A4%E9%85%92]]\n",
		"html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2 id=\"mw-toc-heading\">Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Foo_bar\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Foo bar</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#foo_Bar_2\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">foo Bar</span></a></li>\n<li class=\"toclevel-1 tocsection-3\"><a href=\"#.D0.A2.D0.B5.D1.81.D1.82\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">–¢–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-4\"><a href=\"#.D0.A2.D0.B5.D1.81.D1.82_2\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">–¢–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-5\"><a href=\"#.D1.82.D0.B5.D1.81.D1.82\"><span class=\"tocnumber\">5</span> <span class=\"toctext\">—Ç–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-6\"><a href=\"#Hey_.3C_.23_.22_.3E_.25_:_.27\"><span class=\"tocnumber\">6</span> <span class=\"toctext\">Hey &lt; # \" &gt;&#160;%&#160;: '</span></a></li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Foo_bar\">Foo bar</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: Foo bar\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"foo_Bar_2\">foo Bar</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=2\" title=\"Edit section: foo Bar\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\"–¢–µ—Å—Ç\"></span><span class=\"mw-headline\" id=\".D0.A2.D0.B5.D1.81.D1.82\">–¢–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=3\" title=\"Edit section: –¢–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\"–¢–µ—Å—Ç_2\"></span><span class=\"mw-headline\" id=\".D0.A2.D0.B5.D1.81.D1.82_2\">–¢–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=4\" title=\"Edit section: –¢–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\"—Ç–µ—Å—Ç\"></span><span class=\"mw-headline\" id=\".D1.82.D0.B5.D1.81.D1.82\">—Ç–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=5\" title=\"Edit section: —Ç–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span id=\"Hey_&lt;_#_&quot;_&gt;_%_:_'\"></span><span class=\"mw-headline\" id=\"Hey_.3C_.23_.22_.3E_.25_:_.27\">Hey &lt; # \" &gt;&#160;%&#160;: '</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=6\" title=\"Edit section: Hey &lt; # &quot; &gt;¬†%¬†: &#039;\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p><a href=\"#Foo_bar\">#Foo bar</a> <a href=\"#foo_Bar\">#foo Bar</a> <a href=\"#.D0.A2.D0.B5.D1.81.D1.82\">#–¢–µ—Å—Ç</a> <a href=\"#.D1.82.D0.B5.D1.81.D1.82\">#—Ç–µ—Å—Ç</a> <a href=\"#Hey_.3C_.23_.22_.3E_.25_:_.27\">#Hey &lt; # \" &gt;&#160;%&#160;: '</a>\n</p><p>.F0.9F.92.A9 <span id=\".F0.9F.92.A9\"></span>\n</p><p><a href=\"#.E5.95.A4.E9.85.92\">#Âï§ÈÖí</a> <a href=\"#.E5.95.A4.E9.85.92\">#Âï§ÈÖí</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Foo bar</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">foo Bar</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">–¢–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">–¢–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">—Ç–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Hey &lt; # \" &gt; % : '</span>==</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Foo bar</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#foo Bar</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#–¢–µ—Å—Ç</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#—Ç–µ—Å—Ç</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Hey &lt; # \" &gt; % : '</span>]]</span>\n\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">üí©</span></span>}}</span> <span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">üí©</span></span>}}</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/span&gt;</span>\n\n<span class=\"wpb-comment\">&lt;!-- These two links should produce identical HTML --&gt;</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Âï§ÈÖí</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#%E5%95%A4%E9%85%92</span>]]</span>\n</span>"
	},
	{
		"desc": "HTML5 ids: no legacy",
		"wikitext": "==Foo bar==\n\n==foo Bar==\n\n==–¢–µ—Å—Ç==\n\n==–¢–µ—Å—Ç==\n\n==—Ç–µ—Å—Ç==\n\n==Hey < # \" > % : '==\n[[#Foo bar]] [[#foo Bar]] [[#–¢–µ—Å—Ç]] [[#—Ç–µ—Å—Ç]] [[#Hey < # \" > % : ']]\n\n{{anchorencode:üí©}} <span id=\"{{anchorencode:üí©}}\"></span>\n\n<!-- These two links should produce identical HTML -->\n[[#Âï§ÈÖí]] [[#%E5%95%A4%E9%85%92]]\n",
		"html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2 id=\"mw-toc-heading\">Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Foo_bar\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Foo bar</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#foo_Bar_2\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">foo Bar</span></a></li>\n<li class=\"toclevel-1 tocsection-3\"><a href=\"#–¢–µ—Å—Ç\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">–¢–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-4\"><a href=\"#–¢–µ—Å—Ç_2\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">–¢–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-5\"><a href=\"#—Ç–µ—Å—Ç\"><span class=\"tocnumber\">5</span> <span class=\"toctext\">—Ç–µ—Å—Ç</span></a></li>\n<li class=\"toclevel-1 tocsection-6\"><a href=\"#Hey_&lt;_#_&quot;_&gt;_%_:_&#39;\"><span class=\"tocnumber\">6</span> <span class=\"toctext\">Hey &lt; # \" &gt;&#160;%&#160;: '</span></a></li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Foo_bar\">Foo bar</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: Foo bar\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"foo_Bar_2\">foo Bar</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=2\" title=\"Edit section: foo Bar\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"–¢–µ—Å—Ç\">–¢–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=3\" title=\"Edit section: –¢–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"–¢–µ—Å—Ç_2\">–¢–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=4\" title=\"Edit section: –¢–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"—Ç–µ—Å—Ç\">—Ç–µ—Å—Ç</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=5\" title=\"Edit section: —Ç–µ—Å—Ç\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<h2><span class=\"mw-headline\" id=\"Hey_&lt;_#_&quot;_&gt;_%_:_'\">Hey &lt; # \" &gt;&#160;%&#160;: '</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=6\" title=\"Edit section: Hey &lt; # &quot; &gt;¬†%¬†: &#039;\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p><a href=\"#Foo_bar\">#Foo bar</a> <a href=\"#foo_Bar\">#foo Bar</a> <a href=\"#–¢–µ—Å—Ç\">#–¢–µ—Å—Ç</a> <a href=\"#—Ç–µ—Å—Ç\">#—Ç–µ—Å—Ç</a> <a href=\"#Hey_&lt;_#_&quot;_&gt;_%_:_&#39;\">#Hey &lt; # \" &gt;&#160;%&#160;: '</a>\n</p><p>üí© <span id=\"üí©\"></span>\n</p><p><a href=\"#Âï§ÈÖí\">#Âï§ÈÖí</a> <a href=\"#Âï§ÈÖí\">#Âï§ÈÖí</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Foo bar</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">foo Bar</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">–¢–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">–¢–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">—Ç–µ—Å—Ç</span>==</span>\n\n<span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Hey &lt; # \" &gt; % : '</span>==</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Foo bar</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#foo Bar</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#–¢–µ—Å—Ç</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#—Ç–µ—Å—Ç</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Hey &lt; # \" &gt; % : '</span>]]</span>\n\n<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">üí©</span></span>}}</span> <span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">üí©</span></span>}}</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/span&gt;</span>\n\n<span class=\"wpb-comment\">&lt;!-- These two links should produce identical HTML --&gt;</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Âï§ÈÖí</span>]]</span> <span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#%E5%95%A4%E9%85%92</span>]]</span>\n</span>"
	},
	{
		"desc": "T90902: Normalize weird characters in section IDs",
		"wikitext": "==Foo&nbsp;bar==\n[[#Foo&nbsp;bar]]\n",
		"html": "<h2><span class=\"mw-headline\" id=\"Foo_bar\">Foo&#160;bar</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/index.php?title=Parser_test&amp;action=edit&amp;section=1\" title=\"Edit section: Foo¬†bar\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p><a href=\"#Foo_bar\">#Foo&#160;bar</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-heading\">==<span class=\"wpb-heading-title\">Foo&amp;nbsp;bar</span>==</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#Foo&amp;nbsp;bar</span>]]</span>\n</span>"
	},
	{
		"desc": "T51672: Test for brackets in attributes of elements in external link texts",
		"wikitext": "[http://example.com/ link <span title=\"title with [brackets]\">span</span>]\n[http://example.com/ link <span title=\"title with &#91;brackets&#93;\">span</span>]\n",
		"html": "<p><a rel=\"nofollow\" class=\"external text\" href=\"http://example.com/\">link <span title=\"title with &#91;brackets&#93;\">span</span></a>\n<a rel=\"nofollow\" class=\"external text\" href=\"http://example.com/\">link <span title=\"title with &#91;brackets&#93;\">span</span></a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com/</span> <span class=\"wpb-ext-link-text\">link <span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">title with [brackets]</span>\"</span></span>&gt;</span>span<span class=\"wpb-html\">&lt;/span&gt;</span></span>]</span>\n<span class=\"wpb-ext-link\">[<span class=\"wpb-ext-link-url\">http://example.com/</span> <span class=\"wpb-ext-link-text\">link <span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">title with &amp;#91;brackets&amp;#93;</span>\"</span></span>&gt;</span>span<span class=\"wpb-html\">&lt;/span&gt;</span></span>]</span>\n</span>"
	},
	{
		"desc": "T72875: Test for brackets in attributes of elements in internal link texts",
		"wikitext": "[[Foo|link <span title=\"title with [[double brackets]]\">span</span>]]\n[[Foo|link <span title=\"title with &#91;&#91;double brackets&#93;&#93;\">span</span>]]\n",
		"html": "<p><a href=\"/wiki/Foo\" title=\"Foo\">link <span title=\"title with &#91;&#91;double brackets&#93;&#93;\">span</span></a>\n<a href=\"/wiki/Foo\" title=\"Foo\">link <span title=\"title with &#91;&#91;double brackets&#93;&#93;\">span</span></a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">link <span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">title with [[double brackets]]</span>\"</span></span>&gt;</span>span<span class=\"wpb-html\">&lt;/span&gt;</span></span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">Foo</span>|<span class=\"wpb-link-text\">link <span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">title</span>=\"<span class=\"wpb-attr-value\">title with &amp;#91;&amp;#91;double brackets&amp;#93;&amp;#93;</span>\"</span></span>&gt;</span>span<span class=\"wpb-html\">&lt;/span&gt;</span></span>]]</span>\n</span>"
	},
	{
		"desc": "T199926: Hash only interwiki link",
		"wikitext": "[[meatball:Test#1/2]]\n[[gerrit:#/q/project:mediawiki/services/parsoid|Gerrit]]",
		"html": "<p><a href=\"http://www.usemod.com/cgi-bin/mb.pl?Test#1.2F2\" class=\"extiw\" title=\"meatball:Test\">meatball:Test#1/2</a>\n<a href=\"https://gerrit.wikimedia.org/#/q/project:mediawiki/services/parsoid\" class=\"extiw\" title=\"gerrit:\">Gerrit</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">meatball:Test#1/2</span>]]</span>\n<span class=\"wpb-link\">[[<span class=\"wpb-link-target\">gerrit:#/q/project:mediawiki/services/parsoid</span>|<span class=\"wpb-link-text\">Gerrit</span>]]</span></span>"
	},
	{
		"desc": "T179544: {{anchorencode:}} output should be always usable in links",
		"wikitext": "<span id=\"{{anchorencode:[foo]}}\"></span>[[#{{anchorencode:[foo]}}]]",
		"html": "<p><span id=\"&#91;foo&#93;\"></span><a href=\"#[foo]\">#&#91;foo&#93;</a>\n</p>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;span<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">id</span>=\"<span class=\"wpb-attr-value\"><span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">[foo]</span></span>}}</span></span>\"</span></span>&gt;</span><span class=\"wpb-html\">&lt;/span&gt;</span><span class=\"wpb-link\">[[<span class=\"wpb-link-target\">#<span class=\"wpb-magic-word\">{{<span class=\"wpb-magic-word-name\">anchorencode</span>:<span class=\"wpb-parameter\"><span class=\"wpb-parameter-value\">[foo]</span></span>}}</span></span>]]</span></span>"
	},
	{
		"desc": "Allow tabindex 0",
		"wikitext": "<div tabindex=\"0\">A</div>",
		"html": "<div tabindex=\"0\">A</div>",
		"print": "<span class=\"wpb-root\"><span class=\"wpb-html\">&lt;div<span class=\"wpb-html-attrs\"><span class=\"wpb-attr-dirty\"> </span><span class=\"wpb-html-attr\"><span class=\"wpb-attr-key\">tabindex</span>=\"<span class=\"wpb-attr-value\">0</span>\"</span></span>&gt;</span>A<span class=\"wpb-html\">&lt;/div&gt;</span></span>"
	},
	{
		"desc": "aside tag is not allowed directly in wikitext (T278565)",
		"wikitext": "<aside>This aside tag in wikitext should be escaped</aside>",
		"html": "<p>&lt;aside&gt;This aside tag in wikitext should be escaped&lt;/aside&gt;\n</p>",
		"print": "<span class=\"wpb-root\">&lt;aside&gt;This aside tag in wikitext should be escaped&lt;/aside&gt;</span>"
	}
]